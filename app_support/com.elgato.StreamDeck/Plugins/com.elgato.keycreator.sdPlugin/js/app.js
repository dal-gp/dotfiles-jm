!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t,r){"use strict";function i(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function n(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(r){void 0===e[r]?e[r]=t[r]:i(t[r])&&i(e[r])&&Object.keys(t[r]).length>0&&n(e[r],t[r])}))}r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));var a="undefined"!=typeof document?document:{},s={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};n(a,s);var o="undefined"!=typeof window?window:{};n(o,{document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}}})},function(e,t,r){"use strict";(function(e){var i=r(0),n=r(3),a=function(){var t=i.b.navigator.platform,r=i.b.navigator.userAgent,a={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!i.b.cordova&&!i.b.phonegap),phonegap:!(!i.b.cordova&&!i.b.phonegap),electron:!1,nwjs:!1},s=i.b.screen.width,o=i.b.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/),c=r.match(/(iPad).*OS\s([\d_]+)/),h=r.match(/(iPod)(.*OS\s([\d_]+))?/),u=!c&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d=r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0,p=r.indexOf("Edge/")>=0,f=r.indexOf("Gecko/")>=0&&r.indexOf("Firefox/")>=0,g="Win32"===t,v=r.toLowerCase().indexOf("electron")>=0,m="undefined"!=typeof nw&&void 0!==e&&void 0!==e.versions&&void 0!==e.versions.nw,b="MacIntel"===t;!c&&b&&n.a.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf("".concat(s,"x").concat(o))>=0&&((c=r.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),b=!1),a.ie=d,a.edge=p,a.firefox=f,l&&!g&&(a.os="android",a.osVersion=l[2],a.android=!0,a.androidChrome=r.toLowerCase().indexOf("chrome")>=0),(c||u||h)&&(a.os="ios",a.ios=!0),u&&!h&&(a.osVersion=u[2].replace(/_/g,"."),a.iphone=!0),c&&(a.osVersion=c[2].replace(/_/g,"."),a.ipad=!0),h&&(a.osVersion=h[3]?h[3].replace(/_/g,"."):null,a.ipod=!0),a.ios&&a.osVersion&&r.indexOf("Version/")>=0&&"10"===a.osVersion.split(".")[0]&&(a.osVersion=r.toLowerCase().split("version/")[1].split(" ")[0]),a.webView=!(!(u||c||h)||!r.match(/.*AppleWebKit(?!.*Safari)/i)&&!i.b.navigator.standalone)||i.b.matchMedia&&i.b.matchMedia("(display-mode: standalone)").matches,a.webview=a.webView,a.standalone=a.webView,a.desktop=!(a.ios||a.android)||v||m,a.desktop&&(a.electron=v,a.nwjs=m,a.macos=b,a.windows=g,a.macos&&(a.os="macos"),a.windows&&(a.os="windows")),a.pixelRatio=i.b.devicePixelRatio||1;return a.prefersColorScheme=function(){var e;return i.b.matchMedia&&i.b.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),i.b.matchMedia&&i.b.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},a}();t.a=a}).call(this,r(9))},function(e,t){var r={debug:!0,dbg:this.debug?console.log.bind(window.console,"[utils.js] "):()=>{},minmax:(e,t=0,r=100)=>Math.min(r,Math.max(t,e)),isSVG(e){var t=e.match(/(<svg)([^]*|[^>]*)/gim);return t&&t.length},parseJson(e){if("object"==typeof e)return e;try{var t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(e){}return!1},readJsonSync(e,t){this.readJson(e,t,!0)},readJson(e,t,r=!1){var i=new XMLHttpRequest;i.onerror=t=>{this.dbg("readJson:: Error while trying to read  ".concat(e),t)},i.overrideMimeType("application/json"),i.open("GET",e,!r),i.onreadystatechange=function(){4===i.readyState&&t&&t(i.responseText)},i.send(null)},imageExist(e,t){var r=new Image;r.src=event.target.result,r.onload=()=>{t&&t(r)}},logNames(e){if("object"==typeof e){var t=Object.values(e).map(e=>e.name);return this.dbg(t),t}var r=e.map(e=>e.name);return this.dbg(r),r},fetchHead:()=>fetch(targetElement.dataset.src,{method:"HEAD"}).then(e=>e.ok).catch(e=>console.log("Error:",e)),fetchXhr:(e,t="arraybuffer")=>new Promise((function(r,i){var n=new XMLHttpRequest;n.withCredentials=!0,n.responseType=t,n.onload=()=>{r({ok:!0,[t]:()=>Promise.resolve(n.response)})},["abort","error"].forEach(e=>{n.addEventListener(e,e=>{i(e)})}),n.open("GET",e),n.send()})),fetchFile:e=>new Promise((function(t,r){var i=new FileReader;i.onloadend=e=>{this.dbg("FileReader:onloadEND",i),t(e.target.result)},i.readAsDataURL(e)})),fileExistsP(...e){var t=e[0];return new Promise((function(e,r){var i=new XMLHttpRequest;i.addEventListener("load",()=>{e(i)}),["abort","error"].forEach(e=>{i.addEventListener(e,e=>{r(e)})}),i.open("HEAD",decodeURIComponent(t),!0),i.send()}))},fileExists(e,t=!1){var r=new XMLHttpRequest;return r.open("HEAD",decodeURIComponent(e),t),r.onerror=t=>{this.dbg("fileExists:: Error while trying to read  ".concat(e),t)},r.send(),"404"!==r.status},readFile(e,t={}){var i=this.dbg;if(this.dbg("•••••••••••• newReadFile 1",e),!t||!t.hasOwnProperty("responseType"))switch(e.split(".").pop()){case"json":t.responseType="json",t.overrideMimeType="application/json"}return new Promise((function(n,a){var s=Object.assign(new XMLHttpRequest,t||{});s.open("GET",e,!0),s.onload=(e,t)=>{var a="blob"==s.responseType||s.response instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(s.response));if(i("utils.readFile",s,"isBlob",a,this),a){var o=new FileReader;o.onloadend=e=>{n(e.target.result)},o.readAsDataURL(s.response)}else if("json"===s.responseType){var l=r.parseJson(s.response);l?n(l):(i("[Error]::ReadFile.reply was not JSON",s),n({}))}else"arraybuffer"===s.responseType?n(s.response):n(s.responseText)},s.send()}))},createCanvas(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},createBase64(e,t){for(var{width:r,height:i,asJPG:n=!1,quality:a=DEFAULT_QUALITY}=t,s=utils.createCanvas("canvas"),o=s.getContext("2d"),l=o.getImageData(0,0,r,i),c=0;c<4*l.data.length;c++)l.data[c]=e[c];return o.putImageData(l,0,0),n?s.toDataURL("image/jpeg"):s.toDataURL("image/png")},setProp(e,t,r){for(var i=t.split("."),n=e,a=3===arguments.length&&i.pop(),s=0;s<i.length;s++)n=n[i[s]]=n[i[s]]||{};return a&&(n=n[a]=r),n},rectInBounds(e,t,r){var i=t.width/e.width,n=t.height/e.height;return"fit"==r?Math.min(n,i):"width"==r?i:"height"==r||i>n?n:i},generateUUID(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-1xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))},uuidv4(){for(var e=Array.from(Array(16),(e,t)=>t.toString(16)),t="",r=1;r<=36;r++)t+=9===r||14===r||19===r||24===r?"-":15===r?4:20===r?e[4*Math.random()|8]:e[16*Math.random()|0];return t},randomString:(e=8)=>[...Array(e)].map(e=>(~~(36*Math.random())).toString(36)).join(""),capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),getBrightness(e,t){var r=t.getContext("2d"),i=0;if(r){for(var n=r.getImageData(e.left,e.top,e.width,e.height).data,a=0,s=0,o=0,l=0,c=0,h=n.length;c<h;c+=4)s=n[c],o=n[c+1],l=n[c+2],a+=Math.floor((s+o+l)/3);i=Math.floor(a/(e.width*e.height))}return i},fixColor(e){var[t,r,i,n]=[0,0,0,1],a=e;for(/([0-9]+%?)[^0-9A-F]+([0-9]+%?)[^0-9A-F]+([0-9]+%?)(?:[^\d.]+([\d.]+))?/i.exec(a)?(t=RegExp.$1,r=RegExp.$2,i=RegExp.$3,RegExp.$4&&RegExp.$4.length>0&&(n=1*RegExp.$4),t.indexOf("%")>=0&&(t=Math.round(2.55*parseInt(t))),r.indexOf("%")>=0&&(r=Math.round(2.55*parseInt(r))),i.indexOf("%")>=0&&(i=Math.round(2.55*parseInt(i)))):/([0-9A-F][0-9A-F])([0-9A-F][0-9A-F])([0-9A-F]?[0-9A-F]?)/i.exec(a)?(t=parseInt((RegExp.$1+"00").substr(0,2),16),r=parseInt((RegExp.$2+"00").substr(0,2),16),i=parseInt((RegExp.$3+"00").substr(0,2),16)):/([0-9A-F])([0-9A-F]?)([0-9A-F]?)/i.exec(a)&&(t=parseInt("0"+RegExp.$1+RegExp.$1,16),r=parseInt("0"+RegExp.$2+RegExp.$2,16),i=parseInt("0"+RegExp.$3+RegExp.$3,16)),t=Math.min(Math.max(0,t),255),r=Math.min(Math.max(0,r),255),i=Math.min(Math.max(0,i),255);n>1;)n/=100;return(a="#"+(t<16?"0":"")+t.toString(16)+(r<16?"0":"")+r.toString(16)+(i<16?"0":"")+i.toString(16)).toUpperCase()},fadeColor(e,t){var r=Math.min,i=Math.max,n=parseInt(e.replace(/#/g,""),16),a=r(255,i((n>>16)+t,0));return"#"+(r(255,i((255&n)+t,0))|r(255,i((n>>8&255)+t,0))<<8|a<<16).toString(16).padStart(6,0)},throttle(e,t=250,r){var i,n;return function(){var a=r||this,s=(new Date).getTime(),o=arguments;i&&s<i+t?(clearTimeout(n),n=setTimeout((function(){i=s,e.apply(a,o)}),t)):(i=s,e.apply(a,o))}},debounce(e,t,r){var i=null;return function(){clearTimeout(i);var n=arguments,a=r||this;i=setTimeout((function(){e.apply(a,n)}),t)}},isMobile:()=>void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),truncString(e,t,r,i="…"){if(null===e)return"";var n=e.length;return r=~~r,0===(t=~~t)&&0===r||t>=n||r>=n||t+r>=n?e:0===r?e.slice(0,t)+i:e.slice(0,t)+i+e.slice(n-r)},toUnixPath:e=>e.replace(/[\\/]+/g,"/").replace(/^([a-zA-Z]+:|\.\/)/,""),copyToClipboard2(e){try{navigator.clipboard.writeText(e).then(e=>this.dbg("copied"))}catch(e){console.error("Failed to copy: ",e)}},copyToClipboard(e){var t=document.createElement("input");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.value=e,document.body.appendChild(t),t.focus(),t.select();var r=document.execCommand("copy");return document.body.removeChild(t),r||console.error("Could not copy text..."),r}};e.exports=r},function(e,t,r){"use strict";var i=r(0),n={touch:!!("ontouchstart"in i.b||i.b.DocumentTouch&&i.a instanceof i.b.DocumentTouch),pointerEvents:!!i.b.PointerEvent&&"maxTouchPoints"in i.b.navigator&&i.b.navigator.maxTouchPoints>=0,observer:"MutationObserver"in i.b||"WebkitMutationObserver"in i.b,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get(){e=!0}});i.b.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in i.b,intersectionObserver:"IntersectionObserver"in i.b};t.a=n},function(e,t,r){(function(e){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var i,n,a,s,o,l,c,h,u,d,p,f,g,v,m,b,y,w,C,_,x,S=S||{version:"3.6.6"};if(t.fabric=S,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?S.document=document:S.document=document.implementation.createHTMLDocument(""),S.window=window;else{var k=new(r(26).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;S.document=k.document,S.jsdomImplForWrapper=r(27).implForWrapper,S.nodeCanvas=r(28).Canvas,S.window=k,DOMParser=S.window.DOMParser}function T(e,t){var r=e.canvas,i=t.targetCanvas,n=i.getContext("2d");n.translate(0,i.height),n.scale(1,-1);var a=r.height-i.height;n.drawImage(r,0,a,i.width,i.height,0,0,i.width,i.height)}function O(e,t){var r=t.targetCanvas.getContext("2d"),i=t.destinationWidth,n=t.destinationHeight,a=i*n*4,s=new Uint8Array(this.imageBuffer,0,a),o=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,i,n,e.RGBA,e.UNSIGNED_BYTE,s);var l=new ImageData(o,i,n);r.putImageData(l,0,0)}S.isTouchSupported="ontouchstart"in S.window||"ontouchstart"in S.document||S.window&&S.window.navigator&&S.window.navigator.maxTouchPoints>0,S.isLikelyNode=void 0!==e&&"undefined"==typeof window,S.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],S.DPI=96,S.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",S.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,S.reNonWord=/[ \n\.,;!\?\-]/,S.fontPaths={},S.iMatrix=[1,0,0,1,0,0],S.svgNS="http://www.w3.org/2000/svg",S.perfLimitSizeTotal=2097152,S.maxCacheSideLimit=4096,S.minCacheSideLimit=256,S.charWidthsCache={},S.textureSize=2048,S.disableStyleCopyPaste=!1,S.enableGLFiltering=!0,S.devicePixelRatio=S.window.devicePixelRatio||S.window.webkitDevicePixelRatio||S.window.mozDevicePixelRatio||1,S.browserShadowBlurConstant=1,S.arcToSegmentsCache={},S.boundsOfCurveCache={},S.cachesBoundsOfCurve=!0,S.forceGLPutImageData=!1,S.initFilterBackend=function(){return S.enableGLFiltering&&S.isWebglSupported&&S.isWebglSupported(S.textureSize)?(console.log("max texture size: "+S.maxTextureSize),new S.WebglFilterBackend({tileSize:S.textureSize})):S.Canvas2dFilterBackend?new S.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=S),function(){function e(e,t){if(this.__eventListeners[e]){var r=this.__eventListeners[e];t?r[r.indexOf(t)]=!1:S.util.array.fill(r,!1)}}function t(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var r in e)this.on(r,e[r]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this}function r(t,r){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in t)e.call(this,i,t[i]);else e.call(this,t,r);return this}function i(e,t){if(!this.__eventListeners)return this;var r=this.__eventListeners[e];if(!r)return this;for(var i=0,n=r.length;i<n;i++)r[i]&&r[i].call(this,t||{});return this.__eventListeners[e]=r.filter((function(e){return!1!==e})),this}S.Observable={observe:t,stopObserving:r,fire:i,on:t,off:r,trigger:i}}(),S.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,r){var i=this._objects;return r?i[t]=e:i.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,r=!1,i=0,n=arguments.length;i<n;i++)-1!==(e=t.indexOf(arguments[i]))&&(r=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&r&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var r=this.getObjects(),i=0,n=r.length;i<n;i++)e.call(t,r[i],i,r);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e){return this._objects.indexOf(e)>-1},complexity:function(){return this._objects.reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}},S.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof S.Gradient||this.set(t,new S.Gradient(e))},_initPattern:function(e,t,r){!e||!e.source||e instanceof S.Pattern?r&&r():this.set(t,new S.Pattern(e,r))},_initClipping:function(e){if(e.clipTo&&"string"==typeof e.clipTo){var t=S.util.getFunctionBody(e.clipTo);void 0!==t&&(this.clipTo=new Function("ctx",t))}},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"==typeof e?this._setObject(e):"function"==typeof t&&"clipTo"!==e?this._set(e,t(this.get(e))):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},i=t,n=Math.sqrt,a=Math.atan2,s=Math.pow,o=Math.PI/180,l=Math.PI/2,S.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/l){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/l){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var r=e.indexOf(t);return-1!==r&&e.splice(r,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*o},radiansToDegrees:function(e){return e/o},rotatePoint:function(e,t,r){e.subtractEquals(t);var i=S.util.rotateVector(e,r);return new S.Point(i.x,i.y).addEquals(t)},rotateVector:function(e,t){var r=S.util.sin(t),i=S.util.cos(t);return{x:e.x*i-e.y*r,y:e.x*r+e.y*i}},transformPoint:function(e,t,r){return r?new S.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new S.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var r=0;r<e.length;r++)e[r]=S.util.transformPoint(e[r],t);var i=[e[0].x,e[1].x,e[2].x,e[3].x],n=S.util.array.min(i),a=S.util.array.max(i)-n,s=[e[0].y,e[1].y,e[2].y,e[3].y],o=S.util.array.min(s);return{left:n,top:o,width:a,height:S.util.array.max(s)-o}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),r=[t*e[3],-t*e[1],-t*e[2],t*e[0]],i=S.util.transformPoint({x:e[4],y:e[5]},r,!0);return r[4]=-i.x,r[5]=-i.y,r},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var r=/\D{0,2}$/.exec(e),i=parseFloat(e);switch(t||(t=S.Text.DEFAULT_SVG_FONT_SIZE),r[0]){case"mm":return i*S.DPI/25.4;case"cm":return i*S.DPI/2.54;case"in":return i*S.DPI;case"pt":return i*S.DPI/72;case"pc":return i*S.DPI/72*12;case"em":return i*t;default:return i}},falseFunction:function(){return!1},getKlass:function(e,t){return e=S.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),S.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(e){if(!e)return S;var t,r=e.split("."),n=r.length,a=i||S.window;for(t=0;t<n;++t)a=a[r[t]];return a},loadImage:function(e,t,r,i){if(e){var n=S.util.createImage(),a=function(){t&&t.call(r,n),n=n.onload=n.onerror=null};n.onload=a,n.onerror=function(){S.log("Error loading "+n.src),t&&t.call(r,null,!0),n=n.onload=n.onerror=null},0!==e.indexOf("data")&&i&&(n.crossOrigin=i),"data:image/svg"===e.substring(0,14)&&(n.onload=null,S.util.loadImageInDom(n,a)),n.src=e}else t&&t.call(r,e)},loadImageInDom:function(e,t){var r=S.document.createElement("div");r.style.width=r.style.height="1px",r.style.left=r.style.top="-100%",r.style.position="absolute",r.appendChild(e),S.document.querySelector("body").appendChild(r),e.onload=function(){t(),r.parentNode.removeChild(r),r=null}},enlivenObjects:function(e,t,r,i){var n=[],a=0,s=(e=e||[]).length;function o(){++a===s&&t&&t(n.filter((function(e){return e})))}s?e.forEach((function(e,t){e&&e.type?S.util.getKlass(e.type,r).fromObject(e,(function(r,a){a||(n[t]=r),i&&i(e,r,a),o()})):o()})):t&&t(n)},enlivenPatterns:function(e,t){function r(){++n===a&&t&&t(i)}var i=[],n=0,a=(e=e||[]).length;a?e.forEach((function(e,t){e&&e.source?new S.Pattern(e,(function(e){i[t]=e,r()})):(i[t]=e,r())})):t&&t(i)},groupSVGElements:function(e,t,r){var i;return e&&1===e.length?e[0]:(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),i=new S.Group(e,t),void 0!==r&&(i.sourcePath=r),i)},populateWithProperties:function(e,t,r){if(r&&"[object Array]"===Object.prototype.toString.call(r))for(var i=0,n=r.length;i<n;i++)r[i]in e&&(t[r[i]]=e[r[i]])},drawDashedLine:function(e,t,r,i,s,o){var l=i-t,c=s-r,h=n(l*l+c*c),u=a(c,l),d=o.length,p=0,f=!0;for(e.save(),e.translate(t,r),e.moveTo(0,0),e.rotate(u),t=0;h>t;)(t+=o[p++%d])>h&&(t=h),e[f?"lineTo":"moveTo"](t,0),f=!f;e.restore()},createCanvasElement:function(){return S.document.createElement("canvas")},copyCanvasElement:function(e){var t=S.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,r){return e.toDataURL("image/"+t,r)},createImage:function(){return S.document.createElement("img")},clipContext:function(e,t){t.save(),t.beginPath(),e.clipTo(t),t.clip()},multiplyTransformMatrices:function(e,t,r){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],r?0:e[0]*t[4]+e[2]*t[5]+e[4],r?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=a(e[1],e[0]),r=s(e[0],2)+s(e[1],2),i=n(r),l=(e[0]*e[3]-e[2]*e[1])/i,c=a(e[0]*e[2]+e[1]*e[3],r);return{angle:t/o,scaleX:i,scaleY:l,skewX:c/o,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return S.iMatrix.concat();var t=S.util.degreesToRadians(e.angle),r=S.util.cos(t),i=S.util.sin(t);return[r,i,-i,r,0,0]},calcDimensionsMatrix:function(e){var t=void 0===e.scaleX?1:e.scaleX,r=void 0===e.scaleY?1:e.scaleY,i=[e.flipX?-t:t,0,0,e.flipY?-r:r,0,0],n=S.util.multiplyTransformMatrices,a=S.util.degreesToRadians;return e.skewX&&(i=n(i,[1,0,Math.tan(a(e.skewX)),1],!0)),e.skewY&&(i=n(i,[1,Math.tan(a(e.skewY)),0,1],!0)),i},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],r=S.util.multiplyTransformMatrices;return e.angle&&(t=r(t,S.util.calcRotateMatrix(e))),(e.scaleX||e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=r(t,S.util.calcDimensionsMatrix(e))),t},customTransformMatrix:function(e,t,r){return S.util.composeMatrix({scaleX:e,scaleY:t,skewX:r})},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},getFunctionBody:function(e){return(String(e).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(e,t,r,i){i>0&&(t>i?t-=i:t=0,r>i?r-=i:r=0);var n,a=!0,s=e.getImageData(t,r,2*i||1,2*i||1),o=s.data.length;for(n=3;n<o&&!1!=(a=s.data[n]<=0);n+=4);return s=null,a},parsePreserveAspectRatioAttribute:function(e){var t,r="meet",i=e.split(" ");return i&&i.length&&("meet"!==(r=i.pop())&&"slice"!==r?(t=r,r="meet"):i.length&&(t=i.pop())),{meetOrSlice:r,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?S.charWidthsCache[e]&&delete S.charWidthsCache[e]:S.charWidthsCache={}},limitDimsByArea:function(e,t){var r=Math.sqrt(t*e),i=Math.floor(t/r);return{x:Math.floor(r),y:i}},capValue:function(e,t,r){return Math.max(e,Math.min(t,r))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return S.util.toFixed(e,S.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"}},function(){var e=Array.prototype.join;function t(t,n,a,s,o,l,c){var h=e.call(arguments);if(S.arcToSegmentsCache[h])return S.arcToSegmentsCache[h];var u=Math.PI,d=c*u/180,p=S.util.sin(d),f=S.util.cos(d),g=0,v=0,m=-f*t*.5-p*n*.5,b=-f*n*.5+p*t*.5,y=(a=Math.abs(a))*a,w=(s=Math.abs(s))*s,C=b*b,_=m*m,x=y*w-y*C-w*_,k=0;if(x<0){var T=Math.sqrt(1-x/(y*w));a*=T,s*=T}else k=(o===l?-1:1)*Math.sqrt(x/(y*C+w*_));var O=k*a*b/s,E=-k*s*m/a,P=f*O-p*E+.5*t,A=p*O+f*E+.5*n,D=i(1,0,(m-O)/a,(b-E)/s),I=i((m-O)/a,(b-E)/s,(-m-O)/a,(-b-E)/s);0===l&&I>0?I-=2*u:1===l&&I<0&&(I+=2*u);for(var L=Math.ceil(Math.abs(I/u*2)),B=[],R=I/L,M=8/3*Math.sin(R/4)*Math.sin(R/4)/Math.sin(R/2),j=D+R,F=0;F<L;F++)B[F]=r(D,j,f,p,a,s,P,A,M,g,v),g=B[F][4],v=B[F][5],D=j,j+=R;return S.arcToSegmentsCache[h]=B,B}function r(e,t,r,i,n,a,s,o,l,c,h){var u=S.util.cos(e),d=S.util.sin(e),p=S.util.cos(t),f=S.util.sin(t),g=r*n*p-i*a*f+s,v=i*n*p+r*a*f+o;return[c+l*(-r*n*d-i*a*u),h+l*(-i*n*d+r*a*u),g+l*(r*n*f+i*a*p),v+l*(i*n*f-r*a*p),g,v]}function i(e,t,r,i){var n=Math.atan2(t,e),a=Math.atan2(i,r);return a>=n?a-n:2*Math.PI-(n-a)}function n(t,r,i,n,a,s,o,l){var c;if(S.cachesBoundsOfCurve&&(c=e.call(arguments),S.boundsOfCurveCache[c]))return S.boundsOfCurveCache[c];var h,u,d,p,f,g,v,m,b=Math.sqrt,y=Math.min,w=Math.max,C=Math.abs,_=[],x=[[],[]];u=6*t-12*i+6*a,h=-3*t+9*i-9*a+3*o,d=3*i-3*t;for(var k=0;k<2;++k)if(k>0&&(u=6*r-12*n+6*s,h=-3*r+9*n-9*s+3*l,d=3*n-3*r),C(h)<1e-12){if(C(u)<1e-12)continue;0<(p=-d/u)&&p<1&&_.push(p)}else(v=u*u-4*d*h)<0||(0<(f=(-u+(m=b(v)))/(2*h))&&f<1&&_.push(f),0<(g=(-u-m)/(2*h))&&g<1&&_.push(g));for(var T,O,E,P=_.length,A=P;P--;)T=(E=1-(p=_[P]))*E*E*t+3*E*E*p*i+3*E*p*p*a+p*p*p*o,x[0][P]=T,O=E*E*E*r+3*E*E*p*n+3*E*p*p*s+p*p*p*l,x[1][P]=O;x[0][A]=t,x[1][A]=r,x[0][A+1]=o,x[1][A+1]=l;var D=[{x:y.apply(null,x[0]),y:y.apply(null,x[1])},{x:w.apply(null,x[0]),y:w.apply(null,x[1])}];return S.cachesBoundsOfCurve&&(S.boundsOfCurveCache[c]=D),D}S.util.drawArc=function(e,r,i,n){for(var a=n[0],s=n[1],o=n[2],l=n[3],c=n[4],h=[[],[],[],[]],u=t(n[5]-r,n[6]-i,a,s,l,c,o),d=0,p=u.length;d<p;d++)h[d][0]=u[d][0]+r,h[d][1]=u[d][1]+i,h[d][2]=u[d][2]+r,h[d][3]=u[d][3]+i,h[d][4]=u[d][4]+r,h[d][5]=u[d][5]+i,e.bezierCurveTo.apply(e,h[d])},S.util.getBoundsOfArc=function(e,r,i,a,s,o,l,c,h){for(var u,d=0,p=0,f=[],g=t(c-e,h-r,i,a,o,l,s),v=0,m=g.length;v<m;v++)u=n(d,p,g[v][0],g[v][1],g[v][2],g[v][3],g[v][4],g[v][5]),f.push({x:u[0].x+e,y:u[0].y+r}),f.push({x:u[1].x+e,y:u[1].y+r}),d=g[v][4],p=g[v][5];return f},S.util.getBoundsOfCurve=n}(),function(){var e=Array.prototype.slice;function t(e,t,r){if(e&&0!==e.length){var i=e.length-1,n=t?e[i][t]:e[i];if(t)for(;i--;)r(e[i][t],n)&&(n=e[i][t]);else for(;i--;)r(e[i],n)&&(n=e[i]);return n}}S.util.array={fill:function(e,t){for(var r=e.length;r--;)e[r]=t;return e},invoke:function(t,r){for(var i=e.call(arguments,2),n=[],a=0,s=t.length;a<s;a++)n[a]=i.length?t[a][r].apply(t[a],i):t[a][r].call(t[a]);return n},min:function(e,r){return t(e,r,(function(e,t){return e<t}))},max:function(e,r){return t(e,r,(function(e,t){return e>=t}))}}}(),function(){function e(t,r,i){if(i)if(!S.isLikelyNode&&r instanceof Element)t=r;else if(r instanceof Array){t=[];for(var n=0,a=r.length;n<a;n++)t[n]=e({},r[n],i)}else if(r&&"object"==typeof r)for(var s in r)"canvas"===s?t[s]=e({},r[s]):r.hasOwnProperty(s)&&(t[s]=e({},r[s],i));else t=r;else for(var s in r)t[s]=r[s];return t}S.util.object={extend:e,clone:function(t,r){return e({},t,r)}},S.util.object.extend(S.util,S.Observable)}(),function(){function e(e,t){var r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var i=e.charCodeAt(t+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var n=e.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1}S.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var r,i=0,n=[];for(i=0;i<t.length;i++)!1!==(r=e(t,i))&&n.push(r);return n}}}(),function(){var e=Array.prototype.slice,t=function(){},r=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),i=function(e,t,i){for(var n in t)n in e.prototype&&"function"==typeof e.prototype[n]&&(t[n]+"").indexOf("callSuper")>-1?e.prototype[n]=function(e){return function(){var r=this.constructor.superclass;this.constructor.superclass=i;var n=t[e].apply(this,arguments);if(this.constructor.superclass=r,"initialize"!==e)return n}}(n):e.prototype[n]=t[n],r&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function n(){}function a(t){for(var r=null,i=this;i.constructor.superclass;){var n=i.constructor.superclass.prototype[t];if(i[t]!==n){r=n;break}i=i.constructor.superclass.prototype}return r?arguments.length>1?r.apply(this,e.call(arguments,1)):r.call(this):console.log("tried to callSuper "+t+", method not found in prototype chain",this)}S.util.createClass=function(){var r=null,s=e.call(arguments,0);function o(){this.initialize.apply(this,arguments)}"function"==typeof s[0]&&(r=s.shift()),o.superclass=r,o.subclasses=[],r&&(n.prototype=r.prototype,o.prototype=new n,r.subclasses.push(o));for(var l=0,c=s.length;l<c;l++)i(o,s[l],r);return o.prototype.initialize||(o.prototype.initialize=t),o.prototype.constructor=o,o.prototype.callSuper=a,o}}(),c=!!S.document.createElement("div").attachEvent,S.util.addListener=function(e,t,r,i){e&&e.addEventListener(t,r,!c&&i)},S.util.removeListener=function(e,t,r,i){e&&e.removeEventListener(t,r,!c&&i)},S.util.getPointer=function(e){var t=e.target,r=S.util.getScrollLeftTop(t),i=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:i.clientX+r.left,y:i.clientY+r.top}},h=S.document.createElement("div"),u="string"==typeof h.style.opacity,d="string"==typeof h.style.filter,p=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(e){return e},u?f=function(e,t){return e.style.opacity=t,e}:d&&(f=function(e,t){var r=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(r.zoom=1),p.test(r.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",r.filter=r.filter.replace(p,t)):r.filter+=" alpha(opacity="+100*t+")",e}),S.util.setStyle=function(e,t){var r=e.style;if(!r)return e;if("string"==typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?f(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var i in t)"opacity"===i?f(e,t[i]):r["float"===i||"cssFloat"===i?void 0===r.styleFloat?"cssFloat":"styleFloat":i]=t[i];return e},function(){var e=Array.prototype.slice;var t,r,i,n,a=function(t){return e.call(t,0)};try{t=a(S.document.childNodes)instanceof Array}catch(e){}function s(e,t){var r=S.document.createElement(e);for(var i in t)"class"===i?r.className=t[i]:"for"===i?r.htmlFor=t[i]:r.setAttribute(i,t[i]);return r}function o(e){for(var t=0,r=0,i=S.document.documentElement,n=S.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===S.document?(t=n.scrollLeft||i.scrollLeft||0,r=n.scrollTop||i.scrollTop||0):(t+=e.scrollLeft||0,r+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:r}}t||(a=function(e){for(var t=new Array(e.length),r=e.length;r--;)t[r]=e[r];return t}),r=S.document.defaultView&&S.document.defaultView.getComputedStyle?function(e,t){var r=S.document.defaultView.getComputedStyle(e,null);return r?r[t]:void 0}:function(e,t){var r=e.style[t];return!r&&e.currentStyle&&(r=e.currentStyle[t]),r},i=S.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",S.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=S.util.falseFunction),n?e.style[n]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},S.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),n?e.style[n]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},S.util.getScript=function(e,t){var r=S.document.getElementsByTagName("head")[0],i=S.document.createElement("script"),n=!0;i.onload=i.onreadystatechange=function(e){if(n){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;n=!1,t(e||S.window.event),i=i.onload=i.onreadystatechange=null}},i.src=e,r.appendChild(i)},S.util.getById=function(e){return"string"==typeof e?S.document.getElementById(e):e},S.util.toArray=a,S.util.makeElement=s,S.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},S.util.wrapElement=function(e,t,r){return"string"==typeof t&&(t=s(t,r)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},S.util.getScrollLeftTop=o,S.util.getElementOffset=function(e){var t,i,n=e&&e.ownerDocument,a={left:0,top:0},s={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return s;for(var c in l)s[l[c]]+=parseInt(r(e,c),10)||0;return t=n.documentElement,void 0!==e.getBoundingClientRect&&(a=e.getBoundingClientRect()),i=o(e),{left:a.left+i.left-(t.clientLeft||0)+s.left,top:a.top+i.top-(t.clientTop||0)+s.top}},S.util.getElementStyle=r,S.util.getNodeCanvas=function(e){var t=S.jsdomImplForWrapper(e);return t._canvas||t._image},S.util.cleanUpJsdomNode=function(e){if(S.isLikelyNode){var t=S.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}S.util.request=function(t,r){r||(r={});var i=r.method?r.method.toUpperCase():"GET",n=r.onComplete||function(){},a=new S.window.XMLHttpRequest,s=r.body||r.parameters;return a.onreadystatechange=function(){4===a.readyState&&(n(a),a.onreadystatechange=e)},"GET"===i&&(s=null,"string"==typeof r.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,r.parameters))),a.open(i,t,!0),"POST"!==i&&"PUT"!==i||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(s),a}}(),S.log=console.log,S.warn=console.warn,function(){function e(){return!1}function t(e,t,r,i){return-r*Math.cos(e/i*(Math.PI/2))+r+t}var r=S.window.requestAnimationFrame||S.window.webkitRequestAnimationFrame||S.window.mozRequestAnimationFrame||S.window.oRequestAnimationFrame||S.window.msRequestAnimationFrame||function(e){return S.window.setTimeout(e,1e3/60)},i=S.window.cancelAnimationFrame||S.window.clearTimeout;function n(){return r.apply(S.window,arguments)}S.util.animate=function(r){n((function(i){r||(r={});var a,s=i||+new Date,o=r.duration||500,l=s+o,c=r.onChange||e,h=r.abort||e,u=r.onComplete||e,d=r.easing||t,p="startValue"in r?r.startValue:0,f="endValue"in r?r.endValue:100,g=r.byValue||f-p;r.onStart&&r.onStart(),function e(t){var r=(a=t||+new Date)>l?o:a-s,i=r/o,v=d(r,p,g,o),m=Math.abs((v-p)/g);if(!h())return a>l?(c(f,1,1),void u(f,1,1)):(c(v,m,i),void n(e));u(f,1,1)}(s)}))},S.util.requestAnimFrame=n,S.util.cancelAnimFrame=function(){return i.apply(S.window,arguments)}}(),S.util.animateColor=function(e,t,r,i){var n=new S.Color(e).getSource(),a=new S.Color(t).getSource();i=i||{},S.util.animate(S.util.object.extend(i,{duration:r||500,startValue:n,endValue:a,byValue:a,easing:function(e,t,r,n){var a,s,o,l,c=i.colorEasing?i.colorEasing(e,n):1-Math.cos(e/n*(Math.PI/2));return a=t,s=r,o=c,l="rgba("+parseInt(a[0]+o*(s[0]-a[0]),10)+","+parseInt(a[1]+o*(s[1]-a[1]),10)+","+parseInt(a[2]+o*(s[2]-a[2]),10),l+=","+(a&&s?parseFloat(a[3]+o*(s[3]-a[3])):1),l+=")"}}))},function(){function e(e,t,r,i){return e<Math.abs(t)?(e=t,i=r/4):i=0===t&&0===e?r/(2*Math.PI)*Math.asin(1):r/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:r,s:i}}function t(e,t,r){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*r-e.s)*(2*Math.PI)/e.p)}function r(e,t,r,n){return r-i(n-e,0,r,n)+t}function i(e,t,r,i){return(e/=i)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t}S.util.ease={easeInQuad:function(e,t,r,i){return r*(e/=i)*e+t},easeOutQuad:function(e,t,r,i){return-r*(e/=i)*(e-2)+t},easeInOutQuad:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,i){return r*(e/=i)*e*e+t},easeOutCubic:function(e,t,r,i){return r*((e=e/i-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,i){return r*(e/=i)*e*e*e+t},easeOutQuart:function(e,t,r,i){return-r*((e=e/i-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,i){return r*(e/=i)*e*e*e*e+t},easeOutQuint:function(e,t,r,i){return r*((e=e/i-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,i){return(e/=i/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,i){return-r*Math.cos(e/i*(Math.PI/2))+r+t},easeOutSine:function(e,t,r,i){return r*Math.sin(e/i*(Math.PI/2))+t},easeInOutSine:function(e,t,r,i){return-r/2*(Math.cos(Math.PI*e/i)-1)+t},easeInExpo:function(e,t,r,i){return 0===e?t:r*Math.pow(2,10*(e/i-1))+t},easeOutExpo:function(e,t,r,i){return e===i?t+r:r*(1-Math.pow(2,-10*e/i))+t},easeInOutExpo:function(e,t,r,i){return 0===e?t:e===i?t+r:(e/=i/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,r,i){return-r*(Math.sqrt(1-(e/=i)*e)-1)+t},easeOutCirc:function(e,t,r,i){return r*Math.sqrt(1-(e=e/i-1)*e)+t},easeInOutCirc:function(e,t,r,i){return(e/=i/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(r,i,n,a){var s=0;return 0===r?i:1===(r/=a)?i+n:(s||(s=.3*a),-t(e(n,n,s,1.70158),r,a)+i)},easeOutElastic:function(t,r,i,n){var a=0;if(0===t)return r;if(1===(t/=n))return r+i;a||(a=.3*n);var s=e(i,i,a,1.70158);return s.a*Math.pow(2,-10*t)*Math.sin((t*n-s.s)*(2*Math.PI)/s.p)+s.c+r},easeInOutElastic:function(r,i,n,a){var s=0;if(0===r)return i;if(2===(r/=a/2))return i+n;s||(s=a*(.3*1.5));var o=e(n,n,s,1.70158);return r<1?-.5*t(o,r,a)+i:o.a*Math.pow(2,-10*(r-=1))*Math.sin((r*a-o.s)*(2*Math.PI)/o.p)*.5+o.c+i},easeInBack:function(e,t,r,i,n){return void 0===n&&(n=1.70158),r*(e/=i)*e*((n+1)*e-n)+t},easeOutBack:function(e,t,r,i,n){return void 0===n&&(n=1.70158),r*((e=e/i-1)*e*((n+1)*e+n)+1)+t},easeInOutBack:function(e,t,r,i,n){return void 0===n&&(n=1.70158),(e/=i/2)<1?r/2*(e*e*((1+(n*=1.525))*e-n))+t:r/2*((e-=2)*e*((1+(n*=1.525))*e+n)+2)+t},easeInBounce:r,easeOutBounce:i,easeInOutBounce:function(e,t,n,a){return e<a/2?.5*r(2*e,0,n,a)+t:.5*i(2*e-a,0,n,a)+.5*n+t}}}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.util.object.clone,n=t.util.toFixed,a=t.util.parseUnit,s=t.util.multiplyTransformMatrices,o={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},l={stroke:"strokeOpacity",fill:"fillOpacity"};function c(e){return e in o?o[e]:e}function h(e,r,i,n){var o,l="[object Array]"===Object.prototype.toString.call(r);if("fill"!==e&&"stroke"!==e||"none"!==r)if("vector-effect"===e)r="non-scaling-stroke"===r;else if("strokeDashArray"===e)r="none"===r?null:r.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)r=i&&i.transformMatrix?s(i.transformMatrix,t.parseTransformAttribute(r)):t.parseTransformAttribute(r);else if("visible"===e)r="none"!==r&&"hidden"!==r,i&&!1===i.visible&&(r=!1);else if("opacity"===e)r=parseFloat(r),i&&void 0!==i.opacity&&(r*=i.opacity);else if("textAnchor"===e)r="start"===r?"left":"end"===r?"right":"center";else if("charSpacing"===e)o=a(r,n)/n*1e3;else if("paintFirst"===e){var c=r.indexOf("fill"),h=r.indexOf("stroke");r="fill";(c>-1&&h>-1&&h<c||-1===c&&h>-1)&&(r="stroke")}else{if("href"===e||"xlink:href"===e)return r;o=l?r.map(a):a(r,n)}else r="";return!l&&isNaN(o)?r:o}function u(e){return new RegExp("^("+e.join("|")+")\\b","i")}function d(e,t){var r,i,n,a,s=[];for(n=0,a=t.length;n<a;n++)r=t[n],i=e.getElementsByTagName(r),s=s.concat(Array.prototype.slice.call(i));return s}function p(e,t){var r,i=!0;return(r=f(e,t.pop()))&&t.length&&(i=function(e,t){var r,i=!0;for(;e.parentNode&&1===e.parentNode.nodeType&&t.length;)i&&(r=t.pop()),e=e.parentNode,i=f(e,r);return 0===t.length}(e,t)),r&&i&&0===t.length}function f(e,t){var r,i,n=e.nodeName,a=e.getAttribute("class"),s=e.getAttribute("id");if(r=new RegExp("^"+n,"i"),t=t.replace(r,""),s&&t.length&&(r=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),t=t.replace(r,"")),a&&t.length)for(i=(a=a.split(" ")).length;i--;)r=new RegExp("\\."+a[i]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(r,"");return 0===t.length}function g(e,t){var r;if(e.getElementById&&(r=e.getElementById(t)),r)return r;var i,n,a,s=e.getElementsByTagName("*");for(n=0,a=s.length;n<a;n++)if(t===(i=s[n]).getAttribute("id"))return i}t.svgValidTagNamesRegEx=u(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=u(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=u(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=u(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,r,i){e[i]=Math.tan(t.util.degreesToRadians(r[0]))}var r=t.iMatrix,i=t.reNum,n="(?:\\s+,?\\s*|,\\s*)",a="(?:"+("(?:(matrix)\\s*\\(\\s*("+i+")"+n+"("+i+")"+n+"("+i+")"+n+"("+i+")"+n+"("+i+")"+n+"("+i+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+i+")(?:"+n+"("+i+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+i+")(?:"+n+"("+i+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+i+")(?:"+n+"("+i+")"+n+"("+i+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\))")+")",s=new RegExp("^\\s*(?:"+("(?:"+a+"(?:"+n+"*"+a+")*)")+"?)\\s*$"),o=new RegExp(a,"g");return function(i){var n=r.concat(),l=[];if(!i||i&&!s.test(i))return n;i.replace(o,(function(i){var s=new RegExp(a).exec(i).filter((function(e){return!!e})),o=s[1],c=s.slice(2).map(parseFloat);switch(o){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(n,c);break;case"rotate":c[0]=t.util.degreesToRadians(c[0]),function(e,r){var i=t.util.cos(r[0]),n=t.util.sin(r[0]),a=0,s=0;3===r.length&&(a=r[1],s=r[2]),e[0]=i,e[1]=n,e[2]=-n,e[3]=i,e[4]=a-(i*a-n*s),e[5]=s-(n*a+i*s)}(n,c);break;case"scale":!function(e,t){var r=t[0],i=2===t.length?t[1]:t[0];e[0]=r,e[3]=i}(n,c);break;case"skewX":e(n,c,2);break;case"skewY":e(n,c,1);break;case"matrix":n=c}l.push(n.concat()),n=r.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=t.util.multiplyTransformMatrices(c,l[0]);return c}}();var v=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function m(e){var r,i,n,s,o,l,c=e.getAttribute("viewBox"),h=1,u=1,d=e.getAttribute("width"),p=e.getAttribute("height"),f=e.getAttribute("x")||0,g=e.getAttribute("y")||0,m=e.getAttribute("preserveAspectRatio")||"",b=!c||!t.svgViewBoxElementsRegEx.test(e.nodeName)||!(c=c.match(v)),y=!d||!p||"100%"===d||"100%"===p,w=b&&y,C={},_="",x=0,S=0;if(C.width=0,C.height=0,C.toBeParsed=w,w)return C;if(b)return C.width=a(d),C.height=a(p),C;if(r=-parseFloat(c[1]),i=-parseFloat(c[2]),n=parseFloat(c[3]),s=parseFloat(c[4]),C.minX=r,C.minY=i,C.viewBoxWidth=n,C.viewBoxHeight=s,y?(C.width=n,C.height=s):(C.width=a(d),C.height=a(p),h=C.width/n,u=C.height/s),"none"!==(m=t.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(u=h=h>u?u:h),"slice"===m.meetOrSlice&&(u=h=h>u?h:u),x=C.width-n*h,S=C.height-s*h,"Mid"===m.alignX&&(x/=2),"Mid"===m.alignY&&(S/=2),"Min"===m.alignX&&(x=0),"Min"===m.alignY&&(S=0)),1===h&&1===u&&0===r&&0===i&&0===f&&0===g)return C;if((f||g)&&(_=" translate("+a(f)+" "+a(g)+") "),o=_+" matrix("+h+" 0 0 "+u+" "+(r*h+x)+" "+(i*u+S)+") ",C.viewboxTransform=t.parseTransformAttribute(o),"svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else o=(l=e).getAttribute("transform")+o;return l.setAttribute("transform",o),C}function b(e,t){var r=g(e,t.getAttribute("xlink:href").substr(1));if(r&&r.getAttribute("xlink:href")&&b(e,r),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){r&&!t.hasAttribute(e)&&r.hasAttribute(e)&&t.setAttribute(e,r.getAttribute(e))})),!t.children.length)for(var i=r.cloneNode(!0);i.firstChild;)t.appendChild(i.firstChild);t.removeAttribute("xlink:href")}t.parseSVGDocument=function(e,r,n,a){if(e){!function(e){for(var r=d(e,["use","svg:use"]),i=0;r.length&&i<r.length;){var n,a,s,o,l=r[i],c=(l.getAttribute("xlink:href")||l.getAttribute("href")).substr(1),h=l.getAttribute("x")||0,u=l.getAttribute("y")||0,p=g(e,c).cloneNode(!0),f=(p.getAttribute("transform")||"")+" translate("+h+", "+u+")",v=r.length,b=t.svgNS;if(m(p),/^svg$/i.test(p.nodeName)){var y=p.ownerDocument.createElementNS(b,"g");for(a=0,o=(s=p.attributes).length;a<o;a++)n=s.item(a),y.setAttributeNS(b,n.nodeName,n.nodeValue);for(;p.firstChild;)y.appendChild(p.firstChild);p=y}for(a=0,o=(s=l.attributes).length;a<o;a++)"x"!==(n=s.item(a)).nodeName&&"y"!==n.nodeName&&"xlink:href"!==n.nodeName&&"href"!==n.nodeName&&("transform"===n.nodeName?f=n.nodeValue+" "+f:p.setAttribute(n.nodeName,n.nodeValue));p.setAttribute("transform",f),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),l.parentNode.replaceChild(p,l),r.length===v&&i++}}(e);var s,o,l=t.Object.__uid++,c=m(e),h=t.util.toArray(e.getElementsByTagName("*"));if(c.crossOrigin=a&&a.crossOrigin,c.svgUid=l,0===h.length&&t.isLikelyNode){var u=[];for(s=0,o=(h=e.selectNodes('//*[name(.)!="svg"]')).length;s<o;s++)u[s]=h[s];h=u}var p=h.filter((function(e){return m(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!p||p&&!p.length)r&&r([],{});else{var f={};h.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var r=e.getAttribute("id");f[r]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=f,t.parseElements(p,(function(e,i){r&&(r(e,c,i,h),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])}),i(c),n,a)}}};var y=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");r(t,{parseFontDeclaration:function(e,t){var r=e.match(y);if(r){var i=r[1],n=r[3],s=r[4],o=r[5],l=r[6];i&&(t.fontStyle=i),n&&(t.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),s&&(t.fontSize=a(s)),l&&(t.fontFamily=l),o&&(t.lineHeight="normal"===o?1:o)}},getGradientDefs:function(e){var t,r=d(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,n={};for(i=r.length;i--;)(t=r[i]).getAttribute("xlink:href")&&b(e,t),n[t.getAttribute("id")]=t;return n},parseAttributes:function(e,i,s){if(e){var o,u,d,f={};void 0===s&&(s=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(f=t.parseAttributes(e.parentNode,i,s));var g=i.reduce((function(t,r){return(o=e.getAttribute(r))&&(t[r]=o),t}),{}),v=r(function(e,r){var i={};for(var n in t.cssRules[r])if(p(e,n.split(" ")))for(var a in t.cssRules[r][n])i[a]=t.cssRules[r][n][a];return i}(e,s),t.parseStyleAttribute(e));g=r(g,v),v["clip-path"]&&e.setAttribute("clip-path",v["clip-path"]),u=d=f.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,g["font-size"]&&(g["font-size"]=u=a(g["font-size"],d));var m,b,y={};for(var w in g)b=h(m=c(w),g[w],f,u),y[m]=b;y&&y.font&&t.parseFontDeclaration(y.font,y);var C=r(f,y);return t.svgValidParentsRegEx.test(e.nodeName)?C:function(e){for(var r in l)if(void 0!==e[l[r]]&&""!==e[r]){if(void 0===e[r]){if(!t.Object.prototype[r])continue;e[r]=t.Object.prototype[r]}if(0!==e[r].indexOf("url(")){var i=new t.Color(e[r]);e[r]=i.setAlpha(n(i.getAlpha()*e[l[r]],2)).toRgba()}}return e}(C)}},parseElements:function(e,r,i,n,a){new t.ElementsParser(e,r,i,n,a).parse()},parseStyleAttribute:function(e){var t={},r=e.getAttribute("style");return r?("string"==typeof r?function(e,t){var r,i;e.replace(/;\s*$/,"").split(";").forEach((function(e){var n=e.split(":");r=n[0].trim().toLowerCase(),i=n[1].trim(),t[r]=i}))}(r,t):function(e,t){var r,i;for(var n in e)void 0!==e[n]&&(r=n.toLowerCase(),i=e[n],t[r]=i)}(r,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,r,i=[];for(t=0,r=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<r;t+=2)i.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return i},getCSSRules:function(e){var r,i,n=e.getElementsByTagName("style"),a={};for(r=0,i=n.length;r<i;r++){var s=n[r].textContent||"";""!==(s=s.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&s.match(/[^{]*\{[\s\S]*?\}/g).map((function(e){return e.trim()})).forEach((function(e){var n=e.match(/([\s\S]*?)\s*\{([^}]*)\}/),s={},o=n[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(r=0,i=o.length;r<i;r++){var l=o[r].split(/\s*:\s*/),c=l[0],h=l[1];s[c]=h}(e=n[1]).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(a[e]?t.util.object.extend(a[e],s):a[e]=t.util.object.clone(s))}))}))}return a},loadSVGFromURL:function(e,r,i,n){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var a=e.responseXML;a&&!a.documentElement&&t.window.ActiveXObject&&e.responseText&&((a=new ActiveXObject("Microsoft.XMLDOM")).async="false",a.loadXML(e.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));if(!a||!a.documentElement)return r&&r(null),!1;t.parseSVGDocument(a.documentElement,(function(e,t,i,n){r&&r(e,t,i,n)}),i,n)}})},loadSVGFromString:function(e,r,i,n){var a;if(e=e.trim(),void 0!==t.window.DOMParser){var s=new t.window.DOMParser;s&&s.parseFromString&&(a=s.parseFromString(e,"text/xml"))}else t.window.ActiveXObject&&((a=new ActiveXObject("Microsoft.XMLDOM")).async="false",a.loadXML(e.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));t.parseSVGDocument(a.documentElement,(function(e,t,i,n){r(e,t,i,n)}),i,n)}})}(t),S.ElementsParser=function(e,t,r,i,n,a){this.elements=e,this.callback=t,this.options=r,this.reviver=i,this.svgUid=r&&r.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},(g=S.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var e=this;this.elements.forEach((function(t,r){t.setAttribute("svgUid",e.svgUid),e.createObject(t,r)}))},g.findTag=function(e){return S[S.util.string.capitalize(e.tagName.replace("svg:",""))]},g.createObject=function(e,t){var r=this.findTag(e);if(r&&r.fromElement)try{r.fromElement(e,this.createCallback(t,e),this.options)}catch(e){S.log(e)}else this.checkIfDone()},g.createCallback=function(e,t){var r=this;return function(i){var n;r.resolveGradient(i,t,"fill"),r.resolveGradient(i,t,"stroke"),i instanceof S.Image&&i._originalElement&&(n=i.parsePreserveAspectRatioAttribute(t)),i._removeTransformMatrix(n),r.resolveClipPath(i,t),r.reviver&&r.reviver(t,i),r.instances[e]=i,r.checkIfDone()}},g.extractPropertyDefinition=function(e,t,r){var i=e[t],n=this.regexUrl;if(n.test(i)){n.lastIndex=0;var a=n.exec(i)[1];return n.lastIndex=0,S[r][this.svgUid][a]}},g.resolveGradient=function(e,t,r){var i=this.extractPropertyDefinition(e,r,"gradientDefs");if(i){var n=t.getAttribute(r+"-opacity"),a=S.Gradient.fromElement(i,e,n,this.options);e.set(r,a)}},g.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},g.resolveClipPath=function(e,t){var r,i,n,a,s=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(s){n=[],i=S.util.invertTransform(e.calcTransformMatrix());for(var o=s[0].parentNode,l=t;l.parentNode&&l.getAttribute("clip-path")!==e.clipPath;)l=l.parentNode;l.parentNode.appendChild(o);for(var c=0;c<s.length;c++)r=s[c],this.findTag(r).fromElement(r,this.createClipPathCallback(e,n),this.options);s=1===n.length?n[0]:new S.Group(n),a=S.util.multiplyTransformMatrices(i,s.calcTransformMatrix()),s.clipPath&&this.resolveClipPath(s,l);var h=S.util.qrDecompose(a);s.flipX=!1,s.flipY=!1,s.set("scaleX",h.scaleX),s.set("scaleY",h.scaleY),s.angle=h.angle,s.skewX=h.skewX,s.skewY=0,s.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),e.clipPath=s}else delete e.clipPath},g.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){"use strict";var t=e.fabric||(e.fabric={});function r(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=r,r.prototype={type:"point",constructor:r,add:function(e){return new r(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new r(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new r(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new r(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new r(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new r(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new r(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new r(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new r(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r},clone:function(){return new r(this.x,this.y)}})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function r(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=r,t.Intersection.prototype={constructor:r,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,i,n,a){var s,o=(a.x-n.x)*(e.y-n.y)-(a.y-n.y)*(e.x-n.x),l=(i.x-e.x)*(e.y-n.y)-(i.y-e.y)*(e.x-n.x),c=(a.y-n.y)*(i.x-e.x)-(a.x-n.x)*(i.y-e.y);if(0!==c){var h=o/c,u=l/c;0<=h&&h<=1&&0<=u&&u<=1?(s=new r("Intersection")).appendPoint(new t.Point(e.x+h*(i.x-e.x),e.y+h*(i.y-e.y))):s=new r}else s=new r(0===o||0===l?"Coincident":"Parallel");return s},t.Intersection.intersectLinePolygon=function(e,t,i){var n,a,s,o,l=new r,c=i.length;for(o=0;o<c;o++)n=i[o],a=i[(o+1)%c],s=r.intersectLineLine(e,t,n,a),l.appendPoints(s.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var i,n=new r,a=e.length;for(i=0;i<a;i++){var s=e[i],o=e[(i+1)%a],l=r.intersectLinePolygon(s,o,t);n.appendPoints(l.points)}return n.points.length>0&&(n.status="Intersection"),n},t.Intersection.intersectPolygonRectangle=function(e,i,n){var a=i.min(n),s=i.max(n),o=new t.Point(s.x,a.y),l=new t.Point(a.x,s.y),c=r.intersectLinePolygon(a,o,e),h=r.intersectLinePolygon(o,s,e),u=r.intersectLinePolygon(s,l,e),d=r.intersectLinePolygon(l,a,e),p=new r;return p.appendPoints(c.points),p.appendPoints(h.points),p.appendPoints(u.points),p.appendPoints(d.points),p.points.length>0&&(p.status="Intersection"),p})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});function r(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function i(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=r,t.Color.prototype={_tryParsingColor:function(e){var t;e in r.colorNameMap&&(e=r.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=r.sourceFromHex(e)),t||(t=r.sourceFromRgb(e)),t||(t=r.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,r,i){e/=255,r/=255,i/=255;var n,a,s,o=t.util.array.max([e,r,i]),l=t.util.array.min([e,r,i]);if(s=(o+l)/2,o===l)n=a=0;else{var c=o-l;switch(a=s>.5?c/(2-o-l):c/(o+l),o){case e:n=(r-i)/c+(r<i?6:0);break;case r:n=(i-e)/c+2;break;case i:n=(e-r)/c+4}n/=6}return[Math.round(360*n),Math.round(100*a),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,r,i=this.getSource();return e=1===(e=i[0].toString(16)).length?"0"+e:e,t=1===(t=i[1].toString(16)).length?"0"+t:t,r=1===(r=i[2].toString(16)).length?"0"+r:r,e.toUpperCase()+t.toUpperCase()+r.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),r=e[3];return this.setSource([t,t,t,r]),this},toBlackWhite:function(e){var t=this.getSource(),r=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),i=t[3];return e=e||127,r=Number(r)<Number(e)?0:255,this.setSource([r,r,r,i]),this},overlayWith:function(e){e instanceof r||(e=new r(e));var t,i=[],n=this.getAlpha(),a=this.getSource(),s=e.getSource();for(t=0;t<3;t++)i.push(Math.round(.5*a[t]+.5*s[t]));return i[3]=n,this.setSource(i),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return r.fromSource(r.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(r.reRGBa);if(t){var i=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),n=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),a=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(i,10),parseInt(n,10),parseInt(a,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=r.fromRgb,t.Color.fromHsl=function(e){return r.fromSource(r.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(r.reHSLa);if(t){var n,a,s,o=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),c=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)n=a=s=c;else{var h=c<=.5?c*(l+1):c+l-c*l,u=2*c-h;n=i(u,h,o+1/3),a=i(u,h,o),s=i(u,h,o-1/3)}return[Math.round(255*n),Math.round(255*a),Math.round(255*s),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=r.fromHsl,t.Color.fromHex=function(e){return r.fromSource(r.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(r.reHex)){var t=e.slice(e.indexOf("#")+1),i=3===t.length||4===t.length,n=8===t.length||4===t.length,a=i?t.charAt(0)+t.charAt(0):t.substring(0,2),s=i?t.charAt(1)+t.charAt(1):t.substring(2,4),o=i?t.charAt(2)+t.charAt(2):t.substring(4,6),l=n?i?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(a,16),parseInt(s,16),parseInt(o,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new r;return t.setSource(e),t})}(t),function(){function e(e,t){var r,i,n,a,s=e.getAttribute("style"),o=e.getAttribute("offset")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:o>1?1:o,s){var l=s.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),a=l.length;a--;){var c=l[a].split(/\s*:\s*/),h=c[0].trim(),u=c[1].trim();"stop-color"===h?r=u:"stop-opacity"===h&&(n=u)}}return r||(r=e.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=e.getAttribute("stop-opacity")),i=(r=new S.Color(r)).getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i*t,{offset:o,color:r.toRgb(),opacity:n}}var t=S.util.object.clone;function r(e,t,r,i){var n,a;Object.keys(t).forEach((function(e){"Infinity"===(n=t[e])?a=1:"-Infinity"===n?a=0:(a=parseFloat(t[e],10),"string"==typeof n&&/^(\d+\.\d+)%|(\d+)%$/.test(n)&&(a*=.01,"pixels"===i&&("x1"!==e&&"x2"!==e&&"r2"!==e||(a*=r.viewBoxWidth||r.width),"y1"!==e&&"y2"!==e||(a*=r.viewBoxHeight||r.height)))),t[e]=a}))}S.Gradient=S.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,r=this;Object.keys(e).forEach((function(t){r[t]=e[t]})),this.id?this.id+="_"+S.Object.__uid++:this.id=S.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var r=new S.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return S.util.populateWithProperties(this,t,e),t},toSVG:function(e,r){var i,n,a,s,o=t(this.coords,!0),l=(r=r||{},t(this.colorStops,!0)),c=o.r1>o.r2,h=this.gradientTransform?this.gradientTransform.concat():S.iMatrix.concat(),u=-this.offsetX,d=-this.offsetY,p=!!r.additionalTransform,f="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===f?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),"path"===e.type&&(u-=e.pathOffset.x,d-=e.pathOffset.y),h[4]-=u,h[5]-=d,s='id="SVGID_'+this.id+'" gradientUnits="'+f+'"',s+=' gradientTransform="'+(p?r.additionalTransform+" ":"")+S.util.matrixToSVG(h)+'" ',"linear"===this.type?a=["<linearGradient ",s,' x1="',o.x1,'" y1="',o.y1,'" x2="',o.x2,'" y2="',o.y2,'">\n']:"radial"===this.type&&(a=["<radialGradient ",s,' cx="',c?o.x1:o.x2,'" cy="',c?o.y1:o.y2,'" r="',c?o.r1:o.r2,'" fx="',c?o.x2:o.x1,'" fy="',c?o.y2:o.y1,'">\n']),"radial"===this.type){if(c)for((l=l.concat()).reverse(),i=0,n=l.length;i<n;i++)l[i].offset=1-l[i].offset;var g=Math.min(o.r1,o.r2);if(g>0){var v=g/Math.max(o.r1,o.r2);for(i=0,n=l.length;i<n;i++)l[i].offset+=v*(1-l[i].offset)}}for(i=0,n=l.length;i<n;i++){var m=l[i];a.push("<stop ",'offset="',100*m.offset+"%",'" style="stop-color:',m.color,void 0!==m.opacity?";stop-opacity: "+m.opacity:";",'"/>\n')}return a.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),a.join("")},toLive:function(e,t){var r,i,n,a=S.util.object.clone(this.coords),s=a.x1,o=a.y1,l=a.x2,c=a.y2,h=this.colorStops;if(this.type){for(t instanceof S.Text&&"percentage"===this.gradientUnits&&(s*=t.width,o*=t.height,l*=t.width,c*=t.height),"linear"===this.type?r=e.createLinearGradient(s,o,l,c):"radial"===this.type&&(r=e.createRadialGradient(s,o,a.r1,l,c,a.r2)),i=0,n=h.length;i<n;i++){var u=h[i].color,d=h[i].opacity,p=h[i].offset;void 0!==d&&(u=new S.Color(u).setAlpha(d).toRgba()),r.addColorStop(p,u)}return r}}}),S.util.object.extend(S.Gradient,{fromElement:function(t,i,n,a){var s=parseFloat(n)/(/%$/.test(n)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var o,l,c,h,u=t.getElementsByTagName("stop"),d="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",p=t.getAttribute("gradientTransform")||"",f=[],g=0,v=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(o="linear",l=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(o="radial",l=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),c=u.length;c--;)f.push(e(u[c],s));return h=S.parseTransformAttribute(p),r(i,l,a,d),"pixels"===d&&(g=-i.left,v=-i.top),new S.Gradient({id:t.getAttribute("id"),type:o,coords:l,colorStops:f,gradientUnits:d,gradientTransform:h,offsetX:g,offsetY:v})},forObject:function(e,t){return t||(t={}),r(e,t.coords,t.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100}),new S.Gradient(t)}})}(),function(){"use strict";var e=S.util.toFixed;S.Pattern=S.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=S.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source)t&&t(this);else if(void 0!==S.util.getFunctionBody(e.source))this.source=new Function(S.util.getFunctionBody(e.source)),t&&t(this);else{var r=this;this.source=S.util.createImage(),S.util.loadImage(e.source,(function(e){r.source=e,t&&t(r)}),null,this.crossOrigin)}},toObject:function(t){var r,i,n=S.Object.NUM_FRACTION_DIGITS;return"function"==typeof this.source?r=String(this.source):"string"==typeof this.source.src?r=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(r=this.source.toDataURL()),i={type:"pattern",source:r,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:e(this.offsetX,n),offsetY:e(this.offsetY,n),patternTransform:this.patternTransform?this.patternTransform.concat():null},S.util.populateWithProperties(this,i,t),i},toSVG:function(e){var t="function"==typeof this.source?this.source():this.source,r=t.width/e.width,i=t.height/e.height,n=this.offsetX/e.width,a=this.offsetY/e.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,a&&(i+=Math.abs(a))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(r=1,n&&(r+=Math.abs(n))),t.src?s=t.src:t.toDataURL&&(s=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+n+'" y="'+a+'" width="'+r+'" height="'+i+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t="function"==typeof this.source?this.source():this.source;if(!t)return"";if(void 0!==t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}})}(),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var r in"string"==typeof e&&(e=this._parseShadow(e)),e)this[r]=e[r];this.id=t.Object.__uid++},_parseShadow:function(e){var r=e.trim(),i=t.Shadow.reOffsetsAndBlur.exec(r)||[];return{color:(r.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var i=40,n=40,a=t.Object.NUM_FRACTION_DIGITS,s=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),o=new t.Color(this.color);return e.width&&e.height&&(i=100*r((Math.abs(s.x)+this.blur)/e.width,a)+20,n=100*r((Math.abs(s.y)+this.blur)/e.height,a)+20),e.flipX&&(s.x*=-1),e.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+n+'%" height="'+(100+2*n)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+r(this.blur?this.blur/2:0,a)+'"></feGaussianBlur>\n\t<feOffset dx="'+r(s.x,a)+'" dy="'+r(s.y,a)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+o.toRgb()+'" flood-opacity="'+o.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},r=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==r[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){"use strict";if(S.StaticCanvas)S.warn("fabric.StaticCanvas is already defined.");else{var e=S.util.object.extend,t=S.util.getElementOffset,r=S.util.removeFromArray,i=S.util.toFixed,n=S.util.transformPoint,a=S.util.invertTransform,s=S.util.getNodeCanvas,o=S.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");S.StaticCanvas=S.util.createClass(S.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:S.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var r=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,r),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,r),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,r),t.overlayColor&&this.setOverlayColor(t.overlayColor,r),this.calcOffset()},_isRetinaScaling:function(){return 1!==S.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?S.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=S.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,r){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),r.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,r){return this.__setBgOverlayImage("overlayImage",e,t,r)},setBackgroundImage:function(e,t,r){return this.__setBgOverlayImage("backgroundImage",e,t,r)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},_setImageSmoothing:function(){var e=this.getContext();e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(e,t,r,i){return"string"==typeof t?S.util.loadImage(t,(function(t){if(t){var n=new S.Image(t,i);this[e]=n,n.canvas=this}r&&r(t)}),this,i&&i.crossOrigin):(i&&t.setOptions(i),this[e]=t,t&&(t.canvas=this),r&&r(t)),this},__setBgOverlayColor:function(e,t,r){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,r),this},_createCanvasElement:function(){var e=o();if(!e)throw l;if(e.style||(e.style={}),void 0===e.getContext)throw l;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=S.util.getById(e)||this._createCanvasElement(),S.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var r;for(var i in t=t||{},e)r=e[i],t.cssOnly||(this._setBackstoreDimension(i,e[i]),r+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(i,r);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,r,i,n=this._activeObject;for(this.viewportTransform=e,r=0,i=this._objects.length;r<i;r++)(t=this._objects[r]).group||t.setCoords(!1,!0);return n&&"activeSelection"===n.type&&n.setCoords(!1,!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var r=e,i=this.viewportTransform.slice(0);e=n(e,a(this.viewportTransform)),i[0]=t,i[3]=t;var s=n(e,i);return i[4]+=r.x-s.x,i[5]+=r.y-s.y,this.setViewportTransform(i)},setZoom:function(e){return this.zoomToPoint(new S.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new S.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=S.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,r=this.height,i=a(this.viewportTransform);return e.tl=n({x:0,y:0},i),e.br=n({x:t,y:r},i),e.tr=new S.Point(e.br.x,e.tl.y),e.bl=new S.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var r=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),this.fire("before:render",{ctx:e}),this.clipTo&&S.util.clipContext(this,e),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.clipTo&&e.restore(),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,r=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var r,i;for(r=0,i=t.length;r<i;++r)t[r]&&t[r].render(e)},_renderBackgroundOrOverlay:function(e,t){var r=this[t+"Color"],i=this[t+"Image"],n=this.viewportTransform,a=this[t+"Vpt"];if(r||i){if(r){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=r.toLive?r.toLive(e,this):r,a&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);var s=r.gradientTransform||r.patternTransform;s&&e.transform(s[0],s[1],s[2],s[3],s[4],s[5]),e.fill(),e.restore()}i&&(e.save(),a&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(e){return this._centerObject(e,new S.Point(this.getCenter().left,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new S.Point(e.getCenterPoint().x,this.getCenter().top))},centerObject:function(e){var t=this.getCenter();return this._centerObject(e,new S.Point(t.left,t.top))},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new S.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new S.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenter(),t=a(this.viewportTransform);return n({x:e.left,y:e.top},t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,r){var i=this.clipPath,n={version:S.version,objects:this._toObjects(t,r)};return i&&(n.clipPath=this._toObject(this.clipPath,t,r)),e(n,this.__serializeBgOverlay(t,r)),S.util.populateWithProperties(this,n,r),n},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(r){return this._toObject(r,e,t)}),this)},_toObject:function(e,t,r){var i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);var n=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=i),n},__serializeBgOverlay:function(e,t){var r={},i=this.backgroundImage,n=this.overlayImage;return this.backgroundColor&&(r.background=this.backgroundColor.toObject?this.backgroundColor.toObject(t):this.backgroundColor),this.overlayColor&&(r.overlay=this.overlayColor.toObject?this.overlayColor.toObject(t):this.overlayColor),i&&!i.excludeFromExport&&(r.backgroundImage=this._toObject(i,e,t)),n&&!n.excludeFromExport&&(r.overlayImage=this._toObject(n,e,t)),r},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push("</g>\n"),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var r,n=t.width||this.width,a=t.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',o=S.Object.NUM_FRACTION_DIGITS;t.viewBox?s='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(r=this.viewportTransform,s='viewBox="'+i(-r[4]/r[0],o)+" "+i(-r[5]/r[3],o)+" "+i(this.width/r[0],o)+" "+i(this.height/r[3],o)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',a,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",S.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+S.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var r=e[t+"Color"];if(r&&r.toLive){var i=e[t+"Vpt"],n=e.viewportTransform,a={width:e.width/(i?n[0]:1),height:e.height/(i?n[3]:1)};return r.toSVG(a,{additionalTransform:i?S.util.matrixToSVG(n):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,r,i,n,a,s,o,l="",c={},h=S.fontPaths,u=[];for(this._objects.forEach((function e(t){u.push(t),t._objects&&t._objects.forEach(e)})),s=0,o=u.length;s<o;s++)if(t=(e=u[s]).fontFamily,-1!==e.type.indexOf("text")&&!c[t]&&h[t]&&(c[t]=!0,e.styles))for(n in r=e.styles)for(a in i=r[n])!c[t=i[a].fontFamily]&&h[t]&&(c[t]=!0);for(var d in c)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",h[d],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(e,t){var r,i,n,a=this._objects;for(i=0,n=a.length;i<n;i++)(r=a[i]).excludeFromExport||this._setSVGObject(e,r,t)},_setSVGObject:function(e,t,r){e.push(t.toSVG(r))},_setSVGBgOverlayImage:function(e,t,r){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(r))},_setSVGBgOverlayColor:function(e,t){var r=this[t+"Color"],i=this.viewportTransform,n=this.width,a=this.height;if(r)if(r.toLive){var s=r.repeat,o=S.util.invertTransform(i),l=this[t+"Vpt"]?S.util.matrixToSVG(o):"";e.push('<rect transform="'+l+" translate(",n/2,",",a/2,')"',' x="',r.offsetX-n/2,'" y="',r.offsetY-a/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?r.source.width:n,'" height="',"repeat-x"===s||"no-repeat"===s?r.source.height:a,'" fill="url(#SVGID_'+r.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,i,n,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(t=(n=a._objects).length;t--;)i=n[t],r(this._objects,i),this._objects.unshift(i);else r(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,i,n,a=this._activeObject;if(e===a&&"activeSelection"===e.type)for(n=a._objects,t=0;t<n.length;t++)i=n[t],r(this._objects,i),this._objects.push(i);else r(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var i,n,a,s,o,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(o=l._objects,i=0;i<o.length;i++)n=o[i],(a=this._objects.indexOf(n))>0+c&&(s=a-1,r(this._objects,n),this._objects.splice(s,0,n)),c++;else 0!==(a=this._objects.indexOf(e))&&(s=this._findNewLowerIndex(e,a,t),r(this._objects,e),this._objects.splice(s,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,r){var i,n;if(r)for(i=t,n=t-1;n>=0;--n){if(e.intersectsWithObject(this._objects[n])||e.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(e)){i=n;break}}else i=t-1;return i},bringForward:function(e,t){if(!e)return this;var i,n,a,s,o,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(i=(o=l._objects).length;i--;)n=o[i],(a=this._objects.indexOf(n))<this._objects.length-1-c&&(s=a+1,r(this._objects,n),this._objects.splice(s,0,n)),c++;else(a=this._objects.indexOf(e))!==this._objects.length-1&&(s=this._findNewUpperIndex(e,a,t),r(this._objects,e),this._objects.splice(s,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,r){var i,n,a;if(r)for(i=t,n=t+1,a=this._objects.length;n<a;++n){if(e.intersectsWithObject(this._objects[n])||e.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(e)){i=n;break}}else i=t+1;return i},moveTo:function(e,t){return r(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,S.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(S.StaticCanvas.prototype,S.Observable),e(S.StaticCanvas.prototype,S.Collection),e(S.StaticCanvas.prototype,S.DataURLExporter),e(S.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=o();if(!t||!t.getContext)return null;var r=t.getContext("2d");if(!r)return null;switch(e){case"setLineDash":return void 0!==r.setLineDash;default:return null}}}),S.StaticCanvas.prototype.toJSON=S.StaticCanvas.prototype.toObject,S.isLikelyNode&&(S.StaticCanvas.prototype.createPNGStream=function(){var e=s(this.lowerCanvasEl);return e&&e.createPNGStream()},S.StaticCanvas.prototype.createJPEGStream=function(e){var t=s(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),S.BaseBrush=S.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(e){return this.shadow=new S.Shadow(e),this},_setBrushStyles:function(){var e=this.canvas.contextTop;e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,S.StaticCanvas.supports("setLineDash")&&e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,r=e.contextTop,i=e.getZoom();e&&e._isRetinaScaling()&&(i*=S.devicePixelRatio),r.shadowColor=t.color,r.shadowBlur=t.blur*i,r.shadowOffsetX=t.offsetX*i,r.shadowOffsetY=t.offsetY*i}},needsFullRender:function(){return new S.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}}),S.PencilBrush=S.util.createClass(S.BaseBrush,{decimate:.4,initialize:function(e){this.canvas=e,this._points=[]},_drawSegment:function(e,t,r){var i=t.midPointFrom(r);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&this._captureDrawingPath(e)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var r=this._points,i=r.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,r[i-2],r[i-1],!0),n.stroke(),n.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new S.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1])||(this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(e){var t=new S.Point(e.x,e.y);return this._addPoint(t)},_render:function(){var e,t,r=this.canvas.contextTop,i=this._points[0],n=this._points[1];if(this._saveAndTransform(r),r.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y){var a=this.width/1e3;i=new S.Point(i.x,i.y),n=new S.Point(n.x,n.y),i.x-=a,n.x+=a}for(r.moveTo(i.x,i.y),e=1,t=this._points.length;e<t;e++)this._drawSegment(r,i,n),i=this._points[e],n=this._points[e+1];r.lineTo(i.x,i.y),r.stroke(),r.restore()},convertPointsToSVGPath:function(e){var t,r=[],i=this.width/1e3,n=new S.Point(e[0].x,e[0].y),a=new S.Point(e[1].x,e[1].y),s=e.length,o=1,l=0,c=s>2;for(c&&(o=e[2].x<a.x?-1:e[2].x===a.x?0:1,l=e[2].y<a.y?-1:e[2].y===a.y?0:1),r.push("M ",n.x-o*i," ",n.y-l*i," "),t=1;t<s;t++){if(!n.eq(a)){var h=n.midPointFrom(a);r.push("Q ",n.x," ",n.y," ",h.x," ",h.y," ")}n=e[t],t+1<e.length&&(a=e[t+1])}return c&&(o=n.x>e[t-2].x?1:n.x===e[t-2].x?0:-1,l=n.y>e[t-2].y?1:n.y===e[t-2].y?0:-1),r.push("L ",n.x+o*i," ",n.y+l*i),r},createPath:function(e){var t=new S.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.setShadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var r,i=this.canvas.getZoom(),n=Math.pow(t/i,2),a=e.length-1,s=e[0],o=[s];for(r=1;r<a;r++)Math.pow(s.x-e[r].x,2)+Math.pow(s.y-e[r].y,2)>=n&&(s=e[r],o.push(s));return 1===o.length&&o.push(new S.Point(o[0].x,o[0].y)),o},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==e){var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}else this.canvas.requestRenderAll()}}),S.CircleBrush=S.util.createClass(S.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),r=this.canvas.contextTop;this._saveAndTransform(r),this.dot(r,t),r.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,r=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(r),e=0,t=i.length;e<t;e++)this.dot(r,i[e]);r.restore()},onMouseMove:function(e){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e)},onMouseUp:function(){var e,t,r=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(e=0,t=this.points.length;e<t;e++){var n=this.points[e],a=new S.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&a.setShadow(this.shadow),i.push(a)}var s=new S.Group(i);s.canvas=this.canvas,this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=r,this.canvas.requestRenderAll()},addPoint:function(e){var t=new S.Point(e.x,e.y),r=S.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new S.Color(this.color).setAlpha(S.util.getRandomInt(0,100)/100).toRgba();return t.radius=r,t.fill=i,this.points.push(t),t}}),S.SprayBrush=S.util.createClass(S.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],r=0,i=this.sprayChunks.length;r<i;r++)for(var n=this.sprayChunks[r],a=0,s=n.length;a<s;a++){var o=new S.Rect({width:n[a].width,height:n[a].width,left:n[a].x+1,top:n[a].y+1,originX:"center",originY:"center",fill:this.color});t.push(o)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var l=new S.Group(t);this.shadow&&l.setShadow(this.shadow),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,r,i,n={};for(r=0,i=e.length;r<i;r++)n[t=e[r].left+""+e[r].top]||(n[t]=e[r]);var a=[];for(t in n)a.push(n[t]);return a},render:function(e){var t,r,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,r=e.length;t<r;t++){var n=e[t];void 0!==n.opacity&&(i.globalAlpha=n.opacity),i.fillRect(n.x,n.y,n.width,n.width)}i.restore()},_render:function(){var e,t,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);r.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,r,i,n,a=this.width/2;for(n=0;n<this.density;n++){t=S.util.getRandomInt(e.x-a,e.x+a),r=S.util.getRandomInt(e.y-a,e.y+a),i=this.dotWidthVariance?S.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new S.Point(t,r);s.width=i,this.randomOpacity&&(s.opacity=S.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),S.PatternBrush=S.util.createClass(S.PencilBrush,{getPatternSrc:function(){var e=S.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(e){var t=this.callSuper("createPath",e),r=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new S.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-r.x,offsetY:-r.y}),t}}),function(){var e=S.util.getPointer,t=S.util.degreesToRadians,r=S.util.radiansToDegrees,i=Math.atan2,n=Math.abs,a=S.StaticCanvas.supports("setLineDash");for(var s in S.Canvas=S.util.createClass(S.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=S.PencilBrush&&new S.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,r,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){t=[],r=[];for(var n=0,a=this._objects.length;n<a;n++)e=this._objects[n],-1===i.indexOf(e)?t.push(e):r.push(e);i.length>1&&(this._activeObject._objects=r),t.push.apply(t,r)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_resetCurrentTransform:function(){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,skewX:e.original.skewX,skewY:e.original.skewY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(e.target)?("center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1),"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(e,t,r){var i,n=r||this.getPointer(e,!0);return i=t.group&&t.group===this._activeObject&&"activeSelection"===t.group.type?this._normalizePointer(t.group,n):{x:n.x,y:n.y},t.containsPoint(i)||t._findTargetCorner(n)},_normalizePointer:function(e,t){var r=e.calcTransformMatrix(),i=S.util.invertTransform(r),n=this.restorePointerVpt(t);return S.util.transformPoint(n,i)},isTargetTransparent:function(e,t,r){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var i=this._normalizePointer(e,{x:t,y:r}),n=Math.max(e.cacheTranslationX+i.x*e.zoomX,0),a=Math.max(e.cacheTranslationY+i.y*e.zoomY,0);return S.util.isTransparent(e._cacheContext,Math.round(n),Math.round(a),this.targetFindTolerance)}var s=this.contextCache,o=e.selectionBackgroundColor,l=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(s),s.save(),s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.render(s),s.restore(),e===this._activeObject&&e._renderControls(s,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),e.selectionBackgroundColor=o,S.util.isTransparent(s,t,r,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var r=this.getActiveObjects(),i=this._activeObject;return!t||t&&i&&r.length>1&&-1===r.indexOf(t)&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t},_shouldCenterTransform:function(e){if(e){var t,r=this._currentTransform;return"scale"===r.action||"scaleX"===r.action||"scaleY"===r.action?t=this.centeredScaling||e.centeredScaling:"rotate"===r.action&&(t=this.centeredRotation||e.centeredRotation),t?!r.altKey:r.altKey}},_getOriginFromCorner:function(e,t){var r={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?r.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(r.x="left"),"tl"===t||"mt"===t||"tr"===t?r.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(r.y="top"),r},_getActionFromCorner:function(e,t,r){if(!t||!e)return"drag";switch(t){case"mtr":return"rotate";case"ml":case"mr":return r[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return r[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(e,r,i){if(r){var n=this.getPointer(e),a=r._findTargetCorner(this.getPointer(e,!0)),s=this._getActionFromCorner(i,a,e,r),o=this._getOriginFromCorner(r,a);this._currentTransform={target:r,action:s,corner:a,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:n.x-r.left,offsetY:n.y-r.top,originX:o.x,originY:o.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,theta:t(r.angle),width:r.width*r.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:e.shiftKey,altKey:e[this.centeredKey],original:S.util.saveObjectTransform(r)},this._currentTransform.original.originX=o.x,this._currentTransform.original.originY=o.y,this._resetCurrentTransform(),this._beforeTransform(e)}},_translateObject:function(e,t){var r=this._currentTransform,i=r.target,n=e-r.offsetX,a=t-r.offsetY,s=!i.get("lockMovementX")&&i.left!==n,o=!i.get("lockMovementY")&&i.top!==a;return s&&i.set("left",n),o&&i.set("top",a),s||o},_changeSkewTransformOrigin:function(e,t,r){var i="originX",n={0:"center"},a=t.target.skewX,s="left",o="right",l="mt"===t.corner||"ml"===t.corner?1:-1,c=1;e=e>0?1:-1,"y"===r&&(a=t.target.skewY,s="top",o="bottom",i="originY"),n[-1]=s,n[1]=o,t.target.flipX&&(c*=-1),t.target.flipY&&(c*=-1),0===a?(t.skewSign=-l*e*c,t[i]=n[-e]):(a=a>0?1:-1,t.skewSign=a,t[i]=n[a*l*c])},_skewObject:function(e,t,r){var i,n=this._currentTransform,a=n.target,s=a.get("lockSkewingX"),o=a.get("lockSkewingY");if(s&&"x"===r||o&&"y"===r)return!1;var l,c,h=a.getCenterPoint(),u=a.toLocalPoint(new S.Point(e,t),"center","center")[r],d=a.toLocalPoint(new S.Point(n.lastX,n.lastY),"center","center")[r],p=a._getTransformedDimensions();return this._changeSkewTransformOrigin(u-d,n,r),l=a.toLocalPoint(new S.Point(e,t),n.originX,n.originY)[r],c=a.translateToOriginPoint(h,n.originX,n.originY),i=this._setObjectSkew(l,n,r,p),n.lastX=e,n.lastY=t,a.setPositionByOrigin(c,n.originX,n.originY),i},_setObjectSkew:function(e,t,r,i){var n,a,s,o,l,c,h,u,d,p,f=t.target,g=t.skewSign;return"x"===r?(l="y",c="Y",h="X",d=0,p=f.skewY):(l="x",c="X",h="Y",d=f.skewX,p=0),o=f._getTransformedDimensions(d,p),(u=2*Math.abs(e)-o[r])<=2?n=0:(n=g*Math.atan(u/f["scale"+h]/(o[l]/f["scale"+c])),n=S.util.radiansToDegrees(n)),a=f["skew"+h]!==n,f.set("skew"+h,n),0!==f["skew"+c]&&(s=f._getTransformedDimensions(),n=i[l]/s[l]*f["scale"+c],f.set("scale"+c,n)),a},_scaleObject:function(e,t,r){var i=this._currentTransform,n=i.target,a=n.lockScalingX,s=n.lockScalingY,o=n.lockScalingFlip;if(a&&s)return!1;var l,c=n.translateToOriginPoint(n.getCenterPoint(),i.originX,i.originY),h=n.toLocalPoint(new S.Point(e,t),i.originX,i.originY),u=n._getTransformedDimensions();return this._setLocalMouse(h,i),l=this._setObjectScale(h,i,a,s,r,o,u),n.setPositionByOrigin(c,i.originX,i.originY),l},_setObjectScale:function(e,t,r,i,n,a,s){var o=t.target,l=!1,c=!1,h=!1,u=e.x*o.scaleX/s.x,d=e.y*o.scaleY/s.y,p=o.scaleX!==u,f=o.scaleY!==d;if(t.newScaleX=u,t.newScaleY=d,S.Textbox&&"x"===n&&o instanceof S.Textbox){var g=o.width*(e.x/s.x);return g>=o.getMinWidth()&&(h=g!==o.width,o.set("width",g),h)}return a&&u<=0&&u<o.scaleX&&(l=!0,e.x=0),a&&d<=0&&d<o.scaleY&&(c=!0,e.y=0),"equally"!==n||r||i?n?"x"!==n||o.get("lockUniScaling")?"y"!==n||o.get("lockUniScaling")||c||i||o.set("scaleY",d)&&(h=f):l||r||o.set("scaleX",u)&&(h=p):(l||r||o.set("scaleX",u)&&(h=h||p),c||i||o.set("scaleY",d)&&(h=h||f)):h=this._scaleObjectEqually(e,o,t,s),l||c||this._flipObject(t,n),h},_scaleObjectEqually:function(e,t,r,i){var n,a,s,o=e.y+e.x,l=i.y*r.original.scaleY/t.scaleY+i.x*r.original.scaleX/t.scaleX,c=e.x<0?-1:1,h=e.y<0?-1:1;return a=c*Math.abs(r.original.scaleX*o/l),s=h*Math.abs(r.original.scaleY*o/l),n=a!==t.scaleX||s!==t.scaleY,t.set("scaleX",a),t.set("scaleY",s),n},_flipObject:function(e,t){e.newScaleX<0&&"y"!==t&&("left"===e.originX?e.originX="right":"right"===e.originX&&(e.originX="left")),e.newScaleY<0&&"x"!==t&&("top"===e.originY?e.originY="bottom":"bottom"===e.originY&&(e.originY="top"))},_setLocalMouse:function(e,t){var r=t.target,i=this.getZoom(),a=r.padding/i;"right"===t.originX?e.x*=-1:"center"===t.originX&&(e.x*=2*t.mouseXSign,e.x<0&&(t.mouseXSign=-t.mouseXSign)),"bottom"===t.originY?e.y*=-1:"center"===t.originY&&(e.y*=2*t.mouseYSign,e.y<0&&(t.mouseYSign=-t.mouseYSign)),n(e.x)>a?e.x<0?e.x+=a:e.x-=a:e.x=0,n(e.y)>a?e.y<0?e.y+=a:e.y-=a:e.y=0},_rotateObject:function(e,t){var n=this._currentTransform,a=n.target,s=a.translateToOriginPoint(a.getCenterPoint(),n.originX,n.originY);if(a.lockRotation)return!1;var o=i(n.ey-s.y,n.ex-s.x),l=i(t-s.y,e-s.x),c=r(l-o+n.theta),h=!0;if(a.snapAngle>0){var u=a.snapAngle,d=a.snapThreshold||u,p=Math.ceil(c/u)*u,f=Math.floor(c/u)*u;Math.abs(c-f)<d?c=f:Math.abs(c-p)<d&&(c=p)}return c<0&&(c=360+c),c%=360,a.angle===c?h=!1:(a.angle=c,a.setPositionByOrigin(s,n.originX,n.originY)),h},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,r=t.left,i=t.top,s=n(r),o=n(i);if(this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(t.ex-(r>0?0:-r),t.ey-(i>0?0:-i),s,o)),this.selectionLineWidth&&this.selectionBorderColor)if(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!a){var l=t.ex+.5-(r>0?0:s),c=t.ey+.5-(i>0?0:o);e.beginPath(),S.util.drawDashedLine(e,l,c,l+s,c,this.selectionDashArray),S.util.drawDashedLine(e,l,c+o-1,l+s,c+o-1,this.selectionDashArray),S.util.drawDashedLine(e,l,c,l,c+o,this.selectionDashArray),S.util.drawDashedLine(e,l+s-1,c,l+s-1,c+o,this.selectionDashArray),e.closePath(),e.stroke()}else S.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(t.ex+.5-(r>0?0:s),t.ey+.5-(i>0?0:o),s,o)},findTarget:function(e,t){if(!this.skipTargetFind){var r,i,n=this.getPointer(e,!0),a=this._activeObject,s=this.getActiveObjects();if(this.targets=[],s.length>1&&!t&&a===this._searchPossibleTargets([a],n))return a;if(1===s.length&&a._findTargetCorner(n))return a;if(1===s.length&&a===this._searchPossibleTargets([a],n)){if(!this.preserveObjectStacking)return a;r=a,i=this.targets,this.targets=[]}var o=this._searchPossibleTargets(this._objects,n);return e[this.altSelectionKey]&&o&&r&&o!==r&&(o=r,this.targets=i),o}},_checkTarget:function(e,t,r){if(t&&t.visible&&t.evented&&this.containsPoint(null,t,e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,r.x,r.y))return!0}},_searchPossibleTargets:function(e,t){for(var r,i,n=e.length;n--;){var a=e[n],s=a.group&&"activeSelection"!==a.group.type?this._normalizePointer(a.group,t):t;if(this._checkTarget(s,a,t)){(r=e[n]).subTargetCheck&&r instanceof S.Group&&(i=this._searchPossibleTargets(r._objects,t))&&this.targets.push(i);break}}return r},restorePointerVpt:function(e){return S.util.transformPoint(e,S.util.invertTransform(this.viewportTransform))},getPointer:function(t,r){if(this._absolutePointer&&!r)return this._absolutePointer;if(this._pointer&&r)return this._pointer;var i,n=e(t),a=this.upperCanvasEl,s=a.getBoundingClientRect(),o=s.width||0,l=s.height||0;o&&l||("top"in s&&"bottom"in s&&(l=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,r||(n=this.restorePointerVpt(n));var c=this.getRetinaScaling();return 1!==c&&(n.x/=c,n.y/=c),i=0===o||0===l?{width:1,height:1}:{width:a.width/o,height:a.height/l},{x:n.x*i.width,y:n.y*i.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),S.util.addClass(r,"upper-canvas "+e),this.wrapperEl.appendChild(r),this._copyCanvasStyle(t,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=S.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),S.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),S.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,r=this.height||e.height;S.util.setStyle(e,{position:"absolute",width:t+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=r,S.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var r=!1,i=this.getActiveObjects(),n=[],a=[],s={e:t};e.forEach((function(e){-1===i.indexOf(e)&&(r=!0,e.fire("deselected",s),a.push(e))})),i.forEach((function(t){-1===e.indexOf(t)&&(r=!0,t.fire("selected",s),n.push(t))})),e.length>0&&i.length>0?(s.selected=n,s.deselected=a,s.updated=n[0]||a[0],s.target=this._activeObject,r&&this.fire("selection:updated",s)):i.length>0?(1===i.length&&(s.target=n[0],this.fire("object:selected",s)),s.selected=n,s.target=this._activeObject,this.fire("selection:created",s)):e.length>0&&(s.deselected=a,this.fire("selection:cleared",s))},setActiveObject:function(e,t){var r=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(r,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&(!!this._discardActiveObject(t,e)&&(!e.onSelect({e:t})&&(this._activeObject=e,!0)))},_discardActiveObject:function(e,t){var r=this._activeObject;if(r){if(r.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),r=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:r,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){S.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,S.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,r){var i=this._realizeGroupTransformOnObject(e),n=this.callSuper("_toObject",e,t,r);return this._unwindGroupTransformOnObject(e,i),n},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(r){t[r]=e[r]})),this._activeObject.realizeTransform(e),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,r){var i=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,r),this._unwindGroupTransformOnObject(t,i)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),S.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),S.StaticCanvas)"prototype"!==s&&(S.Canvas[s]=S.StaticCanvas[s])}(),function(){var e={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},t=S.util.addListener,r=S.util.removeListener,i={passive:!1};function n(e,t){return e.button&&e.button===t-1}S.util.object.extend(S.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var r=this.upperCanvasEl,n=this._getEventPrefix();e(S.window,"resize",this._onResize),e(r,n+"down",this._onMouseDown),e(r,n+"move",this._onMouseMove,i),e(r,n+"out",this._onMouseOut),e(r,n+"enter",this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,i),"undefined"!=typeof eventjs&&t in eventjs&&(eventjs[t](r,"gesture",this._onGesture),eventjs[t](r,"drag",this._onDrag),eventjs[t](r,"orientation",this._onOrientationChange),eventjs[t](r,"shake",this._onShake),eventjs[t](r,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var e=this._getEventPrefix();r(S.document,e+"up",this._onMouseUp),r(S.document,"touchend",this._onTouchEnd,i),r(S.document,e+"move",this._onMouseMove,i),r(S.document,"touchmove",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var r=this;this._hoveredTargets.forEach((function(i){r.fire("mouse:out",{target:t,e:e}),i&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(e){e.isEditing&&e.hiddenTextarea.focus()}))},_onMouseEnter:function(e){this.currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||(!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(e){e.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),this._resetTransformEventData();var n=this.upperCanvasEl,a=this._getEventPrefix();t(S.document,"touchend",this._onTouchEnd,i),t(S.document,"touchmove",this._onMouseMove,i),r(n,a+"down",this._onMouseDown)},_onMouseDown:function(e){this.__onMouseDown(e),this._resetTransformEventData();var n=this.upperCanvasEl,a=this._getEventPrefix();r(n,a+"move",this._onMouseMove,i),t(S.document,a+"up",this._onMouseUp),t(S.document,a+"move",this._onMouseMove,i)},_onTouchEnd:function(e){if(!(e.touches.length>0)){this.__onMouseUp(e),this._resetTransformEventData(),this.mainTouchId=null;var n=this._getEventPrefix();r(S.document,"touchend",this._onTouchEnd,i),r(S.document,"touchmove",this._onMouseMove,i);var a=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(a.upperCanvasEl,n+"down",a._onMouseDown),a._willAddMouseDown=0}),400)}},_onMouseUp:function(e){this.__onMouseUp(e),this._resetTransformEventData();var n=this.upperCanvasEl,a=this._getEventPrefix();this._isMainEvent(e)&&(r(S.document,a+"up",this._onMouseUp),r(S.document,a+"move",this._onMouseMove,i),t(n,a+"move",this._onMouseMove,i))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!=!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,r=this._currentTransform,i=this._groupSelector,a=!1,s=!i||0===i.left&&0===i.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),!n(e,3))return n(e,2)?(this.fireMiddleClick&&this._handleEvent(e,"up",2,s),void this._resetTransformEventData()):void(this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(e):this._isMainEvent(e)&&(r&&(this._finalizeCurrentTransform(e),a=r.actionPerformed),s||(this._maybeGroupObjects(e),a||(a=this._shouldRender(t))),t&&(t.isMoving=!1),this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,s),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),a?this.requestRenderAll():s||this.renderTop()));this.fireRightClick&&this._handleEvent(e,"up",3,s)},_simpleEventHandler:function(e,t){var r=this.findTarget(t),i=this.targets,n={e:t,target:r,subTargets:i};if(this.fire(e,n),r&&r.fire(e,n),!i)return r;for(var a=0;a<i.length;a++)i[a].fire(e,n);return r},_handleEvent:function(e,t,r,i){var n=this._target,a=this.targets||[],s={e:e,target:n,subTargets:a,button:r||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+t,s),n&&n.fire("mouse"+t,s);for(var o=0;o<a.length;o++)a[o].fire("mouse"+t,s)},_finalizeCurrentTransform:function(e){var t,r=this._currentTransform,i=r.target,n={e:e,target:i,transform:r};i._scaling&&(i._scaling=!1),i.setCoords(),(r.actionPerformed||this.stateful&&i.hasStateChanged())&&(r.actionPerformed&&(t=this._addEventOptions(n,r),this._fire(t,n)),this._fire("modified",n))},_addEventOptions:function(e,t){var r,i;switch(t.action){case"scaleX":r="scaled",i="x";break;case"scaleY":r="scaled",i="y";break;case"skewX":r="skewed",i="x";break;case"skewY":r="skewed",i="y";break;case"scale":r="scaled",i="equally";break;case"rotate":r="rotated";break;case"drag":r="moved"}return e.by=i,r},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll(),this.clipTo&&S.util.clipContext(this,this.contextTop);var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){this.clipTo&&this.contextTop.restore();var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(n(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(n(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var r=this._pointer;this._previousPointer=r;var i=this._shouldRender(t),a=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):a&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:r.x,ey:r.y,top:0,left:0}),t){var s=t===this._activeObject;t.selectable&&this.setActiveObject(t,e),t!==this._activeObject||!t.__corner&&a||this._setupCurrentTransform(e,t,s)}this._handleEvent(e,"down"),(i||a)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t}),t.corner&&this.onBeforeScaleRotate(t.target)},__onMouseMove:function(e){var t,r;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var i=this._groupSelector;i?(r=this._pointer,i.left=r.x-i.ex,i.top=r.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var r=this._hoveredTarget,i=this._hoveredTargets,n=this.targets,a=Math.max(i.length,n.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:r,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var s=0;s<a;s++)this.fireSyntheticInOutEvents(n[s],t,{oldTarget:i[s],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var r=this._draggedoverTarget,i=this._hoveredTargets,n=this.targets,a=Math.max(i.length,n.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:r,evtOut:"dragleave",evtIn:"dragenter"});for(var s=0;s<a;s++)this.fireSyntheticInOutEvents(n[s],t,{oldTarget:i[s],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,r){var i,n,a,s=r.oldTarget,o=s!==e,l=r.canvasEvtIn,c=r.canvasEvtOut;o&&(i={e:t,target:e,previousTarget:s},n={e:t,target:s,nextTarget:e}),a=e&&o,s&&o&&(c&&this.fire(c,n),s.fire(r.evtOut,n)),a&&(l&&this.fire(l,i),e.fire(r.evtIn,i))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),r=this._currentTransform;r.reset=!1,r.target.isMoving=!0,r.shiftKey=e.shiftKey,r.altKey=e[this.centeredKey],this._beforeScaleTransform(e,r),this._performTransformAction(e,r,t),r.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,r){var i=r.x,n=r.y,a=t.action,s=!1,o={target:t.target,e:e,transform:t,pointer:r};"rotate"===a?(s=this._rotateObject(i,n))&&this._fire("rotating",o):"scale"===a?(s=this._onScale(e,t,i,n))&&this._fire("scaling",o):"scaleX"===a?(s=this._scaleObject(i,n,"x"))&&this._fire("scaling",o):"scaleY"===a?(s=this._scaleObject(i,n,"y"))&&this._fire("scaling",o):"skewX"===a?(s=this._skewObject(i,n,"x"))&&this._fire("skewing",o):"skewY"===a?(s=this._skewObject(i,n,"y"))&&this._fire("skewing",o):(s=this._translateObject(i,n))&&(this._fire("moving",o),this.setCursor(o.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||s},_fire:function(e,t){this.fire("object:"+e,t),t.target.fire(e,t)},_beforeScaleTransform:function(e,t){if("scale"===t.action||"scaleX"===t.action||"scaleY"===t.action){var r=this._shouldCenterTransform(t.target);(r&&("center"!==t.originX||"center"!==t.originY)||!r&&"center"===t.originX&&"center"===t.originY)&&(this._resetCurrentTransform(),t.reset=!0)}},_onScale:function(e,t,r,i){return this._isUniscalePossible(e,t.target)?(t.currentAction="scale",this._scaleObject(r,i)):(t.reset||"scale"!==t.currentAction||this._resetCurrentTransform(),t.currentAction="scaleEqually",this._scaleObject(r,i,"equally"))},_isUniscalePossible:function(e,t){return(e[this.uniScaleKey]||this.uniScaleTransform)&&!t.get("lockUniScaling")},_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var r=t.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,n=(!i||!i.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));n?this.setCursor(this.getCornerCursor(n,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){r=e.hoverCursor||r})),this.setCursor(r))},getCornerCursor:function(t,r,i){return this.actionIsDisabled(t,r,i)?this.notAllowedCursor:t in e?this._getRotatedCornerCursor(t,r,i):"mtr"===t&&r.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(e,t,r){return"mt"===e||"mb"===e?r[this.altActionKey]?t.lockSkewingX:t.lockScalingY:"ml"===e||"mr"===e?r[this.altActionKey]?t.lockSkewingY:t.lockScalingX:"mtr"===e?t.lockRotation:this._isUniscalePossible(r,t)?t.lockScalingX&&t.lockScalingY:t.lockScalingX||t.lockScalingY},_getRotatedCornerCursor:function(t,r,i){var n=Math.round(r.angle%360/45);return n<0&&(n+=8),n+=e[t],i[this.altActionKey]&&e[t]%2==0&&(n+=2),n%=8,this.cursorMap[n]}})}(),v=Math.min,m=Math.max,S.util.object.extend(S.Canvas.prototype,{_shouldGroup:function(e,t){var r=this._activeObject;return r&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(r!==t||"activeSelection"===r.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var r=this._activeObject;r.__corner||(t!==r||(t=this.findTarget(e,!0))&&t.selectable)&&(r&&"activeSelection"===r.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var r=this._activeObject,i=r._objects.slice(0);r.contains(e)?(r.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===r.size()&&this._setActiveObject(r.item(0),t)):(r.addWithUpdate(e),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,t)},_createActiveSelection:function(e,t){var r=this.getActiveObjects(),i=this._createGroup(e);this._hoveredTarget=i,this._setActiveObject(i,t),this._fireSelectionEvents(r,t)},_createGroup:function(e){var t=this._objects,r=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new S.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(e){var t,r=this._collectObjects(e);1===r.length?this.setActiveObject(r[0],e):r.length>1&&(t=new S.ActiveSelection(r.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(e){for(var t,r=[],i=this._groupSelector.ex,n=this._groupSelector.ey,a=i+this._groupSelector.left,s=n+this._groupSelector.top,o=new S.Point(v(i,a),v(n,s)),l=new S.Point(m(i,a),m(n,s)),c=!this.selectionFullyContained,h=i===a&&n===s,u=this._objects.length;u--&&!((t=this._objects[u])&&t.selectable&&t.visible&&(c&&t.intersectsWithRect(o,l)||t.isContainedWithinRect(o,l)||c&&t.containsPoint(o)||c&&t.containsPoint(l))&&(r.push(t),h)););return r.length>1&&(r=r.filter((function(t){return!t.onSelect({e:e})}))),r},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}}),S.util.object.extend(S.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",r=e.quality||1,i=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(i,e);return S.util.toDataURL(n,t,r)},toCanvasElement:function(e,t){e=e||1;var r=((t=t||{}).width||this.width)*e,i=(t.height||this.height)*e,n=this.getZoom(),a=this.width,s=this.height,o=n*e,l=this.viewportTransform,c=(l[4]-(t.left||0))*e,h=(l[5]-(t.top||0))*e,u=this.interactive,d=[o,0,0,o,c,h],p=this.enableRetinaScaling,f=S.util.createCanvasElement(),g=this.contextTop;return f.width=r,f.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=r,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),this._objects),this.viewportTransform=l,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=u,this.enableRetinaScaling=p,this.contextTop=g,f}}),S.util.object.extend(S.StaticCanvas.prototype,{loadFromDatalessJSON:function(e,t,r){return this.loadFromJSON(e,t,r)},loadFromJSON:function(e,t,r){if(e){var i="string"==typeof e?JSON.parse(e):S.util.object.clone(e),n=this,a=i.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,(function(e){n.clear(),n._setBgOverlay(i,(function(){a?n._enlivenObjects([a],(function(r){n.clipPath=r[0],n.__setupCanvas.call(n,i,e,s,t)})):n.__setupCanvas.call(n,i,e,s,t)}))}),r),this}},__setupCanvas:function(e,t,r,i){var n=this;t.forEach((function(e,t){n.insertAt(e,t)})),this.renderOnAddRemove=r,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),i&&i()},_setBgOverlay:function(e,t){var r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var i=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,r,i),this.__setBgOverlay("overlayImage",e.overlayImage,r,i),this.__setBgOverlay("backgroundColor",e.background,r,i),this.__setBgOverlay("overlayColor",e.overlay,r,i)}else t&&t()},__setBgOverlay:function(e,t,r,i){var n=this;if(!t)return r[e]=!0,void(i&&i());"backgroundImage"===e||"overlayImage"===e?S.util.enlivenObjects([t],(function(t){n[e]=t[0],r[e]=!0,i&&i()})):this["set"+S.util.string.capitalize(e,!0)](t,(function(){r[e]=!0,i&&i()}))},_enlivenObjects:function(e,t,r){e&&0!==e.length?S.util.enlivenObjects(e,(function(e){t&&t(e)}),null,r):t&&t([])},_toDataURL:function(e,t){this.clone((function(r){t(r.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,r){this.clone((function(i){r(i.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var r=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(r,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=S.util.createCanvasElement();t.width=this.width,t.height=this.height;var r=new S.Canvas(t);r.clipTo=this.clipTo,this.backgroundImage?(r.setBackgroundImage(this.backgroundImage.src,(function(){r.renderAll(),e&&e(r)})),r.backgroundImageOpacity=this.backgroundImageOpacity,r.backgroundImageStretch=this.backgroundImageStretch):e&&e(r)}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.util.object.clone,n=t.util.toFixed,a=t.util.string.capitalize,s=t.util.degreesToRadians,o=t.StaticCanvas.supports("setLineDash"),l=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var r=t.perfLimitSizeTotal,i=e.width,n=e.height,a=t.maxCacheSideLimit,s=t.minCacheSideLimit;if(i<=a&&n<=a&&i*n<=r)return i<s&&(e.width=s),n<s&&(e.height=s),e;var o=i/n,l=t.util.limitDimsByArea(o,r),c=t.util.capValue,h=c(s,l.x,a),u=c(s,l.y,a);return i>h&&(e.zoomX/=i/h,e.width=h,e.capped=!0),n>u&&(e.zoomY/=n/u,e.height=u,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),r=t.x*e.scaleX/this.scaleX,i=t.y*e.scaleY/this.scaleY;return{width:r+2,height:i+2,zoomX:e.scaleX,zoomY:e.scaleY,x:r,y:i}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var r=e._currentTransform.target,i=e._currentTransform.action;if(this===r&&i.slice&&"scale"===i.slice(0,5))return!1}var n,a,s=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,c=o.width,h=o.height,u=o.zoomX,d=o.zoomY,p=c!==this.cacheWidth||h!==this.cacheHeight,f=this.zoomX!==u||this.zoomY!==d,g=p||f,v=0,m=0,b=!1;if(p){var y=this._cacheCanvas.width,w=this._cacheCanvas.height,C=c>y||h>w;b=C||(c<.9*y||h<.9*w)&&y>l&&w>l,C&&!o.capped&&(c>l||h>l)&&(v=.1*c,m=.1*h)}return!!g&&(b?(s.width=Math.ceil(c+v),s.height=Math.ceil(h+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),n=o.x/2,a=o.y/2,this.cacheTranslationX=Math.round(s.width/2-n)+n,this.cacheTranslationY=Math.round(s.height/2-a)+a,this.cacheWidth=c,this.cacheHeight=h,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,d),this.zoomX=u,this.zoomY=d,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initClipping(e),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t;t=this.group&&!this.group._transformDone?this.calcTransformMatrix():this.calcOwnMatrix(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},toObject:function(e){var r=t.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:n(this.left,r),top:n(this.top,r),width:n(this.width,r),height:n(this.height,r),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,r),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,r),scaleX:n(this.scaleX,r),scaleY:n(this.scaleY,r),angle:n(this.angle,r),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,r),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,r),skewY:n(this.skewY,r)};return this.clipPath&&(i.clipPath=this.clipPath.toObject(e),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,i,e),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var r=t.util.getKlass(e.type).prototype;return r.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===r[t]&&delete e[t],"[object Array]"===Object.prototype.toString.call(e[t])&&"[object Array]"===Object.prototype.toString.call(r[t])&&0===e[t].length&&0===r[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,r=e.scaleY;if(this.canvas){var i=this.canvas.getZoom(),n=this.canvas.getRetinaScaling();t*=i*n,r*=i*n}return{scaleX:t,scaleY:r}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,r){var i="scaleX"===e||"scaleY"===e,n=this[e]!==r,a=!1;return i&&(r=this._constrainScale(r)),"scaleX"===e&&r<0?(this.flipX=!this.flipX,r*=-1):"scaleY"===e&&r<0?(this.flipY=!this.flipY,r*=-1):"shadow"!==e||!r||r instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",r):r=new t.Shadow(r),this[e]=r,n&&(a=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,a&&this.group.set("dirty",!0)):a&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||0===this.width&&0===this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this.clipTo&&t.util.clipContext(this,e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&e.restore(),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e){var r=this.clipPath;if(e.save(),r.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",r.absolutePositioned){var i=t.util.invertTransform(this.calcTransformMatrix());e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()},drawObject:function(e,t){var r=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):(this._renderBackground(e),this._setStrokeStyles(e,this),this._setFillStyles(e,this)),this._render(e),this._drawClipPath(e),this.fill=r,this.stroke=i},_drawClipPath:function(e){var t=this.clipPath;t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!e){var t=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-r/2,t,r)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){t.stroke&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,e.strokeStyle=t.stroke.toLive?t.stroke.toLive(e,this):t.stroke)},_setFillStyles:function(e,t){t.fill&&(e.fillStyle=t.fill.toLive?t.fill.toLive(e,this):t.fill)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t,r){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),o?e.setLineDash(t):r&&r(e))},_renderControls:function(e,r){var i,n,a,o=this.getViewportTransform(),l=this.calcTransformMatrix();n=void 0!==(r=r||{}).hasBorders?r.hasBorders:this.hasBorders,a=void 0!==r.hasControls?r.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(o,l),i=t.util.qrDecompose(l),e.save(),e.translate(i.translateX,i.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),r.forActiveSelection?(e.rotate(s(i.angle)),n&&this.drawBordersInGroup(e,i,r)):(e.rotate(s(this.angle)),n&&this.drawBorders(e,r)),a&&this.drawControls(e,r),e.restore()},_setShadow:function(e){if(this.shadow){var r,i=this.shadow,n=this.canvas,a=n&&n.viewportTransform[0]||1,s=n&&n.viewportTransform[3]||1;r=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),n&&n._isRetinaScaling()&&(a*=t.devicePixelRatio,s*=t.devicePixelRatio),e.shadowColor=i.color,e.shadowBlur=i.blur*t.browserShadowBlurConstant*(a+s)*(r.scaleX+r.scaleY)/4,e.shadowOffsetX=i.offsetX*a*r.scaleX,e.shadowOffsetY=i.offsetY*s*r.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var r=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,n=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,i,n):e.transform(1,0,0,1,i,n),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:i,offsetY:n}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._applyPatternGradientTransform(e,this.fill),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&"percentage"===this.stroke.gradientUnits?this._applyPatternForTransformedGradient(e,this.stroke):this._applyPatternGradientTransform(e,this.stroke),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,r){var i,n=this._limitCacheSize(this._getCacheCanvasDimensions()),a=t.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),o=n.x/this.scaleX/s,l=n.y/this.scaleY/s;a.width=o,a.height=l,(i=a.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(o,0),i.lineTo(o,l),i.lineTo(0,l),i.closePath(),i.translate(o/2,l/2),i.scale(n.zoomX/this.scaleX/s,n.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,r),i.fillStyle=r.toLive(e),i.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/n.zoomX,s*this.scaleY/n.zoomY),e.strokeStyle=i.createPattern(a,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var r=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),r=t.util.transformPoint(r,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,r.x+=e.offsetLeft,r.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(r,"center","center")},clone:function(e,r){var i=this.toObject(r);this.constructor.fromObject?this.constructor.fromObject(i,e):t.Object._fromObject("Object",i,e)},cloneAsImage:function(e,r){var i=this.toCanvasElement(r);return e&&e(new t.Image(i)),this},toCanvasElement:function(e){e||(e={});var r=t.util,i=r.saveObjectTransform(this),n=this.group,a=this.shadow,s=Math.abs,o=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&r.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c,h,u,d=t.util.createCanvasElement(),p=this.getBoundingRect(!0,!0),f=this.shadow,g={x:0,y:0};f&&(c=f.blur,l=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(s(f.offsetX)+c)*s(l.scaleX),g.y=2*Math.round(s(f.offsetY)+c)*s(l.scaleY)),h=p.width+g.x,u=p.height+g.y,d.width=Math.ceil(h),d.height=Math.ceil(u);var v=new t.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(v.width/2,v.height/2),"center","center");var m=this.canvas;v.add(this);var b=v.toCanvasElement(o||1,e);return this.shadow=a,this.set("canvas",m),n&&(this.group=n),this.set(i).setCoords(),v._objects=[],v.dispose(),v=null,b},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},setGradient:function(e,r){r||(r={});var i={colorStops:[]};return i.type=r.type||(r.r1||r.r2?"radial":"linear"),i.coords={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},i.gradientUnits=r.gradientUnits||"pixels",(r.r1||r.r2)&&(i.coords.r1=r.r1,i.coords.r2=r.r2),i.gradientTransform=r.gradientTransform,t.Gradient.prototype.addColorStop.call(i,r.colorStops),this.set(e,t.Gradient.forObject(this,i))},setPatternFill:function(e,r){return this.set("fill",new t.Pattern(e,r))},setShadow:function(e){return this.set("shadow",e?new t.Shadow(e):null)},setColor:function(e){return this.set("fill",e),this},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,r){r=r||this.canvas.getPointer(e);var i=new t.Point(r.x,r.y),n=this._getLeftTopCoords();return this.angle&&(i=t.util.rotatePoint(i,n,s(-this.angle))),{x:i.x-n.x,y:i.y-n.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),r(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object._fromObject=function(e,r,n,a){var s=t[e];r=i(r,!0),t.util.enlivenPatterns([r.fill,r.stroke],(function(e){void 0!==e[0]&&(r.fill=e[0]),void 0!==e[1]&&(r.stroke=e[1]),t.util.enlivenObjects([r.clipPath],(function(e){r.clipPath=e[0];var t=a?new s(r[a],r):new s(r);n&&n(t)}))}))},t.Object.__uid=0)}(t),b=S.util.degreesToRadians,y={left:-.5,center:0,right:.5},w={top:-.5,center:0,bottom:.5},S.util.object.extend(S.Object.prototype,{translateToGivenOrigin:function(e,t,r,i,n){var a,s,o,l=e.x,c=e.y;return"string"==typeof t?t=y[t]:t-=.5,"string"==typeof i?i=y[i]:i-=.5,"string"==typeof r?r=w[r]:r-=.5,"string"==typeof n?n=w[n]:n-=.5,s=n-r,((a=i-t)||s)&&(o=this._getTransformedDimensions(),l=e.x+a*o.x,c=e.y+s*o.y),new S.Point(l,c)},translateToCenterPoint:function(e,t,r){var i=this.translateToGivenOrigin(e,t,r,"center","center");return this.angle?S.util.rotatePoint(i,e,b(this.angle)):i},translateToOriginPoint:function(e,t,r){var i=this.translateToGivenOrigin(e,"center","center",t,r);return this.angle?S.util.rotatePoint(i,e,b(this.angle)):i},getCenterPoint:function(){var e=new S.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var r=this.getCenterPoint();return this.translateToOriginPoint(r,e,t)},toLocalPoint:function(e,t,r){var i,n,a=this.getCenterPoint();return i=void 0!==t&&void 0!==r?this.translateToGivenOrigin(a,"center","center",t,r):new S.Point(this.left,this.top),n=new S.Point(e.x,e.y),this.angle&&(n=S.util.rotatePoint(n,a,-b(this.angle))),n.subtractEquals(i)},setPositionByOrigin:function(e,t,r){var i=this.translateToCenterPoint(e,t,r),n=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",n.x),this.set("top",n.y)},adjustPosition:function(e){var t,r,i=b(this.angle),n=this.getScaledWidth(),a=S.util.cos(i)*n,s=S.util.sin(i)*n;t="string"==typeof this.originX?y[this.originX]:this.originX-.5,r="string"==typeof e?y[e]:e-.5,this.left+=a*(r-t),this.top+=s*(r-t),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var e=S.util.degreesToRadians,t=S.util.multiplyTransformMatrices,r=S.util.transformPoint;S.util.object.extend(S.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(e,t){this.oCoords||this.setCoords();var r=e?this.aCoords:this.oCoords;return function(e){return[new S.Point(e.tl.x,e.tl.y),new S.Point(e.tr.x,e.tr.y),new S.Point(e.br.x,e.br.y),new S.Point(e.bl.x,e.bl.y)]}(t?this.calcCoords(e):r)},intersectsWithRect:function(e,t,r,i){var n=this.getCoords(r,i);return"Intersection"===S.Intersection.intersectPolygonRectangle(n,e,t).status},intersectsWithObject:function(e,t,r){return"Intersection"===S.Intersection.intersectPolygonPolygon(this.getCoords(t,r),e.getCoords(t,r)).status||e.isContainedWithinObject(this,t,r)||this.isContainedWithinObject(e,t,r)},isContainedWithinObject:function(e,t,r){for(var i=this.getCoords(t,r),n=0,a=e._getImageLines(r?e.calcCoords(t):t?e.aCoords:e.oCoords);n<4;n++)if(!e.containsPoint(i[n],a))return!1;return!0},isContainedWithinRect:function(e,t,r,i){var n=this.getBoundingRect(r,i);return n.left>=e.x&&n.left+n.width<=t.x&&n.top>=e.y&&n.top+n.height<=t.y},containsPoint:function(e,t,r,i){t=t||this._getImageLines(i?this.calcCoords(r):r?this.aCoords:this.oCoords);var n=this._findCrossPoints(e,t);return 0!==n&&n%2==1},isOnScreen:function(e){if(!this.canvas)return!1;for(var t,r=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,n=this.getCoords(!0,e),a=0;a<4;a++)if((t=n[a]).x<=i.x&&t.x>=r.x&&t.y<=i.y&&t.y>=r.y)return!0;return!!this.intersectsWithRect(r,i,!0,e)||this._containsCenterOfCanvas(r,i,e)},_containsCenterOfCanvas:function(e,t,r){var i={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(i,null,!0,r)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,r=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,r,!0,e)||this._containsCenterOfCanvas(t,r,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var r,i,n,a=0;for(var s in t)if(!((n=t[s]).o.y<e.y&&n.d.y<e.y||n.o.y>=e.y&&n.d.y>=e.y||(n.o.x===n.d.x&&n.o.x>=e.x?i=n.o.x:(0,r=(n.d.y-n.o.y)/(n.d.x-n.o.x),i=-(e.y-0*e.x-(n.o.y-r*n.o.x))/(0-r)),i>=e.x&&(a+=1),2!==a)))break;return a},getBoundingRect:function(e,t){var r=this.getCoords(e,t);return S.util.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var r=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/r)},scaleToHeight:function(e,t){var r=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/r)},calcCoords:function(i){var n=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),s=t(a,n),o=this.getViewportTransform(),l=i?s:t(o,s),c=this._getTransformedDimensions(),h=c.x/2,u=c.y/2,d=r({x:-h,y:-u},l),p=r({x:h,y:-u},l),f=r({x:-h,y:u},l),g=r({x:h,y:u},l);if(!i){var v=this.padding,m=e(this.angle),b=S.util.cos(m),y=S.util.sin(m),w=b*v,C=y*v,_=w+C,x=w-C;v&&(d.x-=x,d.y-=_,p.x+=_,p.y-=x,f.x-=_,f.y+=x,g.x+=x,g.y+=_);var k=new S.Point((d.x+f.x)/2,(d.y+f.y)/2),T=new S.Point((p.x+d.x)/2,(p.y+d.y)/2),O=new S.Point((g.x+p.x)/2,(g.y+p.y)/2),E=new S.Point((g.x+f.x)/2,(g.y+f.y)/2),P=new S.Point(T.x+y*this.rotatingPointOffset,T.y-b*this.rotatingPointOffset)}var A={tl:d,tr:p,br:g,bl:f};return i||(A.ml=k,A.mt=T,A.mr=O,A.mb=E,A.mtr=P),A},setCoords:function(e,t){return this.oCoords=this.calcCoords(e),t||(this.aCoords=this.calcCoords(!0)),e||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){return S.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="";return!e&&this.group&&(t=this.group.transformMatrixKey(e)+"_"),t+this.top+"_"+this.left+"_"+this.scaleX+"_"+this.scaleY+"_"+this.skewX+"_"+this.skewY+"_"+this.angle+"_"+this.originX+"_"+this.originY+"_"+this.width+"_"+this.height+"_"+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){if(e)return this.calcOwnMatrix();var r=this.transformMatrixKey(),i=this.matrixCache||(this.matrixCache={});if(i.key===r)return i.value;var n=this.calcOwnMatrix();return this.group&&(n=t(this.group.calcTransformMatrix(),n)),i.key=r,i.value=n,n},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),t=this.ownMatrixCache||(this.ownMatrixCache={});if(t.key===e)return t.value;var r=this._calcTranslateMatrix();return this.translateX=r[4],this.translateY=r[5],t.key=e,t.value=S.util.composeMatrix(this),t.value},_calcDimensionsTransformMatrix:function(e,t,r){return S.util.calcDimensionsMatrix({skewX:e,skewY:t,scaleX:this.scaleX*(r&&this.flipX?-1:1),scaleY:this.scaleY*(r&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(e,t){void 0===e&&(e=this.skewX),void 0===t&&(t=this.skewY);var r,i,n=this._getNonTransformedDimensions(),a=0===e&&0===t;if(this.strokeUniform?(r=this.width,i=this.height):(r=n.x,i=n.y),a)return this._finalizeDimensions(r*this.scaleX,i*this.scaleY);var s=[{x:-(r/=2),y:-(i/=2)},{x:r,y:-i},{x:-r,y:i},{x:r,y:i}],o=S.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:t}),l=S.util.makeBoundingBoxFromPoints(s,o);return this._finalizeDimensions(l.width,l.height)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return S.util.transformPoint(t,e,!0).scalarAdd(2*this.padding)}})}(),S.util.object.extend(S.Object.prototype,{sendToBack:function(){return this.group?S.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?S.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?S.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?S.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?S.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var r=new S.Color(t),i=e+": "+r.toRgb()+"; ",n=r.getAlpha();return 1!==n&&(i+=e+"-opacity: "+n.toString()+"; "),i}return e+": none; "}var t=S.util.toFixed;S.util.object.extend(S.Object.prototype,{getSvgStyles:function(t){var r=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),d=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",r,"; ","opacity: ",c,";",u,h].join("")},getSvgSpanStyles:function(t,r){var i=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+"; ":"",n=t.strokeWidth?"stroke-width: "+t.strokeWidth+"; ":"",a=(i=i,t.fontSize?"font-size: "+t.fontSize+"px; ":""),s=t.fontStyle?"font-style: "+t.fontStyle+"; ":"",o=t.fontWeight?"font-weight: "+t.fontWeight+"; ":"",l=t.fill?e("fill",t.fill):"",c=t.stroke?e("stroke",t.stroke):"",h=this.getSvgTextDecoration(t);return h&&(h="text-decoration: "+h+"; "),[c,n,i,a,s,o,h,l,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",r?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var r=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+S.util.matrixToSVG(r)+(t||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+S.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(e){if(this.backgroundColor){var r=S.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,r),'" y="',t(-this.height/2,r),'" width="',t(this.width,r),'" height="',t(this.height,r),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var r=(t=t||{}).reviver,i=t.additionalTransform||"",n=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=n,r?r(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var r,i,n=(t=t||{}).noStyle,a=t.reviver,s=n?"":'style="'+this.getSvgStyles()+'" ',o=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,u=this.stroke,d=this.fill,p=this.shadow,f=[],g=e.indexOf("COMMON_PARTS"),v=t.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+S.Object.__uid++,i='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(a)+"</clipPath>\n"),h&&f.push("<g ",o,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),h?"":o+this.getSvgCommons()," >\n"),r=[s,c,n?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),e[g]=r,d&&d.toLive&&f.push(d.toSVG(this)),u&&u.toLive&&f.push(u.toSVG(this)),p&&f.push(p.toSVG(this)),l&&f.push(i),f.push(e.join("")),f.push("</g>\n"),h&&f.push("</g>\n"),a?a(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=S.util.object.extend;function t(t,r,i){var n={};i.forEach((function(e){n[e]=t[e]})),e(t[r],n,!0)}S.util.object.extend(S.Object.prototype,{hasStateChanged:function(e){var t="_"+(e=e||"stateProperties");return Object.keys(this[t]).length<this[e].length||!function e(t,r,i){if(t===r)return!0;if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(var n=0,a=t.length;n<a;n++)if(!e(t[n],r[n]))return!1;return!0}if(t&&"object"==typeof t){var s,o=Object.keys(t);if(!r||"object"!=typeof r||!i&&o.length!==Object.keys(r).length)return!1;for(n=0,a=o.length;n<a;n++)if("canvas"!==(s=o[n])&&!e(t[s],r[s]))return!1;return!0}}(this[t],this,!0)},saveState:function(e){var r=e&&e.propertySet||"stateProperties",i="_"+r;return this[i]?(t(this,i,this[r]),e&&e.stateProperties&&t(this,i,e.stateProperties),this):this.setupState(e)},setupState:function(e){var t=(e=e||{}).propertySet||"stateProperties";return e.propertySet=t,this["_"+t]={},this.saveState(e),this}})}(),function(){var e=S.util.degreesToRadians;S.util.object.extend(S.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var t,r,i=e.x,n=e.y;for(var a in this.__corner=0,this.oCoords)if(this.isControlVisible(a)&&("mtr"!==a||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==a&&"mr"!==a&&"mb"!==a&&"ml"!==a)&&(r=this._getImageLines(this.oCoords[a].corner),0!==(t=this._findCrossPoints({x:i,y:n},r))&&t%2==1))return this.__corner=a,a;return!1},_setCornerCoords:function(){var t,r,i=this.oCoords,n=e(45-this.angle),a=.707106*this.cornerSize,s=a*S.util.cos(n),o=a*S.util.sin(n);for(var l in i)t=i[l].x,r=i[l].y,i[l].corner={tl:{x:t-o,y:r-s},tr:{x:t+s,y:r-o},bl:{x:t-s,y:r+o},br:{x:t+o,y:r+s}}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var r=this.getCenterPoint(),i=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return t.translate(r.x,r.y),t.scale(1/n[0],1/n[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var r=this._calculateCurrentDimensions(),i=this.borderScaleFactor,n=r.x+i,a=r.y+i,s=void 0!==t.hasRotatingPoint?t.hasRotatingPoint:this.hasRotatingPoint,o=void 0!==t.hasControls?t.hasControls:this.hasControls,l=void 0!==t.rotatingPointOffset?t.rotatingPointOffset:this.rotatingPointOffset;if(e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray,null),e.strokeRect(-n/2,-a/2,n,a),s&&this.isControlVisible("mtr")&&o){var c=-a/2;e.beginPath(),e.moveTo(0,c),e.lineTo(0,c-l),e.stroke()}return e.restore(),this},drawBordersInGroup:function(e,t,r){r=r||{};var i={x:this.width,y:this.height},n=S.util.composeMatrix({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX}),a=S.util.transformPoint(i,n),s=this.strokeWidth,o=this.borderScaleFactor,l=a.x+s*(this.strokeUniform?this.canvas.getZoom():t.scaleX)+o,c=a.y+s*(this.strokeUniform?this.canvas.getZoom():t.scaleY)+o;return e.save(),this._setLineDash(e,r.borderDashArray||this.borderDashArray,null),e.strokeStyle=r.borderColor||this.borderColor,e.strokeRect(-l/2,-c/2,l,c),e.restore(),this},drawControls:function(e,t){t=t||{};var r=this._calculateCurrentDimensions(),i=r.x,n=r.y,a=t.cornerSize||this.cornerSize,s=-(i+a)/2,o=-(n+a)/2,l=void 0!==t.transparentCorners?t.transparentCorners:this.transparentCorners,c=void 0!==t.hasRotatingPoint?t.hasRotatingPoint:this.hasRotatingPoint,h=l?"stroke":"fill";return e.save(),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",e,h,s,o,t),this._drawControl("tr",e,h,s+i,o,t),this._drawControl("bl",e,h,s,o+n,t),this._drawControl("br",e,h,s+i,o+n,t),this.get("lockUniScaling")||(this._drawControl("mt",e,h,s+i/2,o,t),this._drawControl("mb",e,h,s+i/2,o+n,t),this._drawControl("mr",e,h,s+i,o+n/2,t),this._drawControl("ml",e,h,s,o+n/2,t)),c&&this._drawControl("mtr",e,h,s+i/2,o-this.rotatingPointOffset,t),e.restore(),this},_drawControl:function(e,t,r,i,n,a){if(a=a||{},this.isControlVisible(e)){var s=this.cornerSize,o=!this.transparentCorners&&this.cornerStrokeColor;switch(a.cornerStyle||this.cornerStyle){case"circle":t.beginPath(),t.arc(i+s/2,n+s/2,s/2,0,2*Math.PI,!1),t[r](),o&&t.stroke();break;default:this.transparentCorners||t.clearRect(i,n,s,s),t[r+"Rect"](i,n,s,s),o&&t.strokeRect(i,n,s,s)}}},isControlVisible:function(e){return this._getControlsVisibility()[e]},setControlVisible:function(e,t){return this._getControlsVisibility()[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),S.util.object.extend(S.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var r=function(){},i=(t=t||{}).onComplete||r,n=t.onChange||r,a=this;return S.util.animate({startValue:e.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),a.requestRenderAll(),n()},onComplete:function(){e.setCoords(),i()}}),this},fxCenterObjectV:function(e,t){var r=function(){},i=(t=t||{}).onComplete||r,n=t.onChange||r,a=this;return S.util.animate({startValue:e.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),a.requestRenderAll(),n()},onComplete:function(){e.setCoords(),i()}}),this},fxRemove:function(e,t){var r=function(){},i=(t=t||{}).onComplete||r,n=t.onChange||r,a=this;return S.util.animate({startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),a.requestRenderAll(),n()},onComplete:function(){a.remove(e),i()}}),this}}),S.util.object.extend(S.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var e,t,r=[];for(e in arguments[0])r.push(e);for(var i=0,n=r.length;i<n;i++)e=r[i],t=i!==n-1,this._animate(e,arguments[0][e],arguments[1],t)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,r,i){var n,a=this;t=t.toString(),r=r?S.util.object.clone(r):{},~e.indexOf(".")&&(n=e.split("."));var s=n?this.get(n[0])[n[1]]:this.get(e);"from"in r||(r.from=s),t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t),S.util.animate({startValue:r.from,endValue:t,byValue:r.by,easing:r.easing,duration:r.duration,abort:r.abort&&function(){return r.abort.call(a)},onChange:function(t,s,o){n?a[n[0]][n[1]]=t:a.set(e,t),i||r.onChange&&r.onChange(t,s,o)},onComplete:function(e,t,n){i||(a.setCoords(),r.onComplete&&r.onComplete(e,t,n))}})}}),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.util.object.clone,n={x1:1,x2:1,y1:1,y2:1},a=t.StaticCanvas.supports("setLineDash");function s(e,t){var r=e.origin,i=e.axis1,n=e.axis2,a=e.dimension,s=t.nearest,o=t.center,l=t.farthest;return function(){switch(this.get(r)){case s:return Math.min(this.get(i),this.get(n));case o:return Math.min(this.get(i),this.get(n))+.5*this.get(a);case l:return Math.max(this.get(i),this.get(n))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),void 0!==n[e]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){if(e.beginPath(),!this.strokeDashArray||this.strokeDashArray&&a){var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)}e.lineWidth=this.strokeWidth;var r=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r},_renderDashedStroke:function(e){var r=this.calcLinePoints();e.beginPath(),t.util.drawDashedLine(e,r.x1,r.y1,r.x2,r.y2,this.strokeDashArray),e.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return r(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,r=e*this.width*.5,i=t*this.height*.5;return{x1:r,x2:e*this.width*-.5,y1:i,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,i,n){n=n||{};var a=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),s=[a.x1||0,a.y1||0,a.x2||0,a.y2||0];i(new t.Line(s,r(a,n)))},t.Line.fromObject=function(e,r){var n=i(e,!0);n.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",n,(function(e){delete e.points,r&&r(e)}),"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=Math.PI;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*r,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,i=(this.endAngle-this.startAngle)%(2*r);if(0===i)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var n=t.util.cos(this.startAngle)*this.radius,a=t.util.sin(this.startAngle)*this.radius,s=t.util.cos(this.endAngle)*this.radius,o=t.util.sin(this.endAngle)*this.radius,l=i>r?"1":"0";e=['<path d="M '+n+" "+a," A "+this.radius+" "+this.radius," 0 ",+l+" 1"," "+s+" "+o,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,r){var i,n=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=n)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,r(new t.Circle(n))},t.Circle.fromObject=function(e,r){return t.Object._fromObject("Circle",e,r)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var r=this.width/2,i=this.height/2;e.beginPath(),t.util.drawDashedLine(e,-r,i,0,-i,this.strokeDashArray),t.util.drawDashedLine(e,0,-i,r,i,this.strokeDashArray),t.util.drawDashedLine(e,r,i,-r,i,this.strokeDashArray),e.closePath()},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,r){return t.Object._fromObject("Triangle",e,r)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,r,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,r){var i=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,r(new t.Ellipse(i))},t.Ellipse.fromObject=function(e,r){return t.Object._fromObject("Ellipse",e,r)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,r=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,n=this.height,a=-this.width/2,s=-this.height/2,o=0!==t||0!==r,l=.4477152502;e.beginPath(),e.moveTo(a+t,s),e.lineTo(a+i-t,s),o&&e.bezierCurveTo(a+i-l*t,s,a+i,s+l*r,a+i,s+r),e.lineTo(a+i,s+n-r),o&&e.bezierCurveTo(a+i,s+n-l*r,a+i-l*t,s+n,a+i-t,s+n),e.lineTo(a+t,s+n),o&&e.bezierCurveTo(a+l*t,s+n,a,s+n-l*r,a,s+n-r),e.lineTo(a,s+r),o&&e.bezierCurveTo(a,s+l*r,a+l*t,s,a+t,s),e.closePath(),this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var r=-this.width/2,i=-this.height/2,n=this.width,a=this.height;e.beginPath(),t.util.drawDashedLine(e,r,i,r+n,i,this.strokeDashArray),t.util.drawDashedLine(e,r+n,i,r+n,i+a,this.strokeDashArray),t.util.drawDashedLine(e,r+n,i+a,r,i+a,this.strokeDashArray),t.util.drawDashedLine(e,r,i+a,r,i,this.strokeDashArray),e.closePath()},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,i,n){if(!e)return i(null);n=n||{};var a=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var s=new t.Rect(r(n?t.util.object.clone(n):{},a));s.visible=s.visible&&s.width>0&&s.height>0,i(s)},t.Rect.fromObject=function(e,r){return t.Object._fromObject("Rect",e,r)})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.util.array.min,n=t.util.array.max,a=t.util.toFixed;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_setPositionDimensions:function(e){var t,r=this._calcDimensions(e);this.width=r.width,this.height=r.height,e.fromSVG||(t=this.translateToGivenOrigin({x:r.left-this.strokeWidth/2,y:r.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?r.left:t.x),void 0===e.top&&(this.top=e.fromSVG?r.top:t.y),this.pathOffset={x:r.left+this.width/2,y:r.top+this.height/2}},_calcDimensions:function(){var e=this.points,t=i(e,"x")||0,r=i(e,"y")||0;return{left:t,top:r,width:(n(e,"x")||0)-t,height:(n(e,"y")||0)-r}},toObject:function(e){return r(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],r=this.pathOffset.x,i=this.pathOffset.y,n=t.Object.NUM_FRACTION_DIGITS,s=0,o=this.points.length;s<o;s++)e.push(a(this.points[s].x-r,n),",",a(this.points[s].y-i,n)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,r=this.points.length,i=this.pathOffset.x,n=this.pathOffset.y;if(!r||isNaN(this.points[r-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-i,this.points[0].y-n);for(var a=0;a<r;a++)t=this.points[a],e.lineTo(t.x-i,t.y-n);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},_renderDashedStroke:function(e){var r,i;e.beginPath();for(var n=0,a=this.points.length;n<a;n++)r=this.points[n],i=this.points[n+1]||r,t.util.drawDashedLine(e,r.x,r.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(i,n,a){if(!i)return n(null);a||(a={});var s=t.parsePointsAttribute(i.getAttribute("points")),o=t.parseAttributes(i,t[e].ATTRIBUTE_NAMES);o.fromSVG=!0,n(new t[e](s,r(o,a)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,r){return t.Object._fromObject("Polyline",e,r,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))},_renderDashedStroke:function(e){this.callSuper("_renderDashedStroke",e),e.closePath()}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,r){return t.Object._fromObject("Polygon",e,r,"points")})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.array.min,i=t.util.array.max,n=t.util.object.extend,a=Object.prototype.toString,s=t.util.drawArc,o=t.util.toFixed,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,r){r=r||{},this.callSuper("initialize",r),e||(e=[]);var i="[object Array]"===a.call(e);this.path=i?e:e.match&&e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),t.Polyline.prototype._setPositionDimensions.call(this,r))},_renderPathCommands:function(e){var t,r,i,n=null,a=0,o=0,l=0,c=0,h=0,u=0,d=-this.pathOffset.x,p=-this.pathOffset.y;e.beginPath();for(var f=0,g=this.path.length;f<g;++f){switch((t=this.path[f])[0]){case"l":l+=t[1],c+=t[2],e.lineTo(l+d,c+p);break;case"L":l=t[1],c=t[2],e.lineTo(l+d,c+p);break;case"h":l+=t[1],e.lineTo(l+d,c+p);break;case"H":l=t[1],e.lineTo(l+d,c+p);break;case"v":c+=t[1],e.lineTo(l+d,c+p);break;case"V":c=t[1],e.lineTo(l+d,c+p);break;case"m":a=l+=t[1],o=c+=t[2],e.moveTo(l+d,c+p);break;case"M":a=l=t[1],o=c=t[2],e.moveTo(l+d,c+p);break;case"c":r=l+t[5],i=c+t[6],h=l+t[3],u=c+t[4],e.bezierCurveTo(l+t[1]+d,c+t[2]+p,h+d,u+p,r+d,i+p),l=r,c=i;break;case"C":l=t[5],c=t[6],h=t[3],u=t[4],e.bezierCurveTo(t[1]+d,t[2]+p,h+d,u+p,l+d,c+p);break;case"s":r=l+t[3],i=c+t[4],null===n[0].match(/[CcSs]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),e.bezierCurveTo(h+d,u+p,l+t[1]+d,c+t[2]+p,r+d,i+p),h=l+t[1],u=c+t[2],l=r,c=i;break;case"S":r=t[3],i=t[4],null===n[0].match(/[CcSs]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),e.bezierCurveTo(h+d,u+p,t[1]+d,t[2]+p,r+d,i+p),l=r,c=i,h=t[1],u=t[2];break;case"q":r=l+t[3],i=c+t[4],h=l+t[1],u=c+t[2],e.quadraticCurveTo(h+d,u+p,r+d,i+p),l=r,c=i;break;case"Q":r=t[3],i=t[4],e.quadraticCurveTo(t[1]+d,t[2]+p,r+d,i+p),l=r,c=i,h=t[1],u=t[2];break;case"t":r=l+t[1],i=c+t[2],null===n[0].match(/[QqTt]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),e.quadraticCurveTo(h+d,u+p,r+d,i+p),l=r,c=i;break;case"T":r=t[1],i=t[2],null===n[0].match(/[QqTt]/)?(h=l,u=c):(h=2*l-h,u=2*c-u),e.quadraticCurveTo(h+d,u+p,r+d,i+p),l=r,c=i;break;case"a":s(e,l+d,c+p,[t[1],t[2],t[3],t[4],t[5],t[6]+l+d,t[7]+c+p]),l+=t[6],c+=t[7];break;case"A":s(e,l+d,c+p,[t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+p]),l=t[6],c=t[7];break;case"z":case"Z":l=a,c=o,e.closePath()}n=t}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return n(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',this.path.map((function(e){return e.join(" ")})).join(" "),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,e)+", "+o(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_parsePath:function(){for(var e,r,i,n,a,s=[],o=[],h=t.rePathCommand,u=0,d=this.path.length;u<d;u++){for(n=(e=this.path[u]).slice(1).trim(),o.length=0;i=h.exec(n);)o.push(i[0]);a=[e.charAt(0)];for(var p=0,f=o.length;p<f;p++)r=parseFloat(o[p]),isNaN(r)||a.push(r);var g=a[0],v=l[g.toLowerCase()],m=c[g]||g;if(a.length-1>v)for(var b=1,y=a.length;b<y;b+=v)s.push([g].concat(a.slice(b,b+v))),g=m;else s.push(a)}return s},_calcDimensions:function(){for(var e,n,a,s,o=[],l=[],c=null,h=0,u=0,d=0,p=0,f=0,g=0,v=0,m=this.path.length;v<m;++v){switch((e=this.path[v])[0]){case"l":d+=e[1],p+=e[2],s=[];break;case"L":d=e[1],p=e[2],s=[];break;case"h":d+=e[1],s=[];break;case"H":d=e[1],s=[];break;case"v":p+=e[1],s=[];break;case"V":p=e[1],s=[];break;case"m":h=d+=e[1],u=p+=e[2],s=[];break;case"M":h=d=e[1],u=p=e[2],s=[];break;case"c":n=d+e[5],a=p+e[6],f=d+e[3],g=p+e[4],s=t.util.getBoundsOfCurve(d,p,d+e[1],p+e[2],f,g,n,a),d=n,p=a;break;case"C":f=e[3],g=e[4],s=t.util.getBoundsOfCurve(d,p,e[1],e[2],f,g,e[5],e[6]),d=e[5],p=e[6];break;case"s":n=d+e[3],a=p+e[4],null===c[0].match(/[CcSs]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),s=t.util.getBoundsOfCurve(d,p,f,g,d+e[1],p+e[2],n,a),f=d+e[1],g=p+e[2],d=n,p=a;break;case"S":n=e[3],a=e[4],null===c[0].match(/[CcSs]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),s=t.util.getBoundsOfCurve(d,p,f,g,e[1],e[2],n,a),d=n,p=a,f=e[1],g=e[2];break;case"q":n=d+e[3],a=p+e[4],f=d+e[1],g=p+e[2],s=t.util.getBoundsOfCurve(d,p,f,g,f,g,n,a),d=n,p=a;break;case"Q":f=e[1],g=e[2],s=t.util.getBoundsOfCurve(d,p,f,g,f,g,e[3],e[4]),d=e[3],p=e[4];break;case"t":n=d+e[1],a=p+e[2],null===c[0].match(/[QqTt]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),s=t.util.getBoundsOfCurve(d,p,f,g,f,g,n,a),d=n,p=a;break;case"T":n=e[1],a=e[2],null===c[0].match(/[QqTt]/)?(f=d,g=p):(f=2*d-f,g=2*p-g),s=t.util.getBoundsOfCurve(d,p,f,g,f,g,n,a),d=n,p=a;break;case"a":s=t.util.getBoundsOfArc(d,p,e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+p),d+=e[6],p+=e[7];break;case"A":s=t.util.getBoundsOfArc(d,p,e[1],e[2],e[3],e[4],e[5],e[6],e[7]),d=e[6],p=e[7];break;case"z":case"Z":d=h,p=u}c=e,s.forEach((function(e){o.push(e.x),l.push(e.y)})),o.push(d),l.push(p)}var b=r(o)||0,y=r(l)||0;return{left:b,top:y,width:(i(o)||0)-b,height:(i(l)||0)-y}}}),t.Path.fromObject=function(e,r){if("string"==typeof e.sourcePath){var i=e.sourcePath;t.loadSVGFromURL(i,(function(t){var i=t[0];i.setOptions(e),r&&r(i)}))}else t.Object._fromObject("Path",e,r,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,r,i){var a=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);a.fromSVG=!0,r(new t.Path(a.d,n(a,i)))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.array.min,i=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,r){t=t||{},this._objects=[],r&&this.callSuper("initialize",t),this._objects=e||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(r)this._updateObjectsACoords();else{var n=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),n||this._calcBounds(),this._updateObjectsCoords(n),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(!0,!0)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var r=e.left,i=e.top;e.set({left:r-t.x,top:i-t.y}),e.group=this,e.setCoords(!0,!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,r){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(e,r);if("canvas"===e)for(;i--;)this._objects[i]._set(e,r);t.Object.prototype._set.call(this,e,r)},toObject:function(e){var r=this.includeDefaultValues,i=this._objects.map((function(t){var i=t.includeDefaultValues;t.includeDefaultValues=r;var n=t.toObject(e);return t.includeDefaultValues=i,n})),n=t.Object.prototype.toObject.call(this,e);return n.objects=i,n},toDatalessObject:function(e){var r,i=this.sourcePath;if(i)r=i;else{var n=this.includeDefaultValues;r=this._objects.map((function(t){var r=t.includeDefaultValues;t.includeDefaultValues=n;var i=t.toDatalessObject(e);return t.includeDefaultValues=r,i}))}var a=t.Object.prototype.toDatalessObject.call(this,e);return a.objects=r,a},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var r=0,i=this._objects.length;r<i;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,r=this._objects.length;e<r;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,r=this._objects.length;t<r;t++)this._objects[t].render(e);this._drawClipPath(e)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,r=this._objects.length;t<r;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-n/2,i,n)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(e){var r=e.calcTransformMatrix(),i=t.util.qrDecompose(r),n=new t.Point(i.translateX,i.translateY);return e.flipX=!1,e.flipY=!1,e.set("scaleX",i.scaleX),e.set("scaleY",i.scaleY),e.skewX=i.skewX,e.skewY=i.skewY,e.angle=i.angle,e.setPositionByOrigin(n,"center","center"),e},_restoreObjectState:function(e){return this.realizeTransform(e),e.setCoords(),delete e.group,this},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var e=this._objects,r=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var n=new t.ActiveSelection([]);return n.set(i),n.type="activeSelection",r.remove(this),e.forEach((function(e){e.group=n,e.dirty=!0,r.add(e)})),n.canvas=r,n._objects=e,r._activeObject=n,n.setCoords(),n}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(!0,!0)})),this},_calcBounds:function(e){for(var t,r,i,n=[],a=[],s=["tr","br","bl","tl"],o=0,l=this._objects.length,c=s.length;o<l;++o)for((t=this._objects[o]).setCoords(!0),i=0;i<c;i++)r=s[i],n.push(t.oCoords[r].x),a.push(t.oCoords[r].y);this._getBounds(n,a,e)},_getBounds:function(e,n,a){var s=new t.Point(r(e),r(n)),o=new t.Point(i(e),i(n)),l=s.y||0,c=s.x||0,h=o.x-s.x||0,u=o.y-s.y||0;this.width=h,this.height=u,a||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],r=0,i=this._objects.length;r<i;r++)t.push("\t\t",this._objects[r].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],r=0,i=this._objects.length;r<i;r++)t.push("\t",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,r){var i=e.objects,n=t.util.object.clone(e,!0);delete n.objects,"string"!=typeof i?t.util.enlivenObjects(i,(function(i){t.util.enlivenObjects([e.clipPath],(function(n){var a=t.util.object.clone(e,!0);a.clipPath=n[0],delete a.objects,r&&r(new t.Group(i,a,!0))}))})):t.loadSVGFromURL(i,(function(a){var s=t.util.groupSVGElements(a,e,i);s.set(n),r&&r(s)}))})}(t),function(e){"use strict";var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,r){r=r||{},this._objects=e||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;r.originX&&(this.originX=r.originX),r.originY&&(this.originY=r.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,r),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var r=t.Object.prototype.toObject.call(this),i=new t.Group([]);if(delete r.type,i.set(r),e.forEach((function(e){e.canvas.remove(e),e.group=i})),i._objects=e,!this.canvas)return i;var n=this.canvas;return n.add(i),n._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),void 0===(r=r||{}).hasControls&&(r.hasControls=!1),void 0===r.hasRotatingPoint&&(r.hasRotatingPoint=!1),r.forActiveSelection=!0;for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(e,r);e.restore()}}),t.ActiveSelection.fromObject=function(e,r){t.util.enlivenObjects(e.objects,(function(i){delete e.objects,r&&r(new t.ActiveSelection(i,e,!0))}))})}(t),function(e){"use strict";var t=S.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?S.warn("fabric.Image is already defined."):(S.Image=S.util.createClass(S.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:S.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+S.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=S.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){S.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},setCrossOrigin:function(e){return this.crossOrigin=e,this._element.crossOrigin=e,this},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}},_renderDashedStroke:function(e){var t=-this.width/2,r=-this.height/2,i=this.width,n=this.height;e.save(),this._setStrokeStyles(e,this),e.beginPath(),S.util.drawDashedLine(e,t,r,t+i,r,this.strokeDashArray),S.util.drawDashedLine(e,t+i,r,t+i,r+n,this.strokeDashArray),S.util.drawDashedLine(e,t+i,r+n,t,r+n,this.strokeDashArray),S.util.drawDashedLine(e,t,r+n,t,r,this.strokeDashArray),e.closePath(),e.restore()},toObject:function(e){var r=[];this.filters.forEach((function(e){e&&r.push(e.toObject())}));var i=t(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(e)),{src:this.getSrc(),filters:r});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],r=[],i=-this.width/2,n=-this.height/2,a="";if(this.hasCrop()){var s=S.Object.__uid++;t.push('<clipPath id="imageCrop_'+s+'">\n','\t<rect x="'+i+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+s+')" '}if(r.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',n-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e=["\t<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=o}return t="fill"!==this.paintFirst?t.concat(e,r):t.concat(r,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,r){return S.util.loadImage(e,(function(e){this.setElement(e,r),this._setWidthHeight(),t&&t(this)}),this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),i=r.scaleX,n=r.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&n>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=n);S.filterBackend||(S.filterBackend=S.initFilterBackend());var s=S.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=a.width,c=a.height;s.width=l,s.height=c,this._element=s,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=n,S.filterBackend.applyFilters([e],a,l,c,this._element,o),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,r=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){var n=S.util.createCanvasElement();n.width=r,n.height=i,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1;return S.filterBackend||(S.filterBackend=S.initFilterBackend()),S.filterBackend.applyFilters(e,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var r=this._filterScalingX,i=this._filterScalingY,n=this.width,a=this.height,s=Math.min,o=Math.max,l=o(this.cropX,0),c=o(this.cropY,0),h=t.naturalWidth||t.width,u=t.naturalHeight||t.height,d=l*r,p=c*i,f=s(n*r,h-d),g=s(a*i,u-p),v=-n/2,m=-a/2,b=s(n,h/r-l),y=s(a,u/r-c);t&&e.drawImage(t,d,p,f,g,v,m,b,y)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(S.util.getById(e),t),S.util.addClass(this.getElement(),S.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(e,t){e&&e.length?S.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=S.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),r=this._element.width,i=this._element.height,n=1,a=1,s=0,o=0,l=0,c=0,h=this.width,u=this.height,d={width:h,height:u};return!t||"none"===t.alignX&&"none"===t.alignY?(n=h/r,a=u/i):("meet"===t.meetOrSlice&&(e=(h-r*(n=a=S.util.findScaleToFit(this._element,d)))/2,"Min"===t.alignX&&(s=-e),"Max"===t.alignX&&(s=e),e=(u-i*a)/2,"Min"===t.alignY&&(o=-e),"Max"===t.alignY&&(o=e)),"slice"===t.meetOrSlice&&(e=r-h/(n=a=S.util.findScaleToCover(this._element,d)),"Mid"===t.alignX&&(l=e/2),"Max"===t.alignX&&(l=e),e=i-u/a,"Mid"===t.alignY&&(c=e/2),"Max"===t.alignY&&(c=e),r=h/n,i=u/a)),{width:r,height:i,scaleX:n,scaleY:a,offsetLeft:s,offsetTop:o,cropX:l,cropY:c}}}),S.Image.CSS_CANVAS="canvas-img",S.Image.prototype.getSvgSrc=S.Image.prototype.getSrc,S.Image.fromObject=function(e,t){var r=S.util.object.clone(e);S.util.loadImage(r.src,(function(e,i){i?t&&t(null,i):S.Image.prototype._initFilters.call(r,r.filters,(function(i){r.filters=i||[],S.Image.prototype._initFilters.call(r,[r.resizeFilter],(function(i){r.resizeFilter=i[0],S.util.enlivenObjects([r.clipPath],(function(i){r.clipPath=i[0];var n=new S.Image(e,r);t(n)}))}))}))}),null,r.crossOrigin)},S.Image.fromURL=function(e,t,r){S.util.loadImage(e,(function(e){t&&t(new S.Image(e,r))}),null,r&&r.crossOrigin)},S.Image.ATTRIBUTE_NAMES=S.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),S.Image.fromElement=function(e,r,i){var n=S.parseAttributes(e,S.Image.ATTRIBUTE_NAMES);S.Image.fromURL(n["xlink:href"],r,t(i?S.util.object.clone(i):{},n))})}(t),S.util.object.extend(S.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(e){var t=function(){},r=(e=e||{}).onComplete||t,i=e.onChange||t,n=this;return S.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){n.rotate(e),i()},onComplete:function(){n.setCoords(),r()}}),this}}),S.util.object.extend(S.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function e(e,t){var r="precision "+t+" float;\nvoid main(){}",i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(i,r),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}S.isWebglSupported=function(t){if(S.isLikelyNode)return!1;t=t||S.WebglFilterBackend.prototype.tileSize;var r=document.createElement("canvas"),i=r.getContext("webgl")||r.getContext("experimental-webgl"),n=!1;if(i){S.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),n=S.maxTextureSize>=t;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(e(i,a[s])){S.webGlPrecision=a[s];break}}return this.isSupported=n,n},S.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var r,i=void 0!==window.performance;try{new ImageData(1,1),r=!0}catch(e){r=!1}var n="undefined"!=typeof ArrayBuffer,a="undefined"!=typeof Uint8ClampedArray;if(i&&r&&n&&a){var s=S.util.createCanvasElement(),o=new ArrayBuffer(e*t*4);if(S.forceGLPutImageData)return this.imageBuffer=o,void(this.copyGLTo2D=O);var l,c,h={imageBuffer:o,destinationWidth:e,destinationHeight:t,targetCanvas:s};s.width=e,s.height=t,l=window.performance.now(),T.call(h,this.gl,h),c=window.performance.now()-l,l=window.performance.now(),O.call(h,this.gl,h),c>window.performance.now()-l?(this.imageBuffer=o,this.copyGLTo2D=O):this.copyGLTo2D=T}},createWebGLCanvas:function(e,t){var r=S.util.createCanvasElement();r.width=e,r.height=t;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=r.getContext("webgl",i);n||(n=r.getContext("experimental-webgl",i)),n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)},applyFilters:function(e,t,r,i,n,a){var s,o=this.gl;a&&(s=this.getCachedTexture(a,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:r,sourceHeight:i,destinationWidth:r,destinationHeight:i,context:o,sourceTexture:this.createTexture(o,r,i,!s&&t),targetTexture:this.createTexture(o,r,i),originalTexture:s||this.createTexture(o,r,i,!s&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},c=o.createFramebuffer();return o.bindFramebuffer(o.FRAMEBUFFER,c),e.forEach((function(e){e&&e.applyTo(l)})),function(e){var t=e.targetCanvas,r=t.width,i=t.height,n=e.destinationWidth,a=e.destinationHeight;r===n&&i===a||(t.width=n,t.height=a)}(l),this.copyGLTo2D(o,l),o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(l.sourceTexture),o.deleteTexture(l.targetTexture),o.deleteFramebuffer(c),n.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,r,i){var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,r,0,e.RGBA,e.UNSIGNED_BYTE,null),n},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var r=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=r,r},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:T,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var r=e.getExtension("WEBGL_debug_renderer_info");if(r){var i=e.getParameter(r.UNMASKED_RENDERER_WEBGL),n=e.getParameter(r.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),n&&(t.vendor=n.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){"use strict";var e=function(){};function t(){}S.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,r,i,n){var a=n.getContext("2d");a.drawImage(t,0,0,r,i);var s={sourceWidth:r,sourceHeight:i,imageData:a.getImageData(0,0,r,i),originalEl:t,originalImageData:a.getImageData(0,0,r,i),canvasEl:n,ctx:a,filterBackend:this};return e.forEach((function(e){e.applyTo(s)})),s.imageData.width===r&&s.imageData.height===i||(n.width=s.imageData.width,n.height=s.imageData.height),a.putImageData(s.imageData,0,0),s}}}(),S.Image=S.Image||{},S.Image.filters=S.Image.filters||{},S.Image.filters.BaseFilter=S.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,r){t=t||this.fragmentSource,r=r||this.vertexSource,"highp"!==S.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+S.webGlPrecision+" float"));var i=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(i));var n=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(n));var a=e.createProgram();if(e.attachShader(a,i),e.attachShader(a,n),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(a));var s=this.getAttributeLocations(e,a),o=this.getUniformLocations(e,a)||{};return o.uStepW=e.getUniformLocation(a,"uStepW"),o.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:o}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,r){var i=t.aPosition,n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,r,i=e.context;e.passes>1?(t=e.destinationWidth,r=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===r||(i.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(i,t,r)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=S.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var r=t[e].length;r--;)if(this[e][r]!==t[e][r])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,r=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),S.Image.filters.BaseFilter.fromObject=function(e,t){var r=new S.Image.filters[e.type](e);return t&&t(r),r},function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.ColorMatrix=i(r.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,r,i,n,a,s=e.imageData.data,o=s.length,l=this.matrix,c=this.colorsOnly;for(a=0;a<o;a+=4)t=s[a],r=s[a+1],i=s[a+2],c?(s[a]=t*l[0]+r*l[1]+i*l[2]+255*l[4],s[a+1]=t*l[5]+r*l[6]+i*l[7]+255*l[9],s[a+2]=t*l[10]+r*l[11]+i*l[12]+255*l[14]):(n=s[a+3],s[a]=t*l[0]+r*l[1]+i*l[2]+n*l[3]+255*l[4],s[a+1]=t*l[5]+r*l[6]+i*l[7]+n*l[8]+255*l[9],s[a+2]=t*l[10]+r*l[11]+i*l[12]+n*l[13]+255*l[14],s[a+3]=t*l[15]+r*l[16]+i*l[17]+n*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var r=this.matrix,i=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],n=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,n)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Brightness=i(r.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,r=e.imageData.data,i=r.length,n=Math.round(255*this.brightness);for(t=0;t<i;t+=4)r[t]=r[t]+n,r[t+1]=r[t+1]+n,r[t+2]=r[t+2]+n}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.Image.filters,n=t.util.createClass;i.Convolute=n(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),r=this.type+"_"+t+"_"+(this.opaque?1:0),i=this.fragmentSource[r];return e.programCache.hasOwnProperty(r)||(e.programCache[r]=this.createProgram(e.context,i)),e.programCache[r]},applyTo2d:function(e){var t,r,i,n,a,s,o,l,c,h,u,d,p,f=e.imageData,g=f.data,v=this.matrix,m=Math.round(Math.sqrt(v.length)),b=Math.floor(m/2),y=f.width,w=f.height,C=e.ctx.createImageData(y,w),_=C.data,x=this.opaque?1:0;for(u=0;u<w;u++)for(h=0;h<y;h++){for(a=4*(u*y+h),t=0,r=0,i=0,n=0,p=0;p<m;p++)for(d=0;d<m;d++)s=h+d-b,(o=u+p-b)<0||o>=w||s<0||s>=y||(l=4*(o*y+s),c=v[p*m+d],t+=g[l]*c,r+=g[l+1]*c,i+=g[l+2]*c,x||(n+=g[l+3]*c));_[a]=t,_[a+1]=r,_[a+2]=i,_[a+3]=x?g[a+3]:n}e.imageData=C},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return r(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Grayscale=i(r.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,r,i=e.imageData.data,n=i.length,a=this.mode;for(t=0;t<n;t+=4)"average"===a?r=(i[t]+i[t+1]+i[t+2])/3:"lightness"===a?r=(Math.min(i[t],i[t+1],i[t+2])+Math.max(i[t],i[t+1],i[t+2]))/2:"luminosity"===a&&(r=.21*i[t]+.72*i[t+1]+.07*i[t+2]),i[t]=r,i[t+1]=r,i[t+2]=r},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var r=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,r)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Invert=i(r.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,r=e.imageData.data,i=r.length;for(t=0;t<i;t+=4)r[t]=255-r[t],r[t+1]=255-r[t+1],r[t+2]=255-r[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.Image.filters,n=t.util.createClass;i.Noise=n(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,r,i=e.imageData.data,n=i.length,a=this.noise;for(t=0,n=i.length;t<n;t+=4)r=(.5-Math.random())*a,i[t]+=r,i[t+1]+=r,i[t+2]+=r}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return r(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Pixelate=i(r.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,r,i,n,a,s,o,l,c,h,u,d=e.imageData,p=d.data,f=d.height,g=d.width;for(r=0;r<f;r+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(n=p[t=4*r*g+4*i],a=p[t+1],s=p[t+2],o=p[t+3],h=Math.min(r+this.blocksize,f),u=Math.min(i+this.blocksize,g),l=r;l<h;l++)for(c=i;c<u;c++)p[t=4*l*g+4*c]=n,p[t+1]=a,p[t+2]=s,p[t+3]=o},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.extend,i=t.Image.filters,n=t.util.createClass;i.RemoveColor=n(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var r,i,n,a,s=e.imageData.data,o=255*this.distance,l=new t.Color(this.color).getSource(),c=[l[0]-o,l[1]-o,l[2]-o],h=[l[0]+o,l[1]+o,l[2]+o];for(r=0;r<s.length;r+=4)i=s[r],n=s[r+1],a=s[r+2],i>c[0]&&n>c[1]&&a>c[2]&&i<h[0]&&n<h[1]&&a<h[2]&&(s[r+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,r){var i=new t.Color(this.color).getSource(),n=parseFloat(this.distance),a=[0+i[0]/255-n,0+i[1]/255-n,0+i[2]/255-n,1],s=[i[0]/255+n,i[1]/255+n,i[2]/255+n,1];e.uniform4fv(r.uLow,a),e.uniform4fv(r.uHigh,s)},toObject:function(){return r(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in n)r[a]=i(r.ColorMatrix,{type:a,matrix:n[a],mainParameter:!1,colorsOnly:!0}),t.Image.filters[a].fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,r=t.Image.filters,i=t.util.createClass;r.BlendColor=i(r.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,r=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(r)||(t=this.buildSource(this.mode),e.programCache[r]=this.createProgram(e.context,t)),e.programCache[r]},applyTo2d:function(e){var r,i,n,a,s,o,l,c=e.imageData.data,h=c.length,u=1-this.alpha;r=(l=new t.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,n=l[2]*this.alpha;for(var d=0;d<h;d+=4)switch(a=c[d],s=c[d+1],o=c[d+2],this.mode){case"multiply":c[d]=a*r/255,c[d+1]=s*i/255,c[d+2]=o*n/255;break;case"screen":c[d]=255-(255-a)*(255-r)/255,c[d+1]=255-(255-s)*(255-i)/255,c[d+2]=255-(255-o)*(255-n)/255;break;case"add":c[d]=a+r,c[d+1]=s+i,c[d+2]=o+n;break;case"diff":case"difference":c[d]=Math.abs(a-r),c[d+1]=Math.abs(s-i),c[d+2]=Math.abs(o-n);break;case"subtract":c[d]=a-r,c[d+1]=s-i,c[d+2]=o-n;break;case"darken":c[d]=Math.min(a,r),c[d+1]=Math.min(s,i),c[d+2]=Math.min(o,n);break;case"lighten":c[d]=Math.max(a,r),c[d+1]=Math.max(s,i),c[d+2]=Math.max(o,n);break;case"overlay":c[d]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255,c[d+1]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,c[d+2]=n<128?2*o*n/255:255-2*(255-o)*(255-n)/255;break;case"exclusion":c[d]=r+a-2*r*a/255,c[d+1]=i+s-2*i*s/255,c[d+2]=n+o-2*n*o/255;break;case"tint":c[d]=r+a*u,c[d+1]=i+s*u,c[d+2]=n+o*u}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,r){var i=new t.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,e.uniform4fv(r.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric,r=t.Image.filters,i=t.util.createClass;r.BlendImage=i(r.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,r)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,r=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]},applyTo2d:function(e){var r,i,n,a,s,o,l,c,h,u,d,p=e.imageData,f=e.filterBackend.resources,g=p.data,v=g.length,m=p.width,b=p.height,y=this.image;f.blendImage||(f.blendImage=t.util.createCanvasElement()),u=(h=f.blendImage).getContext("2d"),h.width!==m||h.height!==b?(h.width=m,h.height=b):u.clearRect(0,0,m,b),u.setTransform(y.scaleX,0,0,y.scaleY,y.left,y.top),u.drawImage(y._element,0,0,m,b),d=u.getImageData(0,0,m,b).data;for(var w=0;w<v;w+=4)switch(s=g[w],o=g[w+1],l=g[w+2],c=g[w+3],r=d[w],i=d[w+1],n=d[w+2],a=d[w+3],this.mode){case"multiply":g[w]=s*r/255,g[w+1]=o*i/255,g[w+2]=l*n/255,g[w+3]=c*a/255;break;case"mask":g[w+3]=a}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,r){t.Image.fromObject(e.image,(function(i){var n=t.util.object.clone(e);n.image=i,r(new t.Image.filters.BlendImage(n))}))}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=Math.pow,i=Math.floor,n=Math.sqrt,a=Math.abs,s=Math.round,o=Math.sin,l=Math.ceil,c=t.Image.filters,h=t.util.createClass;c.Resize=h(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),r=this.type+"_"+t;if(!e.programCache.hasOwnProperty(r)){var i=this.generateShader(t);e.programCache[r]=this.createProgram(e.context,i)}return e.programCache[r]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),i=new Array(r),n=1;n<=r;n++)i[n-1]=e(n*t);return i},generateShader:function(e){for(var t=new Array(e),r=this.fragmentSourceTOP,i=1;i<=e;i++)t[i-1]=i+".0 * uDelta";return r+="uniform float uTaps["+e+"];\n",r+="void main() {\n",r+="  vec4 color = texture2D(uTexture, vTexCoord);\n",r+="  float sum = 1.0;\n",t.forEach((function(e,t){r+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",r+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",r+="  sum += 2.0 * uTaps["+t+"];\n"})),r+="  gl_FragColor = color / sum;\n",r+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var r=(t*=Math.PI)/e;return o(t)/t*o(r)/r}},applyTo2d:function(e){var t=e.imageData,r=this.scaleX,i=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/i;var n,a=t.width,o=t.height,l=s(a*r),c=s(o*i);"sliceHack"===this.resizeType?n=this.sliceByTwo(e,a,o,l,c):"hermite"===this.resizeType?n=this.hermiteFastResize(e,a,o,l,c):"bilinear"===this.resizeType?n=this.bilinearFiltering(e,a,o,l,c):"lanczos"===this.resizeType&&(n=this.lanczosResize(e,a,o,l,c)),e.imageData=n},sliceByTwo:function(e,r,n,a,s){var o,l,c=e.imageData,h=!1,u=!1,d=.5*r,p=.5*n,f=t.filterBackend.resources,g=0,v=0,m=r,b=0;for(f.sliceByTwo||(f.sliceByTwo=document.createElement("canvas")),((o=f.sliceByTwo).width<1.5*r||o.height<n)&&(o.width=1.5*r,o.height=n),(l=o.getContext("2d")).clearRect(0,0,1.5*r,n),l.putImageData(c,0,0),a=i(a),s=i(s);!h||!u;)r=d,n=p,a<i(.5*d)?d=i(.5*d):(d=a,h=!0),s<i(.5*p)?p=i(.5*p):(p=s,u=!0),l.drawImage(o,g,v,r,n,m,b,d,p),g=m,v=b,b+=p;return l.getImageData(g,v,a,s)},lanczosResize:function(e,t,s,o,c){var h=e.imageData.data,u=e.ctx.createImageData(o,c),d=u.data,p=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,g=this.rcpScaleY,v=2/this.rcpScaleX,m=2/this.rcpScaleY,b=l(f*this.lanczosLobes/2),y=l(g*this.lanczosLobes/2),w={},C={},_={};return function e(l){var x,S,k,T,O,E,P,A,D,I,L;for(C.x=(l+.5)*f,_.x=i(C.x),x=0;x<c;x++){for(C.y=(x+.5)*g,_.y=i(C.y),O=0,E=0,P=0,A=0,D=0,S=_.x-b;S<=_.x+b;S++)if(!(S<0||S>=t)){I=i(1e3*a(S-C.x)),w[I]||(w[I]={});for(var B=_.y-y;B<=_.y+y;B++)B<0||B>=s||(L=i(1e3*a(B-C.y)),w[I][L]||(w[I][L]=p(n(r(I*v,2)+r(L*m,2))/1e3)),(k=w[I][L])>0&&(O+=k,E+=k*h[T=4*(B*t+S)],P+=k*h[T+1],A+=k*h[T+2],D+=k*h[T+3]))}d[T=4*(x*o+l)]=E/O,d[T+1]=P/O,d[T+2]=A/O,d[T+3]=D/O}return++l<o?e(l):u}(0)},bilinearFiltering:function(e,t,r,n,a){var s,o,l,c,h,u,d,p,f,g=0,v=this.rcpScaleX,m=this.rcpScaleY,b=4*(t-1),y=e.imageData.data,w=e.ctx.createImageData(n,a),C=w.data;for(l=0;l<a;l++)for(c=0;c<n;c++)for(h=v*c-(s=i(v*c)),u=m*l-(o=i(m*l)),f=4*(o*t+s),d=0;d<4;d++)p=y[f+d]*(1-h)*(1-u)+y[f+4+d]*h*(1-u)+y[f+b+d]*u*(1-h)+y[f+b+4+d]*h*u,C[g++]=p;return w},hermiteFastResize:function(e,t,r,s,o){for(var c=this.rcpScaleX,h=this.rcpScaleY,u=l(c/2),d=l(h/2),p=e.imageData.data,f=e.ctx.createImageData(s,o),g=f.data,v=0;v<o;v++)for(var m=0;m<s;m++){for(var b=4*(m+v*s),y=0,w=0,C=0,_=0,x=0,S=0,k=0,T=(v+.5)*h,O=i(v*h);O<(v+1)*h;O++)for(var E=a(T-(O+.5))/d,P=(m+.5)*c,A=E*E,D=i(m*c);D<(m+1)*c;D++){var I=a(P-(D+.5))/u,L=n(A+I*I);L>1&&L<-1||(y=2*L*L*L-3*L*L+1)>0&&(k+=y*p[(I=4*(D+O*t))+3],C+=y,p[I+3]<255&&(y=y*p[I+3]/250),_+=y*p[I],x+=y*p[I+1],S+=y*p[I+2],w+=y)}g[b]=_/w,g[b+1]=x/w,g[b+2]=S/w,g[b+3]=k/C}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Contrast=i(r.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,r=e.imageData.data,i=r.length,n=Math.floor(255*this.contrast),a=259*(n+255)/(255*(259-n));for(t=0;t<i;t+=4)r[t]=a*(r[t]-128)+128,r[t+1]=a*(r[t+1]-128)+128,r[t+2]=a*(r[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Saturation=i(r.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,r,i=e.imageData.data,n=i.length,a=-this.saturation;for(t=0;t<n;t+=4)r=Math.max(i[t],i[t+1],i[t+2]),i[t]+=r!==i[t]?(r-i[t])*a:0,i[t+1]+=r!==i[t+1]?(r-i[t+1])*a:0,i[t+2]+=r!==i[t+2]?(r-i[t+2])*a:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Blur=i(r.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var r,i,n=e.filterBackend.resources,a=e.imageData.width,s=e.imageData.height;n.blurLayer1||(n.blurLayer1=t.util.createCanvasElement(),n.blurLayer2=t.util.createCanvasElement()),r=n.blurLayer1,i=n.blurLayer2,r.width===a&&r.height===s||(i.width=r.width=a,i.height=r.height=s);var o,l,c,h,u=r.getContext("2d"),d=i.getContext("2d"),p=.06*this.blur*.5;for(u.putImageData(e.imageData,0,0),d.clearRect(0,0,a,s),h=-15;h<=15;h++)c=p*(l=h/15)*a+(o=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(r,c,o),u.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(h=-15;h<=15;h++)c=p*(l=h/15)*s+(o=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(r,o,c),u.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);e.ctx.drawImage(r,0,0);var f=e.ctx.getImageData(0,0,r.width,r.height);return u.globalAlpha=1,u.clearRect(0,0,r.width,r.height),f},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var r=this.chooseRightDelta();e.uniform2fv(t.delta,r)},chooseRightDelta:function(){var e,t=1,r=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?r[0]=e:r[1]=e,r}}),r.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Gamma=i(r.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],r.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,r=e.imageData.data,i=this.gamma,n=r.length,a=1/i[0],s=1/i[1],o=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,n=256;t<n;t++)this.rVals[t]=255*Math.pow(t/255,a),this.gVals[t]=255*Math.pow(t/255,s),this.bVals[t]=255*Math.pow(t/255,o);for(t=0,n=r.length;t<n;t+=4)r[t]=this.rVals[r[t]],r[t+1]=this.gVals[r[t+1]],r[t+2]=this.bVals[r[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.Composed=i(r.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,r){var i=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),n=new t.Image.filters.Composed({subFilters:i});return r&&r(n),n}}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.Image.filters,i=t.util.createClass;r.HueRotation=i(r.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,r=t.util.cos(e),i=t.util.sin(e),n=Math.sqrt(1/3)*i,a=1-r;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=r+a/3,this.matrix[1]=1/3*a-n,this.matrix[2]=1/3*a+n,this.matrix[5]=1/3*a+n,this.matrix[6]=r+1/3*a,this.matrix[7]=1/3*a-n,this.matrix[10]=1/3*a-n,this.matrix[11]=1/3*a+n,this.matrix[12]=r+1/3*a},isNeutralState:function(e){return this.calculateMatrix(),r.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),r.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(t),function(e){"use strict";var t=e.fabric||(e.fabric={}),r=t.util.object.clone;t.Text?t.warn("fabric.Text is already defined"):(t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:t.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,r,i,n,a,s,o=0,l=this._textLines.length;o<l;o++)if(("justify"===this.textAlign||o!==l-1&&!this.isEndOfWrapping(o))&&(i=0,n=this._textLines[o],(t=this.getLineWidth(o))<this.width&&(s=this.textLines[o].match(this._reSpacesAndTabs)))){r=s.length,e=(this.width-t)/r;for(var c=0,h=n.length;c<=h;c++)a=this.__charBounds[o][c],this._reSpaceAndTab.test(n[c])?(a.width+=e,a.kernedWidth+=e,a.left+=i,i+=e):a.left+=i}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,r){e.textBaseline="alphabetic",e.font=this._getFontDeclaration(t,r)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,r=this._textLines.length;t<r;t++){var i=this.getLineWidth(t);i>e&&(e=i)}return e},_renderTextLine:function(e,t,r,i,n,a){this._renderChars(e,t,r,i,n,a)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,r,i,n,a,s,o=0,l=e.fillStyle,c=this._getLeftOffset(),h=this._getTopOffset(),u=0,d=0,p=0,f=this._textLines.length;p<f;p++)if(t=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){i=this._textLines[p],r=this._getLineLeftOffset(p),d=0,u=0,n=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var g=0,v=i.length;g<v;g++)a=this.__charBounds[p][g],(s=this.getValueOfPropertyAt(p,g,"textBackgroundColor"))!==n?(e.fillStyle=n,n&&e.fillRect(c+r+u,h+o,d,t/this.lineHeight),u=a.left,d=a.width,n=s):d+=a.kernedWidth;s&&(e.fillStyle=s,e.fillRect(c+r+u,h+o,d,t/this.lineHeight)),o+=t}else o+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var r=e.fontFamily.toLowerCase();t.charWidthsCache[r]||(t.charWidthsCache[r]={});var i=t.charWidthsCache[r],n=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return i[n]||(i[n]={}),i[n]},_applyCharStyles:function(e,t,r,i,n){this._setFillStyles(t,n),this._setStrokeStyles(t,n),t.font=this._getFontDeclaration(n)},_measureChar:function(e,t,r,i){var n,a,s,o,l=this.getFontCache(t),c=r+e,h=this._getFontDeclaration(t)===this._getFontDeclaration(i),u=t.fontSize/this.CACHE_FONT_SIZE;if(r&&void 0!==l[r]&&(s=l[r]),void 0!==l[e]&&(o=n=l[e]),h&&void 0!==l[c]&&(o=(a=l[c])-s),void 0===n||void 0===s||void 0===a){var d=this.getMeasuringContext();this._setTextStyles(d,t,!0)}return void 0===n&&(o=n=d.measureText(e).width,l[e]=n),void 0===s&&h&&r&&(s=d.measureText(r).width,l[r]=s),h&&void 0===a&&(a=d.measureText(c).width,l[c]=a,o=a-s),{width:n*u,kernedWidth:o*u}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var t,r,i,n,a=0,s=this._textLines[e],o=new Array(s.length);for(this.__charBounds[e]=o,t=0;t<s.length;t++)r=s[t],n=this._getGraphemeBox(r,e,t,i),o[t]=n,a+=n.kernedWidth,i=r;return o[t]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:a,numOfSpaces:0}},_getGraphemeBox:function(e,t,r,i,n){var a,s=this.getCompleteStyleDeclaration(t,r),o=i?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,s,i,o),c=l.kernedWidth,h=l.width;0!==this.charSpacing&&(h+=a=this._getWidthOfCharSpacing(),c+=a);var u={width:h,left:0,height:s.fontSize,kernedWidth:c,deltaY:s.deltaY};if(r>0&&!n){var d=this.__charBounds[t][r-1];u.left=d.left+d.width+l.kernedWidth-l.width}return u},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],r=this.getHeightOfChar(e,0),i=1,n=t.length;i<n;i++)r=Math.max(this.getHeightOfChar(e,i),r);return this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,r=0,i=this._textLines.length;r<i;r++)e=this.getHeightOfLine(r),t+=r===i-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var r=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return e.transform(1,0,0,1,r,i),{offsetX:r,offsetY:i}},_renderTextCommon:function(e,t){e.save();for(var r=0,i=this._getLeftOffset(),n=this._getTopOffset(),a=this._applyPatternGradientTransform(e,"fillText"===t?this.fill:this.stroke),s=0,o=this._textLines.length;s<o;s++){var l=this.getHeightOfLine(s),c=l/this.lineHeight,h=this._getLineLeftOffset(s);this._renderTextLine(t,e,this._textLines[s],i+h-a.offsetX,n+r+c-a.offsetY,s),r+=l}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,t,r,i,n,a){var s,o,l,c,h=this.getHeightOfLine(a),u=-1!==this.textAlign.indexOf("justify"),d="",p=0,f=!u&&0===this.charSpacing&&this.isEmptyStyles(a);if(t.save(),n-=h*this._fontSizeFraction/this.lineHeight,f)return this._renderChar(e,t,a,0,this.textLines[a],i,n,h),void t.restore();for(var g=0,v=r.length-1;g<=v;g++)c=g===v||this.charSpacing,d+=r[g],l=this.__charBounds[a][g],0===p?(i+=l.kernedWidth-l.width,p+=l.width):p+=l.kernedWidth,u&&!c&&this._reSpaceAndTab.test(r[g])&&(c=!0),c||(s=s||this.getCompleteStyleDeclaration(a,g),o=this.getCompleteStyleDeclaration(a,g+1),c=this._hasStyleChanged(s,o)),c&&(this._renderChar(e,t,a,g,d,i,n,h),d="",s=o,i+=p,p=0);t.restore()},_renderChar:function(e,t,r,i,n,a,s){var o=this._getStyleDeclaration(r,i),l=this.getCompleteStyleDeclaration(r,i),c="fillText"===e&&l.fill,h="strokeText"===e&&l.stroke&&l.strokeWidth;(h||c)&&(o&&t.save(),this._applyCharStyles(e,t,r,i,l),o&&o.textBackgroundColor&&this._removeShadow(t),o&&o.deltaY&&(s+=o.deltaY),c&&t.fillText(n,a,s),h&&t.strokeText(n,a,s),o&&t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,r){var i=this.get2DCursorLocation(e,!0),n=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),a=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),s={fontSize:n*r.size,deltaY:a+n*r.baseline};return this.setSelectionStyles(s,e,t),this},_hasStyleChanged:function(e,t){return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.deltaY!==t.deltaY},_hasStyleChangedForSvg:function(e,t){return this._hasStyleChanged(e,t)||e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough},_getLineLeftOffset:function(e){var t=this.getLineWidth(e);return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:"justify-center"===this.textAlign&&this.isEndOfWrapping(e)?(this.width-t)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(e)?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){return this.__lineWidths[e]?this.__lineWidths[e]:(t=""===this._textLines[e]?0:this.measureLine(e).width,this.__lineWidths[e]=t,t);var t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,r){var i=this._getStyleDeclaration(e,t);return i&&void 0!==i[r]?i[r]:this[r]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var r,i,n,a,s,o,l,c,h,u,d,p,f,g,v,m,b=this._getLeftOffset(),y=this._getTopOffset(),w=this._getWidthOfCharSpacing(),C=0,_=this._textLines.length;C<_;C++)if(r=this.getHeightOfLine(C),this[t]||this.styleHas(t,C)){l=this._textLines[C],g=r/this.lineHeight,a=this._getLineLeftOffset(C),u=0,d=0,c=this.getValueOfPropertyAt(C,0,t),m=this.getValueOfPropertyAt(C,0,"fill"),h=y+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(C,0),s=this.getValueOfPropertyAt(C,0,"deltaY");for(var x=0,S=l.length;x<S;x++)p=this.__charBounds[C][x],f=this.getValueOfPropertyAt(C,x,t),v=this.getValueOfPropertyAt(C,x,"fill"),n=this.getHeightOfChar(C,x),o=this.getValueOfPropertyAt(C,x,"deltaY"),(f!==c||v!==m||n!==i||o!==s)&&d>0?(e.fillStyle=m,c&&m&&e.fillRect(b+a+u,h+this.offsets[t]*i+s,d,this.fontSize/15),u=p.left,d=p.width,c=f,m=v,i=n,s=o):d+=p.kernedWidth;e.fillStyle=v,f&&v&&e.fillRect(b+a+u,h+this.offsets[t]*i+s,d-w,this.fontSize/15),y+=r}else y+=r;this._removeShadow(e)}},_getFontDeclaration:function(e,r){var i=e||this,n=this.fontFamily,a=t.Text.genericFonts.indexOf(n.toLowerCase())>-1,s=void 0===n||n.indexOf("'")>-1||n.indexOf(",")>-1||n.indexOf('"')>-1||a?i.fontFamily:'"'+i.fontFamily+'"';return[t.isLikelyNode?i.fontWeight:i.fontStyle,t.isLikelyNode?i.fontStyle:i.fontWeight,r?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",s].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var r=e.split(this._reNewline),i=new Array(r.length),n=["\n"],a=[],s=0;s<r.length;s++)i[s]=t.util.string.graphemeSplit(r[s]),a=a.concat(i[s],n);return a.pop(),{_unwrappedLines:i,lines:r,graphemeText:a,graphemeLines:i}},toObject:function(e){var t=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(e),i=this.callSuper("toObject",t);return i.styles=r(this.styles,!0),i},set:function(e,t){this.callSuper("set",e,t);var r=!1;if("object"==typeof e)for(var i in e)r=r||-1!==this._dimensionAffectingProps.indexOf(i);else r=-1!==this._dimensionAffectingProps.indexOf(e);return r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,i,n){if(!e)return i(null);var a=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),s=a.textAnchor||"left";if((n=t.util.object.extend(n?r(n):{},a)).top=n.top||0,n.left=n.left||0,a.textDecoration){var o=a.textDecoration;-1!==o.indexOf("underline")&&(n.underline=!0),-1!==o.indexOf("overline")&&(n.overline=!0),-1!==o.indexOf("line-through")&&(n.linethrough=!0),delete n.textDecoration}"dx"in a&&(n.left+=a.dx),"dy"in a&&(n.top+=a.dy),"fontSize"in n||(n.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=n.strokeWidth;n.strokeWidth=0;var h=new t.Text(l,n),u=h.getScaledHeight()/h.height,d=((h.height+h.strokeWidth)*h.lineHeight-h.height)*u,p=h.getScaledHeight()+d,f=0;"center"===s&&(f=h.getScaledWidth()/2),"right"===s&&(f=h.getScaledWidth()),h.set({left:h.left-f,top:h.top-(p-h.fontSize*(.07+h._fontSizeFraction))/h.lineHeight,strokeWidth:void 0!==c?c:1}),i(h)},t.Text.fromObject=function(e,r){return t.Object._fromObject("Text",e,r,"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text))}(t),S.util.object.extend(S.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;var t=void 0===e?this.styles:{line:this.styles[e]};for(var r in t)for(var i in t[r])for(var n in t[r][i])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if(void 0!==t&&!this.styles[t])return!1;var r=void 0===t?this.styles:{0:this.styles[t]};for(var i in r)for(var n in r[i])if(void 0!==r[i][n][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,r,i=this.styles,n=0,a=!0,s=0;for(var o in i){for(var l in t=0,i[o]){var c;n++,(c=i[o][l]).hasOwnProperty(e)?(r?c[e]!==r&&(a=!1):r=c[e],c[e]===this[e]&&delete c[e]):a=!1,0!==Object.keys(c).length?t++:delete i[o][l]}0===t&&delete i[o]}for(var h=0;h<this._textLines.length;h++)s+=this._textLines[h].length;a&&n===s&&(this[e]=r,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,r,i,n=this.styles;for(r in n){for(i in t=n[r])delete t[i][e],0===Object.keys(t[i]).length&&delete t[i];0===Object.keys(t).length&&delete n[r]}}},_extendStyles:function(e,t){var r=this.get2DCursorLocation(e);this._getLineStyle(r.lineIndex)||this._setLineStyle(r.lineIndex),this._getStyleDeclaration(r.lineIndex,r.charIndex)||this._setStyleDeclaration(r.lineIndex,r.charIndex,{}),S.util.object.extend(this._getStyleDeclaration(r.lineIndex,r.charIndex),t)},get2DCursorLocation:function(e,t){void 0===e&&(e=this.selectionStart);for(var r=t?this._unwrappedTextLines:this._textLines,i=r.length,n=0;n<i;n++){if(e<=r[n].length)return{lineIndex:n,charIndex:e};e-=r[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:r[n-1].length<e?r[n-1].length:e}},getSelectionStyles:function(e,t,r){void 0===e&&(e=this.selectionStart||0),void 0===t&&(t=this.selectionEnd||e);for(var i=[],n=e;n<t;n++)i.push(this.getStyleAtPosition(n,r));return i},getStyleAtPosition:function(e,t){var r=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(r.lineIndex,r.charIndex):this._getStyleDeclaration(r.lineIndex,r.charIndex))||{}},setSelectionStyles:function(e,t,r){void 0===t&&(t=this.selectionStart||0),void 0===r&&(r=this.selectionEnd||t);for(var i=t;i<r;i++)this._extendStyles(i,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var r=this.styles&&this.styles[e];return r?r[t]:null},getCompleteStyleDeclaration:function(e,t){for(var r,i=this._getStyleDeclaration(e,t)||{},n={},a=0;a<this._styleProperties.length;a++)n[r=this._styleProperties[a]]=void 0===i[r]?this[r]:i[r];return n},_setStyleDeclaration:function(e,t,r){this.styles[e][t]=r},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}S.IText=S.util.createClass(S.Text,S.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,r=this.height+4;e.clearRect(-t/2,-r/2,t,r)},_getCursorBoundaries:function(e){void 0===e&&(e=this.selectionStart);var t=this._getLeftOffset(),r=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e);return{left:t,top:r,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,r,i,n,a=0,s=0,o=this.get2DCursorLocation(e);i=o.charIndex,r=o.lineIndex;for(var l=0;l<r;l++)a+=this.getHeightOfLine(l);t=this._getLineLeftOffset(r);var c=this.__charBounds[r][i];return c&&(s=c.left),0!==this.charSpacing&&i===this._textLines[r].length&&(s-=this._getWidthOfCharSpacing()),n={top:a,left:t+(s>0?s:0)},this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(e,t){var r=this.get2DCursorLocation(),i=r.lineIndex,n=r.charIndex>0?r.charIndex-1:0,a=this.getValueOfPropertyAt(i,n,"fontSize"),s=this.scaleX*this.canvas.getZoom(),o=this.cursorWidth/s,l=e.topOffset,c=this.getValueOfPropertyAt(i,n,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.getValueOfPropertyAt(i,n,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-o/2,l+e.top+c,o,a)},renderSelection:function(e,t){for(var r=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=-1!==this.textAlign.indexOf("justify"),a=this.get2DCursorLocation(r),s=this.get2DCursorLocation(i),o=a.lineIndex,l=s.lineIndex,c=a.charIndex<0?0:a.charIndex,h=s.charIndex<0?0:s.charIndex,u=o;u<=l;u++){var d,p=this._getLineLeftOffset(u)||0,f=this.getHeightOfLine(u),g=0,v=0;if(u===o&&(g=this.__charBounds[o][c].left),u>=o&&u<l)v=n&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===l)if(0===h)v=this.__charBounds[l][h].left;else{var m=this._getWidthOfCharSpacing();v=this.__charBounds[l][h-1].left+this.__charBounds[l][h-1].width-m}d=f,(this.lineHeight<1||u===l&&this.lineHeight>1)&&(f/=this.lineHeight),this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",t.fillRect(e.left+p+g,e.top+e.topOffset+f,v-g,1)):(t.fillStyle=this.selectionColor,t.fillRect(e.left+p+g,e.top+e.topOffset,v-g,f)),e.topOffset+=d}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),S.IText.fromObject=function(t,r){if(e(t),t.styles)for(var i in t.styles)for(var n in t.styles[i])e(t.styles[i][n]);S.Object._fromObject("IText",t,r,"text")}}(),C=S.util.object.clone,S.util.object.extend(S.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],S.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,r,i){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:r,onComplete:function(){n.isAborted||e[i]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,r=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),r)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t},findWordBoundaryRight:function(e){var t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,r=e-1;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t},findLineBoundaryRight:function(e){for(var t=0,r=e;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t},searchWordBoundary:function(e,t){for(var r=this._text,i=this._reSpace.test(r[e])?e-1:e,n=r[i],a=S.reNonWord;!a.test(n)&&i>0&&i<r.length;)n=r[i+=t];return a.test(n)&&(i+=1===t?0:1),i},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),r=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){var t=this.getSelectionStartFromPointer(e.e),r=this.selectionStart,i=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&r!==i||r!==t&&i!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,r){var i=r.slice(0,e),n=S.util.string.graphemeSplit(i).length;if(e===t)return{selectionStart:n,selectionEnd:n};var a=r.slice(e,t);return{selectionStart:n,selectionEnd:n+S.util.string.graphemeSplit(a).length}},fromGraphemeToStringSelection:function(e,t,r){var i=r.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+r.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),i=r.lineIndex,n=r.charIndex,a=this.getValueOfPropertyAt(i,n,"fontSize")*this.lineHeight,s=t.leftOffset,o=this.calcTransformMatrix(),l={x:t.left+s,y:t.top+t.topOffset+a},c=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,u=h.width/c,d=h.height/c,p=u-a,f=d-a,g=h.clientWidth/u,v=h.clientHeight/d;return l=S.util.transformPoint(l,o),(l=S.util.transformPoint(l,this.canvas.viewportTransform)).x*=g,l.y*=v,l.x<0&&(l.x=0),l.x>p&&(l.x=p),l.y<0&&(l.y=0),l.y>f&&(l.y=f),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var r,i,n=this.get2DCursorLocation(e,!0),a=this.get2DCursorLocation(t,!0),s=n.lineIndex,o=n.charIndex,l=a.lineIndex,c=a.charIndex;if(s!==l){if(this.styles[s])for(r=o;r<this._unwrappedTextLines[s].length;r++)delete this.styles[s][r];if(this.styles[l])for(r=c;r<this._unwrappedTextLines[l].length;r++)(i=this.styles[l][r])&&(this.styles[s]||(this.styles[s]={}),this.styles[s][o+r-c]=i);for(r=s+1;r<=l;r++)delete this.styles[r];this.shiftLineStyles(l,s-l)}else if(this.styles[s]){i=this.styles[s];var h,u,d=c-o;for(r=o;r<c;r++)delete i[r];for(u in this.styles[s])(h=parseInt(u,10))>=c&&(i[h-d]=i[u],delete i[u])}},shiftLineStyles:function(e,t){var r=C(this.styles);for(var i in this.styles){var n=parseInt(i,10);n>e&&(this.styles[n+t]=r[n],r[n-t]||delete this.styles[n])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,t,r,i){var n,a={},s=!1,o=this._unwrappedTextLines[e].length===t;for(var l in r||(r=1),this.shiftLineStyles(e,r),this.styles[e]&&(n=this.styles[e][0===t?t:t-1]),this.styles[e]){var c=parseInt(l,10);c>=t&&(s=!0,a[c-t]=this.styles[e][l],o&&0===t||delete this.styles[e][l])}var h=!1;for(s&&!o&&(this.styles[e+r]=a,h=!0),h&&r--;r>0;)i&&i[r-1]?this.styles[e+r]={0:C(i[r-1])}:n?this.styles[e+r]={0:C(n)}:delete this.styles[e+r],r--;this._forceClearCache=!0},insertCharStyleObject:function(e,t,r,i){this.styles||(this.styles={});var n=this.styles[e],a=n?C(n):{};for(var s in r||(r=1),a){var o=parseInt(s,10);o>=t&&(n[o+r]=a[o],a[o-r]||delete n[o])}if(this._forceClearCache=!0,i)for(;r--;)Object.keys(i[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=C(i[r]));else if(n)for(var l=n[t?t-1:1];l&&r--;)this.styles[e][t+r]=C(l)},insertNewStyleBlock:function(e,t,r){for(var i=this.get2DCursorLocation(t,!0),n=[0],a=0,s=0;s<e.length;s++)"\n"===e[s]?n[++a]=0:n[a]++;for(n[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,n[0],r),r=r&&r.slice(n[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+n[0],a),s=1;s<a;s++)n[s]>0?this.insertCharStyleObject(i.lineIndex+s,0,n[s],r):r&&(this.styles[i.lineIndex+s][0]=r[0]),r=r&&r.slice(n[s]+1);n[s]>0&&this.insertCharStyleObject(i.lineIndex+s,0,n[s],r)},setSelectionStartEndWithShift:function(e,t,r){r<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?"right"===this._selectionDirection?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=r)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}}),S.util.object.extend(S.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(e.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),r=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t=this.getLocalPointer(e),r=0,i=0,n=0,a=0,s=0,o=0,l=this._textLines.length;o<l&&n<=t.y;o++)n+=this.getHeightOfLine(o)*this.scaleY,s=o,o>0&&(a+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));i=this._getLineLeftOffset(s)*this.scaleX;for(var c=0,h=this._textLines[s].length;c<h&&(r=i,(i+=this.__charBounds[s][c].kernedWidth*this.scaleX)<=t.x);c++)a++;return this._getNewSelectionStartFromOffset(t,r,i,a,h)},_getNewSelectionStartFromOffset:function(e,t,r,i,n){var a=e.x-t,s=r-e.x,o=i+(s>a||s<0?0:1);return this.flipX&&(o=n-o),o>this._text.length&&(o=this._text.length),o}}),S.util.object.extend(S.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=S.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+e.fontSize+";",S.document.body.appendChild(this.hiddenTextarea),S.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),S.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),S.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),S.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(S.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing&&!this.inCompositionMode){if(e.keyCode in this.keysMap)this[this.keysMap[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var r,i,n,a,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,o=this._text.length,l=s.length,c=l-o,h=this.selectionStart,u=this.selectionEnd,d=h!==u;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var p,f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=h>f.selectionStart;d?(r=this._text.slice(h,u),c+=u-h):l<o&&(r=g?this._text.slice(u+c,u):this._text.slice(h,h-c)),i=s.slice(f.selectionEnd-c,f.selectionEnd),r&&r.length&&(i.length&&(p=this.getSelectionStyles(h,h+1,!0),p=i.map((function(){return p[0]}))),d?(n=h,a=u):g?(n=u-r.length,a=u):(n=u,a=u+r.length),this.removeStyleFromTo(n,a)),i.length&&(t&&i.join("")===S.copiedText&&!S.disableStyleCopyPaste&&(p=S.copiedTextStyle),this.insertNewStyleBlock(i,h,p)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(S.copiedText=this.getSelectedText(),S.disableStyleCopyPaste?S.copiedTextStyle=null:S.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||S.window.clipboardData},_getWidthBeforeCursor:function(e,t){var r,i=this._getLineLeftOffset(e);return t>0&&(i+=(r=this.__charBounds[e][t-1]).left+r.width),i},getDownCursorOffset:function(e,t){var r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),n=i.lineIndex;if(n===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-r;var a=i.charIndex,s=this._getWidthBeforeCursor(n,a),o=this._getIndexOnLine(n+1,s);return this._textLines[n].slice(a).length+o+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var r=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(r),n=i.lineIndex;if(0===n||e.metaKey||33===e.keyCode)return-r;var a=i.charIndex,s=this._getWidthBeforeCursor(n,a),o=this._getIndexOnLine(n-1,s),l=this._textLines[n].slice(0,a),c=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+o-l.length+(1-c)},_getIndexOnLine:function(e,t){for(var r,i,n=this._textLines[e],a=this._getLineLeftOffset(e),s=0,o=0,l=n.length;o<l;o++)if((a+=r=this.__charBounds[e][o].width)>t){i=!0;var c=a-r,h=a,u=Math.abs(c-t);s=Math.abs(h-t)<u?o:o-1;break}return i||(s=n.length-1),s},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var r=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,r){var i;if(e.altKey)i=this["findWordBoundary"+r](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===r?-1:1,!0;i=this["findLineBoundary"+r](this[t])}if(void 0!==typeof i&&this[t]!==i)return this[t]=i,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var r="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?r+="Shift":r+="outShift",this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){void 0===t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,r,i){void 0===i&&(i=r),i>r&&this.removeStyleFromTo(r,i);var n=S.util.string.graphemeSplit(e);this.insertNewStyleBlock(n,r,t),this._text=[].concat(this._text.slice(0,r),n,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),_=S.util.toFixed,x=/  +/g,S.util.object.extend(S.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var r,i=[],n=[],a=e;this._setSVGBg(n);for(var s=0,o=this._textLines.length;s<o;s++)r=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(n,s,t+r,a),this._setSVGTextLineText(i,s,t+r,a),a+=this.getHeightOfLine(s);return{textSpans:i,textBgRects:n}},_createTextCharSpan:function(e,t,r,i){var n=e!==e.trim()||e.match(x),a=this.getSvgSpanStyles(t,n),s=a?'style="'+a+'"':"",o=t.deltaY,l="",c=S.Object.NUM_FRACTION_DIGITS;return o&&(l=' dy="'+_(o,c)+'" '),['<tspan x="',_(r,c),'" y="',_(i,c),'" ',l,s,">",S.util.string.escapeXml(e),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,r,i){var n,a,s,o,l,c=this.getHeightOfLine(t),h=-1!==this.textAlign.indexOf("justify"),u="",d=0,p=this._textLines[t];i+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var f=0,g=p.length-1;f<=g;f++)l=f===g||this.charSpacing,u+=p[f],s=this.__charBounds[t][f],0===d?(r+=s.kernedWidth-s.width,d+=s.width):d+=s.kernedWidth,h&&!l&&this._reSpaceAndTab.test(p[f])&&(l=!0),l||(n=n||this.getCompleteStyleDeclaration(t,f),a=this.getCompleteStyleDeclaration(t,f+1),l=this._hasStyleChangedForSvg(n,a)),l&&(o=this._getStyleDeclaration(t,f)||{},e.push(this._createTextCharSpan(u,o,r,i)),u="",n=a,r+=d,d=0)},_pushTextBgRect:function(e,t,r,i,n,a){var s=S.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(t),' x="',_(r,s),'" y="',_(i,s),'" width="',_(n,s),'" height="',_(a,s),'"></rect>\n')},_setSVGTextLineBg:function(e,t,r,i){for(var n,a,s=this._textLines[t],o=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,h=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),u=0,d=s.length;u<d;u++)n=this.__charBounds[t][u],(a=this.getValueOfPropertyAt(t,u,"textBackgroundColor"))!==h?(h&&this._pushTextBgRect(e,h,r+c,i,l,o),c=n.left,l=n.width,h=a):l+=n.kernedWidth;a&&this._pushTextBgRect(e,a,r+c,i,l,o)},_getFillAttributes:function(e){var t=e&&"string"==typeof e?new S.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,r=0,i=0;i<e;i++)r+=this.getHeightOfLine(i);return t=this.getHeightOfLine(i),{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return S.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}}),function(e){"use strict";var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,r=0,i=0,n={},a=0;a<e.graphemeLines.length;a++)"\n"===e.graphemeText[i]&&a>0?(r=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&a>0&&(r++,i++),n[a]={line:t,offset:r},i+=e.graphemeLines[a].length,r+=e.graphemeLines[a].length;return n},styleHas:function(e,r){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[r];i&&(r=i.line)}return t.Text.prototype.styleHas.call(this,e,r)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,r,i=0,n=!1,a=this._styleMap[e],s=this._styleMap[e+1];for(var o in a&&(e=a.line,i=a.offset),s&&(n=s.line===e,t=s.offset),r=void 0===e?this.styles:{line:this.styles[e]})for(var l in r[o])if(l>=i&&(!n||l<t))for(var c in r[o][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[e];if(!r)return null;e=r.line,t=r.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,r){var i=this._styleMap[e];e=i.line,t=i.offset+t,this.styles[e][t]=r},_deleteStyleDeclaration:function(e,t){var r=this._styleMap[e];e=r.line,t=r.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var r,i=[];for(this.isWrapping=!0,r=0;r<e.length;r++)i=i.concat(this._wrapLine(e[r],r,t));return this.isWrapping=!1,i},_measureWord:function(e,t,r){var i,n=0;r=r||0;for(var a=0,s=e.length;a<s;a++){n+=this._getGraphemeBox(e[a],t,a+r,i,!0).kernedWidth,i=e[a]}return n},_wrapLine:function(e,r,i,n){var a=0,s=this.splitByGrapheme,o=[],l=[],c=s?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),h="",u=0,d=s?"":" ",p=0,f=0,g=0,v=!0,m=s?0:this._getWidthOfCharSpacing();n=n||0;0===c.length&&c.push([]),i-=n;for(var b=0;b<c.length;b++)h=s?c[b]:t.util.string.graphemeSplit(c[b]),p=this._measureWord(h,r,u),u+=h.length,(a+=f+p-m)>=i&&!v?(o.push(l),l=[],a=p,v=!0):a+=m,v||s||l.push(d),l=l.concat(h),f=this._measureWord([d],r,u),u++,v=!1,p>g&&(g=p);return b&&o.push(l),g+n>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+n),o},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var r=t.Text.prototype._splitTextIntoLines.call(this,e),i=this._wrapText(r.lines,this.width),n=new Array(i.length),a=0;a<i.length;a++)n[a]=i[a].join("");return r.lines=n,r.graphemeLines=i,r},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,r){return t.Object._fromObject("Textbox",e,r,"text")}}(t)}).call(this,r(10).Buffer)},function(e,t,r){"use strict";(function(e,r){
/*!
 * Vue.js v2.6.12
 * (c) 2014-2020 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function n(e){return null==e}function a(e){return null!=e}function s(e){return!0===e}function o(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return null!==e&&"object"==typeof e}var c=Object.prototype.toString;function h(e){return"[object Object]"===c.call(e)}function u(e){return"[object RegExp]"===c.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||h(e)&&e.toString===c?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function v(e,t){for(var r=Object.create(null),i=e.split(","),n=0;n<i.length;n++)r[i[n]]=!0;return t?function(e){return r[e.toLowerCase()]}:function(e){return r[e]}}var m=v("slot,component",!0),b=v("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}var w=Object.prototype.hasOwnProperty;function C(e,t){return w.call(e,t)}function _(e){var t=Object.create(null);return function(r){return t[r]||(t[r]=e(r))}}var x=/-(\w)/g,S=_((function(e){return e.replace(x,(function(e,t){return t?t.toUpperCase():""}))})),k=_((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),T=/\B([A-Z])/g,O=_((function(e){return e.replace(T,"-$1").toLowerCase()}));var E=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function r(r){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,r):e.call(t)}return r._length=e.length,r};function P(e,t){t=t||0;for(var r=e.length-t,i=new Array(r);r--;)i[r]=e[r+t];return i}function A(e,t){for(var r in t)e[r]=t[r];return e}function D(e){for(var t={},r=0;r<e.length;r++)e[r]&&A(t,e[r]);return t}function I(e,t,r){}var L=function(e,t,r){return!1},B=function(e){return e};function R(e,t){if(e===t)return!0;var r=l(e),i=l(t);if(!r||!i)return!r&&!i&&String(e)===String(t);try{var n=Array.isArray(e),a=Array.isArray(t);if(n&&a)return e.length===t.length&&e.every((function(e,r){return R(e,t[r])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(n||a)return!1;var s=Object.keys(e),o=Object.keys(t);return s.length===o.length&&s.every((function(r){return R(e[r],t[r])}))}catch(e){return!1}}function M(e,t){for(var r=0;r<e.length;r++)if(R(e[r],t))return r;return-1}function j(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var F=["component","directive","filter"],$=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],N={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:I,parsePlatformTagName:B,mustUseProp:L,async:!0,_lifecycleHooks:$},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function U(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function H(e,t,r,i){Object.defineProperty(e,t,{value:r,enumerable:!!i,writable:!0,configurable:!0})}var W=new RegExp("[^"+z.source+".$_\\d]");var V,Y="__proto__"in{},X="undefined"!=typeof window,G="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,q=G&&WXEnvironment.platform.toLowerCase(),K=X&&window.navigator.userAgent.toLowerCase(),J=K&&/msie|trident/.test(K),Z=K&&K.indexOf("msie 9.0")>0,Q=K&&K.indexOf("edge/")>0,ee=(K&&K.indexOf("android"),K&&/iphone|ipad|ipod|ios/.test(K)||"ios"===q),te=(K&&/chrome\/\d+/.test(K),K&&/phantomjs/.test(K),K&&K.match(/firefox\/(\d+)/)),re={}.watch,ie=!1;if(X)try{var ne={};Object.defineProperty(ne,"passive",{get:function(){ie=!0}}),window.addEventListener("test-passive",null,ne)}catch(e){}var ae=function(){return void 0===V&&(V=!X&&!G&&void 0!==e&&(e.process&&"server"===e.process.env.VUE_ENV)),V},se=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"==typeof e&&/native code/.test(e.toString())}var le,ce="undefined"!=typeof Symbol&&oe(Symbol)&&"undefined"!=typeof Reflect&&oe(Reflect.ownKeys);le="undefined"!=typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var he=I,ue=0,de=function(){this.id=ue++,this.subs=[]};de.prototype.addSub=function(e){this.subs.push(e)},de.prototype.removeSub=function(e){y(this.subs,e)},de.prototype.depend=function(){de.target&&de.target.addDep(this)},de.prototype.notify=function(){var e=this.subs.slice();for(var t=0,r=e.length;t<r;t++)e[t].update()},de.target=null;var pe=[];function fe(e){pe.push(e),de.target=e}function ge(){pe.pop(),de.target=pe[pe.length-1]}var ve=function(e,t,r,i,n,a,s,o){this.tag=e,this.data=t,this.children=r,this.text=i,this.elm=n,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},me={child:{configurable:!0}};me.child.get=function(){return this.componentInstance},Object.defineProperties(ve.prototype,me);var be=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function ye(e){return new ve(void 0,void 0,void 0,String(e))}function we(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Ce=Array.prototype,_e=Object.create(Ce);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=Ce[e];H(_e,e,(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];var n,a=t.apply(this,r),s=this.__ob__;switch(e){case"push":case"unshift":n=r;break;case"splice":n=r.slice(2)}return n&&s.observeArray(n),s.dep.notify(),a}))}));var xe=Object.getOwnPropertyNames(_e),Se=!0;function ke(e){Se=e}var Te=function(e){this.value=e,this.dep=new de,this.vmCount=0,H(e,"__ob__",this),Array.isArray(e)?(Y?function(e,t){e.__proto__=t}(e,_e):function(e,t,r){for(var i=0,n=r.length;i<n;i++){var a=r[i];H(e,a,t[a])}}(e,_e,xe),this.observeArray(e)):this.walk(e)};function Oe(e,t){var r;if(l(e)&&!(e instanceof ve))return C(e,"__ob__")&&e.__ob__ instanceof Te?r=e.__ob__:Se&&!ae()&&(Array.isArray(e)||h(e))&&Object.isExtensible(e)&&!e._isVue&&(r=new Te(e)),t&&r&&r.vmCount++,r}function Ee(e,t,r,i,n){var a=new de,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var o=s&&s.get,l=s&&s.set;o&&!l||2!==arguments.length||(r=e[t]);var c=!n&&Oe(r);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=o?o.call(e):r;return de.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(t)&&De(t))),t},set:function(t){var i=o?o.call(e):r;t===i||t!=t&&i!=i||o&&!l||(l?l.call(e,t):r=t,c=!n&&Oe(t),a.notify())}})}}function Pe(e,t,r){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,r),r;if(t in e&&!(t in Object.prototype))return e[t]=r,r;var i=e.__ob__;return e._isVue||i&&i.vmCount?r:i?(Ee(i.value,t,r),i.dep.notify(),r):(e[t]=r,r)}function Ae(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var r=e.__ob__;e._isVue||r&&r.vmCount||C(e,t)&&(delete e[t],r&&r.dep.notify())}}function De(e){for(var t=void 0,r=0,i=e.length;r<i;r++)(t=e[r])&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&De(t)}Te.prototype.walk=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)Ee(e,t[r])},Te.prototype.observeArray=function(e){for(var t=0,r=e.length;t<r;t++)Oe(e[t])};var Ie=N.optionMergeStrategies;function Le(e,t){if(!t)return e;for(var r,i,n,a=ce?Reflect.ownKeys(t):Object.keys(t),s=0;s<a.length;s++)"__ob__"!==(r=a[s])&&(i=e[r],n=t[r],C(e,r)?i!==n&&h(i)&&h(n)&&Le(i,n):Pe(e,r,n));return e}function Be(e,t,r){return r?function(){var i="function"==typeof t?t.call(r,r):t,n="function"==typeof e?e.call(r,r):e;return i?Le(i,n):n}:t?e?function(){return Le("function"==typeof t?t.call(this,this):t,"function"==typeof e?e.call(this,this):e)}:t:e}function Re(e,t){var r=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return r?function(e){for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}(r):r}function Me(e,t,r,i){var n=Object.create(e||null);return t?A(n,t):n}Ie.data=function(e,t,r){return r?Be(e,t,r):t&&"function"!=typeof t?e:Be(e,t)},$.forEach((function(e){Ie[e]=Re})),F.forEach((function(e){Ie[e+"s"]=Me})),Ie.watch=function(e,t,r,i){if(e===re&&(e=void 0),t===re&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var n={};for(var a in A(n,e),t){var s=n[a],o=t[a];s&&!Array.isArray(s)&&(s=[s]),n[a]=s?s.concat(o):Array.isArray(o)?o:[o]}return n},Ie.props=Ie.methods=Ie.inject=Ie.computed=function(e,t,r,i){if(!e)return t;var n=Object.create(null);return A(n,e),t&&A(n,t),n},Ie.provide=Be;var je=function(e,t){return void 0===t?e:t};function Fe(e,t,r){if("function"==typeof t&&(t=t.options),function(e,t){var r=e.props;if(r){var i,n,a={};if(Array.isArray(r))for(i=r.length;i--;)"string"==typeof(n=r[i])&&(a[S(n)]={type:null});else if(h(r))for(var s in r)n=r[s],a[S(s)]=h(n)?n:{type:n};else 0;e.props=a}}(t),function(e,t){var r=e.inject;if(r){var i=e.inject={};if(Array.isArray(r))for(var n=0;n<r.length;n++)i[r[n]]={from:r[n]};else if(h(r))for(var a in r){var s=r[a];i[a]=h(s)?A({from:a},s):{from:s}}else 0}}(t),function(e){var t=e.directives;if(t)for(var r in t){var i=t[r];"function"==typeof i&&(t[r]={bind:i,update:i})}}(t),!t._base&&(t.extends&&(e=Fe(e,t.extends,r)),t.mixins))for(var i=0,n=t.mixins.length;i<n;i++)e=Fe(e,t.mixins[i],r);var a,s={};for(a in e)o(a);for(a in t)C(e,a)||o(a);function o(i){var n=Ie[i]||je;s[i]=n(e[i],t[i],r,i)}return s}function $e(e,t,r,i){if("string"==typeof r){var n=e[t];if(C(n,r))return n[r];var a=S(r);if(C(n,a))return n[a];var s=k(a);return C(n,s)?n[s]:n[r]||n[a]||n[s]}}function Ne(e,t,r,i){var n=t[e],a=!C(r,e),s=r[e],o=He(Boolean,n.type);if(o>-1)if(a&&!C(n,"default"))s=!1;else if(""===s||s===O(e)){var l=He(String,n.type);(l<0||o<l)&&(s=!0)}if(void 0===s){s=function(e,t,r){if(!C(t,"default"))return;var i=t.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[r]&&void 0!==e._props[r])return e._props[r];return"function"==typeof i&&"Function"!==ze(t.type)?i.call(e):i}(i,n,e);var c=Se;ke(!0),Oe(s),ke(c)}return s}function ze(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:""}function Ue(e,t){return ze(e)===ze(t)}function He(e,t){if(!Array.isArray(t))return Ue(t,e)?0:-1;for(var r=0,i=t.length;r<i;r++)if(Ue(t[r],e))return r;return-1}function We(e,t,r){fe();try{if(t)for(var i=t;i=i.$parent;){var n=i.$options.errorCaptured;if(n)for(var a=0;a<n.length;a++)try{if(!1===n[a].call(i,e,t,r))return}catch(e){Ye(e,i,"errorCaptured hook")}}Ye(e,t,r)}finally{ge()}}function Ve(e,t,r,i,n){var a;try{(a=r?e.apply(t,r):e.call(t))&&!a._isVue&&p(a)&&!a._handled&&(a.catch((function(e){return We(e,i,n+" (Promise/async)")})),a._handled=!0)}catch(e){We(e,i,n)}return a}function Ye(e,t,r){if(N.errorHandler)try{return N.errorHandler.call(null,e,t,r)}catch(t){t!==e&&Xe(t,null,"config.errorHandler")}Xe(e,t,r)}function Xe(e,t,r){if(!X&&!G||"undefined"==typeof console)throw e;console.error(e)}var Ge,qe=!1,Ke=[],Je=!1;function Ze(){Je=!1;var e=Ke.slice(0);Ke.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&oe(Promise)){var Qe=Promise.resolve();Ge=function(){Qe.then(Ze),ee&&setTimeout(I)},qe=!0}else if(J||"undefined"==typeof MutationObserver||!oe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ge=void 0!==r&&oe(r)?function(){r(Ze)}:function(){setTimeout(Ze,0)};else{var et=1,tt=new MutationObserver(Ze),rt=document.createTextNode(String(et));tt.observe(rt,{characterData:!0}),Ge=function(){et=(et+1)%2,rt.data=String(et)},qe=!0}function it(e,t){var r;if(Ke.push((function(){if(e)try{e.call(t)}catch(e){We(e,t,"nextTick")}else r&&r(t)})),Je||(Je=!0,Ge()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){r=e}))}var nt=new le;function at(e){!function e(t,r){var i,n,a=Array.isArray(t);if(!a&&!l(t)||Object.isFrozen(t)||t instanceof ve)return;if(t.__ob__){var s=t.__ob__.dep.id;if(r.has(s))return;r.add(s)}if(a)for(i=t.length;i--;)e(t[i],r);else for(n=Object.keys(t),i=n.length;i--;)e(t[n[i]],r)}(e,nt),nt.clear()}var st=_((function(e){var t="&"===e.charAt(0),r="~"===(e=t?e.slice(1):e).charAt(0),i="!"===(e=r?e.slice(1):e).charAt(0);return{name:e=i?e.slice(1):e,once:r,capture:i,passive:t}}));function ot(e,t){function r(){var e=arguments,i=r.fns;if(!Array.isArray(i))return Ve(i,null,arguments,t,"v-on handler");for(var n=i.slice(),a=0;a<n.length;a++)Ve(n[a],null,e,t,"v-on handler")}return r.fns=e,r}function lt(e,t,r,i,a,o){var l,c,h,u;for(l in e)c=e[l],h=t[l],u=st(l),n(c)||(n(h)?(n(c.fns)&&(c=e[l]=ot(c,o)),s(u.once)&&(c=e[l]=a(u.name,c,u.capture)),r(u.name,c,u.capture,u.passive,u.params)):c!==h&&(h.fns=c,e[l]=h));for(l in t)n(e[l])&&i((u=st(l)).name,t[l],u.capture)}function ct(e,t,r){var i;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var o=e[t];function l(){r.apply(this,arguments),y(i.fns,l)}n(o)?i=ot([l]):a(o.fns)&&s(o.merged)?(i=o).fns.push(l):i=ot([o,l]),i.merged=!0,e[t]=i}function ht(e,t,r,i,n){if(a(t)){if(C(t,r))return e[r]=t[r],n||delete t[r],!0;if(C(t,i))return e[r]=t[i],n||delete t[i],!0}return!1}function ut(e){return o(e)?[ye(e)]:Array.isArray(e)?function e(t,r){var i,l,c,h,u=[];for(i=0;i<t.length;i++)n(l=t[i])||"boolean"==typeof l||(c=u.length-1,h=u[c],Array.isArray(l)?l.length>0&&(dt((l=e(l,(r||"")+"_"+i))[0])&&dt(h)&&(u[c]=ye(h.text+l[0].text),l.shift()),u.push.apply(u,l)):o(l)?dt(h)?u[c]=ye(h.text+l):""!==l&&u.push(ye(l)):dt(l)&&dt(h)?u[c]=ye(h.text+l.text):(s(t._isVList)&&a(l.tag)&&n(l.key)&&a(r)&&(l.key="__vlist"+r+"_"+i+"__"),u.push(l)));return u}(e):void 0}function dt(e){return a(e)&&a(e.text)&&!1===e.isComment}function pt(e,t){if(e){for(var r=Object.create(null),i=ce?Reflect.ownKeys(e):Object.keys(e),n=0;n<i.length;n++){var a=i[n];if("__ob__"!==a){for(var s=e[a].from,o=t;o;){if(o._provided&&C(o._provided,s)){r[a]=o._provided[s];break}o=o.$parent}if(!o)if("default"in e[a]){var l=e[a].default;r[a]="function"==typeof l?l.call(t):l}else 0}}return r}}function ft(e,t){if(!e||!e.length)return{};for(var r={},i=0,n=e.length;i<n;i++){var a=e[i],s=a.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,a.context!==t&&a.fnContext!==t||!s||null==s.slot)(r.default||(r.default=[])).push(a);else{var o=s.slot,l=r[o]||(r[o]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var c in r)r[c].every(gt)&&delete r[c];return r}function gt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function vt(e,t,r){var n,a=Object.keys(t).length>0,s=e?!!e.$stable:!a,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&r&&r!==i&&o===r.$key&&!a&&!r.$hasNormal)return r;for(var l in n={},e)e[l]&&"$"!==l[0]&&(n[l]=mt(t,l,e[l]))}else n={};for(var c in t)c in n||(n[c]=bt(t,c));return e&&Object.isExtensible(e)&&(e._normalized=n),H(n,"$stable",s),H(n,"$key",o),H(n,"$hasNormal",a),n}function mt(e,t,r){var i=function(){var e=arguments.length?r.apply(null,arguments):r({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:ut(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e};return r.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function bt(e,t){return function(){return e[t]}}function yt(e,t){var r,i,n,s,o;if(Array.isArray(e)||"string"==typeof e)for(r=new Array(e.length),i=0,n=e.length;i<n;i++)r[i]=t(e[i],i);else if("number"==typeof e)for(r=new Array(e),i=0;i<e;i++)r[i]=t(i+1,i);else if(l(e))if(ce&&e[Symbol.iterator]){r=[];for(var c=e[Symbol.iterator](),h=c.next();!h.done;)r.push(t(h.value,r.length)),h=c.next()}else for(s=Object.keys(e),r=new Array(s.length),i=0,n=s.length;i<n;i++)o=s[i],r[i]=t(e[o],o,i);return a(r)||(r=[]),r._isVList=!0,r}function wt(e,t,r,i){var n,a=this.$scopedSlots[e];a?(r=r||{},i&&(r=A(A({},i),r)),n=a(r)||t):n=this.$slots[e]||t;var s=r&&r.slot;return s?this.$createElement("template",{slot:s},n):n}function Ct(e){return $e(this.$options,"filters",e)||B}function _t(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function xt(e,t,r,i,n){var a=N.keyCodes[t]||r;return n&&i&&!N.keyCodes[t]?_t(n,i):a?_t(a,e):i?O(i)!==t:void 0}function St(e,t,r,i,n){if(r)if(l(r)){var a;Array.isArray(r)&&(r=D(r));var s=function(s){if("class"===s||"style"===s||b(s))a=e;else{var o=e.attrs&&e.attrs.type;a=i||N.mustUseProp(t,o,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=S(s),c=O(s);l in a||c in a||(a[s]=r[s],n&&((e.on||(e.on={}))["update:"+s]=function(e){r[s]=e}))};for(var o in r)s(o)}else;return e}function kt(e,t){var r=this._staticTrees||(this._staticTrees=[]),i=r[e];return i&&!t||Ot(i=r[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),i}function Tt(e,t,r){return Ot(e,"__once__"+t+(r?"_"+r:""),!0),e}function Ot(e,t,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&Et(e[i],t+"_"+i,r);else Et(e,t,r)}function Et(e,t,r){e.isStatic=!0,e.key=t,e.isOnce=r}function Pt(e,t){if(t)if(h(t)){var r=e.on=e.on?A({},e.on):{};for(var i in t){var n=r[i],a=t[i];r[i]=n?[].concat(n,a):a}}else;return e}function At(e,t,r,i){t=t||{$stable:!r};for(var n=0;n<e.length;n++){var a=e[n];Array.isArray(a)?At(a,t,r):a&&(a.proxy&&(a.fn.proxy=!0),t[a.key]=a.fn)}return i&&(t.$key=i),t}function Dt(e,t){for(var r=0;r<t.length;r+=2){var i=t[r];"string"==typeof i&&i&&(e[t[r]]=t[r+1])}return e}function It(e,t){return"string"==typeof e?t+e:e}function Lt(e){e._o=Tt,e._n=g,e._s=f,e._l=yt,e._t=wt,e._q=R,e._i=M,e._m=kt,e._f=Ct,e._k=xt,e._b=St,e._v=ye,e._e=be,e._u=At,e._g=Pt,e._d=Dt,e._p=It}function Bt(e,t,r,n,a){var o,l=this,c=a.options;C(n,"_uid")?(o=Object.create(n))._original=n:(o=n,n=n._original);var h=s(c._compiled),u=!h;this.data=e,this.props=t,this.children=r,this.parent=n,this.listeners=e.on||i,this.injections=pt(c.inject,n),this.slots=function(){return l.$slots||vt(e.scopedSlots,l.$slots=ft(r,n)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return vt(e.scopedSlots,this.slots())}}),h&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=vt(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,t,r,i){var a=zt(o,e,t,r,i,u);return a&&!Array.isArray(a)&&(a.fnScopeId=c._scopeId,a.fnContext=n),a}:this._c=function(e,t,r,i){return zt(o,e,t,r,i,u)}}function Rt(e,t,r,i,n){var a=we(e);return a.fnContext=r,a.fnOptions=i,t.slot&&((a.data||(a.data={})).slot=t.slot),a}function Mt(e,t){for(var r in t)e[S(r)]=t[r]}Lt(Bt.prototype);var jt={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var r=e;jt.prepatch(r,r)}else{(e.componentInstance=function(e,t){var r={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;a(i)&&(r.render=i.render,r.staticRenderFns=i.staticRenderFns);return new e.componentOptions.Ctor(r)}(e,Jt)).$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var r=t.componentOptions;!function(e,t,r,n,a){0;var s=n.data.scopedSlots,o=e.$scopedSlots,l=!!(s&&!s.$stable||o!==i&&!o.$stable||s&&e.$scopedSlots.$key!==s.$key),c=!!(a||e.$options._renderChildren||l);e.$options._parentVnode=n,e.$vnode=n,e._vnode&&(e._vnode.parent=n);if(e.$options._renderChildren=a,e.$attrs=n.data.attrs||i,e.$listeners=r||i,t&&e.$options.props){ke(!1);for(var h=e._props,u=e.$options._propKeys||[],d=0;d<u.length;d++){var p=u[d],f=e.$options.props;h[p]=Ne(p,f,t,e)}ke(!0),e.$options.propsData=t}r=r||i;var g=e.$options._parentListeners;e.$options._parentListeners=r,Kt(e,r,g),c&&(e.$slots=ft(a,n.context),e.$forceUpdate());0}(t.componentInstance=e.componentInstance,r.propsData,r.listeners,t,r.children)},insert:function(e){var t,r=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,tr(i,"mounted")),e.data.keepAlive&&(r._isMounted?((t=i)._inactive=!1,ir.push(t)):er(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?function e(t,r){if(r&&(t._directInactive=!0,Qt(t)))return;if(!t._inactive){t._inactive=!0;for(var i=0;i<t.$children.length;i++)e(t.$children[i]);tr(t,"deactivated")}}(t,!0):t.$destroy())}},Ft=Object.keys(jt);function $t(e,t,r,o,c){if(!n(e)){var h=r.$options._base;if(l(e)&&(e=h.extend(e)),"function"==typeof e){var u;if(n(e.cid)&&void 0===(e=function(e,t){if(s(e.error)&&a(e.errorComp))return e.errorComp;if(a(e.resolved))return e.resolved;var r=Ht;r&&a(e.owners)&&-1===e.owners.indexOf(r)&&e.owners.push(r);if(s(e.loading)&&a(e.loadingComp))return e.loadingComp;if(r&&!a(e.owners)){var i=e.owners=[r],o=!0,c=null,h=null;r.$on("hook:destroyed",(function(){return y(i,r)}));var u=function(e){for(var t=0,r=i.length;t<r;t++)i[t].$forceUpdate();e&&(i.length=0,null!==c&&(clearTimeout(c),c=null),null!==h&&(clearTimeout(h),h=null))},d=j((function(r){e.resolved=Wt(r,t),o?i.length=0:u(!0)})),f=j((function(t){a(e.errorComp)&&(e.error=!0,u(!0))})),g=e(d,f);return l(g)&&(p(g)?n(e.resolved)&&g.then(d,f):p(g.component)&&(g.component.then(d,f),a(g.error)&&(e.errorComp=Wt(g.error,t)),a(g.loading)&&(e.loadingComp=Wt(g.loading,t),0===g.delay?e.loading=!0:c=setTimeout((function(){c=null,n(e.resolved)&&n(e.error)&&(e.loading=!0,u(!1))}),g.delay||200)),a(g.timeout)&&(h=setTimeout((function(){h=null,n(e.resolved)&&f(null)}),g.timeout)))),o=!1,e.loading?e.loadingComp:e.resolved}}(u=e,h)))return function(e,t,r,i,n){var a=be();return a.asyncFactory=e,a.asyncMeta={data:t,context:r,children:i,tag:n},a}(u,t,r,o,c);t=t||{},xr(e),a(t.model)&&function(e,t){var r=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[r]=t.model.value;var n=t.on||(t.on={}),s=n[i],o=t.model.callback;a(s)?(Array.isArray(s)?-1===s.indexOf(o):s!==o)&&(n[i]=[o].concat(s)):n[i]=o}(e.options,t);var d=function(e,t,r){var i=t.options.props;if(!n(i)){var s={},o=e.attrs,l=e.props;if(a(o)||a(l))for(var c in i){var h=O(c);ht(s,l,c,h,!0)||ht(s,o,c,h,!1)}return s}}(t,e);if(s(e.options.functional))return function(e,t,r,n,s){var o=e.options,l={},c=o.props;if(a(c))for(var h in c)l[h]=Ne(h,c,t||i);else a(r.attrs)&&Mt(l,r.attrs),a(r.props)&&Mt(l,r.props);var u=new Bt(r,l,s,n,e),d=o.render.call(null,u._c,u);if(d instanceof ve)return Rt(d,r,u.parent,o,u);if(Array.isArray(d)){for(var p=ut(d)||[],f=new Array(p.length),g=0;g<p.length;g++)f[g]=Rt(p[g],r,u.parent,o,u);return f}}(e,d,t,r,o);var f=t.on;if(t.on=t.nativeOn,s(e.options.abstract)){var g=t.slot;t={},g&&(t.slot=g)}!function(e){for(var t=e.hook||(e.hook={}),r=0;r<Ft.length;r++){var i=Ft[r],n=t[i],a=jt[i];n===a||n&&n._merged||(t[i]=n?Nt(a,n):a)}}(t);var v=e.options.name||c;return new ve("vue-component-"+e.cid+(v?"-"+v:""),t,void 0,void 0,void 0,r,{Ctor:e,propsData:d,listeners:f,tag:c,children:o},u)}}}function Nt(e,t){var r=function(r,i){e(r,i),t(r,i)};return r._merged=!0,r}function zt(e,t,r,i,c,h){return(Array.isArray(r)||o(r))&&(c=i,i=r,r=void 0),s(h)&&(c=2),function(e,t,r,i,o){if(a(r)&&a(r.__ob__))return be();a(r)&&a(r.is)&&(t=r.is);if(!t)return be();0;Array.isArray(i)&&"function"==typeof i[0]&&((r=r||{}).scopedSlots={default:i[0]},i.length=0);2===o?i=ut(i):1===o&&(i=function(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}(i));var c,h;if("string"==typeof t){var u;h=e.$vnode&&e.$vnode.ns||N.getTagNamespace(t),c=N.isReservedTag(t)?new ve(N.parsePlatformTagName(t),r,i,void 0,void 0,e):r&&r.pre||!a(u=$e(e.$options,"components",t))?new ve(t,r,i,void 0,void 0,e):$t(u,r,e,i,t)}else c=$t(t,r,e,i);return Array.isArray(c)?c:a(c)?(a(h)&&function e(t,r,i){t.ns=r,"foreignObject"===t.tag&&(r=void 0,i=!0);if(a(t.children))for(var o=0,l=t.children.length;o<l;o++){var c=t.children[o];a(c.tag)&&(n(c.ns)||s(i)&&"svg"!==c.tag)&&e(c,r,i)}}(c,h),a(r)&&function(e){l(e.style)&&at(e.style);l(e.class)&&at(e.class)}(r),c):be()}(e,t,r,i,c)}var Ut,Ht=null;function Wt(e,t){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?t.extend(e):e}function Vt(e){return e.isComment&&e.asyncFactory}function Yt(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];if(a(r)&&(a(r.componentOptions)||Vt(r)))return r}}function Xt(e,t){Ut.$on(e,t)}function Gt(e,t){Ut.$off(e,t)}function qt(e,t){var r=Ut;return function i(){var n=t.apply(null,arguments);null!==n&&r.$off(e,i)}}function Kt(e,t,r){Ut=e,lt(t,r||{},Xt,Gt,qt,e),Ut=void 0}var Jt=null;function Zt(e){var t=Jt;return Jt=e,function(){Jt=t}}function Qt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function er(e,t){if(t){if(e._directInactive=!1,Qt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var r=0;r<e.$children.length;r++)er(e.$children[r]);tr(e,"activated")}}function tr(e,t){fe();var r=e.$options[t],i=t+" hook";if(r)for(var n=0,a=r.length;n<a;n++)Ve(r[n],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),ge()}var rr=[],ir=[],nr={},ar=!1,sr=!1,or=0;var lr=0,cr=Date.now;if(X&&!J){var hr=window.performance;hr&&"function"==typeof hr.now&&cr()>document.createEvent("Event").timeStamp&&(cr=function(){return hr.now()})}function ur(){var e,t;for(lr=cr(),sr=!0,rr.sort((function(e,t){return e.id-t.id})),or=0;or<rr.length;or++)(e=rr[or]).before&&e.before(),t=e.id,nr[t]=null,e.run();var r=ir.slice(),i=rr.slice();or=rr.length=ir.length=0,nr={},ar=sr=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,er(e[t],!0)}(r),function(e){var t=e.length;for(;t--;){var r=e[t],i=r.vm;i._watcher===r&&i._isMounted&&!i._isDestroyed&&tr(i,"updated")}}(i),se&&N.devtools&&se.emit("flush")}var dr=0,pr=function(e,t,r,i,n){this.vm=e,n&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++dr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new le,this.newDepIds=new le,this.expression="","function"==typeof t?this.getter=t:(this.getter=function(e){if(!W.test(e)){var t=e.split(".");return function(e){for(var r=0;r<t.length;r++){if(!e)return;e=e[t[r]]}return e}}}(t),this.getter||(this.getter=I)),this.value=this.lazy?void 0:this.get()};pr.prototype.get=function(){var e;fe(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;We(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&at(e),ge(),this.cleanupDeps()}return e},pr.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},pr.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},pr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var t=e.id;if(null==nr[t]){if(nr[t]=!0,sr){for(var r=rr.length-1;r>or&&rr[r].id>e.id;)r--;rr.splice(r+1,0,e)}else rr.push(e);ar||(ar=!0,it(ur))}}(this)},pr.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){We(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}},pr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},pr.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},pr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var fr={enumerable:!0,configurable:!0,get:I,set:I};function gr(e,t,r){fr.get=function(){return this[t][r]},fr.set=function(e){this[t][r]=e},Object.defineProperty(e,r,fr)}function vr(e){e._watchers=[];var t=e.$options;t.props&&function(e,t){var r=e.$options.propsData||{},i=e._props={},n=e.$options._propKeys=[];e.$parent&&ke(!1);var a=function(a){n.push(a);var s=Ne(a,t,r,e);Ee(i,a,s),a in e||gr(e,"_props",a)};for(var s in t)a(s);ke(!0)}(e,t.props),t.methods&&function(e,t){e.$options.props;for(var r in t)e[r]="function"!=typeof t[r]?I:E(t[r],e)}(e,t.methods),t.data?function(e){var t=e.$options.data;h(t=e._data="function"==typeof t?function(e,t){fe();try{return e.call(t,t)}catch(e){return We(e,t,"data()"),{}}finally{ge()}}(t,e):t||{})||(t={});var r=Object.keys(t),i=e.$options.props,n=(e.$options.methods,r.length);for(;n--;){var a=r[n];0,i&&C(i,a)||U(a)||gr(e,"_data",a)}Oe(t,!0)}(e):Oe(e._data={},!0),t.computed&&function(e,t){var r=e._computedWatchers=Object.create(null),i=ae();for(var n in t){var a=t[n],s="function"==typeof a?a:a.get;0,i||(r[n]=new pr(e,s||I,I,mr)),n in e||br(e,n,a)}}(e,t.computed),t.watch&&t.watch!==re&&function(e,t){for(var r in t){var i=t[r];if(Array.isArray(i))for(var n=0;n<i.length;n++)Cr(e,r,i[n]);else Cr(e,r,i)}}(e,t.watch)}var mr={lazy:!0};function br(e,t,r){var i=!ae();"function"==typeof r?(fr.get=i?yr(t):wr(r),fr.set=I):(fr.get=r.get?i&&!1!==r.cache?yr(t):wr(r.get):I,fr.set=r.set||I),Object.defineProperty(e,t,fr)}function yr(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),de.target&&t.depend(),t.value}}function wr(e){return function(){return e.call(this,this)}}function Cr(e,t,r,i){return h(r)&&(i=r,r=r.handler),"string"==typeof r&&(r=e[r]),e.$watch(t,r,i)}var _r=0;function xr(e){var t=e.options;if(e.super){var r=xr(e.super);if(r!==e.superOptions){e.superOptions=r;var i=function(e){var t,r=e.options,i=e.sealedOptions;for(var n in r)r[n]!==i[n]&&(t||(t={}),t[n]=r[n]);return t}(e);i&&A(e.extendOptions,i),(t=e.options=Fe(r,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function Sr(e){this._init(e)}function kr(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var r=this,i=r.cid,n=e._Ctor||(e._Ctor={});if(n[i])return n[i];var a=e.name||r.options.name;var s=function(e){this._init(e)};return(s.prototype=Object.create(r.prototype)).constructor=s,s.cid=t++,s.options=Fe(r.options,e),s.super=r,s.options.props&&function(e){var t=e.options.props;for(var r in t)gr(e.prototype,"_props",r)}(s),s.options.computed&&function(e){var t=e.options.computed;for(var r in t)br(e.prototype,r,t[r])}(s),s.extend=r.extend,s.mixin=r.mixin,s.use=r.use,F.forEach((function(e){s[e]=r[e]})),a&&(s.options.components[a]=s),s.superOptions=r.options,s.extendOptions=e,s.sealedOptions=A({},s.options),n[i]=s,s}}function Tr(e){return e&&(e.Ctor.options.name||e.tag)}function Or(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!u(e)&&e.test(t)}function Er(e,t){var r=e.cache,i=e.keys,n=e._vnode;for(var a in r){var s=r[a];if(s){var o=Tr(s.componentOptions);o&&!t(o)&&Pr(r,a,i,n)}}}function Pr(e,t,r,i){var n=e[t];!n||i&&n.tag===i.tag||n.componentInstance.$destroy(),e[t]=null,y(r,t)}!function(e){e.prototype._init=function(e){var t=this;t._uid=_r++,t._isVue=!0,e&&e._isComponent?function(e,t){var r=e.$options=Object.create(e.constructor.options),i=t._parentVnode;r.parent=t.parent,r._parentVnode=i;var n=i.componentOptions;r.propsData=n.propsData,r._parentListeners=n.listeners,r._renderChildren=n.children,r._componentTag=n.tag,t.render&&(r.render=t.render,r.staticRenderFns=t.staticRenderFns)}(t,e):t.$options=Fe(xr(t.constructor),e||{},t),t._renderProxy=t,t._self=t,function(e){var t=e.$options,r=t.parent;if(r&&!t.abstract){for(;r.$options.abstract&&r.$parent;)r=r.$parent;r.$children.push(e)}e.$parent=r,e.$root=r?r.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(t),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Kt(e,t)}(t),function(e){e._vnode=null,e._staticTrees=null;var t=e.$options,r=e.$vnode=t._parentVnode,n=r&&r.context;e.$slots=ft(t._renderChildren,n),e.$scopedSlots=i,e._c=function(t,r,i,n){return zt(e,t,r,i,n,!1)},e.$createElement=function(t,r,i,n){return zt(e,t,r,i,n,!0)};var a=r&&r.data;Ee(e,"$attrs",a&&a.attrs||i,null,!0),Ee(e,"$listeners",t._parentListeners||i,null,!0)}(t),tr(t,"beforeCreate"),function(e){var t=pt(e.$options.inject,e);t&&(ke(!1),Object.keys(t).forEach((function(r){Ee(e,r,t[r])})),ke(!0))}(t),vr(t),function(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}(t),tr(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}(Sr),function(e){var t={get:function(){return this._data}},r={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",r),e.prototype.$set=Pe,e.prototype.$delete=Ae,e.prototype.$watch=function(e,t,r){if(h(t))return Cr(this,e,t,r);(r=r||{}).user=!0;var i=new pr(this,e,t,r);if(r.immediate)try{t.call(this,i.value)}catch(e){We(e,this,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}(Sr),function(e){var t=/^hook:/;e.prototype.$on=function(e,r){var i=this;if(Array.isArray(e))for(var n=0,a=e.length;n<a;n++)i.$on(e[n],r);else(i._events[e]||(i._events[e]=[])).push(r),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var r=this;function i(){r.$off(e,i),t.apply(r,arguments)}return i.fn=t,r.$on(e,i),r},e.prototype.$off=function(e,t){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(e)){for(var i=0,n=e.length;i<n;i++)r.$off(e[i],t);return r}var a,s=r._events[e];if(!s)return r;if(!t)return r._events[e]=null,r;for(var o=s.length;o--;)if((a=s[o])===t||a.fn===t){s.splice(o,1);break}return r},e.prototype.$emit=function(e){var t=this,r=t._events[e];if(r){r=r.length>1?P(r):r;for(var i=P(arguments,1),n='event handler for "'+e+'"',a=0,s=r.length;a<s;a++)Ve(r[a],t,i,t,n)}return t}}(Sr),function(e){e.prototype._update=function(e,t){var r=this,i=r.$el,n=r._vnode,a=Zt(r);r._vnode=e,r.$el=n?r.__patch__(n,e):r.__patch__(r.$el,e,t,!1),a(),i&&(i.__vue__=null),r.$el&&(r.$el.__vue__=r),r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode&&(r.$parent.$el=r.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){tr(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();for(var r=e._watchers.length;r--;)e._watchers[r].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),tr(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Sr),function(e){Lt(e.prototype),e.prototype.$nextTick=function(e){return it(e,this)},e.prototype._render=function(){var e,t=this,r=t.$options,i=r.render,n=r._parentVnode;n&&(t.$scopedSlots=vt(n.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=n;try{Ht=t,e=i.call(t._renderProxy,t.$createElement)}catch(r){We(r,t,"render"),e=t._vnode}finally{Ht=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=be()),e.parent=n,e}}(Sr);var Ar=[String,RegExp,Array],Dr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Ar,exclude:Ar,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Pr(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",(function(t){Er(e,(function(e){return Or(t,e)}))})),this.$watch("exclude",(function(t){Er(e,(function(e){return!Or(t,e)}))}))},render:function(){var e=this.$slots.default,t=Yt(e),r=t&&t.componentOptions;if(r){var i=Tr(r),n=this.include,a=this.exclude;if(n&&(!i||!Or(n,i))||a&&i&&Or(a,i))return t;var s=this.cache,o=this.keys,l=null==t.key?r.Ctor.cid+(r.tag?"::"+r.tag:""):t.key;s[l]?(t.componentInstance=s[l].componentInstance,y(o,l),o.push(l)):(s[l]=t,o.push(l),this.max&&o.length>parseInt(this.max)&&Pr(s,o[0],o,this._vnode)),t.data.keepAlive=!0}return t||e&&e[0]}}};!function(e){var t={get:function(){return N}};Object.defineProperty(e,"config",t),e.util={warn:he,extend:A,mergeOptions:Fe,defineReactive:Ee},e.set=Pe,e.delete=Ae,e.nextTick=it,e.observable=function(e){return Oe(e),e},e.options=Object.create(null),F.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,A(e.options.components,Dr),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var r=P(arguments,1);return r.unshift(this),"function"==typeof e.install?e.install.apply(e,r):"function"==typeof e&&e.apply(null,r),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Fe(this.options,e),this}}(e),kr(e),function(e){F.forEach((function(t){e[t]=function(e,r){return r?("component"===t&&h(r)&&(r.name=r.name||e,r=this.options._base.extend(r)),"directive"===t&&"function"==typeof r&&(r={bind:r,update:r}),this.options[t+"s"][e]=r,r):this.options[t+"s"][e]}}))}(e)}(Sr),Object.defineProperty(Sr.prototype,"$isServer",{get:ae}),Object.defineProperty(Sr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Sr,"FunctionalRenderContext",{value:Bt}),Sr.version="2.6.12";var Ir=v("style,class"),Lr=v("input,textarea,option,select,progress"),Br=function(e,t,r){return"value"===r&&Lr(e)&&"button"!==t||"selected"===r&&"option"===e||"checked"===r&&"input"===e||"muted"===r&&"video"===e},Rr=v("contenteditable,draggable,spellcheck"),Mr=v("events,caret,typing,plaintext-only"),jr=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Fr="http://www.w3.org/1999/xlink",$r=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Nr=function(e){return $r(e)?e.slice(6,e.length):""},zr=function(e){return null==e||!1===e};function Ur(e){for(var t=e.data,r=e,i=e;a(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(t=Hr(i.data,t));for(;a(r=r.parent);)r&&r.data&&(t=Hr(t,r.data));return function(e,t){if(a(e)||a(t))return Wr(e,Vr(t));return""}(t.staticClass,t.class)}function Hr(e,t){return{staticClass:Wr(e.staticClass,t.staticClass),class:a(e.class)?[e.class,t.class]:t.class}}function Wr(e,t){return e?t?e+" "+t:e:t||""}function Vr(e){return Array.isArray(e)?function(e){for(var t,r="",i=0,n=e.length;i<n;i++)a(t=Vr(e[i]))&&""!==t&&(r&&(r+=" "),r+=t);return r}(e):l(e)?function(e){var t="";for(var r in e)e[r]&&(t&&(t+=" "),t+=r);return t}(e):"string"==typeof e?e:""}var Yr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Xr=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Gr=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),qr=function(e){return Xr(e)||Gr(e)};function Kr(e){return Gr(e)?"svg":"math"===e?"math":void 0}var Jr=Object.create(null);var Zr=v("text,number,password,search,email,tel,url");function Qr(e){if("string"==typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}var ei=Object.freeze({createElement:function(e,t){var r=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&r.setAttribute("multiple","multiple"),r},createElementNS:function(e,t){return document.createElementNS(Yr[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,r){e.insertBefore(t,r)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),ti={create:function(e,t){ri(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ri(e,!0),ri(t))},destroy:function(e){ri(e,!0)}};function ri(e,t){var r=e.data.ref;if(a(r)){var i=e.context,n=e.componentInstance||e.elm,s=i.$refs;t?Array.isArray(s[r])?y(s[r],n):s[r]===n&&(s[r]=void 0):e.data.refInFor?Array.isArray(s[r])?s[r].indexOf(n)<0&&s[r].push(n):s[r]=[n]:s[r]=n}}var ii=new ve("",{},[]),ni=["create","activate","update","remove","destroy"];function ai(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&a(e.data)===a(t.data)&&function(e,t){if("input"!==e.tag)return!0;var r,i=a(r=e.data)&&a(r=r.attrs)&&r.type,n=a(r=t.data)&&a(r=r.attrs)&&r.type;return i===n||Zr(i)&&Zr(n)}(e,t)||s(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&n(t.asyncFactory.error))}function si(e,t,r){var i,n,s={};for(i=t;i<=r;++i)a(n=e[i].key)&&(s[n]=i);return s}var oi={create:li,update:li,destroy:function(e){li(e,ii)}};function li(e,t){(e.data.directives||t.data.directives)&&function(e,t){var r,i,n,a=e===ii,s=t===ii,o=hi(e.data.directives,e.context),l=hi(t.data.directives,t.context),c=[],h=[];for(r in l)i=o[r],n=l[r],i?(n.oldValue=i.value,n.oldArg=i.arg,di(n,"update",t,e),n.def&&n.def.componentUpdated&&h.push(n)):(di(n,"bind",t,e),n.def&&n.def.inserted&&c.push(n));if(c.length){var u=function(){for(var r=0;r<c.length;r++)di(c[r],"inserted",t,e)};a?ct(t,"insert",u):u()}h.length&&ct(t,"postpatch",(function(){for(var r=0;r<h.length;r++)di(h[r],"componentUpdated",t,e)}));if(!a)for(r in o)l[r]||di(o[r],"unbind",e,e,s)}(e,t)}var ci=Object.create(null);function hi(e,t){var r,i,n=Object.create(null);if(!e)return n;for(r=0;r<e.length;r++)(i=e[r]).modifiers||(i.modifiers=ci),n[ui(i)]=i,i.def=$e(t.$options,"directives",i.name);return n}function ui(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function di(e,t,r,i,n){var a=e.def&&e.def[t];if(a)try{a(r.elm,e,r,i,n)}catch(i){We(i,r.context,"directive "+e.name+" "+t+" hook")}}var pi=[ti,oi];function fi(e,t){var r=t.componentOptions;if(!(a(r)&&!1===r.Ctor.options.inheritAttrs||n(e.data.attrs)&&n(t.data.attrs))){var i,s,o=t.elm,l=e.data.attrs||{},c=t.data.attrs||{};for(i in a(c.__ob__)&&(c=t.data.attrs=A({},c)),c)s=c[i],l[i]!==s&&gi(o,i,s);for(i in(J||Q)&&c.value!==l.value&&gi(o,"value",c.value),l)n(c[i])&&($r(i)?o.removeAttributeNS(Fr,Nr(i)):Rr(i)||o.removeAttribute(i))}}function gi(e,t,r){e.tagName.indexOf("-")>-1?vi(e,t,r):jr(t)?zr(r)?e.removeAttribute(t):(r="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,r)):Rr(t)?e.setAttribute(t,function(e,t){return zr(t)||"false"===t?"false":"contenteditable"===e&&Mr(t)?t:"true"}(t,r)):$r(t)?zr(r)?e.removeAttributeNS(Fr,Nr(t)):e.setAttributeNS(Fr,t,r):vi(e,t,r)}function vi(e,t,r){if(zr(r))e.removeAttribute(t);else{if(J&&!Z&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==r&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,r)}}var mi={create:fi,update:fi};function bi(e,t){var r=t.elm,i=t.data,s=e.data;if(!(n(i.staticClass)&&n(i.class)&&(n(s)||n(s.staticClass)&&n(s.class)))){var o=Ur(t),l=r._transitionClasses;a(l)&&(o=Wr(o,Vr(l))),o!==r._prevClass&&(r.setAttribute("class",o),r._prevClass=o)}}var yi,wi,Ci,_i,xi,Si,ki={create:bi,update:bi},Ti=/[\w).+\-_$\]]/;function Oi(e){var t,r,i,n,a,s=!1,o=!1,l=!1,c=!1,h=0,u=0,d=0,p=0;for(i=0;i<e.length;i++)if(r=t,t=e.charCodeAt(i),s)39===t&&92!==r&&(s=!1);else if(o)34===t&&92!==r&&(o=!1);else if(l)96===t&&92!==r&&(l=!1);else if(c)47===t&&92!==r&&(c=!1);else if(124!==t||124===e.charCodeAt(i+1)||124===e.charCodeAt(i-1)||h||u||d){switch(t){case 34:o=!0;break;case 39:s=!0;break;case 96:l=!0;break;case 40:d++;break;case 41:d--;break;case 91:u++;break;case 93:u--;break;case 123:h++;break;case 125:h--}if(47===t){for(var f=i-1,g=void 0;f>=0&&" "===(g=e.charAt(f));f--);g&&Ti.test(g)||(c=!0)}}else void 0===n?(p=i+1,n=e.slice(0,i).trim()):v();function v(){(a||(a=[])).push(e.slice(p,i).trim()),p=i+1}if(void 0===n?n=e.slice(0,i).trim():0!==p&&v(),a)for(i=0;i<a.length;i++)n=Ei(n,a[i]);return n}function Ei(e,t){var r=t.indexOf("(");if(r<0)return'_f("'+t+'")('+e+")";var i=t.slice(0,r),n=t.slice(r+1);return'_f("'+i+'")('+e+(")"!==n?","+n:n)}function Pi(e,t){console.error("[Vue compiler]: "+e)}function Ai(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function Di(e,t,r,i,n){(e.props||(e.props=[])).push(Ni({name:t,value:r,dynamic:n},i)),e.plain=!1}function Ii(e,t,r,i,n){(n?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Ni({name:t,value:r,dynamic:n},i)),e.plain=!1}function Li(e,t,r,i){e.attrsMap[t]=r,e.attrsList.push(Ni({name:t,value:r},i))}function Bi(e,t,r,i,n,a,s,o){(e.directives||(e.directives=[])).push(Ni({name:t,rawName:r,value:i,arg:n,isDynamicArg:a,modifiers:s},o)),e.plain=!1}function Ri(e,t,r){return r?"_p("+t+',"'+e+'")':e+t}function Mi(e,t,r,n,a,s,o,l){var c;(n=n||i).right?l?t="("+t+")==='click'?'contextmenu':("+t+")":"click"===t&&(t="contextmenu",delete n.right):n.middle&&(l?t="("+t+")==='click'?'mouseup':("+t+")":"click"===t&&(t="mouseup")),n.capture&&(delete n.capture,t=Ri("!",t,l)),n.once&&(delete n.once,t=Ri("~",t,l)),n.passive&&(delete n.passive,t=Ri("&",t,l)),n.native?(delete n.native,c=e.nativeEvents||(e.nativeEvents={})):c=e.events||(e.events={});var h=Ni({value:r.trim(),dynamic:l},o);n!==i&&(h.modifiers=n);var u=c[t];Array.isArray(u)?a?u.unshift(h):u.push(h):c[t]=u?a?[h,u]:[u,h]:h,e.plain=!1}function ji(e,t,r){var i=Fi(e,":"+t)||Fi(e,"v-bind:"+t);if(null!=i)return Oi(i);if(!1!==r){var n=Fi(e,t);if(null!=n)return JSON.stringify(n)}}function Fi(e,t,r){var i;if(null!=(i=e.attrsMap[t]))for(var n=e.attrsList,a=0,s=n.length;a<s;a++)if(n[a].name===t){n.splice(a,1);break}return r&&delete e.attrsMap[t],i}function $i(e,t){for(var r=e.attrsList,i=0,n=r.length;i<n;i++){var a=r[i];if(t.test(a.name))return r.splice(i,1),a}}function Ni(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function zi(e,t,r){var i=r||{},n=i.number,a="$$v";i.trim&&(a="(typeof $$v === 'string'? $$v.trim(): $$v)"),n&&(a="_n("+a+")");var s=Ui(t,a);e.model={value:"("+t+")",expression:JSON.stringify(t),callback:"function ($$v) {"+s+"}"}}function Ui(e,t){var r=function(e){if(e=e.trim(),yi=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<yi-1)return(_i=e.lastIndexOf("."))>-1?{exp:e.slice(0,_i),key:'"'+e.slice(_i+1)+'"'}:{exp:e,key:null};wi=e,_i=xi=Si=0;for(;!Wi();)Vi(Ci=Hi())?Xi(Ci):91===Ci&&Yi(Ci);return{exp:e.slice(0,xi),key:e.slice(xi+1,Si)}}(e);return null===r.key?e+"="+t:"$set("+r.exp+", "+r.key+", "+t+")"}function Hi(){return wi.charCodeAt(++_i)}function Wi(){return _i>=yi}function Vi(e){return 34===e||39===e}function Yi(e){var t=1;for(xi=_i;!Wi();)if(Vi(e=Hi()))Xi(e);else if(91===e&&t++,93===e&&t--,0===t){Si=_i;break}}function Xi(e){for(var t=e;!Wi()&&(e=Hi())!==t;);}var Gi;function qi(e,t,r){var i=Gi;return function n(){var a=t.apply(null,arguments);null!==a&&Zi(e,n,r,i)}}var Ki=qe&&!(te&&Number(te[1])<=53);function Ji(e,t,r,i){if(Ki){var n=lr,a=t;t=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=n||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}Gi.addEventListener(e,t,ie?{capture:r,passive:i}:r)}function Zi(e,t,r,i){(i||Gi).removeEventListener(e,t._wrapper||t,r)}function Qi(e,t){if(!n(e.data.on)||!n(t.data.on)){var r=t.data.on||{},i=e.data.on||{};Gi=t.elm,function(e){if(a(e.__r)){var t=J?"change":"input";e[t]=[].concat(e.__r,e[t]||[]),delete e.__r}a(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(r),lt(r,i,Ji,Zi,qi,t.context),Gi=void 0}}var en,tn={create:Qi,update:Qi};function rn(e,t){if(!n(e.data.domProps)||!n(t.data.domProps)){var r,i,s=t.elm,o=e.data.domProps||{},l=t.data.domProps||{};for(r in a(l.__ob__)&&(l=t.data.domProps=A({},l)),o)r in l||(s[r]="");for(r in l){if(i=l[r],"textContent"===r||"innerHTML"===r){if(t.children&&(t.children.length=0),i===o[r])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===r&&"PROGRESS"!==s.tagName){s._value=i;var c=n(i)?"":String(i);nn(s,c)&&(s.value=c)}else if("innerHTML"===r&&Gr(s.tagName)&&n(s.innerHTML)){(en=en||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var h=en.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;h.firstChild;)s.appendChild(h.firstChild)}else if(i!==o[r])try{s[r]=i}catch(e){}}}}function nn(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var r=!0;try{r=document.activeElement!==e}catch(e){}return r&&e.value!==t}(e,t)||function(e,t){var r=e.value,i=e._vModifiers;if(a(i)){if(i.number)return g(r)!==g(t);if(i.trim)return r.trim()!==t.trim()}return r!==t}(e,t))}var an={create:rn,update:rn},sn=_((function(e){var t={},r=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var i=e.split(r);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}));function on(e){var t=ln(e.style);return e.staticStyle?A(e.staticStyle,t):t}function ln(e){return Array.isArray(e)?D(e):"string"==typeof e?sn(e):e}var cn,hn=/^--/,un=/\s*!important$/,dn=function(e,t,r){if(hn.test(t))e.style.setProperty(t,r);else if(un.test(r))e.style.setProperty(O(t),r.replace(un,""),"important");else{var i=fn(t);if(Array.isArray(r))for(var n=0,a=r.length;n<a;n++)e.style[i]=r[n];else e.style[i]=r}},pn=["Webkit","Moz","ms"],fn=_((function(e){if(cn=cn||document.createElement("div").style,"filter"!==(e=S(e))&&e in cn)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<pn.length;r++){var i=pn[r]+t;if(i in cn)return i}}));function gn(e,t){var r=t.data,i=e.data;if(!(n(r.staticStyle)&&n(r.style)&&n(i.staticStyle)&&n(i.style))){var s,o,l=t.elm,c=i.staticStyle,h=i.normalizedStyle||i.style||{},u=c||h,d=ln(t.data.style)||{};t.data.normalizedStyle=a(d.__ob__)?A({},d):d;var p=function(e,t){var r,i={};if(t)for(var n=e;n.componentInstance;)(n=n.componentInstance._vnode)&&n.data&&(r=on(n.data))&&A(i,r);(r=on(e.data))&&A(i,r);for(var a=e;a=a.parent;)a.data&&(r=on(a.data))&&A(i,r);return i}(t,!0);for(o in u)n(p[o])&&dn(l,o,"");for(o in p)(s=p[o])!==u[o]&&dn(l,o,null==s?"":s)}}var vn={create:gn,update:gn},mn=/\s+/;function bn(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(mn).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var r=" "+(e.getAttribute("class")||"")+" ";r.indexOf(" "+t+" ")<0&&e.setAttribute("class",(r+t).trim())}}function yn(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(mn).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var r=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";r.indexOf(i)>=0;)r=r.replace(i," ");(r=r.trim())?e.setAttribute("class",r):e.removeAttribute("class")}}function wn(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&A(t,Cn(e.name||"v")),A(t,e),t}return"string"==typeof e?Cn(e):void 0}}var Cn=_((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),_n=X&&!Z,xn="transition",Sn="transitionend",kn="animation",Tn="animationend";_n&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(xn="WebkitTransition",Sn="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(kn="WebkitAnimation",Tn="webkitAnimationEnd"));var On=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function En(e){On((function(){On(e)}))}function Pn(e,t){var r=e._transitionClasses||(e._transitionClasses=[]);r.indexOf(t)<0&&(r.push(t),bn(e,t))}function An(e,t){e._transitionClasses&&y(e._transitionClasses,t),yn(e,t)}function Dn(e,t,r){var i=Ln(e,t),n=i.type,a=i.timeout,s=i.propCount;if(!n)return r();var o="transition"===n?Sn:Tn,l=0,c=function(){e.removeEventListener(o,h),r()},h=function(t){t.target===e&&++l>=s&&c()};setTimeout((function(){l<s&&c()}),a+1),e.addEventListener(o,h)}var In=/\b(transform|all)(,|$)/;function Ln(e,t){var r,i=window.getComputedStyle(e),n=(i[xn+"Delay"]||"").split(", "),a=(i[xn+"Duration"]||"").split(", "),s=Bn(n,a),o=(i[kn+"Delay"]||"").split(", "),l=(i[kn+"Duration"]||"").split(", "),c=Bn(o,l),h=0,u=0;return"transition"===t?s>0&&(r="transition",h=s,u=a.length):"animation"===t?c>0&&(r="animation",h=c,u=l.length):u=(r=(h=Math.max(s,c))>0?s>c?"transition":"animation":null)?"transition"===r?a.length:l.length:0,{type:r,timeout:h,propCount:u,hasTransform:"transition"===r&&In.test(i[xn+"Property"])}}function Bn(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,r){return Rn(t)+Rn(e[r])})))}function Rn(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Mn(e,t){var r=e.elm;a(r._leaveCb)&&(r._leaveCb.cancelled=!0,r._leaveCb());var i=wn(e.data.transition);if(!n(i)&&!a(r._enterCb)&&1===r.nodeType){for(var s=i.css,o=i.type,c=i.enterClass,h=i.enterToClass,u=i.enterActiveClass,d=i.appearClass,p=i.appearToClass,f=i.appearActiveClass,v=i.beforeEnter,m=i.enter,b=i.afterEnter,y=i.enterCancelled,w=i.beforeAppear,C=i.appear,_=i.afterAppear,x=i.appearCancelled,S=i.duration,k=Jt,T=Jt.$vnode;T&&T.parent;)k=T.context,T=T.parent;var O=!k._isMounted||!e.isRootInsert;if(!O||C||""===C){var E=O&&d?d:c,P=O&&f?f:u,A=O&&p?p:h,D=O&&w||v,I=O&&"function"==typeof C?C:m,L=O&&_||b,B=O&&x||y,R=g(l(S)?S.enter:S);0;var M=!1!==s&&!Z,F=$n(I),$=r._enterCb=j((function(){M&&(An(r,A),An(r,P)),$.cancelled?(M&&An(r,E),B&&B(r)):L&&L(r),r._enterCb=null}));e.data.show||ct(e,"insert",(function(){var t=r.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),I&&I(r,$)})),D&&D(r),M&&(Pn(r,E),Pn(r,P),En((function(){An(r,E),$.cancelled||(Pn(r,A),F||(Fn(R)?setTimeout($,R):Dn(r,o,$)))}))),e.data.show&&(t&&t(),I&&I(r,$)),M||F||$()}}}function jn(e,t){var r=e.elm;a(r._enterCb)&&(r._enterCb.cancelled=!0,r._enterCb());var i=wn(e.data.transition);if(n(i)||1!==r.nodeType)return t();if(!a(r._leaveCb)){var s=i.css,o=i.type,c=i.leaveClass,h=i.leaveToClass,u=i.leaveActiveClass,d=i.beforeLeave,p=i.leave,f=i.afterLeave,v=i.leaveCancelled,m=i.delayLeave,b=i.duration,y=!1!==s&&!Z,w=$n(p),C=g(l(b)?b.leave:b);0;var _=r._leaveCb=j((function(){r.parentNode&&r.parentNode._pending&&(r.parentNode._pending[e.key]=null),y&&(An(r,h),An(r,u)),_.cancelled?(y&&An(r,c),v&&v(r)):(t(),f&&f(r)),r._leaveCb=null}));m?m(x):x()}function x(){_.cancelled||(!e.data.show&&r.parentNode&&((r.parentNode._pending||(r.parentNode._pending={}))[e.key]=e),d&&d(r),y&&(Pn(r,c),Pn(r,u),En((function(){An(r,c),_.cancelled||(Pn(r,h),w||(Fn(C)?setTimeout(_,C):Dn(r,o,_)))}))),p&&p(r,_),y||w||_())}}function Fn(e){return"number"==typeof e&&!isNaN(e)}function $n(e){if(n(e))return!1;var t=e.fns;return a(t)?$n(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Nn(e,t){!0!==t.data.show&&Mn(t)}var zn=function(e){var t,r,i={},l=e.modules,c=e.nodeOps;for(t=0;t<ni.length;++t)for(i[ni[t]]=[],r=0;r<l.length;++r)a(l[r][ni[t]])&&i[ni[t]].push(l[r][ni[t]]);function h(e){var t=c.parentNode(e);a(t)&&c.removeChild(t,e)}function u(e,t,r,n,o,l,h){if(a(e.elm)&&a(l)&&(e=l[h]=we(e)),e.isRootInsert=!o,!function(e,t,r,n){var o=e.data;if(a(o)){var l=a(e.componentInstance)&&o.keepAlive;if(a(o=o.hook)&&a(o=o.init)&&o(e,!1),a(e.componentInstance))return d(e,t),p(r,e.elm,n),s(l)&&function(e,t,r,n){var s,o=e;for(;o.componentInstance;)if(o=o.componentInstance._vnode,a(s=o.data)&&a(s=s.transition)){for(s=0;s<i.activate.length;++s)i.activate[s](ii,o);t.push(o);break}p(r,e.elm,n)}(e,t,r,n),!0}}(e,t,r,n)){var u=e.data,g=e.children,v=e.tag;a(v)?(e.elm=e.ns?c.createElementNS(e.ns,v):c.createElement(v,e),b(e),f(e,g,t),a(u)&&m(e,t),p(r,e.elm,n)):s(e.isComment)?(e.elm=c.createComment(e.text),p(r,e.elm,n)):(e.elm=c.createTextNode(e.text),p(r,e.elm,n))}}function d(e,t){a(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,g(e)?(m(e,t),b(e)):(ri(e),t.push(e))}function p(e,t,r){a(e)&&(a(r)?c.parentNode(r)===e&&c.insertBefore(e,t,r):c.appendChild(e,t))}function f(e,t,r){if(Array.isArray(t)){0;for(var i=0;i<t.length;++i)u(t[i],r,e.elm,null,!0,t,i)}else o(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function g(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return a(e.tag)}function m(e,r){for(var n=0;n<i.create.length;++n)i.create[n](ii,e);a(t=e.data.hook)&&(a(t.create)&&t.create(ii,e),a(t.insert)&&r.push(e))}function b(e){var t;if(a(t=e.fnScopeId))c.setStyleScope(e.elm,t);else for(var r=e;r;)a(t=r.context)&&a(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t),r=r.parent;a(t=Jt)&&t!==e.context&&t!==e.fnContext&&a(t=t.$options._scopeId)&&c.setStyleScope(e.elm,t)}function y(e,t,r,i,n,a){for(;i<=n;++i)u(r[i],a,e,t,!1,r,i)}function w(e){var t,r,n=e.data;if(a(n))for(a(t=n.hook)&&a(t=t.destroy)&&t(e),t=0;t<i.destroy.length;++t)i.destroy[t](e);if(a(t=e.children))for(r=0;r<e.children.length;++r)w(e.children[r])}function C(e,t,r){for(;t<=r;++t){var i=e[t];a(i)&&(a(i.tag)?(_(i),w(i)):h(i.elm))}}function _(e,t){if(a(t)||a(e.data)){var r,n=i.remove.length+1;for(a(t)?t.listeners+=n:t=function(e,t){function r(){0==--r.listeners&&h(e)}return r.listeners=t,r}(e.elm,n),a(r=e.componentInstance)&&a(r=r._vnode)&&a(r.data)&&_(r,t),r=0;r<i.remove.length;++r)i.remove[r](e,t);a(r=e.data.hook)&&a(r=r.remove)?r(e,t):t()}else h(e.elm)}function x(e,t,r,i){for(var n=r;n<i;n++){var s=t[n];if(a(s)&&ai(e,s))return n}}function S(e,t,r,o,l,h){if(e!==t){a(t.elm)&&a(o)&&(t=o[l]=we(t));var d=t.elm=e.elm;if(s(e.isAsyncPlaceholder))a(t.asyncFactory.resolved)?O(e.elm,t,r):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(e.isStatic)&&t.key===e.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=e.componentInstance;else{var p,f=t.data;a(f)&&a(p=f.hook)&&a(p=p.prepatch)&&p(e,t);var v=e.children,m=t.children;if(a(f)&&g(t)){for(p=0;p<i.update.length;++p)i.update[p](e,t);a(p=f.hook)&&a(p=p.update)&&p(e,t)}n(t.text)?a(v)&&a(m)?v!==m&&function(e,t,r,i,s){var o,l,h,d=0,p=0,f=t.length-1,g=t[0],v=t[f],m=r.length-1,b=r[0],w=r[m],_=!s;for(0;d<=f&&p<=m;)n(g)?g=t[++d]:n(v)?v=t[--f]:ai(g,b)?(S(g,b,i,r,p),g=t[++d],b=r[++p]):ai(v,w)?(S(v,w,i,r,m),v=t[--f],w=r[--m]):ai(g,w)?(S(g,w,i,r,m),_&&c.insertBefore(e,g.elm,c.nextSibling(v.elm)),g=t[++d],w=r[--m]):ai(v,b)?(S(v,b,i,r,p),_&&c.insertBefore(e,v.elm,g.elm),v=t[--f],b=r[++p]):(n(o)&&(o=si(t,d,f)),n(l=a(b.key)?o[b.key]:x(b,t,d,f))?u(b,i,e,g.elm,!1,r,p):ai(h=t[l],b)?(S(h,b,i,r,p),t[l]=void 0,_&&c.insertBefore(e,h.elm,g.elm)):u(b,i,e,g.elm,!1,r,p),b=r[++p]);d>f?y(e,n(r[m+1])?null:r[m+1].elm,r,p,m,i):p>m&&C(t,d,f)}(d,v,m,r,h):a(m)?(a(e.text)&&c.setTextContent(d,""),y(d,null,m,0,m.length-1,r)):a(v)?C(v,0,v.length-1):a(e.text)&&c.setTextContent(d,""):e.text!==t.text&&c.setTextContent(d,t.text),a(f)&&a(p=f.hook)&&a(p=p.postpatch)&&p(e,t)}}}function k(e,t,r){if(s(r)&&a(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var T=v("attrs,class,staticClass,staticStyle,key");function O(e,t,r,i){var n,o=t.tag,l=t.data,c=t.children;if(i=i||l&&l.pre,t.elm=e,s(t.isComment)&&a(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(a(l)&&(a(n=l.hook)&&a(n=n.init)&&n(t,!0),a(n=t.componentInstance)))return d(t,r),!0;if(a(o)){if(a(c))if(e.hasChildNodes())if(a(n=l)&&a(n=n.domProps)&&a(n=n.innerHTML)){if(n!==e.innerHTML)return!1}else{for(var h=!0,u=e.firstChild,p=0;p<c.length;p++){if(!u||!O(u,c[p],r,i)){h=!1;break}u=u.nextSibling}if(!h||u)return!1}else f(t,c,r);if(a(l)){var g=!1;for(var v in l)if(!T(v)){g=!0,m(t,r);break}!g&&l.class&&at(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,r,o){if(!n(t)){var l,h=!1,d=[];if(n(e))h=!0,u(t,d);else{var p=a(e.nodeType);if(!p&&ai(e,t))S(e,t,d,null,null,o);else{if(p){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),r=!0),s(r)&&O(e,t,d))return k(t,d,!0),e;l=e,e=new ve(c.tagName(l).toLowerCase(),{},[],void 0,l)}var f=e.elm,v=c.parentNode(f);if(u(t,d,f._leaveCb?null:v,c.nextSibling(f)),a(t.parent))for(var m=t.parent,b=g(t);m;){for(var y=0;y<i.destroy.length;++y)i.destroy[y](m);if(m.elm=t.elm,b){for(var _=0;_<i.create.length;++_)i.create[_](ii,m);var x=m.data.hook.insert;if(x.merged)for(var T=1;T<x.fns.length;T++)x.fns[T]()}else ri(m);m=m.parent}a(v)?C([e],0,0):a(e.tag)&&w(e)}}return k(t,d,h),t.elm}a(e)&&w(e)}}({nodeOps:ei,modules:[mi,ki,tn,an,vn,X?{create:Nn,activate:Nn,remove:function(e,t){!0!==e.data.show?jn(e,t):t()}}:{}].concat(pi)});Z&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&qn(e,"input")}));var Un={inserted:function(e,t,r,i){"select"===r.tag?(i.elm&&!i.elm._vOptions?ct(r,"postpatch",(function(){Un.componentUpdated(e,t,r)})):Hn(e,t,r.context),e._vOptions=[].map.call(e.options,Yn)):("textarea"===r.tag||Zr(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",Xn),e.addEventListener("compositionend",Gn),e.addEventListener("change",Gn),Z&&(e.vmodel=!0)))},componentUpdated:function(e,t,r){if("select"===r.tag){Hn(e,t,r.context);var i=e._vOptions,n=e._vOptions=[].map.call(e.options,Yn);if(n.some((function(e,t){return!R(e,i[t])})))(e.multiple?t.value.some((function(e){return Vn(e,n)})):t.value!==t.oldValue&&Vn(t.value,n))&&qn(e,"change")}}};function Hn(e,t,r){Wn(e,t,r),(J||Q)&&setTimeout((function(){Wn(e,t,r)}),0)}function Wn(e,t,r){var i=t.value,n=e.multiple;if(!n||Array.isArray(i)){for(var a,s,o=0,l=e.options.length;o<l;o++)if(s=e.options[o],n)a=M(i,Yn(s))>-1,s.selected!==a&&(s.selected=a);else if(R(Yn(s),i))return void(e.selectedIndex!==o&&(e.selectedIndex=o));n||(e.selectedIndex=-1)}}function Vn(e,t){return t.every((function(t){return!R(t,e)}))}function Yn(e){return"_value"in e?e._value:e.value}function Xn(e){e.target.composing=!0}function Gn(e){e.target.composing&&(e.target.composing=!1,qn(e.target,"input"))}function qn(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}function Kn(e){return!e.componentInstance||e.data&&e.data.transition?e:Kn(e.componentInstance._vnode)}var Jn={model:Un,show:{bind:function(e,t,r){var i=t.value,n=(r=Kn(r)).data&&r.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&n?(r.data.show=!0,Mn(r,(function(){e.style.display=a}))):e.style.display=i?a:"none"},update:function(e,t,r){var i=t.value;!i!=!t.oldValue&&((r=Kn(r)).data&&r.data.transition?(r.data.show=!0,i?Mn(r,(function(){e.style.display=e.__vOriginalDisplay})):jn(r,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none")},unbind:function(e,t,r,i,n){n||(e.style.display=e.__vOriginalDisplay)}}},Zn={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Qn(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Qn(Yt(t.children)):e}function ea(e){var t={},r=e.$options;for(var i in r.propsData)t[i]=e[i];var n=r._parentListeners;for(var a in n)t[S(a)]=n[a];return t}function ta(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var ra=function(e){return e.tag||Vt(e)},ia=function(e){return"show"===e.name},na={name:"transition",props:Zn,abstract:!0,render:function(e){var t=this,r=this.$slots.default;if(r&&(r=r.filter(ra)).length){0;var i=this.mode;0;var n=r[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return n;var a=Qn(n);if(!a)return n;if(this._leaving)return ta(e,n);var s="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?s+"comment":s+a.tag:o(a.key)?0===String(a.key).indexOf(s)?a.key:s+a.key:a.key;var l=(a.data||(a.data={})).transition=ea(this),c=this._vnode,h=Qn(c);if(a.data.directives&&a.data.directives.some(ia)&&(a.data.show=!0),h&&h.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(a,h)&&!Vt(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var u=h.data.transition=A({},l);if("out-in"===i)return this._leaving=!0,ct(u,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),ta(e,n);if("in-out"===i){if(Vt(a))return c;var d,p=function(){d()};ct(l,"afterEnter",p),ct(l,"enterCancelled",p),ct(u,"delayLeave",(function(e){d=e}))}}return n}}},aa=A({tag:String,moveClass:String},Zn);function sa(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function oa(e){e.data.newPos=e.elm.getBoundingClientRect()}function la(e){var t=e.data.pos,r=e.data.newPos,i=t.left-r.left,n=t.top-r.top;if(i||n){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+i+"px,"+n+"px)",a.transitionDuration="0s"}}delete aa.mode;var ca={Transition:na,TransitionGroup:{props:aa,beforeMount:function(){var e=this,t=this._update;this._update=function(r,i){var n=Zt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,n(),t.call(e,r,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,n=this.$slots.default||[],a=this.children=[],s=ea(this),o=0;o<n.length;o++){var l=n[o];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),r[l.key]=l,(l.data||(l.data={})).transition=s;else;}if(i){for(var c=[],h=[],u=0;u<i.length;u++){var d=i[u];d.data.transition=s,d.data.pos=d.elm.getBoundingClientRect(),r[d.key]?c.push(d):h.push(d)}this.kept=e(t,null,c),this.removed=h}return e(t,null,a)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(sa),e.forEach(oa),e.forEach(la),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var r=e.elm,i=r.style;Pn(r,t),i.transform=i.WebkitTransform=i.transitionDuration="",r.addEventListener(Sn,r._moveCb=function e(i){i&&i.target!==r||i&&!/transform$/.test(i.propertyName)||(r.removeEventListener(Sn,e),r._moveCb=null,An(r,t))})}})))},methods:{hasMove:function(e,t){if(!_n)return!1;if(this._hasMove)return this._hasMove;var r=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){yn(r,e)})),bn(r,t),r.style.display="none",this.$el.appendChild(r);var i=Ln(r);return this.$el.removeChild(r),this._hasMove=i.hasTransform}}}};Sr.config.mustUseProp=Br,Sr.config.isReservedTag=qr,Sr.config.isReservedAttr=Ir,Sr.config.getTagNamespace=Kr,Sr.config.isUnknownElement=function(e){if(!X)return!0;if(qr(e))return!1;if(e=e.toLowerCase(),null!=Jr[e])return Jr[e];var t=document.createElement(e);return e.indexOf("-")>-1?Jr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Jr[e]=/HTMLUnknownElement/.test(t.toString())},A(Sr.options.directives,Jn),A(Sr.options.components,ca),Sr.prototype.__patch__=X?zn:I,Sr.prototype.$mount=function(e,t){return function(e,t,r){var i;return e.$el=t,e.$options.render||(e.$options.render=be),tr(e,"beforeMount"),i=function(){e._update(e._render(),r)},new pr(e,i,I,{before:function(){e._isMounted&&!e._isDestroyed&&tr(e,"beforeUpdate")}},!0),r=!1,null==e.$vnode&&(e._isMounted=!0,tr(e,"mounted")),e}(this,e=e&&X?Qr(e):void 0,t)},X&&setTimeout((function(){N.devtools&&se&&se.emit("init",Sr)}),0);var ha=/\{\{((?:.|\r?\n)+?)\}\}/g,ua=/[-.*+?^${}()|[\]\/\\]/g,da=_((function(e){var t=e[0].replace(ua,"\\$&"),r=e[1].replace(ua,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+r,"g")}));var pa={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var r=Fi(e,"class");r&&(e.staticClass=JSON.stringify(r));var i=ji(e,"class",!1);i&&(e.classBinding=i)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}};var fa,ga={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var r=Fi(e,"style");r&&(e.staticStyle=JSON.stringify(sn(r)));var i=ji(e,"style",!1);i&&(e.styleBinding=i)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}},va=function(e){return(fa=fa||document.createElement("div")).innerHTML=e,fa.textContent},ma=v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),ba=v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),ya=v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),wa=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Ca=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,_a="[a-zA-Z_][\\-\\.0-9_a-zA-Z"+z.source+"]*",xa="((?:"+_a+"\\:)?"+_a+")",Sa=new RegExp("^<"+xa),ka=/^\s*(\/?)>/,Ta=new RegExp("^<\\/"+xa+"[^>]*>"),Oa=/^<!DOCTYPE [^>]+>/i,Ea=/^<!\--/,Pa=/^<!\[/,Aa=v("script,style,textarea",!0),Da={},Ia={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},La=/&(?:lt|gt|quot|amp|#39);/g,Ba=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Ra=v("pre,textarea",!0),Ma=function(e,t){return e&&Ra(e)&&"\n"===t[0]};function ja(e,t){var r=t?Ba:La;return e.replace(r,(function(e){return Ia[e]}))}var Fa,$a,Na,za,Ua,Ha,Wa,Va,Ya=/^@|^v-on:/,Xa=/^v-|^@|^:|^#/,Ga=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,qa=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Ka=/^\(|\)$/g,Ja=/^\[.*\]$/,Za=/:(.*)$/,Qa=/^:|^\.|^v-bind:/,es=/\.[^.\]]+(?=[^\]]*$)/g,ts=/^v-slot(:|$)|^#/,rs=/[\r\n]/,is=/\s+/g,ns=_(va);function as(e,t,r){return{type:1,tag:e,attrsList:t,attrsMap:ds(t),rawAttrsMap:{},parent:r,children:[]}}function ss(e,t){Fa=t.warn||Pi,Ha=t.isPreTag||L,Wa=t.mustUseProp||L,Va=t.getTagNamespace||L;var r=t.isReservedTag||L;(function(e){return!!e.component||!r(e.tag)}),Na=Ai(t.modules,"transformNode"),za=Ai(t.modules,"preTransformNode"),Ua=Ai(t.modules,"postTransformNode"),$a=t.delimiters;var i,n,a=[],s=!1!==t.preserveWhitespace,o=t.whitespace,l=!1,c=!1;function h(e){if(u(e),l||e.processed||(e=os(e,t)),a.length||e===i||i.if&&(e.elseif||e.else)&&cs(i,{exp:e.elseif,block:e}),n&&!e.forbidden)if(e.elseif||e.else)s=e,(o=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(n.children))&&o.if&&cs(o,{exp:s.elseif,block:s});else{if(e.slotScope){var r=e.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[r]=e}n.children.push(e),e.parent=n}var s,o;e.children=e.children.filter((function(e){return!e.slotScope})),u(e),e.pre&&(l=!1),Ha(e.tag)&&(c=!1);for(var h=0;h<Ua.length;h++)Ua[h](e,t)}function u(e){if(!c)for(var t;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var r,i,n=[],a=t.expectHTML,s=t.isUnaryTag||L,o=t.canBeLeftOpenTag||L,l=0;e;){if(r=e,i&&Aa(i)){var c=0,h=i.toLowerCase(),u=Da[h]||(Da[h]=new RegExp("([\\s\\S]*?)(</"+h+"[^>]*>)","i")),d=e.replace(u,(function(e,r,i){return c=i.length,Aa(h)||"noscript"===h||(r=r.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Ma(h,r)&&(r=r.slice(1)),t.chars&&t.chars(r),""}));l+=e.length-d.length,e=d,T(h,l-c,l)}else{var p=e.indexOf("<");if(0===p){if(Ea.test(e)){var f=e.indexOf("--\x3e");if(f>=0){t.shouldKeepComment&&t.comment(e.substring(4,f),l,l+f+3),x(f+3);continue}}if(Pa.test(e)){var g=e.indexOf("]>");if(g>=0){x(g+2);continue}}var v=e.match(Oa);if(v){x(v[0].length);continue}var m=e.match(Ta);if(m){var b=l;x(m[0].length),T(m[1],b,l);continue}var y=S();if(y){k(y),Ma(y.tagName,e)&&x(1);continue}}var w=void 0,C=void 0,_=void 0;if(p>=0){for(C=e.slice(p);!(Ta.test(C)||Sa.test(C)||Ea.test(C)||Pa.test(C)||(_=C.indexOf("<",1))<0);)p+=_,C=e.slice(p);w=e.substring(0,p)}p<0&&(w=e),w&&x(w.length),t.chars&&w&&t.chars(w,l-w.length,l)}if(e===r){t.chars&&t.chars(e);break}}function x(t){l+=t,e=e.substring(t)}function S(){var t=e.match(Sa);if(t){var r,i,n={tagName:t[1],attrs:[],start:l};for(x(t[0].length);!(r=e.match(ka))&&(i=e.match(Ca)||e.match(wa));)i.start=l,x(i[0].length),i.end=l,n.attrs.push(i);if(r)return n.unarySlash=r[1],x(r[0].length),n.end=l,n}}function k(e){var r=e.tagName,l=e.unarySlash;a&&("p"===i&&ya(r)&&T(i),o(r)&&i===r&&T(r));for(var c=s(r)||!!l,h=e.attrs.length,u=new Array(h),d=0;d<h;d++){var p=e.attrs[d],f=p[3]||p[4]||p[5]||"",g="a"===r&&"href"===p[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;u[d]={name:p[1],value:ja(f,g)}}c||(n.push({tag:r,lowerCasedTag:r.toLowerCase(),attrs:u,start:e.start,end:e.end}),i=r),t.start&&t.start(r,u,c,e.start,e.end)}function T(e,r,a){var s,o;if(null==r&&(r=l),null==a&&(a=l),e)for(o=e.toLowerCase(),s=n.length-1;s>=0&&n[s].lowerCasedTag!==o;s--);else s=0;if(s>=0){for(var c=n.length-1;c>=s;c--)t.end&&t.end(n[c].tag,r,a);n.length=s,i=s&&n[s-1].tag}else"br"===o?t.start&&t.start(e,[],!0,r,a):"p"===o&&(t.start&&t.start(e,[],!1,r,a),t.end&&t.end(e,r,a))}T()}(e,{warn:Fa,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,r,s,o,u){var d=n&&n.ns||Va(e);J&&"svg"===d&&(r=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];ps.test(i.name)||(i.name=i.name.replace(fs,""),t.push(i))}return t}(r));var p,f=as(e,r,n);d&&(f.ns=d),"style"!==(p=f).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||ae()||(f.forbidden=!0);for(var g=0;g<za.length;g++)f=za[g](f,t)||f;l||(!function(e){null!=Fi(e,"v-pre")&&(e.pre=!0)}(f),f.pre&&(l=!0)),Ha(f.tag)&&(c=!0),l?function(e){var t=e.attrsList,r=t.length;if(r)for(var i=e.attrs=new Array(r),n=0;n<r;n++)i[n]={name:t[n].name,value:JSON.stringify(t[n].value)},null!=t[n].start&&(i[n].start=t[n].start,i[n].end=t[n].end);else e.pre||(e.plain=!0)}(f):f.processed||(ls(f),function(e){var t=Fi(e,"v-if");if(t)e.if=t,cs(e,{exp:t,block:e});else{null!=Fi(e,"v-else")&&(e.else=!0);var r=Fi(e,"v-else-if");r&&(e.elseif=r)}}(f),function(e){null!=Fi(e,"v-once")&&(e.once=!0)}(f)),i||(i=f),s?h(f):(n=f,a.push(f))},end:function(e,t,r){var i=a[a.length-1];a.length-=1,n=a[a.length-1],h(i)},chars:function(e,t,r){if(n&&(!J||"textarea"!==n.tag||n.attrsMap.placeholder!==e)){var i,a,h,u=n.children;if(e=c||e.trim()?"script"===(i=n).tag||"style"===i.tag?e:ns(e):u.length?o?"condense"===o&&rs.test(e)?"":" ":s?" ":"":"")c||"condense"!==o||(e=e.replace(is," ")),!l&&" "!==e&&(a=function(e,t){var r=t?da(t):ha;if(r.test(e)){for(var i,n,a,s=[],o=[],l=r.lastIndex=0;i=r.exec(e);){(n=i.index)>l&&(o.push(a=e.slice(l,n)),s.push(JSON.stringify(a)));var c=Oi(i[1].trim());s.push("_s("+c+")"),o.push({"@binding":c}),l=n+i[0].length}return l<e.length&&(o.push(a=e.slice(l)),s.push(JSON.stringify(a))),{expression:s.join("+"),tokens:o}}}(e,$a))?h={type:2,expression:a.expression,tokens:a.tokens,text:e}:" "===e&&u.length&&" "===u[u.length-1].text||(h={type:3,text:e}),h&&u.push(h)}},comment:function(e,t,r){if(n){var i={type:3,text:e,isComment:!0};0,n.children.push(i)}}}),i}function os(e,t){var r;!function(e){var t=ji(e,"key");if(t){e.key=t}}(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=ji(e,"ref");t&&(e.ref=t,e.refInFor=function(e){var t=e;for(;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Fi(e,"scope"),e.slotScope=t||Fi(e,"slot-scope")):(t=Fi(e,"slot-scope"))&&(e.slotScope=t);var r=ji(e,"slot");r&&(e.slotTarget='""'===r?'"default"':r,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||Ii(e,"slot",r,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot")));if("template"===e.tag){var i=$i(e,ts);if(i){0;var n=hs(i),a=n.name,s=n.dynamic;e.slotTarget=a,e.slotTargetDynamic=s,e.slotScope=i.value||"_empty_"}}else{var o=$i(e,ts);if(o){0;var l=e.scopedSlots||(e.scopedSlots={}),c=hs(o),h=c.name,u=c.dynamic,d=l[h]=as("template",[],e);d.slotTarget=h,d.slotTargetDynamic=u,d.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=d,!0})),d.slotScope=o.value||"_empty_",e.children=[],e.plain=!1}}}(e),"slot"===(r=e).tag&&(r.slotName=ji(r,"name")),function(e){var t;(t=ji(e,"is"))&&(e.component=t);null!=Fi(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var i=0;i<Na.length;i++)e=Na[i](e,t)||e;return function(e){var t,r,i,n,a,s,o,l,c=e.attrsList;for(t=0,r=c.length;t<r;t++){if(i=n=c[t].name,a=c[t].value,Xa.test(i))if(e.hasBindings=!0,(s=us(i.replace(Xa,"")))&&(i=i.replace(es,"")),Qa.test(i))i=i.replace(Qa,""),a=Oi(a),(l=Ja.test(i))&&(i=i.slice(1,-1)),s&&(s.prop&&!l&&"innerHtml"===(i=S(i))&&(i="innerHTML"),s.camel&&!l&&(i=S(i)),s.sync&&(o=Ui(a,"$event"),l?Mi(e,'"update:"+('+i+")",o,null,!1,0,c[t],!0):(Mi(e,"update:"+S(i),o,null,!1,0,c[t]),O(i)!==S(i)&&Mi(e,"update:"+O(i),o,null,!1,0,c[t])))),s&&s.prop||!e.component&&Wa(e.tag,e.attrsMap.type,i)?Di(e,i,a,c[t],l):Ii(e,i,a,c[t],l);else if(Ya.test(i))i=i.replace(Ya,""),(l=Ja.test(i))&&(i=i.slice(1,-1)),Mi(e,i,a,s,!1,0,c[t],l);else{var h=(i=i.replace(Xa,"")).match(Za),u=h&&h[1];l=!1,u&&(i=i.slice(0,-(u.length+1)),Ja.test(u)&&(u=u.slice(1,-1),l=!0)),Bi(e,i,n,a,u,l,s,c[t])}else Ii(e,i,JSON.stringify(a),c[t]),!e.component&&"muted"===i&&Wa(e.tag,e.attrsMap.type,i)&&Di(e,i,"true",c[t])}}(e),e}function ls(e){var t;if(t=Fi(e,"v-for")){var r=function(e){var t=e.match(Ga);if(!t)return;var r={};r.for=t[2].trim();var i=t[1].trim().replace(Ka,""),n=i.match(qa);n?(r.alias=i.replace(qa,"").trim(),r.iterator1=n[1].trim(),n[2]&&(r.iterator2=n[2].trim())):r.alias=i;return r}(t);r&&A(e,r)}}function cs(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function hs(e){var t=e.name.replace(ts,"");return t||"#"!==e.name[0]&&(t="default"),Ja.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'+t+'"',dynamic:!1}}function us(e){var t=e.match(es);if(t){var r={};return t.forEach((function(e){r[e.slice(1)]=!0})),r}}function ds(e){for(var t={},r=0,i=e.length;r<i;r++)t[e[r].name]=e[r].value;return t}var ps=/^xmlns:NS\d+/,fs=/^NS\d+:/;function gs(e){return as(e.tag,e.attrsList.slice(),e.parent)}var vs=[pa,ga,{preTransformNode:function(e,t){if("input"===e.tag){var r,i=e.attrsMap;if(!i["v-model"])return;if((i[":type"]||i["v-bind:type"])&&(r=ji(e,"type")),i.type||r||!i["v-bind"]||(r="("+i["v-bind"]+").type"),r){var n=Fi(e,"v-if",!0),a=n?"&&("+n+")":"",s=null!=Fi(e,"v-else",!0),o=Fi(e,"v-else-if",!0),l=gs(e);ls(l),Li(l,"type","checkbox"),os(l,t),l.processed=!0,l.if="("+r+")==='checkbox'"+a,cs(l,{exp:l.if,block:l});var c=gs(e);Fi(c,"v-for",!0),Li(c,"type","radio"),os(c,t),cs(l,{exp:"("+r+")==='radio'"+a,block:c});var h=gs(e);return Fi(h,"v-for",!0),Li(h,":type",r),os(h,t),cs(l,{exp:n,block:h}),s?l.else=!0:o&&(l.elseif=o),l}}}}];var ms,bs,ys={expectHTML:!0,modules:vs,directives:{model:function(e,t,r){r;var i=t.value,n=t.modifiers,a=e.tag,s=e.attrsMap.type;if(e.component)return zi(e,i,n),!1;if("select"===a)!function(e,t,r){var i='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(r&&r.number?"_n(val)":"val")+"});";i=i+" "+Ui(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),Mi(e,"change",i,null,!0)}(e,i,n);else if("input"===a&&"checkbox"===s)!function(e,t,r){var i=r&&r.number,n=ji(e,"value")||"null",a=ji(e,"true-value")||"true",s=ji(e,"false-value")||"false";Di(e,"checked","Array.isArray("+t+")?_i("+t+","+n+")>-1"+("true"===a?":("+t+")":":_q("+t+","+a+")")),Mi(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+s+");if(Array.isArray($$a)){var $$v="+(i?"_n("+n+")":n)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Ui(t,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Ui(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Ui(t,"$$c")+"}",null,!0)}(e,i,n);else if("input"===a&&"radio"===s)!function(e,t,r){var i=r&&r.number,n=ji(e,"value")||"null";Di(e,"checked","_q("+t+","+(n=i?"_n("+n+")":n)+")"),Mi(e,"change",Ui(t,n),null,!0)}(e,i,n);else if("input"===a||"textarea"===a)!function(e,t,r){var i=e.attrsMap.type;0;var n=r||{},a=n.lazy,s=n.number,o=n.trim,l=!a&&"range"!==i,c=a?"change":"range"===i?"__r":"input",h="$event.target.value";o&&(h="$event.target.value.trim()");s&&(h="_n("+h+")");var u=Ui(t,h);l&&(u="if($event.target.composing)return;"+u);Di(e,"value","("+t+")"),Mi(e,c,u,null,!0),(o||s)&&Mi(e,"blur","$forceUpdate()")}(e,i,n);else{if(!N.isReservedTag(a))return zi(e,i,n),!1}return!0},text:function(e,t){t.value&&Di(e,"textContent","_s("+t.value+")",t)},html:function(e,t){t.value&&Di(e,"innerHTML","_s("+t.value+")",t)}},isPreTag:function(e){return"pre"===e},isUnaryTag:ma,mustUseProp:Br,canBeLeftOpenTag:ba,isReservedTag:qr,getTagNamespace:Kr,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(vs)},ws=_((function(e){return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function Cs(e,t){e&&(ms=ws(t.staticKeys||""),bs=t.isReservedTag||L,function e(t){if(t.static=function(e){if(2===e.type)return!1;if(3===e.type)return!0;return!(!e.pre&&(e.hasBindings||e.if||e.for||m(e.tag)||!bs(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(ms)))}(t),1===t.type){if(!bs(t.tag)&&"slot"!==t.tag&&null==t.attrsMap["inline-template"])return;for(var r=0,i=t.children.length;r<i;r++){var n=t.children[r];e(n),n.static||(t.static=!1)}if(t.ifConditions)for(var a=1,s=t.ifConditions.length;a<s;a++){var o=t.ifConditions[a].block;e(o),o.static||(t.static=!1)}}}(e),function e(t,r){if(1===t.type){if((t.static||t.once)&&(t.staticInFor=r),t.static&&t.children.length&&(1!==t.children.length||3!==t.children[0].type))return void(t.staticRoot=!0);if(t.staticRoot=!1,t.children)for(var i=0,n=t.children.length;i<n;i++)e(t.children[i],r||!!t.for);if(t.ifConditions)for(var a=1,s=t.ifConditions.length;a<s;a++)e(t.ifConditions[a].block,r)}}(e,!1))}var _s=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,xs=/\([^)]*?\);*$/,Ss=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,ks={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Ts={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Os=function(e){return"if("+e+")return null;"},Es={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Os("$event.target !== $event.currentTarget"),ctrl:Os("!$event.ctrlKey"),shift:Os("!$event.shiftKey"),alt:Os("!$event.altKey"),meta:Os("!$event.metaKey"),left:Os("'button' in $event && $event.button !== 0"),middle:Os("'button' in $event && $event.button !== 1"),right:Os("'button' in $event && $event.button !== 2")};function Ps(e,t){var r=t?"nativeOn:":"on:",i="",n="";for(var a in e){var s=As(e[a]);e[a]&&e[a].dynamic?n+=a+","+s+",":i+='"'+a+'":'+s+","}return i="{"+i.slice(0,-1)+"}",n?r+"_d("+i+",["+n.slice(0,-1)+"])":r+i}function As(e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map((function(e){return As(e)})).join(",")+"]";var t=Ss.test(e.value),r=_s.test(e.value),i=Ss.test(e.value.replace(xs,""));if(e.modifiers){var n="",a="",s=[];for(var o in e.modifiers)if(Es[o])a+=Es[o],ks[o]&&s.push(o);else if("exact"===o){var l=e.modifiers;a+=Os(["ctrl","shift","alt","meta"].filter((function(e){return!l[e]})).map((function(e){return"$event."+e+"Key"})).join("||"))}else s.push(o);return s.length&&(n+=function(e){return"if(!$event.type.indexOf('key')&&"+e.map(Ds).join("&&")+")return null;"}(s)),a&&(n+=a),"function($event){"+n+(t?"return "+e.value+"($event)":r?"return ("+e.value+")($event)":i?"return "+e.value:e.value)+"}"}return t||r?e.value:"function($event){"+(i?"return "+e.value:e.value)+"}"}function Ds(e){var t=parseInt(e,10);if(t)return"$event.keyCode!=="+t;var r=ks[e],i=Ts[e];return"_k($event.keyCode,"+JSON.stringify(e)+","+JSON.stringify(r)+",$event.key,"+JSON.stringify(i)+")"}var Is={on:function(e,t){e.wrapListeners=function(e){return"_g("+e+","+t.value+")"}},bind:function(e,t){e.wrapData=function(r){return"_b("+r+",'"+e.tag+"',"+t.value+","+(t.modifiers&&t.modifiers.prop?"true":"false")+(t.modifiers&&t.modifiers.sync?",true":"")+")"}},cloak:I},Ls=function(e){this.options=e,this.warn=e.warn||Pi,this.transforms=Ai(e.modules,"transformCode"),this.dataGenFns=Ai(e.modules,"genData"),this.directives=A(A({},Is),e.directives);var t=e.isReservedTag||L;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Bs(e,t){var r=new Ls(t);return{render:"with(this){return "+(e?Rs(e,r):'_c("div")')+"}",staticRenderFns:r.staticRenderFns}}function Rs(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Ms(e,t);if(e.once&&!e.onceProcessed)return js(e,t);if(e.for&&!e.forProcessed)return $s(e,t);if(e.if&&!e.ifProcessed)return Fs(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var r=e.slotName||'"default"',i=Hs(e,t),n="_t("+r+(i?","+i:""),a=e.attrs||e.dynamicAttrs?Ys((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:S(e.name),value:e.value,dynamic:e.dynamic}}))):null,s=e.attrsMap["v-bind"];!a&&!s||i||(n+=",null");a&&(n+=","+a);s&&(n+=(a?"":",null")+","+s);return n+")"}(e,t);var r;if(e.component)r=function(e,t,r){var i=t.inlineTemplate?null:Hs(t,r,!0);return"_c("+e+","+Ns(t,r)+(i?","+i:"")+")"}(e.component,e,t);else{var i;(!e.plain||e.pre&&t.maybeComponent(e))&&(i=Ns(e,t));var n=e.inlineTemplate?null:Hs(e,t,!0);r="_c('"+e.tag+"'"+(i?","+i:"")+(n?","+n:"")+")"}for(var a=0;a<t.transforms.length;a++)r=t.transforms[a](e,r);return r}return Hs(e,t)||"void 0"}function Ms(e,t){e.staticProcessed=!0;var r=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return "+Rs(e,t)+"}"),t.pre=r,"_m("+(t.staticRenderFns.length-1)+(e.staticInFor?",true":"")+")"}function js(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Fs(e,t);if(e.staticInFor){for(var r="",i=e.parent;i;){if(i.for){r=i.key;break}i=i.parent}return r?"_o("+Rs(e,t)+","+t.onceId+++","+r+")":Rs(e,t)}return Ms(e,t)}function Fs(e,t,r,i){return e.ifProcessed=!0,function e(t,r,i,n){if(!t.length)return n||"_e()";var a=t.shift();return a.exp?"("+a.exp+")?"+s(a.block)+":"+e(t,r,i,n):""+s(a.block);function s(e){return i?i(e,r):e.once?js(e,r):Rs(e,r)}}(e.ifConditions.slice(),t,r,i)}function $s(e,t,r,i){var n=e.for,a=e.alias,s=e.iterator1?","+e.iterator1:"",o=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,(i||"_l")+"(("+n+"),function("+a+s+o+"){return "+(r||Rs)(e,t)+"})"}function Ns(e,t){var r="{",i=function(e,t){var r=e.directives;if(!r)return;var i,n,a,s,o="directives:[",l=!1;for(i=0,n=r.length;i<n;i++){a=r[i],s=!0;var c=t.directives[a.name];c&&(s=!!c(e,a,t.warn)),s&&(l=!0,o+='{name:"'+a.name+'",rawName:"'+a.rawName+'"'+(a.value?",value:("+a.value+"),expression:"+JSON.stringify(a.value):"")+(a.arg?",arg:"+(a.isDynamicArg?a.arg:'"'+a.arg+'"'):"")+(a.modifiers?",modifiers:"+JSON.stringify(a.modifiers):"")+"},")}if(l)return o.slice(0,-1)+"]"}(e,t);i&&(r+=i+","),e.key&&(r+="key:"+e.key+","),e.ref&&(r+="ref:"+e.ref+","),e.refInFor&&(r+="refInFor:true,"),e.pre&&(r+="pre:true,"),e.component&&(r+='tag:"'+e.tag+'",');for(var n=0;n<t.dataGenFns.length;n++)r+=t.dataGenFns[n](e);if(e.attrs&&(r+="attrs:"+Ys(e.attrs)+","),e.props&&(r+="domProps:"+Ys(e.props)+","),e.events&&(r+=Ps(e.events,!1)+","),e.nativeEvents&&(r+=Ps(e.nativeEvents,!0)+","),e.slotTarget&&!e.slotScope&&(r+="slot:"+e.slotTarget+","),e.scopedSlots&&(r+=function(e,t,r){var i=e.for||Object.keys(t).some((function(e){var r=t[e];return r.slotTargetDynamic||r.if||r.for||zs(r)})),n=!!e.if;if(!i)for(var a=e.parent;a;){if(a.slotScope&&"_empty_"!==a.slotScope||a.for){i=!0;break}a.if&&(n=!0),a=a.parent}var s=Object.keys(t).map((function(e){return Us(t[e],r)})).join(",");return"scopedSlots:_u(["+s+"]"+(i?",null,true":"")+(!i&&n?",null,false,"+function(e){var t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return t>>>0}(s):"")+")"}(e,e.scopedSlots,t)+","),e.model&&(r+="model:{value:"+e.model.value+",callback:"+e.model.callback+",expression:"+e.model.expression+"},"),e.inlineTemplate){var a=function(e,t){var r=e.children[0];0;if(r&&1===r.type){var i=Bs(r,t.options);return"inlineTemplate:{render:function(){"+i.render+"},staticRenderFns:["+i.staticRenderFns.map((function(e){return"function(){"+e+"}"})).join(",")+"]}"}}(e,t);a&&(r+=a+",")}return r=r.replace(/,$/,"")+"}",e.dynamicAttrs&&(r="_b("+r+',"'+e.tag+'",'+Ys(e.dynamicAttrs)+")"),e.wrapData&&(r=e.wrapData(r)),e.wrapListeners&&(r=e.wrapListeners(r)),r}function zs(e){return 1===e.type&&("slot"===e.tag||e.children.some(zs))}function Us(e,t){var r=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!r)return Fs(e,t,Us,"null");if(e.for&&!e.forProcessed)return $s(e,t,Us);var i="_empty_"===e.slotScope?"":String(e.slotScope),n="function("+i+"){return "+("template"===e.tag?e.if&&r?"("+e.if+")?"+(Hs(e,t)||"undefined")+":undefined":Hs(e,t)||"undefined":Rs(e,t))+"}",a=i?"":",proxy:true";return"{key:"+(e.slotTarget||'"default"')+",fn:"+n+a+"}"}function Hs(e,t,r,i,n){var a=e.children;if(a.length){var s=a[0];if(1===a.length&&s.for&&"template"!==s.tag&&"slot"!==s.tag){var o=r?t.maybeComponent(s)?",1":",0":"";return""+(i||Rs)(s,t)+o}var l=r?function(e,t){for(var r=0,i=0;i<e.length;i++){var n=e[i];if(1===n.type){if(Ws(n)||n.ifConditions&&n.ifConditions.some((function(e){return Ws(e.block)}))){r=2;break}(t(n)||n.ifConditions&&n.ifConditions.some((function(e){return t(e.block)})))&&(r=1)}}return r}(a,t.maybeComponent):0,c=n||Vs;return"["+a.map((function(e){return c(e,t)})).join(",")+"]"+(l?","+l:"")}}function Ws(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Vs(e,t){return 1===e.type?Rs(e,t):3===e.type&&e.isComment?function(e){return"_e("+JSON.stringify(e.text)+")"}(e):function(e){return"_v("+(2===e.type?e.expression:Xs(JSON.stringify(e.text)))+")"}(e)}function Ys(e){for(var t="",r="",i=0;i<e.length;i++){var n=e[i],a=Xs(n.value);n.dynamic?r+=n.name+","+a+",":t+='"'+n.name+'":'+a+","}return t="{"+t.slice(0,-1)+"}",r?"_d("+t+",["+r.slice(0,-1)+"])":t}function Xs(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");function Gs(e,t){try{return new Function(e)}catch(r){return t.push({err:r,code:e}),I}}function qs(e){var t=Object.create(null);return function(r,i,n){(i=A({},i)).warn;delete i.warn;var a=i.delimiters?String(i.delimiters)+r:r;if(t[a])return t[a];var s=e(r,i);var o={},l=[];return o.render=Gs(s.render,l),o.staticRenderFns=s.staticRenderFns.map((function(e){return Gs(e,l)})),t[a]=o}}var Ks,Js,Zs=(Ks=function(e,t){var r=ss(e.trim(),t);!1!==t.optimize&&Cs(r,t);var i=Bs(r,t);return{ast:r,render:i.render,staticRenderFns:i.staticRenderFns}},function(e){function t(t,r){var i=Object.create(e),n=[],a=[];if(r)for(var s in r.modules&&(i.modules=(e.modules||[]).concat(r.modules)),r.directives&&(i.directives=A(Object.create(e.directives||null),r.directives)),r)"modules"!==s&&"directives"!==s&&(i[s]=r[s]);i.warn=function(e,t,r){(r?a:n).push(e)};var o=Ks(t.trim(),i);return o.errors=n,o.tips=a,o}return{compile:t,compileToFunctions:qs(t)}})(ys),Qs=(Zs.compile,Zs.compileToFunctions);function eo(e){return(Js=Js||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',Js.innerHTML.indexOf("&#10;")>0}var to=!!X&&eo(!1),ro=!!X&&eo(!0),io=_((function(e){var t=Qr(e);return t&&t.innerHTML})),no=Sr.prototype.$mount;Sr.prototype.$mount=function(e,t){if((e=e&&Qr(e))===document.body||e===document.documentElement)return this;var r=this.$options;if(!r.render){var i=r.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&(i=io(i));else{if(!i.nodeType)return this;i=i.innerHTML}else e&&(i=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(i){0;var n=Qs(i,{outputSourceRange:!1,shouldDecodeNewlines:to,shouldDecodeNewlinesForHref:ro,delimiters:r.delimiters,comments:r.comments},this),a=n.render,s=n.staticRenderFns;r.render=a,r.staticRenderFns=s}}return no.call(this,e,t)},Sr.compile=Qs,t.a=Sr}).call(this,r(7),r(6).setImmediate)},function(e,t,r){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(19),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(7))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){var t7ctx;t7ctx="undefined"!=typeof window?window:void 0!==global?global:void 0;var Template7Context=t7ctx,Template7Utils={quoteSingleRexExp:new RegExp("'","g"),quoteDoubleRexExp:new RegExp('"',"g"),isFunction:e=>"function"==typeof e,escape:(e="")=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),helperToSlices(e){var t,r,i,{quoteDoubleRexExp:n,quoteSingleRexExp:a}=Template7Utils,s=e.replace(/[{}#}]/g,"").trim().split(" "),o=[];for(r=0;r<s.length;r+=1){var l=s[r],c=void 0,h=void 0;if(0===r)o.push(l);else if(0===l.indexOf('"')||0===l.indexOf("'"))if(c=0===l.indexOf('"')?n:a,h=0===l.indexOf('"')?'"':"'",2===l.match(c).length)o.push(l);else{for(t=0,i=r+1;i<s.length;i+=1)if(l+=" ".concat(s[i]),s[i].indexOf(h)>=0){t=i,o.push(l);break}t&&(r=t)}else if(l.indexOf("=")>0){var u=l.split("="),d=u[0],p=u[1];if(c||(c=0===p.indexOf('"')?n:a,h=0===p.indexOf('"')?'"':"'"),2!==p.match(c).length){for(t=0,i=r+1;i<s.length;i+=1)if(p+=" ".concat(s[i]),s[i].indexOf(h)>=0){t=i;break}t&&(r=t)}var f=[d,p.replace(c,"")];o.push(f)}else o.push(l)}return o},stringToBlocks(e){var t,r,i=[];if(!e)return[];var n=e.split(/({{[^{^}]*}})/);for(t=0;t<n.length;t+=1){var a=n[t];if(""!==a)if(a.indexOf("{{")<0)i.push({type:"plain",content:a});else{if(a.indexOf("{/")>=0)continue;if((a=a.replace(/{{([#/])*([ ])*/,"{{$1").replace(/([ ])*}}/,"}}")).indexOf("{#")<0&&a.indexOf(" ")<0&&a.indexOf("else")<0){i.push({type:"variable",contextName:a.replace(/[{}]/g,"")});continue}var s=Template7Utils.helperToSlices(a),o=s[0],l=">"===o,c=[],h={};for(r=1;r<s.length;r+=1){var u=s[r];Array.isArray(u)?h[u[0]]="false"!==u[1]&&u[1]:c.push(u)}if(a.indexOf("{#")>=0){var d="",p="",f=0,g=void 0,v=!1,m=!1,b=0;for(r=t+1;r<n.length;r+=1)if(n[r].indexOf("{{#")>=0&&(b+=1),n[r].indexOf("{{/")>=0&&(b-=1),n[r].indexOf("{{#".concat(o))>=0)d+=n[r],m&&(p+=n[r]),f+=1;else if(n[r].indexOf("{{/".concat(o))>=0){if(!(f>0)){g=r,v=!0;break}f-=1,d+=n[r],m&&(p+=n[r])}else n[r].indexOf("else")>=0&&0===b?m=!0:(m||(d+=n[r]),m&&(p+=n[r]));v&&(g&&(t=g),"raw"===o?i.push({type:"plain",content:d}):i.push({type:"helper",helperName:o,contextName:c,content:d,inverseContent:p,hash:h}))}else a.indexOf(" ")>0&&(l&&(o="_partial",c[0]&&(0===c[0].indexOf("[")?c[0]=c[0].replace(/[[\]]/g,""):c[0]='"'.concat(c[0].replace(/"|'/g,""),'"'))),i.push({type:"helper",helperName:o,contextName:c,hash:h}))}}return i},parseJsVariable:(e,t,r)=>e.split(/([+ \-*/^()&=|<>!%:?])/g).reduce((e,i)=>{if(!i)return e;if(i.indexOf(t)<0)return e.push(i),e;if(!r)return e.push(JSON.stringify("")),e;var n=r;return i.indexOf("".concat(t,"."))>=0&&i.split("".concat(t,"."))[1].split(".").forEach(e=>{n=e in n?n[e]:void 0}),("string"==typeof n||Array.isArray(n)||n.constructor&&n.constructor===Object)&&(n=JSON.stringify(n)),void 0===n&&(n="undefined"),e.push(n),e},[]).join(""),parseJsParents:(e,t)=>e.split(/([+ \-*^()&=|<>!%:?])/g).reduce((e,r)=>{if(!r)return e;if(r.indexOf("../")<0)return e.push(r),e;if(!t||0===t.length)return e.push(JSON.stringify("")),e;var i=r.split("../").length-1,n=i>t.length?t[t.length-1]:t[i-1];return r.replace(/..\//g,"").split(".").forEach(e=>{n=void 0!==n[e]?n[e]:"undefined"}),!1===n||!0===n?(e.push(JSON.stringify(n)),e):null===n||"undefined"===n?(e.push(JSON.stringify("")),e):(e.push(JSON.stringify(n)),e)},[]).join(""),getCompileVar(e,t,r="data_1"){var i,n,a=t,s=0;0===e.indexOf("../")?(s=e.split("../").length-1,n=a.split("_")[1]-s,a="ctx_".concat(n>=1?n:1),i=e.split("../")[s].split(".")):0===e.indexOf("@global")?(a="Template7.global",i=e.split("@global.")[1].split(".")):0===e.indexOf("@root")?(a="root",i=e.split("@root.")[1].split(".")):i=e.split(".");for(var o=0;o<i.length;o+=1){var l=i[o];if(0===l.indexOf("@")){var c=r.split("_")[1];s>0&&(c=n),o>0?a+="[(data_".concat(c," && data_").concat(c,".").concat(l.replace("@",""),")]"):a="(data_".concat(c," && data_").concat(c,".").concat(l.replace("@",""),")")}else(Number.isFinite?Number.isFinite(l):Template7Context.isFinite(l))?a+="[".concat(l,"]"):"this"===l||l.indexOf("this.")>=0||l.indexOf("this[")>=0||l.indexOf("this(")>=0?a=l.replace("this",t):a+=".".concat(l)}return a},getCompiledArguments(e,t,r){for(var i=[],n=0;n<e.length;n+=1)/^['"]/.test(e[n])||/^(true|false|\d+)$/.test(e[n])?i.push(e[n]):i.push(Template7Utils.getCompileVar(e[n],t,r));return i.join(", ")}},Template7Helpers={_partial(e,t){var r=this,i=Template7Class.partials[e];return!i||i&&!i.template?"":(i.compiled||(i.compiled=new Template7Class(i.template).compile()),Object.keys(t.hash).forEach(e=>{r[e]=t.hash[e]}),i.compiled(r,t.data,t.root))},escape(e){if(null==e)return"";if("string"!=typeof e)throw new Error('Template7: Passed context to "escape" helper should be a string');return Template7Utils.escape(e)},if(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r?t.fn(this,t.data):t.inverse(this,t.data)},unless(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r?t.inverse(this,t.data):t.fn(this,t.data)},each(e,t){var r=e,i="",n=0;if(Template7Utils.isFunction(r)&&(r=r.call(this)),Array.isArray(r)){for(t.hash.reverse&&(r=r.reverse()),n=0;n<r.length;n+=1)i+=t.fn(r[n],{first:0===n,last:n===r.length-1,index:n});t.hash.reverse&&(r=r.reverse())}else for(var a in r)n+=1,i+=t.fn(r[a],{key:a});return n>0?i:t.inverse(this)},with(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=e.call(this)),t.fn(r)},join(e,t){var r=e;return Template7Utils.isFunction(r)&&(r=r.call(this)),r.join(t.hash.delimiter||t.hash.delimeter)},js(expression,options){var data=options.data,func,execute=expression;return"index first last key".split(" ").forEach(e=>{if(void 0!==data[e]){var t=new RegExp("this.@".concat(e),"g"),r=new RegExp("@".concat(e),"g");execute=execute.replace(t,JSON.stringify(data[e])).replace(r,JSON.stringify(data[e]))}}),options.root&&execute.indexOf("@root")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),execute.indexOf("@global")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Context.Template7.global)),execute.indexOf("../")>=0&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=execute.indexOf("return")>=0?"(function(){".concat(execute,"})"):"(function(){return (".concat(execute,")})"),eval(func).call(this)},js_if(expression,options){var data=options.data,func,execute=expression;"index first last key".split(" ").forEach(e=>{if(void 0!==data[e]){var t=new RegExp("this.@".concat(e),"g"),r=new RegExp("@".concat(e),"g");execute=execute.replace(t,JSON.stringify(data[e])).replace(r,JSON.stringify(data[e]))}}),options.root&&execute.indexOf("@root")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@root",options.root)),execute.indexOf("@global")>=0&&(execute=Template7Utils.parseJsVariable(execute,"@global",Template7Context.Template7.global)),execute.indexOf("../")>=0&&(execute=Template7Utils.parseJsParents(execute,options.parents)),func=execute.indexOf("return")>=0?"(function(){".concat(execute,"})"):"(function(){return (".concat(execute,")})");var condition=eval(func).call(this);return condition?options.fn(this,options.data):options.inverse(this,options.data)}};Template7Helpers.js_compare=Template7Helpers.js_if;var Template7Options={},Template7Partials={};class Template7Class{constructor(e){this.template=e}compile(template=this.template,depth=1){var t=this;if(t.compiled)return t.compiled;if("string"!=typeof template)throw new Error("Template7: Template must be a string");var{stringToBlocks:stringToBlocks,getCompileVar:getCompileVar,getCompiledArguments:getCompiledArguments}=Template7Utils,blocks=stringToBlocks(template),ctx="ctx_".concat(depth),data="data_".concat(depth);if(0===blocks.length)return function(){return""};function getCompileFn(e,r){return e.content?t.compile(e.content,r):function(){return""}}function getCompileInverse(e,r){return e.inverseContent?t.compile(e.inverseContent,r):function(){return""}}var resultString="",i;for(resultString+=1===depth?"(function (".concat(ctx,", ").concat(data,", root) {\n"):"(function (".concat(ctx,", ").concat(data,") {\n"),1===depth&&(resultString+="function isArray(arr){return Array.isArray(arr);}\n",resultString+="function isFunction(func){return (typeof func === 'function');}\n",resultString+='function c(val, ctx) {if (typeof val !== "undefined" && val !== null) {if (isFunction(val)) {return val.call(ctx);} else return val;} else return "";}\n',resultString+="root = root || ctx_1 || {};\n"),resultString+="var r = '';\n",i=0;i<blocks.length;i+=1){var block=blocks[i];if("plain"!==block.type){var variable=void 0,compiledArguments=void 0;if("variable"===block.type&&(variable=getCompileVar(block.contextName,ctx,data),resultString+="r += c(".concat(variable,", ").concat(ctx,");")),"helper"===block.type){var parents=void 0;if("ctx_1"!==ctx){for(var level=ctx.split("_")[1],parentsString="ctx_".concat(level-1),j=level-2;j>=1;j-=1)parentsString+=", ctx_".concat(j);parents="[".concat(parentsString,"]")}else parents="[".concat(ctx,"]");var dynamicHelper=void 0;if(0===block.helperName.indexOf("[")&&(block.helperName=getCompileVar(block.helperName.replace(/[[\]]/g,""),ctx,data),dynamicHelper=!0),dynamicHelper||block.helperName in Template7Helpers)compiledArguments=getCompiledArguments(block.contextName,ctx,data),resultString+="r += (Template7Helpers".concat(dynamicHelper?"[".concat(block.helperName,"]"):".".concat(block.helperName),").call(").concat(ctx,", ").concat(compiledArguments&&"".concat(compiledArguments,", "),"{hash:").concat(JSON.stringify(block.hash),", data: ").concat(data," || {}, fn: ").concat(getCompileFn(block,depth+1),", inverse: ").concat(getCompileInverse(block,depth+1),", root: root, parents: ").concat(parents,"});");else{if(block.contextName.length>0)throw new Error('Template7: Missing helper: "'.concat(block.helperName,'"'));variable=getCompileVar(block.helperName,ctx,data),resultString+="if (".concat(variable,") {"),resultString+="if (isArray(".concat(variable,")) {"),resultString+="r += (Template7Helpers.each).call(".concat(ctx,", ").concat(variable,", {hash:").concat(JSON.stringify(block.hash),", data: ").concat(data," || {}, fn: ").concat(getCompileFn(block,depth+1),", inverse: ").concat(getCompileInverse(block,depth+1),", root: root, parents: ").concat(parents,"});"),resultString+="}else {",resultString+="r += (Template7Helpers.with).call(".concat(ctx,", ").concat(variable,", {hash:").concat(JSON.stringify(block.hash),", data: ").concat(data," || {}, fn: ").concat(getCompileFn(block,depth+1),", inverse: ").concat(getCompileInverse(block,depth+1),", root: root, parents: ").concat(parents,"});"),resultString+="}}"}}}else resultString+="r +='".concat(block.content.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"\\'"),"';")}return resultString+="\nreturn r;})",1===depth?(t.compiled=eval(resultString),t.compiled):resultString}static get options(){return Template7Options}static get partials(){return Template7Partials}static get helpers(){return Template7Helpers}}function Template7(...e){var[t,r]=e;if(2===e.length){var i=new Template7Class(t),n=i.compile()(r);return i=null,n}return new Template7Class(t)}Template7.registerHelper=function(e,t){Template7Class.helpers[e]=t},Template7.unregisterHelper=function(e){Template7Class.helpers[e]=void 0,delete Template7Class.helpers[e]},Template7.registerPartial=function(e,t){Template7Class.partials[e]={template:t}},Template7.unregisterPartial=function(e){Template7Class.partials[e]&&(Template7Class.partials[e]=void 0,delete Template7Class.partials[e])},Template7.compile=function(e,t){return new Template7Class(e,t).compile()},Template7.options=Template7Class.options,Template7.helpers=Template7Class.helpers,Template7.partials=Template7Class.partials,__webpack_exports__.a=Template7}).call(this,__webpack_require__(7))},function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!h){var e=o(d);h=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||h||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=r(23),n=r(24),a=r(25);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return c(this,e,t,r)}function c(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,r,i):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(t,r),n=(e=o(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|p(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?o(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(h(t),e=o(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=o(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(i)return N(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return E(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,i,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,i,n){var a,s=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var h=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*s}else-1!==h&&(a-=a-h),h=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){for(var u=!0,d=0;d<l;d++)if(c(e,a+d)!==c(t,d)){u=!1;break}if(u)return a}return-1}function y(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function w(e,t,r,i){return U(N(t,e.length-r),e,r,i)}function C(e,t,r,i){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function _(e,t,r,i){return C(e,t,r,i)}function x(e,t,r,i){return U(z(t),e,r,i)}function S(e,t,r,i){return U(function(e,t){for(var r,i,n,a=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,a.push(n),a.push(i);return a}(t,e.length-r),e,r,i)}function k(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var a,s,o,l,c=e[n],h=null,u=c>239?4:c>223?3:c>191?2:1;if(n+u<=r)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(a=e[n+1]))&&(l=(31&c)<<6|63&a)>127&&(h=l);break;case 3:a=e[n+1],s=e[n+2],128==(192&a)&&128==(192&s)&&(l=(15&c)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=e[n+1],s=e[n+2],o=e[n+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return c(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,i){return h(t),t<=0?o(e,t):void 0!==r?"string"==typeof i?o(e,t).fill(r,i):o(e,t).fill(r):o(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=l.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,i,n){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),c=this.slice(i,n),h=e.slice(t,r),u=0;u<o;++u)if(c[u]!==h[u]){a=c[u],s=h[u];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},l.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function E(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function P(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=t;a<r;++a)n+=$(e[a]);return n}function A(e,t,r){for(var i=e.slice(t,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,i,n,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function L(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-r,2);n<a;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function B(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-r,4);n<a;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function R(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,i,a){return a||R(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function j(e,t,r,i,a){return a||R(e,0,r,8),n.write(e,t,r,i,52,8),r+8}l.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;r=new l(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},l.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var i=t,n=1,a=this[e+--i];i>0&&(n*=256);)a+=this[e+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||I(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||I(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},l.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,a=i-r;if(this===e&&r<t&&t<i)for(n=a-1;n>=0;--n)e[n+t]=this[n+r];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},l.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=l.isBuffer(e)?e:N(new l(e,i).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var i=e.length,n=null,a=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function z(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(7))},function(e,t,r){},function(e,t,r){(function(t,r,i,n){e.exports=function e(t,r,i){function n(s,o){if(!r[s]){if(!t[s]){if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,(function(e){return n(t[s][1][e]||e)}),c,c.exports,e,t,r,i)}return r[s].exports}for(var a=!1,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,s,o,l,c,h=[],u=0,d=e.length,p=d,f="string"!==i.getTypeOf(e);u<e.length;)p=d-u,n=f?(t=e[u++],r=u<d?e[u++]:0,u<d?e[u++]:0):(t=e.charCodeAt(u++),r=u<d?e.charCodeAt(u++):0,u<d?e.charCodeAt(u++):0),s=t>>2,o=(3&t)<<4|r>>4,l=1<p?(15&r)<<2|n>>6:64,c=2<p?63&n:64,h.push(a.charAt(s)+a.charAt(o)+a.charAt(l)+a.charAt(c));return h.join("")},r.decode=function(e){var t,r,i,s,o,l,c=0,h=0,u="data:";if(e.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&p--,e.charAt(e.length-2)===a.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=n.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=a.indexOf(e.charAt(c++))<<2|(s=a.indexOf(e.charAt(c++)))>>4,r=(15&s)<<4|(o=a.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(l=a.indexOf(e.charAt(c++))),d[h++]=t,64!==o&&(d[h++]=r),64!==l&&(d[h++]=i);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var i=e("./external"),n=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function o(e,t,r,i,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var e=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var i=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var i=e("./utils"),n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,r,i){var a=n,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}(0|t,e,e.length):function(e,t,r,i){var a=n,s=0+r;e^=-1;for(var o=0;o<s;o++)e=e>>>8^a[255&(e^t.charCodeAt(o))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var i;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),a=e("./utils"),s=e("./stream/GenericWorker"),o=i?"uint8array":"array";function l(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",a.inherits(l,s),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(o,e.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new l("Deflate",e)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function i(e,t){var r,i="";for(r=0;r<t;r++)i+=String.fromCharCode(255&e),e>>>=8;return i}function n(e,t,r,n,s,h){var u,d,p=e.file,f=e.compression,g=h!==o.utf8encode,v=a.transformTo("string",h(p.name)),m=a.transformTo("string",o.utf8encode(p.name)),b=p.comment,y=a.transformTo("string",h(b)),w=a.transformTo("string",o.utf8encode(b)),C=m.length!==p.name.length,_=w.length!==b.length,x="",S="",k="",T=p.dir,O=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),g||!C&&!_||(P|=2048);var A=0,D=0;T&&(A|=16),"UNIX"===s?(D=798,A|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(p.unixPermissions,T)):(D=20,A|=function(e){return 63&(e||0)}(p.dosPermissions)),u=O.getUTCHours(),u<<=6,u|=O.getUTCMinutes(),u<<=5,u|=O.getUTCSeconds()/2,d=O.getUTCFullYear()-1980,d<<=4,d|=O.getUTCMonth()+1,d<<=5,d|=O.getUTCDate(),C&&(S=i(1,1)+i(l(v),4)+m,x+="up"+i(S.length,2)+S),_&&(k=i(1,1)+i(l(y),4)+w,x+="uc"+i(k.length,2)+k);var I="";return I+="\n\0",I+=i(P,2),I+=f.magic,I+=i(u,2),I+=i(d,2),I+=i(E.crc32,4),I+=i(E.compressedSize,4),I+=i(E.uncompressedSize,4),I+=i(v.length,2),I+=i(x.length,2),{fileRecord:c.LOCAL_FILE_HEADER+I+v+x,dirRecord:c.CENTRAL_FILE_HEADER+i(D,2)+I+i(y.length,2)+"\0\0\0\0"+i(A,4)+i(n,4)+v+x+y}}var a=e("../utils"),s=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,r,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,s),h.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-i-1))/r:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=function(e,t,r,n,s){var o=a.transformTo("string",s(n));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(r,4)+i(o.length,2)+o}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},h.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var i=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var a=new n(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,r){s++;var n=function(e,t){var r=e||t,n=i[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,t.compression),o=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,c=r.date;r._compressWorker(n,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(a)})),a.entriesCount=s}catch(e){a.error(e)}return a}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.0",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./external"),a=e("./utf8"),s=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new n.Promise((function(t,r){var i=e.decompressed.getContentWorker().pipe(new o);i.on("error",(function(e){r(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new s(t);return r.load(e),r})).then((function(e){var r=[n.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var a=0;a<i.length;a++)r.push(c(i[a]));return n.Promise.all(r)})).then((function(e){for(var n=e.shift(),a=n.files,s=0;s<a.length;s++){var o=a[s],l=o.fileNameStr,c=i.resolve(o.fileNameStr);r.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(r.file(c).unsafeOriginalName=l)}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../stream/GenericWorker");function a(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(a,n),a.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},a.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",(function(e,t){n.push(e)||n._helper.pause(),r&&r(t)})).on("error",(function(e){n.emit("error",e)})).on("end",(function(){n.push(null)}))}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,r,i){"use strict";r.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function i(e,t,r){var i,n=a.getTypeOf(t),o=a.extend(r||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=g(e)),o.createFolders&&(i=f(e))&&v.call(this,i,!0);var u,m="string"===n&&!1===o.binary&&!1===o.base64;r&&void 0!==r.binary||(o.binary=!m),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",n="string"),u=t instanceof c||t instanceof s?t:d.isNode&&d.isStream(t)?new p(e,t):a.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var b=new h(e,u,o);this.files[e]=b}var n=e("./utf8"),a=e("./utils"),s=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),u=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},v=function(e,t){return t=void 0!==t?t:l.createFolders,e=g(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,i;for(t in this.files)i=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,i)},filter:function(e){var t=[];return this.forEach((function(r,i){e(r,i)&&t.push(i)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,r),this;if(m(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var a=this.files[this.root+e];return a&&!a.dir?a:null},folder:function(e){if(!e)return this;if(m(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=v.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=a.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");a.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";t=u.generateWorker(this,r,i)}catch(e){(t=new s("error")).error(e)}return new o(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.length-4;0<=a;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===i&&this.data[a+3]===n)return a-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&i===a[2]&&n===a[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var i=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,r){"use strict";var i=e("./Uint8ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var i=e("./ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../support"),a=e("./ArrayReader"),s=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new o(e):n.uint8array?new l(i.transformTo("uint8array",e)):new a(i.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../utils");function a(e){i.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(a,i),a.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(a,n),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},t.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function a(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(a,n),a.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,r,i){"use strict";var n=e("../utils"),a=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),l=e("../support"),c=e("../external"),h=null;if(l.nodestream)try{h=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t,r){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=t,this._mimeType=r,n.checkSupport(i),this._worker=e.pipe(new a(i)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return function(e,r){return new c.Promise((function(i,a){var s=[],l=e._internalType,c=e._outputType,h=e._mimeType;e.on("data",(function(e,t){s.push(e),r&&r(t)})).on("error",(function(e){s=[],a(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(c,function(e,r){var i,n=0,a=null,s=0;for(i=0;i<r.length;i++)s+=r[i].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(a=new Uint8Array(s),i=0;i<r.length;i++)a.set(r[i],n),n+=r[i].length;return a;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,s),h);i(e)}catch(e){a(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),i.blob=0===a.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var i=e("./utils"),n=e("./support"),a=e("./nodejsUtils"),s=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function h(){s.call(this,"utf-8 encode")}o[254]=o[254]=1,r.utf8encode=function(e){return n.nodebuffer?a.newBufferFrom(e,"utf-8"):function(e){var t,r,i,a,s,o=e.length,l=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),a=s=0;s<l;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(i=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(i-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t}(e)},r.utf8decode=function(e){return n.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,n,a,s=e.length,l=new Array(2*s);for(t=r=0;t<s;)if((n=e[t++])<128)l[r++]=n;else if(4<(a=o[n]))l[r++]=65533,t+=a-1;else{for(n&=2===a?31:3===a?15:7;1<a&&t<s;)n=n<<6|63&e[t++],a--;1<a?l[r++]=65533:n<65536?l[r++]=n:(n-=65536,l[r++]=55296|n>>10&1023,l[r++]=56320|1023&n)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),i.applyFromCharCode(l)}(e=i.transformTo(n.uint8array?"uint8array":"array",e))},i.inherits(c,s),c.prototype.processChunk=function(e){var t=i.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var a=t;(t=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),t.set(a,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+o[e[r]]>t?r:t}(t),l=t;s!==t.length&&(n.uint8array?(l=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(l=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:r.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,i.inherits(h,s),h.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){"use strict";var n=e("./support"),a=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function l(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(e,t,r){var i=[],n=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;n<a;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,a)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,a)))),n+=r;return i.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=i.getTypeOf(e),n=!0;if("uint8array"===r?n=h.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=h.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return h.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return h.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}i.applyFromCharCode=u;var p={};p.string={string:l,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},p.array={string:u,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},p.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return s.newBufferFrom(e)}},p.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:l},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var r=i.getTypeOf(t);return p[r][e](t)},i.resolve=function(e){for(var t=e.split("/"),r=[],i=0;i<t.length;i++){var n=t[i];"."===n||""===n&&0!==i&&i!==t.length-1||(".."===n?r.pop():r.push(n))}return r.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,r,i="";for(r=0;r<(e||"").length;r++)i+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return i},i.delay=function(e,t,i){r((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},i.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},i.prepareContent=function(e,t,r,s,l){return o.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,r){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){r(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(t){var h=i.getTypeOf(t);return h?("arraybuffer"===h?t=i.transformTo("uint8array",t):"string"===h&&(l?t=a.decode(t):r&&!0!==s&&(t=function(e){return c(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),a=e("./signature"),s=e("./zipEntry"),o=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",r=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=t-r;if(0<i)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),a=e("./compressedObject"),s=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,i,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),r=e.readInt(2),i=e.readData(r),this.extraFields[t]={id:t,length:r,value:i};e.setIndex(n)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var a=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function i(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var n=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),s=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(t=t.pipe(new s.Utf8EncodeWorker)),!a&&i&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),o.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)i.prototype[c[u]]=h;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,i,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var a=0,s=new n(h),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),r=function(){o.data=a=++a%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,r=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;i=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}i=!1}t.exports=function(e){1!==c.push(e)||i||r()}}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var i=e("immediate");function n(){}var a={},s=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&p(this,e)}function h(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function u(e,t,r){i((function(){var i;try{i=t(r)}catch(i){return a.reject(e,i)}i===e?a.reject(e,new TypeError("Cannot resolve promise with itself")):a.resolve(e,i)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function i(t){r||(r=!0,a.reject(e,t))}function n(t){r||(r=!0,a.resolve(e,t))}var s=f((function(){t(n,i)}));"error"===s.status&&i(s.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(n);return this.state!==l?u(r,this.state===o?e:t,this.outcome):this.queue.push(new h(r,e,t)),r},h.prototype.callFulfilled=function(e){a.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){a.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},a.resolve=function(e,t){var r=f(d,t);if("error"===r.status)return a.reject(e,r.value);var i=r.value;if(i)p(e,i);else{e.state=o,e.outcome=t;for(var n=-1,s=e.queue.length;++n<s;)e.queue[n].callFulfilled(t)}return e},a.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:a.resolve(new this(n),e)},c.reject=function(e){var t=new this(n);return a.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var s=new Array(r),o=0,l=-1,c=new this(n);++l<r;)h(e[l],l);return c;function h(e,n){t.resolve(e).then((function(e){s[n]=e,++o!==r||i||(i=!0,a.resolve(c,s))}),(function(e){i||(i=!0,a.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var i,s=-1,o=new this(n);++s<t;)i=e[s],this.resolve(i).then((function(e){r||(r=!0,a.resolve(o,e))}),(function(e){r||(r=!0,a.reject(o,e))}));return o}},{immediate:36}],38:[function(e,t,r){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var i=e("./zlib/deflate"),n=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(s[r]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=i.deflateSetDictionary(this.strm,h)))throw new Error(s[r]);this._dict_set=!0}}function h(e,t){var r=new c(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}c.prototype.push=function(e,t){var r,s,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=a.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new n.Buf8(c),o.next_out=0,o.avail_out=c),1!==(r=i.deflate(o,s))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(n.shrinkBuf(o.output,o.next_out))):this.onData(n.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==r);return 4===s?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(o.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=c,r.deflate=h,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var i=e("./zlib/inflate"),n=e("./utils/common"),a=e("./utils/strings"),s=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==s.Z_OK)throw new Error(o[r]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}u.prototype.push=function(e,t){var r,o,l,c,u,d,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,v=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new n.Buf8(f),p.next_out=0,p.avail_out=f),(r=i.inflate(p,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(d="string"==typeof g?a.string2buf(g):"[object ArrayBuffer]"===h.call(g)?new Uint8Array(g):g,r=i.inflateSetDictionary(this.strm,d)),r===s.Z_BUF_ERROR&&!0===v&&(r=s.Z_OK,v=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&r!==s.Z_STREAM_END&&(0!==p.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(p.output,p.next_out),c=p.next_out-l,u=a.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&n.arraySet(p.output,p.output,l,c,0),this.onData(u)):this.onData(n.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(v=!0)}while((0<p.avail_in||0===p.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(p.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=u,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,s;for(t=i=0,r=e.length;t<r;t++)i+=e[t].length;for(s=new Uint8Array(i),t=n=0,r=e.length;t<r;t++)a=e[t],s.set(a,n),n+=a.length;return s}},a={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(i)},{}],42:[function(e,t,r){"use strict";var i=e("./common"),n=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),o=0;o<256;o++)s[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){var t,r,n,a,s,o=e.length,l=0;for(a=0;a<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(l),a=s=0;s<l;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,n,a,o=t||e.length,c=new Array(2*o);for(r=i=0;r<o;)if((n=e[r++])<128)c[i++]=n;else if(4<(a=s[n]))c[i++]=65533,r+=a-1;else{for(n&=2===a?31:3===a?15:7;1<a&&r<o;)n=n<<6|63&e[r++],a--;1<a?c[i++]=65533:n<65536?c[i++]=n:(n-=65536,c[i++]=55296|n>>10&1023,c[i++]=56320|1023&n)}return l(c,i)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;a=a+(n=n+t[i++]|0)|0,--s;);n%=65521,a%=65521}return n|a<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,r){"use strict";var i,n=e("../utils/common"),a=e("./trees"),s=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=-2,h=258,u=262,d=113;function p(e,t){return e.msg=l[t],t}function f(e){return(e<<1)-(4<e?9:0)}function g(e){for(var t=e.length;0<=--t;)e[t]=0}function v(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function m(e,t){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,v(e.strm)}function b(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var r,i,n=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,c=e.window,d=e.w_mask,p=e.prev,f=e.strstart+h,g=c[a+s-1],v=c[a+s];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]===v&&c[r+s-1]===g&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<f);if(i=h-(f-a),a=f-h,s<i){if(e.match_start=t,o<=(s=i))break;g=c[a+s-1],v=c[a+s]}}}while((t=p[t&d])>l&&0!=--n);return s<=e.lookahead?s:e.lookahead}function C(e){var t,r,i,a,l,c,h,d,p,f,g=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=g+(g-u)){for(n.arraySet(e.window,e.window,g,g,0),e.match_start-=g,e.strstart-=g,e.block_start-=g,t=r=e.hash_size;i=e.head[--t],e.head[t]=g<=i?i-g:0,--r;);for(t=r=g;i=e.prev[--t],e.prev[t]=g<=i?i-g:0,--r;);a+=g}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,d=e.strstart+e.lookahead,f=void 0,(p=a)<(f=c.avail_in)&&(f=p),r=0===f?0:(c.avail_in-=f,n.arraySet(h,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=s(c.adler,h,f,d):2===c.state.wrap&&(c.adler=o(c.adler,h,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function _(e,t){for(var r,i;;){if(e.lookahead<u){if(C(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-u&&(e.match_length=w(e,r)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var r,i,n;;){if(e.lookahead<u){if(C(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-u&&(e.match_length=w(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(m(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&m(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):p(e,c)}function O(e){var t=T(e);return 0===t&&function(e){e.window_size=2*e.w_size,g(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function E(e,t,r,i,a,s){if(!e)return c;var o=1;if(-1===t&&(t=6),i<0?(o=0,i=-i):15<i&&(o=2,i-=16),a<1||9<a||8!==r||i<8||15<i||t<0||9<t||s<0||4<s)return p(e,c);8===i&&(i=9);var l=new k;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=s,l.method=r,O(e)}i=[new S(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(C(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,m(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(m(e,!1),e.strm.avail_out),1)})),new S(4,4,8,4,_),new S(4,5,16,8,_),new S(4,6,32,32,_),new S(4,4,16,16,x),new S(8,16,32,32,x),new S(8,16,128,128,x),new S(8,32,128,256,x),new S(32,128,258,1024,x),new S(32,258,258,4096,x)],r.deflateInit=function(e,t){return E(e,t,8,15,8,0)},r.deflateInit2=E,r.deflateReset=O,r.deflateResetKeep=T,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},r.deflate=function(e,t){var r,n,s,l;if(!e||!e.state||5<t||t<0)return e?p(e,c):c;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return p(e,0===e.avail_out?-5:c);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,b(n,31),b(n,139),b(n,8),n.gzhead?(b(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),b(n,255&n.gzhead.time),b(n,n.gzhead.time>>8&255),b(n,n.gzhead.time>>16&255),b(n,n.gzhead.time>>24&255),b(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),b(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(b(n,255&n.gzhead.extra.length),b(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(b(n,0),b(n,0),b(n,0),b(n,0),b(n,0),b(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),b(n,3),n.status=d);else{var u=8+(n.w_bits-8<<4)<<8;u|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(u|=32),u+=31-u%31,n.status=d,y(n,u),0!==n.strstart&&(y(n,e.adler>>>16),y(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),v(e),s=n.pending,n.pending!==n.pending_buf_size));)b(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),v(e),s=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,b(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===l&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),v(e),s=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,b(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===l&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&v(e),n.pending+2<=n.pending_buf_size&&(b(n,255&e.adler),b(n,e.adler>>8&255),e.adler=0,n.status=d)):n.status=d),0!==n.pending){if(v(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&f(t)<=f(r)&&4!==t)return p(e,-5);if(666===n.status&&0!==e.avail_in)return p(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var w=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(C(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,s,o=e.window;;){if(e.lookahead<=h){if(C(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(i=o[n=e.strstart-1])===o[++n]&&i===o[++n]&&i===o[++n]){s=e.strstart+h;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);e.match_length=h-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(m(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(m(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(m(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==w&&4!==w||(n.status=666),1===w||3===w)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===w&&(1===t?a._tr_align(n):5!==t&&(a._tr_stored_block(n,0,0,!1),3===t&&(g(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),v(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(b(n,255&e.adler),b(n,e.adler>>8&255),b(n,e.adler>>16&255),b(n,e.adler>>24&255),b(n,255&e.total_in),b(n,e.total_in>>8&255),b(n,e.total_in>>16&255),b(n,e.total_in>>24&255)):(y(n,e.adler>>>16),y(n,65535&e.adler)),v(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?p(e,c):(e.state=null,t===d?p(e,-3):0):c},r.deflateSetDictionary=function(e,t){var r,i,a,o,l,h,u,d,p=t.length;if(!e||!e.state)return c;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return c;for(1===o&&(e.adler=s(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===o&&(g(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new n.Buf8(r.w_size),n.arraySet(d,t,p-r.w_size,r.w_size,0),t=d,p=r.w_size),l=e.avail_in,h=e.next_in,u=e.input,e.avail_in=p,e.next_in=0,e.input=t,C(r);r.lookahead>=3;){for(i=r.strstart,a=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--a;);r.strstart=i,r.lookahead=2,C(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=h,e.input=u,e.avail_in=l,r.wrap=o,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,i,n,a,s,o,l,c,h,u,d,p,f,g,v,m,b,y,w,C,_,x,S,k,T;r=e.state,i=e.next_in,k=e.input,n=i+(e.avail_in-5),a=e.next_out,T=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),l=r.dmax,c=r.wsize,h=r.whave,u=r.wnext,d=r.window,p=r.hold,f=r.bits,g=r.lencode,v=r.distcode,m=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{f<15&&(p+=k[i++]<<f,f+=8,p+=k[i++]<<f,f+=8),y=g[p&m];t:for(;;){if(p>>>=w=y>>>24,f-=w,0==(w=y>>>16&255))T[a++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=g[(65535&y)+(p&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}C=65535&y,(w&=15)&&(f<w&&(p+=k[i++]<<f,f+=8),C+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=k[i++]<<f,f+=8,p+=k[i++]<<f,f+=8),y=v[p&b];r:for(;;){if(p>>>=w=y>>>24,f-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=v[(65535&y)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(_=65535&y,f<(w&=15)&&(p+=k[i++]<<f,(f+=8)<w&&(p+=k[i++]<<f,f+=8)),l<(_+=p&(1<<w)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=w,f-=w,(w=a-s)<_){if(h<(w=_-w)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=d,(x=0)===u){if(x+=c-w,w<C){for(C-=w;T[a++]=d[x++],--w;);x=a-_,S=T}}else if(u<w){if(x+=c+u-w,(w-=u)<C){for(C-=w;T[a++]=d[x++],--w;);if(x=0,u<C){for(C-=w=u;T[a++]=d[x++],--w;);x=a-_,S=T}}}else if(x+=u-w,w<C){for(C-=w;T[a++]=d[x++],--w;);x=a-_,S=T}for(;2<C;)T[a++]=S[x++],T[a++]=S[x++],T[a++]=S[x++],C-=3;C&&(T[a++]=S[x++],1<C&&(T[a++]=S[x++]))}else{for(x=a-_;T[a++]=T[x++],T[a++]=T[x++],T[a++]=T[x++],2<(C-=3););C&&(T[a++]=T[x++],1<C&&(T[a++]=T[x++]))}break}}break}}while(i<n&&a<o);i-=C=f>>3,p&=(1<<(f-=C<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=p,r.bits=f}},{}],49:[function(e,t,r){"use strict";var i=e("../utils/common"),n=e("./adler32"),a=e("./crc32"),s=e("./inffast"),o=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):l}function p(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,d(e))):l}function f(e,t){var r,i;return e?(i=new h,(e.state=i).window=null,0!==(r=p(e,t))&&(e.state=null),r):l}var g,v,m=!0;function b(e){if(m){var t;for(g=new i.Buf32(512),v=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,v,0,e.work,{bits:5}),m=!1}e.lencode=g,e.lenbits=9,e.distcode=v,e.distbits=5}function y(e,t,r,n){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),n>=s.wsize?(i.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n<(a=s.wsize-s.wnext)&&(a=n),i.arraySet(s.window,t,r-n,a,s.wnext),(n-=a)?(i.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}r.inflateReset=d,r.inflateReset2=p,r.inflateResetKeep=u,r.inflateInit=function(e){return f(e,15)},r.inflateInit2=f,r.inflate=function(e,t){var r,h,u,d,p,f,g,v,m,w,C,_,x,S,k,T,O,E,P,A,D,I,L,B,R=0,M=new i.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(r=e.state).mode&&(r.mode=13),p=e.next_out,u=e.output,g=e.avail_out,d=e.next_in,h=e.input,f=e.avail_in,v=r.hold,m=r.bits,w=f,C=g,I=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;m<16;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(2&r.wrap&&35615===v){M[r.check=0]=255&v,M[1]=v>>>8&255,r.check=a(r.check,M,2,0),m=v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",r.mode=30;break}if(m-=4,D=8+(15&(v>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&v?10:12,m=v=0;break;case 2:for(;m<16;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(r.flags=v,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(M[0]=255&v,M[1]=v>>>8&255,r.check=a(r.check,M,2,0)),m=v=0,r.mode=3;case 3:for(;m<32;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.head&&(r.head.time=v),512&r.flags&&(M[0]=255&v,M[1]=v>>>8&255,M[2]=v>>>16&255,M[3]=v>>>24&255,r.check=a(r.check,M,4,0)),m=v=0,r.mode=4;case 4:for(;m<16;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(M[0]=255&v,M[1]=v>>>8&255,r.check=a(r.check,M,2,0)),m=v=0,r.mode=5;case 5:if(1024&r.flags){for(;m<16;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(M[0]=255&v,M[1]=v>>>8&255,r.check=a(r.check,M,2,0)),m=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(f<(_=r.length)&&(_=f),_&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,h,d,_,D)),512&r.flags&&(r.check=a(r.check,h,_,d)),f-=_,d+=_,r.length-=_),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break e;for(_=0;D=h[d+_++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&_<f;);if(512&r.flags&&(r.check=a(r.check,h,_,d)),f-=_,d+=_,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break e;for(_=0;D=h[d+_++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&_<f;);if(512&r.flags&&(r.check=a(r.check,h,_,d)),f-=_,d+=_,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;m<16;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(v!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}m=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;m<32;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}e.adler=r.check=c(v),m=v=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=p,e.avail_out=g,e.next_in=d,e.avail_in=f,r.hold=v,r.bits=m,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){v>>>=7&m,m-=7&m,r.mode=27;break}for(;m<3;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}switch(r.last=1&v,m-=1,3&(v>>>=1)){case 0:r.mode=14;break;case 1:if(b(r),r.mode=20,6!==t)break;v>>>=2,m-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}v>>>=2,m-=2;break;case 14:for(v>>>=7&m,m-=7&m;m<32;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,m=v=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(_=r.length){if(f<_&&(_=f),g<_&&(_=g),0===_)break e;i.arraySet(u,h,d,_,p),f-=_,d+=_,g-=_,p+=_,r.length-=_;break}r.mode=12;break;case 17:for(;m<14;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(r.nlen=257+(31&v),v>>>=5,m-=5,r.ndist=1+(31&v),v>>>=5,m-=5,r.ncode=4+(15&v),v>>>=4,m-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;m<3;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.lens[j[r.have++]]=7&v,v>>>=3,m-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},I=o(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,I){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;T=(R=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,O=65535&R,!((k=R>>>24)<=m);){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(O<16)v>>>=k,m-=k,r.lens[r.have++]=O;else{if(16===O){for(B=k+2;m<B;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(v>>>=k,m-=k,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],_=3+(3&v),v>>>=2,m-=2}else if(17===O){for(B=k+3;m<B;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}m-=k,D=0,_=3+(7&(v>>>=k)),v>>>=3,m-=3}else{for(B=k+7;m<B;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}m-=k,D=0,_=11+(127&(v>>>=k)),v>>>=7,m-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;_--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},I=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,I){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},I=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,I){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=f&&258<=g){e.next_out=p,e.avail_out=g,e.next_in=d,e.avail_in=f,r.hold=v,r.bits=m,s(e,C),p=e.next_out,u=e.output,g=e.avail_out,d=e.next_in,h=e.input,f=e.avail_in,v=r.hold,m=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;T=(R=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,O=65535&R,!((k=R>>>24)<=m);){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(T&&0==(240&T)){for(E=k,P=T,A=O;T=(R=r.lencode[A+((v&(1<<E+P)-1)>>E)])>>>16&255,O=65535&R,!(E+(k=R>>>24)<=m);){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}v>>>=E,m-=E,r.back+=E}if(v>>>=k,m-=k,r.back+=k,r.length=O,0===T){r.mode=26;break}if(32&T){r.back=-1,r.mode=12;break}if(64&T){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&T,r.mode=22;case 22:if(r.extra){for(B=r.extra;m<B;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;T=(R=r.distcode[v&(1<<r.distbits)-1])>>>16&255,O=65535&R,!((k=R>>>24)<=m);){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(0==(240&T)){for(E=k,P=T,A=O;T=(R=r.distcode[A+((v&(1<<E+P)-1)>>E)])>>>16&255,O=65535&R,!(E+(k=R>>>24)<=m);){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}v>>>=E,m-=E,r.back+=E}if(v>>>=k,m-=k,r.back+=k,64&T){e.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&T,r.mode=24;case 24:if(r.extra){for(B=r.extra;m<B;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===g)break e;if(_=C-g,r.offset>_){if((_=r.offset-_)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}x=_>r.wnext?(_-=r.wnext,r.wsize-_):r.wnext-_,_>r.length&&(_=r.length),S=r.window}else S=u,x=p-r.offset,_=r.length;for(g<_&&(_=g),g-=_,r.length-=_;u[p++]=S[x++],--_;);0===r.length&&(r.mode=21);break;case 26:if(0===g)break e;u[p++]=r.length,g--,r.mode=21;break;case 27:if(r.wrap){for(;m<32;){if(0===f)break e;f--,v|=h[d++]<<m,m+=8}if(C-=g,e.total_out+=C,r.total+=C,C&&(e.adler=r.check=r.flags?a(r.check,u,C,p-C):n(r.check,u,C,p-C)),C=g,(r.flags?v:c(v))!==r.check){e.msg="incorrect data check",r.mode=30;break}m=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;m<32;){if(0===f)break e;f--,v+=h[d++]<<m,m+=8}if(v!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}m=v=0}r.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return l}return e.next_out=p,e.avail_out=g,e.next_in=d,e.avail_in=f,r.hold=v,r.bits=m,(r.wsize||C!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&y(e,e.output,e.next_out,C-e.avail_out)?(r.mode=31,-4):(w-=e.avail_in,C-=e.avail_out,e.total_in+=w,e.total_out+=C,r.total+=C,r.wrap&&C&&(e.adler=r.check=r.flags?a(r.check,u,C,e.next_out-C):n(r.check,u,C,e.next_out-C)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==w&&0===C||4===t)&&0===I&&(I=-5),I)},r.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?l:((r.head=t).done=!1,0):l},r.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?l:11===r.mode&&n(1,t,i,0)!==r.check?-3:y(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):l},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var i=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,c,h,u,d){var p,f,g,v,m,b,y,w,C,_=d.bits,x=0,S=0,k=0,T=0,O=0,E=0,P=0,A=0,D=0,I=0,L=null,B=0,R=new i.Buf16(16),M=new i.Buf16(16),j=null,F=0;for(x=0;x<=15;x++)R[x]=0;for(S=0;S<l;S++)R[t[r+S]]++;for(O=_,T=15;1<=T&&0===R[T];T--);if(T<O&&(O=T),0===T)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(k=1;k<T&&0===R[k];k++);for(O<k&&(O=k),x=A=1;x<=15;x++)if(A<<=1,(A-=R[x])<0)return-1;if(0<A&&(0===e||1!==T))return-1;for(M[1]=0,x=1;x<15;x++)M[x+1]=M[x]+R[x];for(S=0;S<l;S++)0!==t[r+S]&&(u[M[t[r+S]]++]=S);if(b=0===e?(L=j=u,19):1===e?(L=n,B-=257,j=a,F-=257,256):(L=s,j=o,-1),x=k,m=h,P=S=I=0,g=-1,v=(D=1<<(E=O))-1,1===e&&852<D||2===e&&592<D)return 1;for(;;){for(y=x-P,C=u[S]<b?(w=0,u[S]):u[S]>b?(w=j[F+u[S]],L[B+u[S]]):(w=96,0),p=1<<x-P,k=f=1<<E;c[m+(I>>P)+(f-=p)]=y<<24|w<<16|C|0,0!==f;);for(p=1<<x-1;I&p;)p>>=1;if(0!==p?(I&=p-1,I+=p):I=0,S++,0==--R[x]){if(x===T)break;x=t[r+u[S]]}if(O<x&&(I&v)!==g){for(0===P&&(P=O),m+=k,A=1<<(E=x-P);E+P<T&&!((A-=R[E+P])<=0);)E++,A<<=1;if(D+=1<<E,1===e&&852<D||2===e&&592<D)return 1;c[g=I&v]=O<<24|E<<16|m-h|0}}return 0!==I&&(c[m+I]=x-P<<24|64<<16|0),d.bits=O,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var i=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var a=256,s=286,o=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);n(p);var f=new Array(60);n(f);var g=new Array(512);n(g);var v=new Array(256);n(v);var m=new Array(29);n(m);var b,y,w,C=new Array(o);function _(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function x(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?g[e]:g[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function T(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function O(e,t,r){T(e,r[2*t],r[2*t+1])}function E(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function P(e,t,r){var i,n,a=new Array(16),s=0;for(i=1;i<=l;i++)a[i]=s=s+r[i-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=E(a[o]++,o))}}function A(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function D(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function I(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}function L(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&I(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!I(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function B(e,t,r){var i,n,s,o,l=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0===i?O(e,n,t):(O(e,(s=v[n])+a+1,t),0!==(o=c[s])&&T(e,n-=m[s],o),O(e,s=S(--i),r),0!==(o=h[s])&&T(e,i-=C[s],o)),l<e.last_lit;);O(e,256,t)}function R(e,t){var r,i,n,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<c;r++)0!==a[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=s[2*n+1]);for(t.max_code=h,r=e.heap_len>>1;1<=r;r--)L(e,a,r);for(n=c;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,L(e,a,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,s,o,c=t.dyn_tree,h=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(a=0;a<=l;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)g<(a=c[2*c[2*(i=e.heap[r])+1]+1]+1)&&(a=g,v++),c[2*i+1]=a,h<i||(e.bl_count[a]++,s=0,f<=i&&(s=p[i-f]),o=c[2*i],e.opt_len+=o*(a+s),d&&(e.static_len+=o*(u[2*i+1]+s)));if(0!==v){do{for(a=g-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[g]--,v-=2}while(0<v);for(a=g;0!==a;a--)for(i=e.bl_count[a];0!==i;)h<(n=e.heap[--r])||(c[2*n+1]!==a&&(e.opt_len+=(a-c[2*n+1])*c[2*n],c[2*n+1]=a),i--)}}(e,t),P(a,h,e.bl_count)}function M(e,t,r){var i,n,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=s,s=t[2*(i+1)+1],++o<l&&n===s||(o<c?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=n,c=(o=0)===s?(l=138,3):n===s?(l=6,3):(l=7,4))}function j(e,t,r){var i,n,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),i=0;i<=r;i++)if(n=s,s=t[2*(i+1)+1],!(++o<l&&n===s)){if(o<c)for(;O(e,n,e.bl_tree),0!=--o;);else 0!==n?(n!==a&&(O(e,n,e.bl_tree),o--),O(e,16,e.bl_tree),T(e,o-3,2)):o<=10?(O(e,17,e.bl_tree),T(e,o-3,3)):(O(e,18,e.bl_tree),T(e,o-11,7));a=n,c=(o=0)===s?(l=138,3):n===s?(l=6,3):(l=7,4)}}n(C);var F=!1;function $(e,t,r,n){T(e,0+(n?1:0),3),function(e,t,r,n){D(e),k(e,r),k(e,~r),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){F||(function(){var e,t,r,i,n,a=new Array(16);for(i=r=0;i<28;i++)for(m[i]=r,e=0;e<1<<c[i];e++)v[r++]=i;for(v[r-1]=i,i=n=0;i<16;i++)for(C[i]=n,e=0;e<1<<h[i];e++)g[n++]=i;for(n>>=7;i<o;i++)for(C[i]=n<<7,e=0;e<1<<h[i]-7;e++)g[256+n++]=i;for(t=0;t<=l;t++)a[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,a[8]++;for(;e<=255;)p[2*e+1]=9,e++,a[9]++;for(;e<=279;)p[2*e+1]=7,e++,a[7]++;for(;e<=287;)p[2*e+1]=8,e++,a[8]++;for(P(p,287,a),e=0;e<o;e++)f[2*e+1]=5,f[2*e]=E(e,5);b=new _(p,c,257,s,l),y=new _(f,h,0,o,l),w=new _(new Array(0),u,0,19,7)}(),F=!0),e.l_desc=new x(e.dyn_ltree,b),e.d_desc=new x(e.dyn_dtree,y),e.bl_desc=new x(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,A(e)},r._tr_stored_block=$,r._tr_flush_block=function(e,t,r,i){var n,s,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),o=function(e){var t;for(M(e,e.dyn_ltree,e.l_desc.max_code),M(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==t?$(e,t,r,i):4===e.strategy||s===n?(T(e,2+(i?1:0),3),B(e,p,f)):(T(e,4+(i?1:0),3),function(e,t,r,i){var n;for(T(e,t-257,5),T(e,r-1,5),T(e,i-4,4),n=0;n<i;n++)T(e,e.bl_tree[2*d[n]+1],3);j(e,e.dyn_ltree,t-1),j(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),B(e,e.dyn_ltree,e.dyn_dtree)),A(e),i&&D(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(v[r]+a+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){T(e,2,3),O(e,256,p),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var r,i,a,s,o=1,l={},c=!1,h=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,r="[object process]"==={}.toString.call(e.process)?function(e){n.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){a.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(p,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[o]=n,r(o),o++},u.clearImmediate=d}function d(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),c=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,r(10).Buffer,r(6).setImmediate,r(7),r(9))},function(e,t,r){var i;!function(){function n(e,t,r){return e.call.apply(e.bind,arguments)}function a(e,t,r){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function s(e,t,r){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:a).apply(null,arguments)}var o=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var c=!!window.FontFace;function h(e,t,r,i){if(t=e.c.createElement(t),r)for(var n in r)r.hasOwnProperty(n)&&("style"==n?t.style.cssText=r[n]:t.setAttribute(n,r[n]));return i&&t.appendChild(e.c.createTextNode(i)),t}function u(e,t,r){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(r,e.lastChild)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t,r){t=t||[],r=r||[];for(var i=e.className.split(/\s+/),n=0;n<t.length;n+=1){for(var a=!1,s=0;s<i.length;s+=1)if(t[n]===i[s]){a=!0;break}a||i.push(t[n])}for(t=[],n=0;n<i.length;n+=1){for(a=!1,s=0;s<r.length;s+=1)if(i[n]===r[s]){a=!0;break}a||t.push(i[n])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(e,t){for(var r=e.className.split(/\s+/),i=0,n=r.length;i<n;i++)if(r[i]==t)return!0;return!1}function g(e,t,r){function i(){o&&n&&a&&(o(s),o=null)}t=h(e,"link",{rel:"stylesheet",href:t,media:"all"});var n=!1,a=!0,s=null,o=r||null;c?(t.onload=function(){n=!0,i()},t.onerror=function(){n=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){n=!0,i()}),0),u(e,"head",t)}function v(e,t,r,i){var n=e.c.getElementsByTagName("head")[0];if(n){var a=h(e,"script",{src:t}),s=!1;return a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,r&&r(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&n.removeChild(a))},n.appendChild(a),setTimeout((function(){s||(s=!0,r&&r(Error("Script load timeout")))}),i||5e3),a}return null}function m(){this.a=0,this.c=null}function b(e){return e.a++,function(){e.a--,w(e)}}function y(e,t){e.c=t,w(e)}function w(e){0==e.a&&e.c&&(e.c(),e.c=null)}function C(e){this.a=e||"-"}function _(e,t){this.c=e,this.f=4,this.a="n";var r=(t||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function x(e){var t=[];e=e.split(/,\s*/);for(var r=0;r<e.length;r++){var i=e[r].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?t.push("'"+i+"'"):t.push(i)}return t.join(",")}function S(e){return e.a+e.f}function k(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function T(e){var t=4,r="n",i=null;return e&&((i=e.match(/(normal|oblique|italic)/i))&&i[1]&&(r=i[1].substr(0,1).toLowerCase()),(i=e.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?t=7:/[1-9]00/.test(i[1])&&(t=parseInt(i[1].substr(0,1),10)))),r+t}function O(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new C("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function E(e){if(e.g){var t=f(e.f,e.a.c("wf","active")),r=[],i=[e.a.c("wf","loading")];t||r.push(e.a.c("wf","inactive")),p(e.f,r,i)}P(e,"inactive")}function P(e,t,r){e.j&&e.h[t]&&(r?e.h[t](r.c,S(r)):e.h[t]())}function A(){this.c={}}function D(e,t){this.c=e,this.f=t,this.a=h(this.c,"span",{"aria-hidden":"true"},this.f)}function I(e){u(e.c,"body",e.a)}function L(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(e.c)+";font-style:"+k(e)+";font-weight:"+e.f+"00;"}function B(e,t,r,i,n,a){this.g=e,this.j=t,this.a=i,this.c=r,this.f=n||3e3,this.h=a||void 0}function R(e,t,r,i,n,a,s){this.v=e,this.B=t,this.c=r,this.a=i,this.s=s||"BESbswy",this.f={},this.w=n||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new D(this.c,this.s),this.h=new D(this.c,this.s),this.j=new D(this.c,this.s),this.m=new D(this.c,this.s),e=L(e=new _(this.a.c+",serif",S(this.a))),this.g.a.style.cssText=e,e=L(e=new _(this.a.c+",sans-serif",S(this.a))),this.h.a.style.cssText=e,e=L(e=new _("serif",S(this.a))),this.j.a.style.cssText=e,e=L(e=new _("sans-serif",S(this.a))),this.m.a.style.cssText=e,I(this.g),I(this.h),I(this.j),I(this.m)}C.prototype.c=function(e){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},B.prototype.start=function(){var e=this.c.o.document,t=this,r=o(),i=new Promise((function(i,n){!function a(){o()-r>=t.f?n():e.fonts.load(function(e){return k(e)+" "+e.f+"00 300px "+x(e.c)}(t.a),t.h).then((function(e){1<=e.length?i():setTimeout(a,25)}),(function(){n()}))}()})),n=null,a=new Promise((function(e,r){n=setTimeout(r,t.f)}));Promise.race([a,i]).then((function(){n&&(clearTimeout(n),n=null),t.g(t.a)}),(function(){t.j(t.a)}))};var M={D:"serif",C:"sans-serif"},j=null;function F(){if(null===j){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);j=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return j}function $(e,t,r){for(var i in M)if(M.hasOwnProperty(i)&&t===e.f[M[i]]&&r===e.f[M[i]])return!0;return!1}function N(e){var t,r=e.g.a.offsetWidth,i=e.h.a.offsetWidth;(t=r===e.f.serif&&i===e.f["sans-serif"])||(t=F()&&$(e,r,i)),t?o()-e.A>=e.w?F()&&$(e,r,i)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?z(e,e.v):z(e,e.B):function(e){setTimeout(s((function(){N(this)}),e),50)}(e):z(e,e.v)}function z(e,t){setTimeout(s((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),t(this.a)}),e),0)}function U(e,t,r){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=r}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=o(),N(this)};var H=null;function W(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&p(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),P(e,"active")):E(e.a))}function V(e){this.j=e,this.a=new A,this.h=0,this.f=this.g=!0}function Y(e,t,r,i,n){var a=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=n||null,o=i||{};if(0===r.length&&a)E(t.a);else{t.f+=r.length,a&&(t.j=a);var l,c=[];for(l=0;l<r.length;l++){var h=r[l],u=o[h.c],d=t.a,f=h;if(d.g&&p(d.f,[d.a.c("wf",f.c,S(f).toString(),"loading")]),P(d,"fontloading",f),d=null,null===H)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);H=f?42<parseInt(f[1],10):!g}else H=!1;d=H?new B(s(t.g,t),s(t.h,t),t.c,h,t.s,u):new R(s(t.g,t),s(t.h,t),t.c,h,t.s,e,u),c.push(d)}for(l=0;l<c.length;l++)c[l].start()}}),0)}function X(e,t){this.c=e,this.a=t}function G(e,t){this.c=e,this.a=t}function q(e,t){this.c=e||K,this.a=[],this.f=[],this.g=t||""}U.prototype.g=function(e){var t=this.a;t.g&&p(t.f,[t.a.c("wf",e.c,S(e).toString(),"active")],[t.a.c("wf",e.c,S(e).toString(),"loading"),t.a.c("wf",e.c,S(e).toString(),"inactive")]),P(t,"fontactive",e),this.m=!0,W(this)},U.prototype.h=function(e){var t=this.a;if(t.g){var r=f(t.f,t.a.c("wf",e.c,S(e).toString(),"active")),i=[],n=[t.a.c("wf",e.c,S(e).toString(),"loading")];r||i.push(t.a.c("wf",e.c,S(e).toString(),"inactive")),p(t.f,i,n)}P(t,"fontinactive",e),W(this)},V.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,r){var i=[],n=r.timeout;!function(e){e.g&&p(e.f,[e.a.c("wf","loading")]),P(e,"loading")}(t);i=function(e,t,r){var i,n=[];for(i in t)if(t.hasOwnProperty(i)){var a=e.c[i];a&&n.push(a(t[i],r))}return n}(e.a,r,e.c);var a=new U(e.c,t,n);for(e.h=i.length,t=0,r=i.length;t<r;t++)i[t].load((function(t,r,i){Y(e,a,t,r,i)}))}(this,new O(this.c,e),e)},X.prototype.load=function(e){var t=this,r=t.a.projectId,i=t.a.version;if(r){var n=t.c.o;v(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(i?"?v="+i:""),(function(i){i?e([]):(n["__MonotypeConfiguration__"+r]=function(){return t.a},function t(){if(n["__mti_fntLst"+r]){var i,a=n["__mti_fntLst"+r](),s=[];if(a)for(var o=0;o<a.length;o++){var l=a[o].fontfamily;null!=a[o].fontStyle&&null!=a[o].fontWeight?(i=a[o].fontStyle+a[o].fontWeight,s.push(new _(l,i))):s.push(new _(l))}e(s)}else setTimeout((function(){t()}),50)}())})).id="__MonotypeAPIScript__"+r}else e([])},G.prototype.load=function(e){var t,r,i=this.a.urls||[],n=this.a.families||[],a=this.a.testStrings||{},s=new m;for(t=0,r=i.length;t<r;t++)g(this.c,i[t],b(s));var o=[];for(t=0,r=n.length;t<r;t++)if((i=n[t].split(":"))[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)o.push(new _(i[0],l[c]));else o.push(new _(i[0]));y(s,(function(){e(o,a)}))};var K="https://fonts.googleapis.com/css";function J(e){this.f=e,this.a=[],this.c={}}var Z={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ee={i:"i",italic:"i",n:"n",normal:"n"},te=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function re(e,t){this.c=e,this.a=t}var ie={Arimo:!0,Cousine:!0,Tinos:!0};function ne(e,t){this.c=e,this.a=t}function ae(e,t){this.c=e,this.f=t,this.a=[]}re.prototype.load=function(e){var t=new m,r=this.c,i=new q(this.a.api,this.a.text),n=this.a.families;!function(e,t){for(var r=t.length,i=0;i<r;i++){var n=t[i].split(":");3==n.length&&e.f.push(n.pop());var a="";2==n.length&&""!=n[1]&&(a=":"),e.a.push(n.join(a))}}(i,n);var a=new J(n);!function(e){for(var t=e.f.length,r=0;r<t;r++){var i=e.f[r].split(":"),n=i[0].replace(/\+/g," "),a=["n4"];if(2<=i.length){var s;if(s=[],o=i[1])for(var o,l=(o=o.split(",")).length,c=0;c<l;c++){var h;if((h=o[c]).match(/^[\w-]+$/))if(null==(d=te.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":ee[h],null==(d=d[1])||""==d)d="4";else var u=Q[d],d=u||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&s.push(h)}0<s.length&&(a=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Z[i[0]])&&(e.c[n]=i))}for(e.c[n]||(i=Z[n])&&(e.c[n]=i),i=0;i<a.length;i+=1)e.a.push(new _(n,a[i]))}}(a),g(r,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,r=[],i=0;i<t;i++)r.push(e.a[i].replace(/ /g,"+"));return t=e.c+"?family="+r.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(i),b(t)),y(t,(function(){e(a.a,a.c,ie)}))},ne.prototype.load=function(e){var t=this.a.id,r=this.c.o;t?v(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(r.Typekit&&r.Typekit.config&&r.Typekit.config.fn){t=r.Typekit.config.fn;for(var i=[],n=0;n<t.length;n+=2)for(var a=t[n],s=t[n+1],o=0;o<s.length;o++)i.push(new _(a,s[o]));try{r.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(i)}}),2e3):e([])},ae.prototype.load=function(e){var t=this.f.id,r=this.c.o,i=this;t?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[t]=function(t,r){for(var n=0,a=r.fonts.length;n<a;++n){var s=r.fonts[n];i.a.push(new _(s.name,T("font-weight:"+s.weight+";font-style:"+s.style)))}e(i.a)},v(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var se=new V(window);se.a.c.custom=function(e,t){return new G(t,e)},se.a.c.fontdeck=function(e,t){return new ae(t,e)},se.a.c.monotype=function(e,t){return new X(t,e)},se.a.c.typekit=function(e,t){return new ne(t,e)},se.a.c.google=function(e,t){return new re(t,e)};var oe={load:s(se.load,se)};void 0===(i=function(){return oe}.call(t,r,t,e))||(e.exports=i)}()},function(e){e.exports=JSON.parse('[{"title":"","text":"Key Creator is © Corsair Memory, Inc."},{"title":"Icons & Artwork","text":"Copyright © Corsair Memory, Inc."},{"title":"FabricJS","text":"Copyright © 2008-2015 Printio (Juriy Zaytsev, Maxim Chernyak)"},{"title":"Framework7","text":"2019 © Framework7 by Vladimir Kharlampidi / iDangero.us."},{"title":"VueJS","text":"2019 © Copyright © 2014-2019 Evan You."},{"title":"Web Font Loader","text":"Web Font Loader Copyright (c) 2010-2017 Adobe Systems Incorporated, Google Incorporated."},{"title":"Others","text":"All other icons and artwork are © to their respective owners"}]')},function(e,t){var r=(e,t)=>{var r=Math.min,i=Math.max,n=parseInt(e.replace(/#/g,""),16),a=r(255,i((n>>16)+t,0));return"#"+(r(255,i((255&n)+t,0))|r(255,i((n>>8&255)+t,0))<<8|a<<16).toString(16).padStart(6,0)};e.exports=function(e,t){var i=document.getElementById("#sdpi-dynamic-styles")||document.createElement("style");e.mouseDownColor||(e.mouseDownColor=r(e.highlightColor,-100));var n=e.highlightColor.slice(0,7),a=r(n,100),s=r(n,60),o=r(n,-60);i.setAttribute("id","sdpi-dynamic-styles"),i.innerHTML="\n    :root {\n        --f7-controls-background-color: ".concat(e.highlightColor,";\n        --f7-dialog-input-button-bold-color: ").concat(e.highlightColor,';\n    }\n\n    input[type="radio"]:checked + label span,\n    input[type="checkbox"]:checked + label span {\n        background-color: ').concat(e.highlightColor,';\n    }\n\n    input[type="radio"]:active:checked + label span,\n    input[type="checkbox"]:active:checked + label span {\n      background-color: ').concat(e.mouseDownColor,';\n    }\n\n    input[type="radio"]:active + label span,\n    input[type="checkbox"]:active + label span {\n      background-color: ').concat(e.buttonPressedBorderColor,";\n    }\n\n    td.selected,\n    td.selected:hover,\n    li.selected:hover,\n    li.selected {\n      color: white;\n      background-color: ").concat(e.highlightColor,';\n    }\n\n    .sdpi-file-label > label:active,\n    .sdpi-file-label.file:active,\n    label.sdpi-file-label:active,\n    label.sdpi-file-info:active,\n    input[type="file"]::-webkit-file-upload-button:active,\n    button:active {\n      border: 1pt solid ').concat(e.buttonPressedBorderColor,";\n      background-color: ").concat(e.buttonPressedBackgroundColor,";\n      color: ").concat(e.buttonPressedTextColor,";\n      border-color: ").concat(e.buttonPressedBorderColor,";\n    }\n\n    ::-webkit-progress-value,\n    meter::-webkit-meter-optimum-value {\n        background: linear-gradient(").concat(s,", ").concat(a," 20%, ").concat(n," 45%, ").concat(n," 55%, ").concat(s,")\n    }\n\n    ::-webkit-progress-value:active,\n    meter::-webkit-meter-optimum-value:active {\n        background: linear-gradient(").concat(n,", ").concat(s," 20%, ").concat(o," 45%, ").concat(o," 55%, ").concat(n,")\n    }\n    "),document.body.appendChild(i)}},function(e){e.exports=JSON.parse('{"Description":"Create Your Keys","Name":"Stream Deck Icon Library","Category":"Templates","IconMenuItem":"Open Stream Deck Icon Library","com.elgato.keycreator.action":{"Name":"Action","Tooltip":"This is the only action in this plugin"},"Localization":{"Close":"Close","Done":"Done","More info":"More info","Message":"Message","Click Me":"Click Me","Button":"Button","Color":"Color","Opacity":"Opacity","Stroke":"Stroke","Angle":"Angle","Font":"Font","Layer":"Layer","Layers":"Layers","Inspector":"Inspector","Filter":"Filter","Find Font":"Find Font","Custom Fonts":"Custom Fonts","System Fonts":"System Fonts","Search...":"Search...","Search in icons":"Search in icons...","Search in iconpacks":"Search in iconpacks...","More Actions...":"More Actions...","Get more icon packs...":"Get more icon packs...","Acknowledgements":"Acknowledgements","Settings":"Settings","Are you sure you want to uninstall %s icon pack?":"Are you sure you want to uninstall %s icon pack?","Uninstall Icon Pack":"Uninstall Icon Pack"}}')},function(e,t,r){r(18),e.exports=r(31)},function(e,t,r){"use strict";r.r(t);var i=r(2),n=r.n(i);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=l||{},c=Object.freeze({HARDWARE_AND_SOFTWARE:0,HARDWARE_ONLY:1,SOFTWARE_ONLY:2}),h=(navigator.appVersion.includes("QtWebEngine"),h||!1),u=function(){};u=(e=>!0===e?console.log.bind(window.console):function(){})(h),window.$localizedStrings=l,WebSocket.prototype.sendJSON=function(e,t){t&&console.log("SendJSON",this,e),this.send(JSON.stringify(e))},String.prototype.lox=function(){var e=String(this);try{e=l[e]||e}catch(e){}return e},String.prototype.sprintf=function(e){var t=0,r=e&&Array.isArray(e)?e:arguments;return this.replace(/%s/g,(function(){return r[t++]}))};function d(e,t,r,i,n){p.getInstance().connect(arguments),window.$SD.api=s(s(s(s({send:g.send},g.common),g.registerPropertyInspector),g.registerPlugin),g.registerIconEditor)}var p=function(){var e,t=[];function r(){var r,i,a,s,o,l=null,c="",d=f.eventEmitter();return{uuid:i,on:d.on,emit:d.emit,connection:l,connect:function(p){for(var f in p)t[f]=p[f];r=p[0],i=p[1],a=p[2],s=n.a.parseJson(p[3]),o="undefined"!==p[4]?n.a.parseJson(p[4]):p[4],h&&(u("---- showVars"),u("- port",r),u("- uuid",i),u("- messagetype",a),u("- info",s),u("- inActionInfo",o),u("----< showVars")),l&&(l.close(),l=null),c="ws://127.0.0.1:"+r,(l=new WebSocket(c)).onopen=function(){var t={event:a,uuid:i};l.sendJSON(t),$SD.uuid=i,$SD.actionInfo=o,$SD.applicationInfo=s,$SD.messageType=a,$SD.connection=l,e.emit("connected",{connection:l,port:r,uuid:i,actionInfo:o,applicationInfo:s,messageType:a})},l.onerror=function(e){console.warn("WEBOCKET ERROR",e,e.data)},l.onclose=function(e){var t=v(e);console.warn("[STREAMDECK]***** WEBOCKET CLOSED **** reason:",t,e)},l.onmessage=function(e){var t,r=n.a.parseJson(e.data);if(r.hasOwnProperty("action"))switch(a){case"registerIconEditor":case"registerPlugin":t=r.action+"."+r.event;break;case"registerPropertyInspector":t=r.event;break;default:console.log("%c%s","color: white; background: red; font-size: 12px;","[STREAMDECK] websocket.onmessage +++++++++  PROBLEM ++++++++"),console.warn("UNREGISTERED MESSAGETYPE:",a)}else t=r.event;t&&""!==t&&d.emit(t,r)},e.connection=l},api:null,connectionString:c}}return{getArgs:function(){return t},getInstance:function(){return e||(e=r()),e}}}(),f={eventEmitter:function(e,t){var r=new Map;return Object.freeze({on:(e,t)=>(r.has(e)||r.set(e,f.pubSub()),r.get(e).sub(t)),has:e=>r.has(e),emit:(e,t)=>r.has(e)&&r.get(e).pub(t),eventList:r})},pubSub:function(){var e=new Set;return Object.freeze({pub:t=>e.forEach(e=>e(t)),sub:t=>(e.add(t),()=>{e.delete(t)})})}},g={send:function(e,t,r,i){var n=s({event:t,context:e},r);i&&(console.log("-----SDApi.send-----"),console.log("context",e),console.log(n),console.log(r.payload),console.log(JSON.stringify(r.payload)),console.log("-------")),$SD.connection&&$SD.connection.sendJSON(n)},registerPlugin:{showAlert:function(e){g.send(e,"showAlert",{})},showOk:function(e){g.send(e,"showOk",{})},setState:function(e,t){g.send(e,"setState",{payload:{state:1-Number(0===t)}})},setTitle:function(e,t,r){g.send(e,"setTitle",{payload:{title:""+t||"",target:r||c.HARDWARE_AND_SOFTWARE}})},clearTitle:function(e,t,r){g.send(e,"setTitle",{payload:{target:r||c.HARDWARE_AND_SOFTWARE}})},setImage:function(e,t,r){g.send(e,"setImage",{payload:{image:t||"",target:r||c.HARDWARE_AND_SOFTWARE}})},sendToPropertyInspector:function(e,t,r){g.send(e,"sendToPropertyInspector",{action:r,payload:t})},showUrl2:function(e,t){g.send(e,"openUrl",{payload:{url:t}})}},registerPropertyInspector:{sendToPlugin:function(e,t,r){g.send(e,"sendToPlugin",{action:t,payload:r||{}},!1)}},common:{getSettings:function(e,t){var r=e||$SD.uuid;g.send(r,"getSettings",{})},setSettings:function(e,t){var r=e||$SD.uuid;g.send(r,"setSettings",{payload:t})},getGlobalSettings:function(e){var t=e||$SD.uuid;g.send(t,"getGlobalSettings",{})},setGlobalSettings:function(e,t){var r=e||$SD.uuid;g.send(r,"setGlobalSettings",{payload:t})},switchToProfile:function(e,t,r=null){if(t&&0!==t.length){var i={event:"switchToProfile",context:e||$SD.uuid,device:t,payload:{profile:r}};$SD.connection&&$SD.connection.sendJSON(i)}},logMessage:function(){var e=arguments.length>1?arguments[1]:arguments[0];g.send(null,"logMessage",{payload:{message:e}})},openUrl:function(){var e=arguments.length>1?arguments[1]:arguments[0];g.send(null,"openUrl",{payload:{url:e}})},test:function(){console.log(this),console.log(g)},debugPrint:function(e,t){g.send(e,"debugPrint",{payload:[].slice.apply(arguments).join(".")||""})},dbgSend:function(e,t){if($SD.connection&&this[e]&&"function"==typeof this[e]){var r=this[e]();"object"==typeof r&&(s({event:e,context:t},r),$SD.connection&&$SD.connection.sendJSON(r))}console.log(this,e,typeof this[e],this[e]())}}};function v(e){return 1e3===e.code?"Normal Closure. The purpose for which the connection was established has been fulfilled.":1001===e.code?'Going Away. An endpoint is "going away", such as a server going down or a browser having navigated away from a page.':1002===e.code?"Protocol error. An endpoint is terminating the connection due to a protocol error":1003===e.code?"Unsupported Data. An endpoint received a type of data it doesn't support.":1004===e.code?"--Reserved--. The specific meaning might be defined in the future.":1005===e.code?"No Status. No status code was actually present.":1006===e.code?"Abnormal Closure. The connection was closed abnormally, e.g., without sending or receiving a Close control frame":1007===e.code?"Invalid frame payload data. The connection was closed, because the received data was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629]).":1008===e.code?'Policy Violation. The connection was closed, because current message data "violates its policy". This reason is given either if there is no other suitable reason, or if there is a need to hide specific details about the policy.':1009===e.code?"Message Too Big. Connection closed because the message is too big for it to process.":1010===e.code?"Mandatory Ext. Connection is terminated the connection because the server didn't negotiate one or more extensions in the WebSocket handshake. <br /> Mandatory extensions were: "+e.reason:1011===e.code?"Internal Server Error. Connection closed because it encountered an unexpected condition that prevented it from fulfilling the request.":1015===e.code?"TLS Handshake. The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":"Unknown reason"}g.registerIconEditor=g.registerPlugin,window.SDApi=g,window.StreamDeck=p,window.$SD=p.getInstance(),window.$SD.api=g;window.connectElgatoStreamDeckSocket=d,window.WEBSOCKETERROR=v,window.SOCKETERRORS={0:"The connection has not yet been established",1:"The connection is established and communication is possible",2:"The connection is going through the closing handshake",3:"The connection has been closed or could not be opened"}},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n,a,s,o,l=1,c={},h=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,i=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),i=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[l]=n,i(l),l++},d.clearImmediate=p}function p(e){delete c[e]}function f(e){if(h)setTimeout(f,0,e);else{var t=c[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(7),r(9))},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=c(e),s=i[0],o=i[1],l=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,o)),h=0,u=o>0?s-4:s;for(r=0;r<u;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[h++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],s=0,o=r-n;s<o;s+=16383)a.push(h(e,s,s+16383>o?o:s+16383));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var n,a,s=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,i,n){var a,s,o=8*n-i-1,l=(1<<o)-1,c=l>>1,h=-7,u=r?n-1:0,d=r?-1:1,p=e[t+u];for(u+=d,a=p&(1<<-h)-1,p>>=-h,h+=o;h>0;a=256*a+e[t+u],u+=d,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=i;h>0;s=256*s+e[t+u],u+=d,h-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),a-=c}return(p?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,r,i,n,a){var s,o,l,c=8*a-n-1,h=(1<<c)-1,u=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(o=0,s=h):s+u>=1?(o=(t*l-1)*Math.pow(2,n),s+=u):(o=t*Math.pow(2,u-1)*Math.pow(2,n),s=0));n>=8;e[r+p]=255&o,p+=f,o/=256,n-=8);for(s=s<<n|o,c+=n;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8);e[r+p-f]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){},function(e,t){},function(e,t){},function(e,t,r){"use strict";r(11)},function(e){e.exports=JSON.parse("{}")},function(e,t,r){"use strict";r.r(t),r.d(t,"strings",(function(){return Ar}));var i=r(5),n=r(8),a=r(0);class s{constructor(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this}}function o(e,t){var r=[],i=0;if(e&&!t&&e instanceof s)return e;if(e)if("string"==typeof e){var n,o,l=e.trim();if(l.indexOf("<")>=0&&l.indexOf(">")>=0){var c="div";for(0===l.indexOf("<li")&&(c="ul"),0===l.indexOf("<tr")&&(c="tbody"),0!==l.indexOf("<td")&&0!==l.indexOf("<th")||(c="tr"),0===l.indexOf("<tbody")&&(c="table"),0===l.indexOf("<option")&&(c="select"),(o=a.a.createElement(c)).innerHTML=l,i=0;i<o.childNodes.length;i+=1)r.push(o.childNodes[i])}else for(n=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||a.a).querySelectorAll(e.trim()):[a.a.getElementById(e.trim().split("#")[1])],i=0;i<n.length;i+=1)n[i]&&r.push(n[i])}else if(e.nodeType||e===a.b||e===a.a)r.push(e);else if(e.length>0&&e[0].nodeType)for(i=0;i<e.length;i+=1)r.push(e[i]);return new s(r)}function l(e){for(var t=[],r=0;r<e.length;r+=1)-1===t.indexOf(e[r])&&t.push(e[r]);return t}function c(e){return a.b.requestAnimationFrame?a.b.requestAnimationFrame(e):a.b.webkitRequestAnimationFrame?a.b.webkitRequestAnimationFrame(e):a.b.setTimeout(e,1e3/60)}o.fn=s.prototype,o.Class=s,o.Dom7=s;var h=Object.freeze({addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),r=0;r<t.length;r+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[r]);return this},removeClass:function(e){for(var t=e.split(" "),r=0;r<t.length;r+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[r]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),r=0;r<t.length;r+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[r]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var r=0;r<this.length;r+=1)if(2===arguments.length)this[r].setAttribute(e,t);else for(var i in e)this[r][i]=e[i],this[r].setAttribute(i,e[i]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},prop:function(e,t){if(1!==arguments.length||"string"!=typeof e){for(var r=0;r<this.length;r+=1)if(2===arguments.length)this[r][e]=t;else for(var i in e)this[r][i]=e[i];return this}if(this[0])return this[0][e]},data:function(e,t){var r;if(void 0!==t){for(var i=0;i<this.length;i+=1)(r=this[i]).dom7ElementDataStorage||(r.dom7ElementDataStorage={}),r.dom7ElementDataStorage[e]=t;return this}if(r=this[0]){if(r.dom7ElementDataStorage&&e in r.dom7ElementDataStorage)return r.dom7ElementDataStorage[e];var n=r.getAttribute("data-".concat(e));return n||void 0}},removeData:function(e){for(var t=0;t<this.length;t+=1){var r=this[t];r.dom7ElementDataStorage&&r.dom7ElementDataStorage[e]&&(r.dom7ElementDataStorage[e]=null,delete r.dom7ElementDataStorage[e])}},dataset:function(){var e=this[0];if(e){var t,r={};if(e.dataset)for(var i in e.dataset)r[i]=e.dataset[i];else for(var n=0;n<e.attributes.length;n+=1){var a=e.attributes[n];a.name.indexOf("data-")>=0&&(r[(t=a.name.split("data-")[1],t.toLowerCase().replace(/-(.)/g,(e,t)=>t.toUpperCase()))]=a.value)}for(var s in r)"false"===r[s]?r[s]=!1:"true"===r[s]?r[s]=!0:parseFloat(r[s])===1*r[s]&&(r[s]*=1);return r}},val:function(e){if(void 0!==e){for(var t=0;t<this.length;t+=1){var r=this[t];if(Array.isArray(e)&&r.multiple&&"select"===r.nodeName.toLowerCase())for(var i=0;i<r.options.length;i+=1)r.options[i].selected=e.indexOf(r.options[i].value)>=0;else r.value=e}return this}if(this[0]){if(this[0].multiple&&"select"===this[0].nodeName.toLowerCase()){for(var n=[],a=0;a<this[0].selectedOptions.length;a+=1)n.push(this[0].selectedOptions[a].value);return n}return this[0].value}},transform:function(e){for(var t=0;t<this.length;t+=1){var r=this[t].style;r.webkitTransform=e,r.transform=e}return this},transition:function(e){"string"!=typeof e&&(e="".concat(e,"ms"));for(var t=0;t<this.length;t+=1){var r=this[t].style;r.webkitTransitionDuration=e,r.transitionDuration=e}return this},on:function(...e){var[t,r,i,n]=e;function a(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),o(t).is(r))i.apply(t,n);else for(var a=o(t).parents(),s=0;s<a.length;s+=1)o(a[s]).is(r)&&i.apply(a[s],n)}}function s(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),i.apply(this,t)}"function"==typeof e[1]&&([t,i,n]=e,r=void 0),n||(n=!1);for(var l,c=t.split(" "),h=0;h<this.length;h+=1){var u=this[h];if(r)for(l=0;l<c.length;l+=1){var d=c[l];u.dom7LiveListeners||(u.dom7LiveListeners={}),u.dom7LiveListeners[d]||(u.dom7LiveListeners[d]=[]),u.dom7LiveListeners[d].push({listener:i,proxyListener:a}),u.addEventListener(d,a,n)}else for(l=0;l<c.length;l+=1){var p=c[l];u.dom7Listeners||(u.dom7Listeners={}),u.dom7Listeners[p]||(u.dom7Listeners[p]=[]),u.dom7Listeners[p].push({listener:i,proxyListener:s}),u.addEventListener(p,s,n)}}return this},off:function(...e){var[t,r,i,n]=e;"function"==typeof e[1]&&([t,i,n]=e,r=void 0),n||(n=!1);for(var a=t.split(" "),s=0;s<a.length;s+=1)for(var o=a[s],l=0;l<this.length;l+=1){var c=this[l],h=void 0;if(!r&&c.dom7Listeners?h=c.dom7Listeners[o]:r&&c.dom7LiveListeners&&(h=c.dom7LiveListeners[o]),h&&h.length)for(var u=h.length-1;u>=0;u-=1){var d=h[u];i&&d.listener===i||i&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===i?(c.removeEventListener(o,d.proxyListener,n),h.splice(u,1)):i||(c.removeEventListener(o,d.proxyListener,n),h.splice(u,1))}}return this},once:function(...e){var t=this,[r,i,n,a]=e;function s(...e){n.apply(this,e),t.off(r,i,s,a),s.dom7proxy&&delete s.dom7proxy}return"function"==typeof e[1]&&([r,n,a]=e,i=void 0),s.dom7proxy=n,t.on(r,i,s,a)},trigger:function(...e){for(var t=e[0].split(" "),r=e[1],i=0;i<t.length;i+=1)for(var n=t[i],s=0;s<this.length;s+=1){var o=this[s],l=void 0;try{l=new a.b.CustomEvent(n,{detail:r,bubbles:!0,cancelable:!0})}catch(e){(l=a.a.createEvent("Event")).initEvent(n,!0,!0),l.detail=r}o.dom7EventData=e.filter((e,t)=>t>0),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(e){var t,r=["webkitTransitionEnd","transitionend"],i=this;function n(a){if(a.target===this)for(e.call(this,a),t=0;t<r.length;t+=1)i.off(r[t],n)}if(e)for(t=0;t<r.length;t+=1)i.on(r[t],n);return this},animationEnd:function(e){var t,r=["webkitAnimationEnd","animationend"],i=this;function n(a){if(a.target===this)for(e.call(this,a),t=0;t<r.length;t+=1)i.off(r[t],n)}if(e)for(t=0;t<r.length;t+=1)i.on(r[t],n);return this},width:function(){return this[0]===a.b?a.b.innerWidth:this.length>0?parseFloat(this.css("width")):null},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},height:function(){return this[0]===a.b?a.b.innerHeight:this.length>0?parseFloat(this.css("height")):null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var e=this[0],t=e.getBoundingClientRect(),r=a.a.body,i=e.clientTop||r.clientTop||0,n=e.clientLeft||r.clientLeft||0,s=e===a.b?a.b.scrollY:e.scrollTop,o=e===a.b?a.b.scrollX:e.scrollLeft;return{top:t.top+s-i,left:t.left+o-n}}return null},hide:function(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this},show:function(){for(var e=0;e<this.length;e+=1){var t=this[e];"none"===t.style.display&&(t.style.display=""),"none"===a.b.getComputedStyle(t,null).getPropertyValue("display")&&(t.style.display="block")}return this},styles:function(){return this[0]?a.b.getComputedStyle(this[0],null):{}},css:function(e,t){var r;if(1===arguments.length){if("string"!=typeof e){for(r=0;r<this.length;r+=1)for(var i in e)this[r].style[i]=e[i];return this}if(this[0])return a.b.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(r=0;r<this.length;r+=1)this[r].style[e]=t;return this}return this},toArray:function(){for(var e=[],t=0;t<this.length;t+=1)e.push(this[t]);return e},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},forEach:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],this[t],t))return this;return this},filter:function(e){for(var t=[],r=0;r<this.length;r+=1)e.call(this[r],r,this[r])&&t.push(this[r]);return new s(t)},map:function(e){for(var t=[],r=0;r<this.length;r+=1)t.push(e.call(this[r],r,this[r]));return new s(t)},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,r,i=this[0];if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=o(e),r=0;r<t.length;r+=1)if(t[r]===i)return!0;return!1}if(e===a.a)return i===a.a;if(e===a.b)return i===a.b;if(e.nodeType||e instanceof s){for(t=e.nodeType?[e]:e,r=0;r<t.length;r+=1)if(t[r]===i)return!0;return!1}return!1},indexOf:function(e){for(var t=0;t<this.length;t+=1)if(this[t]===e)return t;return-1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,r=this.length;return new s(e>r-1?[]:e<0?(t=r+e)<0?[]:[this[t]]:[this[e]])},append:function(...e){for(var t,r=0;r<e.length;r+=1){t=e[r];for(var i=0;i<this.length;i+=1)if("string"==typeof t){var n=a.a.createElement("div");for(n.innerHTML=t;n.firstChild;)this[i].appendChild(n.firstChild)}else if(t instanceof s)for(var o=0;o<t.length;o+=1)this[i].appendChild(t[o]);else this[i].appendChild(t)}return this},appendTo:function(e){return o(e).append(this),this},prepend:function(e){var t,r;for(t=0;t<this.length;t+=1)if("string"==typeof e){var i=a.a.createElement("div");for(i.innerHTML=e,r=i.childNodes.length-1;r>=0;r-=1)this[t].insertBefore(i.childNodes[r],this[t].childNodes[0])}else if(e instanceof s)for(r=0;r<e.length;r+=1)this[t].insertBefore(e[r],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},prependTo:function(e){return o(e).prepend(this),this},insertBefore:function(e){for(var t=o(e),r=0;r<this.length;r+=1)if(1===t.length)t[0].parentNode.insertBefore(this[r],t[0]);else if(t.length>1)for(var i=0;i<t.length;i+=1)t[i].parentNode.insertBefore(this[r].cloneNode(!0),t[i])},insertAfter:function(e){for(var t=o(e),r=0;r<this.length;r+=1)if(1===t.length)t[0].parentNode.insertBefore(this[r],t[0].nextSibling);else if(t.length>1)for(var i=0;i<t.length;i+=1)t[i].parentNode.insertBefore(this[r].cloneNode(!0),t[i].nextSibling)},next:function(e){return this.length>0?e?this[0].nextElementSibling&&o(this[0].nextElementSibling).is(e)?new s([this[0].nextElementSibling]):new s([]):this[0].nextElementSibling?new s([this[0].nextElementSibling]):new s([]):new s([])},nextAll:function(e){var t=[],r=this[0];if(!r)return new s([]);for(;r.nextElementSibling;){var i=r.nextElementSibling;e?o(i).is(e)&&t.push(i):t.push(i),r=i}return new s(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&o(t.previousElementSibling).is(e)?new s([t.previousElementSibling]):new s([]):t.previousElementSibling?new s([t.previousElementSibling]):new s([])}return new s([])},prevAll:function(e){var t=[],r=this[0];if(!r)return new s([]);for(;r.previousElementSibling;){var i=r.previousElementSibling;e?o(i).is(e)&&t.push(i):t.push(i),r=i}return new s(t)},siblings:function(e){return this.nextAll(e).add(this.prevAll(e))},parent:function(e){for(var t=[],r=0;r<this.length;r+=1)null!==this[r].parentNode&&(e?o(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return o(l(t))},parents:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var i=this[r].parentNode;i;)e?o(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return o(l(t))},closest:function(e){var t=this;return void 0===e?new s([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var i=this[r].querySelectorAll(e),n=0;n<i.length;n+=1)t.push(i[n]);return new s(t)},children:function(e){for(var t=[],r=0;r<this.length;r+=1)for(var i=this[r].childNodes,n=0;n<i.length;n+=1)e?1===i[n].nodeType&&o(i[n]).is(e)&&t.push(i[n]):1===i[n].nodeType&&t.push(i[n]);return new s(l(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},detach:function(){return this.remove()},add:function(...e){var t,r;for(t=0;t<e.length;t+=1){var i=o(e[t]);for(r=0;r<i.length;r+=1)this[this.length]=i[r],this.length+=1}return this},empty:function(){for(var e=0;e<this.length;e+=1){var t=this[e];if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r+=1)t.childNodes[r].parentNode&&t.childNodes[r].parentNode.removeChild(t.childNodes[r]);t.textContent=""}}return this}});var u=Object.freeze({scrollTo:function(...e){var[t,r,i,n,a]=e;return 4===e.length&&"function"==typeof n&&(a=n,[t,r,i,a,n]=e),void 0===n&&(n="swing"),this.each((function(){var e,s,o,l,h,u,d,p,f=this,g=r>0||0===r,v=t>0||0===t;if(void 0===n&&(n="swing"),g&&(e=f.scrollTop,i||(f.scrollTop=r)),v&&(s=f.scrollLeft,i||(f.scrollLeft=t)),i){g&&(o=f.scrollHeight-f.offsetHeight,h=Math.max(Math.min(r,o),0)),v&&(l=f.scrollWidth-f.offsetWidth,u=Math.max(Math.min(t,l),0));var m=null;g&&h===e&&(g=!1),v&&u===s&&(v=!1),c((function t(r=(new Date).getTime()){null===m&&(m=r);var o,l=Math.max(Math.min((r-m)/i,1),0),b="linear"===n?l:.5-Math.cos(l*Math.PI)/2;g&&(d=e+b*(h-e)),v&&(p=s+b*(u-s)),g&&h>e&&d>=h&&(f.scrollTop=h,o=!0),g&&h<e&&d<=h&&(f.scrollTop=h,o=!0),v&&u>s&&p>=u&&(f.scrollLeft=u,o=!0),v&&u<s&&p<=u&&(f.scrollLeft=u,o=!0),o?a&&a():(g&&(f.scrollTop=d),v&&(f.scrollLeft=p),c(t))}))}}))},scrollTop:function(...e){var[t,r,i,n]=e;return 3===e.length&&"function"==typeof i&&([t,r,n,i]=e),void 0===t?this.length>0?this[0].scrollTop:null:this.scrollTo(void 0,t,r,i,n)},scrollLeft:function(...e){var[t,r,i,n]=e;return 3===e.length&&"function"==typeof i&&([t,r,n,i]=e),void 0===t?this.length>0?this[0].scrollLeft:null:this.scrollTo(t,void 0,r,i,n)}});var d=Object.freeze({animate:function(e,t){var r,i=this,n={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:i,animating:!1,que:[],easingProgress:(e,t)=>"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t,stop(){var e;n.frameId&&(e=n.frameId,a.b.cancelAnimationFrame?a.b.cancelAnimationFrame(e):a.b.webkitCancelAnimationFrame?a.b.webkitCancelAnimationFrame(e):a.b.clearTimeout(e)),n.animating=!1,n.elements.each((e,t)=>{delete t.dom7AnimateInstance}),n.que=[]},done(e){if(n.animating=!1,n.elements.each((e,t)=>{delete t.dom7AnimateInstance}),e&&e(i),n.que.length>0){var t=n.que.shift();n.animate(t[0],t[1])}},animate(e,t){if(n.animating)return n.que.push([e,t]),n;var r=[];n.elements.each((t,i)=>{var s,o,l,c,h;i.dom7AnimateInstance||(n.elements[t].dom7AnimateInstance=n),r[t]={container:i},Object.keys(e).forEach(n=>{s=a.b.getComputedStyle(i,null).getPropertyValue(n).replace(",","."),o=parseFloat(s),l=s.replace(o,""),c=parseFloat(e[n]),h=e[n]+l,r[t][n]={initialFullValue:s,initialValue:o,unit:l,finalValue:c,finalFullValue:h,currentValue:o}})});var s,o,l=null,h=0,u=0,d=!1;return n.animating=!0,n.frameId=c((function a(){var p,f;s=(new Date).getTime(),d||(d=!0,t.begin&&t.begin(i)),null===l&&(l=s),t.progress&&t.progress(i,Math.max(Math.min((s-l)/t.duration,1),0),l+t.duration-s<0?0:l+t.duration-s,l),r.forEach(i=>{var a=i;o||a.done||Object.keys(e).forEach(i=>{if(!o&&!a.done){p=Math.max(Math.min((s-l)/t.duration,1),0),f=n.easingProgress(t.easing,p);var{initialValue:c,finalValue:d,unit:g}=a[i];a[i].currentValue=c+f*(d-c);var v=a[i].currentValue;(d>c&&v>=d||d<c&&v<=d)&&(a.container.style[i]=d+g,(u+=1)===Object.keys(e).length&&(a.done=!0,h+=1),h===r.length&&(o=!0)),o?n.done(t.complete):a.container.style[i]=v+g}})}),o||(n.frameId=c(a))})),n}};if(0===n.elements.length)return i;for(var s=0;s<n.elements.length;s+=1)n.elements[s].dom7AnimateInstance?r=n.elements[s].dom7AnimateInstance:n.elements[s].dom7AnimateInstance=n;return r||(r=n),"stop"===e?r.stop():r.animate(n.props,n.params),i},stop:function(){for(var e=0;e<this.length;e+=1)this[e].dom7AnimateInstance&&this[e].dom7AnimateInstance.stop()}}),p="resize scroll".split(" ");function f(e,...t){if(void 0===t[0]){for(var r=0;r<this.length;r+=1)p.indexOf(e)<0&&(e in this[r]?this[r][e]():o(this[r]).trigger(e));return this}return this.on(e,...t)}[h,u,d,Object.freeze({click:function(...e){return f.bind(this)("click",...e)},blur:function(...e){return f.bind(this)("blur",...e)},focus:function(...e){return f.bind(this)("focus",...e)},focusin:function(...e){return f.bind(this)("focusin",...e)},focusout:function(...e){return f.bind(this)("focusout",...e)},keyup:function(...e){return f.bind(this)("keyup",...e)},keydown:function(...e){return f.bind(this)("keydown",...e)},keypress:function(...e){return f.bind(this)("keypress",...e)},submit:function(...e){return f.bind(this)("submit",...e)},change:function(...e){return f.bind(this)("change",...e)},mousedown:function(...e){return f.bind(this)("mousedown",...e)},mousemove:function(...e){return f.bind(this)("mousemove",...e)},mouseup:function(...e){return f.bind(this)("mouseup",...e)},mouseenter:function(...e){return f.bind(this)("mouseenter",...e)},mouseleave:function(...e){return f.bind(this)("mouseleave",...e)},mouseout:function(...e){return f.bind(this)("mouseout",...e)},mouseover:function(...e){return f.bind(this)("mouseover",...e)},touchstart:function(...e){return f.bind(this)("touchstart",...e)},touchend:function(...e){return f.bind(this)("touchend",...e)},touchmove:function(...e){return f.bind(this)("touchmove",...e)},resize:function(...e){return f.bind(this)("resize",...e)},scroll:function(...e){return f.bind(this)("scroll",...e)}})].forEach(e=>{Object.keys(e).forEach(t=>{o.fn[t]=e[t]})});for(var g=o,v=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],m={},b=0;b<v.length;b+=1)for(var y=v[b].letters,w=0;w<y.length;w+=1)m[y[w]]=v[b].base;var C=1,_={uniqueNumber:()=>C+=1,id(e="xxxxxxxxxx",t="0123456789abcdef"){var r=t.length;return e.replace(/x/g,()=>t[Math.floor(Math.random()*r)])},mdPreloaderContent:'\n    <span class="preloader-inner">\n      <span class="preloader-inner-gap"></span>\n      <span class="preloader-inner-left">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n      <span class="preloader-inner-right">\n          <span class="preloader-inner-half-circle"></span>\n      </span>\n    </span>\n  '.trim(),iosPreloaderContent:'\n    <span class="preloader-inner">\n      '.concat([0,1,2,3,4,5,6,7,8,9,10,11].map(()=>'<span class="preloader-inner-line"></span>').join(""),"\n    </span>\n  ").trim(),auroraPreloaderContent:'\n    <span class="preloader-inner">\n      <span class="preloader-inner-circle"></span>\n    </span>\n  ',eventNameToColonCase(e){var t;return e.split("").map((e,r)=>e.match(/[A-Z]/)&&0!==r&&!t?(t=!0,":".concat(e.toLowerCase())):e.toLowerCase()).join("")},deleteProps(e){var t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:(e,t=0)=>setTimeout(e,t),nextFrame:e=>_.requestAnimationFrame(()=>{_.requestAnimationFrame(e)}),now:()=>Date.now(),requestAnimationFrame:e=>a.b.requestAnimationFrame(e),cancelAnimationFrame:e=>a.b.cancelAnimationFrame(e),removeDiacritics:e=>e.replace(/[^\u0000-\u007E]/g,e=>m[e]||e),parseUrlQuery(e){var t,r,i,n,s={},o=e||a.b.location.href;if("string"==typeof o&&o.length)for(n=(r=(o=o.indexOf("?")>-1?o.replace(/\S*\?/,""):"").split("&").filter(e=>""!==e)).length,t=0;t<n;t+=1)i=r[t].replace(/#\S+/g,"").split("="),s[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i.slice(1).join("="))||"";return s},getTranslate(e,t="x"){var r,i,n,s=a.b.getComputedStyle(e,null);return a.b.WebKitCSSMatrix?((i=s.transform||s.webkitTransform).split(",").length>6&&(i=i.split(", ").map(e=>e.replace(",",".")).join(", ")),n=new a.b.WebKitCSSMatrix("none"===i?"":i)):r=(n=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=a.b.WebKitCSSMatrix?n.m41:16===r.length?parseFloat(r[12]):parseFloat(r[4])),"y"===t&&(i=a.b.WebKitCSSMatrix?n.m42:16===r.length?parseFloat(r[13]):parseFloat(r[5])),i||0},serializeObject(e,t=[]){if("string"==typeof e)return e;var r,i=[];function n(e){if(t.length>0){for(var r="",i=0;i<t.length;i+=1)r+=0===i?t[i]:"[".concat(encodeURIComponent(t[i]),"]");return"".concat(r,"[").concat(encodeURIComponent(e),"]")}return encodeURIComponent(e)}function a(e){return encodeURIComponent(e)}return Object.keys(e).forEach(s=>{var o;if(Array.isArray(e[s])){o=[];for(var l=0;l<e[s].length;l+=1)Array.isArray(e[s][l])||"object"!=typeof e[s][l]?o.push("".concat(n(s),"[]=").concat(a(e[s][l]))):((r=t.slice()).push(s),r.push(String(l)),o.push(_.serializeObject(e[s][l],r)));o.length>0&&i.push(o.join("&"))}else null===e[s]||""===e[s]?i.push("".concat(n(s),"=")):"object"==typeof e[s]?((r=t.slice()).push(s),""!==(o=_.serializeObject(e[s],r))&&i.push(o)):void 0!==e[s]&&""!==e[s]?i.push("".concat(n(s),"=").concat(a(e[s]))):""===e[s]&&i.push(n(s))}),i.join("&")},isObject:e=>"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object,merge(...e){var t=e[0];e.splice(0,1);for(var r=e,i=0;i<r.length;i+=1){var n=e[i];if(null!=n)for(var a=Object.keys(Object(n)),s=0,o=a.length;s<o;s+=1){var l=a[s],c=Object.getOwnPropertyDescriptor(n,l);void 0!==c&&c.enumerable&&(t[l]=n[l])}}return t},extend(...e){var t,r,i=!0;"boolean"==typeof e[0]?(i=e[0],t=e[1],e.splice(0,2),r=e):(t=e[0],e.splice(0,1),r=e);for(var n=0;n<r.length;n+=1){var a=e[n];if(null!=a)for(var s=Object.keys(Object(a)),o=0,l=s.length;o<l;o+=1){var c=s[o],h=Object.getOwnPropertyDescriptor(a,c);void 0!==h&&h.enumerable&&(i?_.isObject(t[c])&&_.isObject(a[c])?_.extend(t[c],a[c]):!_.isObject(t[c])&&_.isObject(a[c])?(t[c]={},_.extend(t[c],a[c])):t[c]=a[c]:t[c]=a[c])}}return t},colorHexToRgb(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,r,i)=>t+t+r+r+i+i),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?r.slice(1).map(e=>parseInt(e,16)):null},colorRgbToHex(e,t,r){var i=[e,t,r].map(e=>{var t=e.toString(16);return 1===t.length?"0".concat(t):t}).join("");return"#".concat(i)},colorRgbToHsl(e,t,r){e/=255,t/=255,r/=255;var i,n=Math.max(e,t,r),a=Math.min(e,t,r),s=n-a;0===s?i=0:n===e?i=(t-r)/s%6:n===t?i=(r-e)/s+2:n===r&&(i=(e-t)/s+4);var o=(a+n)/2;return i<0&&(i=6+i),[60*i,0===s?0:s/(1-Math.abs(2*o-1)),o]},colorHslToRgb(e,t,r){var i,n=(1-Math.abs(2*r-1))*t,a=e/60,s=n*(1-Math.abs(a%2-1));Number.isNaN(e)||void 0===e?i=[0,0,0]:a<=1?i=[n,s,0]:a<=2?i=[s,n,0]:a<=3?i=[0,n,s]:a<=4?i=[0,s,n]:a<=5?i=[s,0,n]:a<=6&&(i=[n,0,s]);var o=r-n/2;return i.map(e=>Math.max(0,Math.min(255,Math.round(255*(e+o)))))},colorHsbToHsl(e,t,r){var i={h:e,s:0,l:0},n=t,a=r;return i.l=(2-n)*a/2,i.s=i.l&&i.l<1?n*a/(i.l<.5?2*i.l:2-2*i.l):i.s,[i.h,i.s,i.l]},colorHslToHsb(e,t,r){var i={h:e,s:0,b:0},n=r,a=t*(n<.5?n:1-n);return i.b=n+a,i.s=n>0?2*a/i.b:i.s,[i.h,i.s,i.b]},colorThemeCSSProperties(...e){var t,r;if(1===e.length?(t=e[0],r=_.colorHexToRgb(t)):3===e.length&&(r=e,t=_.colorRgbToHex(...r)),!r)return{};var i=_.colorRgbToHsl(...r),n=[i[0],i[1],Math.max(0,i[2]-.08)],a=[i[0],i[1],Math.max(0,i[2]+.08)],s=_.colorRgbToHex(..._.colorHslToRgb(...n)),o=_.colorRgbToHex(..._.colorHslToRgb(...a));return{"--f7-theme-color":t,"--f7-theme-color-rgb":r.join(", "),"--f7-theme-color-shade":s,"--f7-theme-color-tint":o}}},x=_,S=r(1);var k=class{constructor(e=[]){this.eventsParents=e,this.eventsListeners={}}on(e,t,r){var i=this;if("function"!=typeof t)return i;var n=r?"unshift":"push";return e.split(" ").forEach(e=>{i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][n](t)}),i}once(e,t,r){var i=this;if("function"!=typeof t)return i;function n(...r){i.off(e,n),n.f7proxy&&delete n.f7proxy,t.apply(i,r)}return n.f7proxy=t,i.on(e,n,r)}off(e,t){var r=this;return r.eventsListeners?(e.split(" ").forEach(e=>{void 0===t?r.eventsListeners[e]=[]:r.eventsListeners[e]&&r.eventsListeners[e].forEach((i,n)=>{(i===t||i.f7proxy&&i.f7proxy===t)&&r.eventsListeners[e].splice(n,1)})}),r):r}emit(...e){var t,r,i,n,a=this;if(!a.eventsListeners)return a;"string"==typeof e[0]||Array.isArray(e[0])?(t=e[0],r=e.slice(1,e.length),i=a,n=a.eventsParents):(t=e[0].events,r=e[0].data,i=e[0].context||a,n=e[0].local?[]:e[0].parents||a.eventsParents);var s=Array.isArray(t)?t:t.split(" "),o=s.map(e=>e.replace("local::","")),l=s.filter(e=>e.indexOf("local::")<0);return o.forEach(e=>{if(a.eventsListeners&&a.eventsListeners[e]){var t=[];a.eventsListeners[e].forEach(e=>{t.push(e)}),t.forEach(e=>{e.apply(i,r)})}}),n&&n.length>0&&n.forEach(e=>{e.emit(l,...r)}),a}};var T=class extends k{constructor(e={},t=[]){super(t);var r=this;r.params=e,r.params&&r.params.on&&Object.keys(r.params.on).forEach(e=>{r.on(e,r.params.on[e])})}useModuleParams(e,t){if(e.params){var r={};Object.keys(e.params).forEach(e=>{void 0!==t[e]&&(r[e]=x.extend({},t[e]))}),x.extend(t,e.params),Object.keys(r).forEach(e=>{x.extend(t[e],r[e])})}}useModulesParams(e){var t=this;t.modules&&Object.keys(t.modules).forEach(r=>{var i=t.modules[r];i.params&&x.extend(e,i.params)})}useModule(e="",t={}){var r=this;if(r.modules){var i="string"==typeof e?r.modules[e]:e;i&&(i.instance&&Object.keys(i.instance).forEach(e=>{var t=i.instance[e];r[e]="function"==typeof t?t.bind(r):t}),i.on&&r.on&&Object.keys(i.on).forEach(e=>{r.on(e,i.on[e])}),i.vnode&&(r.vnodeHooks||(r.vnodeHooks={}),Object.keys(i.vnode).forEach(e=>{Object.keys(i.vnode[e]).forEach(t=>{var n=i.vnode[e][t];r.vnodeHooks[t]||(r.vnodeHooks[t]={}),r.vnodeHooks[t][e]||(r.vnodeHooks[t][e]=[]),r.vnodeHooks[t][e].push(n.bind(r))})})),i.create&&i.create.bind(r)(t))}}useModules(e={}){var t=this;t.modules&&Object.keys(t.modules).forEach(r=>{var i=e[r]||{};t.useModule(r,i)})}static set components(e){this.use&&this.use(e)}static installModule(e,...t){var r=this;r.prototype.modules||(r.prototype.modules={});var i=e.name||"".concat(Object.keys(r.prototype.modules).length,"_").concat(x.now());return r.prototype.modules[i]=e,e.proto&&Object.keys(e.proto).forEach(t=>{r.prototype[t]=e.proto[t]}),e.static&&Object.keys(e.static).forEach(t=>{r[t]=e.static[t]}),e.install&&e.install.apply(r,t),r}static use(e,...t){var r=this;return Array.isArray(e)?(e.forEach(e=>r.installModule(e)),r):r.installModule(e,...t)}},O=function(e={}){var{defaultSelector:t,constructor:r,domProp:i,app:n,addMethods:a}=e,s={create:(...e)=>n?new r(n,...e):new r(...e),get(e=t){if(e instanceof r)return e;var n=g(e);return 0!==n.length?n[0][i]:void 0},destroy(e){var t=s.get(e);if(t&&t.destroy)return t.destroy()}};return a&&Array.isArray(a)&&a.forEach(e=>{s[e]=(r=t,...i)=>{var n=s.get(r);if(n&&n[e])return n[e](...i)}}),s};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=function(e={}){var{defaultSelector:t,constructor:r,app:i}=e;return x.extend(O({defaultSelector:t,constructor:r,app:i,domProp:"f7Modal"}),{open(e,t,n){var a=g(e);if(a.length>1&&n){var s=g(n).parents(".page");s.length&&a.each((e,t)=>{var r=g(t);r.parents(s)[0]===s[0]&&(a=r)})}if(a.length>1&&(a=a.eq(a.length-1)),a.length){var o=a[0].f7Modal;if(!o){var l=a.dataset();o=new r(i,P({el:a},l))}return o.open(t)}},close(e=t,n,a){var s=g(e);if(s.length){if(s.length>1){var o;if(a){var l=g(a);l.length&&(o=l.parents(s))}s=o&&o.length>0?o:s.eq(s.length-1)}var c=s[0].f7Modal;if(!c){var h=s.dataset();c=new r(i,P({el:s},h))}return c.close(n)}}})},I=[];var L=function(e){var t=this;return new Promise((r,i)=>{var n,s,o,l=t.instance;if(e){if("string"==typeof e){var c=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&c&&c[0].length===e.length){if(!l||l&&!l.params.lazyModulesPath)return void i(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));n="".concat(l.params.lazyModulesPath,"/").concat(e,".js")}else n=e}else"function"==typeof e?o=e:s=e;if(o){var h=o(t,!1);if(!h)return void i(new Error("Framework7: Can't find Framework7 component in specified component function"));if(t.prototype.modules&&t.prototype.modules[h.name])return void r();f(h),r()}if(s){var u=s;if(!u)return void i(new Error("Framework7: Can't find Framework7 component in specified component"));if(t.prototype.modules&&t.prototype.modules[u.name])return void r();f(u),r()}if(n){if(I.indexOf(n)>=0)return void r();I.push(n);var d=new Promise((e,r)=>{t.request.get(n,i=>{var s=x.id(),o="f7_component_loader_callback_".concat(s),l=a.a.createElement("script");l.innerHTML="window.".concat(o," = function (Framework7, Framework7AutoInstallComponent) {return ").concat(i.trim(),"}"),g("head").append(l);var c=a.b[o];delete a.b[o],g(l).remove();var h=c(t,!1);h?(t.prototype.modules&&t.prototype.modules[h.name]||f(h),e()):r(new Error("Framework7: Can't find Framework7 component in ".concat(n," file")))},(e,t)=>{r(e,t)})}),p=new Promise(e=>{t.request.get(n.replace(".js",l.rtl?".rtl.css":".css"),t=>{var r=a.a.createElement("style");r.innerHTML=t,g("head").append(r),e()},()=>{e()})});Promise.all([d,p]).then(()=>{r()}).catch(e=>{i(e)})}}else i(new Error("Framework7: Lazy module must be specified"));function f(e){t.use(e),l&&(l.useModuleParams(e,l.params),l.useModule(e))}})};class B extends T{constructor(e){if(super(e),B.instance)throw new Error("Framework7 is already initialized and can't be initialized more than once");var t=x.extend({},e),r=this;B.instance=r;var i={version:"1.0.0",id:"io.framework7.testapp",root:"body",theme:"auto",language:a.b.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0};r.useModulesParams(i),r.params=x.extend(i,e);var n=g(r.params.root);x.extend(r,{id:r.params.id,name:r.params.name,version:r.params.version,routes:r.params.routes,language:r.params.language,root:n,rtl:"rtl"===n.css("direction"),theme:"auto"===r.params.theme?S.a.ios?"ios":S.a.desktop&&S.a.electron?"aurora":"md":r.params.theme,passedParams:t,online:a.b.navigator.onLine}),r.root&&r.root[0]&&(r.root[0].f7=r),r.useModules(),r.initData();var s="(prefers-color-scheme: dark)",o="(prefers-color-scheme: light)";return r.mq={},a.b.matchMedia&&(r.mq.dark=a.b.matchMedia(s),r.mq.light=a.b.matchMedia(o)),r.colorSchemeListener=function({matches:e,media:t}){if(e){var i=a.a.querySelector("html");t===s?(i.classList.add("theme-dark"),r.darkTheme=!0,r.emit("darkThemeChange",!0)):t===o&&(i.classList.remove("theme-dark"),r.darkTheme=!1,r.emit("darkThemeChange",!1))}},r.params.init&&(S.a.cordova&&r.params.initOnDeviceReady?g(a.a).on("deviceready",()=>{r.init()}):r.init()),r}initData(){var e=this;e.data={},e.params.data&&"function"==typeof e.params.data?x.extend(e.data,e.params.data.bind(e)()):e.params.data&&x.extend(e.data,e.params.data),e.methods={},e.params.methods&&Object.keys(e.params.methods).forEach(t=>{"function"==typeof e.params.methods[t]?e.methods[t]=e.params.methods[t].bind(e):e.methods[t]=e.params.methods[t]})}enableAutoDarkTheme(){if(a.b.matchMedia){var e=this,t=a.a.querySelector("html");e.mq.dark&&e.mq.light&&(e.mq.dark.addListener(e.colorSchemeListener),e.mq.light.addListener(e.colorSchemeListener)),e.mq.dark&&e.mq.dark.matches?(t.classList.add("theme-dark"),e.darkTheme=!0,e.emit("darkThemeChange",!0)):e.mq.light&&e.mq.light.matches&&(t.classList.remove("theme-dark"),e.darkTheme=!1,e.emit("darkThemeChange",!1))}}disableAutoDarkTheme(){if(a.b.matchMedia){this.mq.dark&&this.mq.dark.removeListener(this.colorSchemeListener),this.mq.light&&this.mq.light.removeListener(this.colorSchemeListener)}}initAppComponent(e){var t=this;t.router.componentLoader(t.params.component,t.params.componentUrl,{componentOptions:{el:t.root[0],root:!0}},r=>{t.root=g(r),t.root[0].f7=t,t.rootComponent=r.f7Component,e&&e()},()=>{})}_init(){var e=this;return e.initialized||(e.root.addClass("framework7-initializing"),e.rtl&&g("html").attr("dir","rtl"),e.params.autoDarkTheme&&e.enableAutoDarkTheme(),a.b.addEventListener("offline",()=>{e.online=!1,e.emit("offline"),e.emit("connection",!1)}),a.b.addEventListener("online",()=>{e.online=!0,e.emit("online"),e.emit("connection",!0)}),e.root.addClass("framework7-root"),g("html").removeClass("ios md aurora").addClass(e.theme),e.params.iosTranslucentBars&&"ios"===e.theme&&S.a.ios&&g("html").addClass("ios-translucent-bars"),e.params.iosTranslucentModals&&"ios"===e.theme&&S.a.ios&&g("html").addClass("ios-translucent-modals"),x.nextFrame(()=>{e.root.removeClass("framework7-initializing")}),e.initialized=!0,e.emit("init")),e}init(){var e=this;e.params.component||e.params.componentUrl?e.initAppComponent(()=>{e._init()}):e._init()}loadModule(...e){return B.loadModule(...e)}loadModules(...e){return B.loadModules(...e)}getVnodeHooks(e,t){return this.vnodeHooks&&this.vnodeHooks[e]&&this.vnodeHooks[e][t]||[]}get $(){return g}get t7(){return n.a}static get Dom7(){return g}static get $(){return g}static get Template7(){return n.a}static get Class(){return T}static get Events(){return k}}B.ModalMethods=D,B.ConstructorMethods=O,B.loadModule=L,B.loadModules=function(e){return Promise.all(e.map(e=>B.loadModule(e)))};var R=B,M={},j=0;function F(e){var t=x.extend({},M);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach(e=>{delete t[e]});var r=x.extend({url:a.b.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},t),i=x.extend({},r,e);function n(e,...t){var r,n;return M[e]&&(r=M[e](...t)),i[e]&&(n=i[e](...t)),"boolean"!=typeof r&&(r=!0),"boolean"!=typeof n&&(n=!0),r&&n}if(!1!==n("beforeCreate",i)){i.type&&(i.method=i.type);var s,o=i.url.indexOf("?")>=0?"&":"?",l=i.method.toUpperCase();if(("GET"===l||"HEAD"===l||"OPTIONS"===l||"DELETE"===l)&&i.data)(s="string"==typeof i.data?i.data.indexOf("?")>=0?i.data.split("?")[1]:i.data:x.serializeObject(i.data)).length&&(i.url+=o+s,"?"===o&&(o="&"));if("json"===i.dataType&&i.url.indexOf("callback=")>=0){var c,h="f7jsonp_".concat(Date.now()+(j+=1)),u=i.url.split("callback="),d="".concat(u[0],"callback=").concat(h);if(u[1].indexOf("&")>=0){var p=u[1].split("&").filter(e=>e.indexOf("=")>0).join("&");p.length>0&&(d+="&".concat(p))}var f=a.a.createElement("script");return f.type="text/javascript",f.onerror=function(){clearTimeout(c),n("error",null,"scripterror","scripterror"),n("complete",null,"scripterror")},f.src=d,a.b[h]=function(e){clearTimeout(c),n("success",e),f.parentNode.removeChild(f),f=null,delete a.b[h]},a.a.querySelector("head").appendChild(f),void(i.timeout>0&&(c=setTimeout(()=>{f.parentNode.removeChild(f),f=null,n("error",null,"timeout","timeout")},i.timeout)))}"GET"!==l&&"HEAD"!==l&&"OPTIONS"!==l&&"DELETE"!==l||!1===i.cache&&(i.url+="".concat(o,"_nocache").concat(Date.now()));var g=new XMLHttpRequest;if(g.requestUrl=i.url,g.requestParameters=i,!1===n("beforeOpen",g,i))return g;g.open(l,i.url,i.async,i.user,i.password);var v=null;if(("POST"===l||"PUT"===l||"PATCH"===l)&&i.data)if(i.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(i.data.constructor)>=0)v=i.data;else{var m="---------------------------".concat(Date.now().toString(16));"multipart/form-data"===i.contentType?g.setRequestHeader("Content-Type","multipart/form-data; boundary=".concat(m)):g.setRequestHeader("Content-Type",i.contentType),v="";var b=x.serializeObject(i.data);if("multipart/form-data"===i.contentType){b=b.split("&");for(var y=[],w=0;w<b.length;w+=1)y.push('Content-Disposition: form-data; name="'.concat(b[w].split("=")[0],'"\r\n\r\n').concat(b[w].split("=")[1],"\r\n"));v="--".concat(m,"\r\n").concat(y.join("--".concat(m,"\r\n")),"--").concat(m,"--\r\n")}else v="application/json"===i.contentType?JSON.stringify(i.data):b}else v=i.data,g.setRequestHeader("Content-Type",i.contentType);return"json"!==i.dataType||i.headers&&i.headers.Accept||g.setRequestHeader("Accept","application/json"),i.headers&&Object.keys(i.headers).forEach(e=>{void 0!==i.headers[e]&&g.setRequestHeader(e,i.headers[e])}),void 0===i.crossDomain&&(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!==a.b.location.host),i.crossDomain||g.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.xhrFields&&x.extend(g,i.xhrFields),g.onload=function(){var e;if(g.status>=200&&g.status<300||0===g.status)if("json"===i.dataType){var t;try{e=JSON.parse(g.responseText)}catch(e){t=!0}t?n("error",g,"parseerror","parseerror"):n("success",e,g.status,g)}else n("success",e="text"===g.responseType||""===g.responseType?g.responseText:g.response,g.status,g);else n("error",g,g.status,g.statusText);i.statusCode&&(M.statusCode&&M.statusCode[g.status]&&M.statusCode[g.status](g),i.statusCode[g.status]&&i.statusCode[g.status](g)),n("complete",g,g.status)},g.onerror=function(){n("error",g,g.status,g.status),n("complete",g,"error")},i.timeout>0&&(g.timeout=i.timeout,g.ontimeout=()=>{n("error",g,"timeout","timeout"),n("complete",g,"timeout")}),!1===n("beforeSend",g,i)?g:(g.send(v),g)}}function $(e,...t){var[r,i,n,a,s]=[];"function"==typeof t[1]?[r,n,a,s]=t:[r,i,n,a,s]=t,[n,a].forEach(e=>{"string"==typeof e&&(s=e,e===n?n=void 0:a=void 0)});var o={url:r,method:"post"===e||"postJSON"===e?"POST":"GET",data:i,success:n,error:a,dataType:s=s||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&x.extend(o,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof i?i:JSON.stringify(i)}),F(o)}function N(e,...t){var[r,i,n]=t;return new Promise((t,a)=>{$(e,r,i,(e,r,i)=>{t({data:e,status:r,xhr:i})},(e,t,r)=>{a({xhr:e,status:t,message:r})},n)})}Object.assign(F,{get:(...e)=>$("get",...e),post:(...e)=>$("post",...e),json:(...e)=>$("json",...e),getJSON:(...e)=>$("json",...e),postJSON:(...e)=>$("postJSON",...e)}),F.promise=function(e){return new Promise((t,r)=>{F(Object.assign(e,{success(e,r,i){t({data:e,status:r,xhr:i})},error(e,t,i){r({xhr:e,status:t,message:i})}}))})},Object.assign(F.promise,{get:(...e)=>N("get",...e),post:(...e)=>N("post",...e),json:(...e)=>N("json",...e),getJSON:(...e)=>N("json",...e),postJSON:(...e)=>N("postJSON",...e)}),F.setup=function(e){e.type&&!e.method&&x.extend(e,{method:e.type}),x.extend(M,e)};var z=F,U=r(3),H={name:"device",proto:{device:S.a},static:{device:S.a},on:{init(){var e=[],t=a.a.querySelector("html"),r=a.a.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');t&&(S.a.standalone&&S.a.ios&&r&&"black-translucent"===r.content&&e.push("device-full-viewport"),e.push("device-pixel-ratio-".concat(Math.floor(S.a.pixelRatio))),S.a.os&&!S.a.desktop?e.push("device-".concat(S.a.os)):S.a.desktop&&(e.push("device-desktop"),S.a.os&&e.push("device-".concat(S.a.os))),(S.a.cordova||S.a.phonegap)&&e.push("device-cordova"),e.forEach(e=>{t.classList.add(e)}))}}},W={name:"support",proto:{support:U.a},static:{support:U.a}},V={name:"utils",proto:{utils:x},static:{utils:x}},Y={name:"resize",instance:{getSize(){if(!this.root[0])return{width:0,height:0,left:0,top:0};var e=this.root.offset(),[t,r,i,n]=[this.root[0].offsetWidth,this.root[0].offsetHeight,e.left,e.top];return this.width=t,this.height=r,this.left=i,this.top=n,{width:t,height:r,left:i,top:n}}},on:{init(){var e=this;e.getSize(),a.b.addEventListener("resize",()=>{e.emit("resize")},!1),a.b.addEventListener("orientationchange",()=>{e.emit("orientationchange")})},orientationchange(){this.device.ipad&&(a.a.body.scrollLeft=0,setTimeout(()=>{a.a.body.scrollLeft=0},0))},resize(){this.getSize()}}},X={name:"request",proto:{request:z},static:{request:z}};var G={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle"}},instance:{touchEvents:{start:U.a.touch?"touchstart":U.a.pointerEvents?"pointerdown":"mousedown",move:U.a.touch?"touchmove":U.a.pointerEvents?"pointermove":"mousemove",end:U.a.touch?"touchend":U.a.pointerEvents?"pointerup":"mouseup"}},on:{init:function(){var e,t,r,i,n,s,o,l,c,h,u,d,p=this,f=p.params.touch,v=f["".concat(p.theme,"TouchRipple")];function m(e){var t,r=g(e),i=r.parents(f.activeStateElements);if(r.closest(".no-active-state").length)return null;if(r.is(f.activeStateElements)&&(t=r),i.length>0&&(t=t?t.add(i):i),t&&t.length>1){for(var n,a=[],s=0;s<t.length;s+=1)n||(a.push(t[s]),(t.eq(s).hasClass("prevent-active-state-propagation")||t.eq(s).hasClass("no-active-state-propagation"))&&(n=!0));t=g(a)}return t||r}function b(e){return e.parents(".page-content").length>0}function y(){l&&l.addClass("active-state")}function w(){l&&(l.removeClass("active-state"),l=null)}function C(e,t,r){e&&(h=p.touchRipple.create(e,t,r))}function _(){h&&(h.remove(),h=void 0,u=void 0)}function x(r){(u=function(e){var t=f.touchRippleElements,r=g(e);if(r.is(t))return!r.hasClass("no-ripple")&&r;if(r.parents(t).length>0){var i=r.parents(t).eq(0);return!i.hasClass("no-ripple")&&i}return!1}(r))&&0!==u.length?b(u)?(clearTimeout(d),d=setTimeout(()=>{_(),C(u,e,t)},80)):(_(),C(u,e,t)):u=void 0}function k(){clearTimeout(d),_()}function T(){h||!u||i?_():(clearTimeout(d),C(u,e,t),setTimeout(_,0))}function O(){g(".active-state").removeClass("active-state"),v&&T()}function E(e,t){p.emit({events:e,data:[t]})}function P(e){E("touchstart touchstart:active",e)}function A(e){E("touchmove touchmove:active",e)}function D(e){E("touchend touchend:active",e)}function I(e){E("touchstart:passive",e)}function L(e){E("touchmove:passive",e)}function B(e){E("touchend:passive",e)}function R(e){E("".concat(e.type," ").concat(e.type,":active"),e)}function M(e){E("".concat(e.type,":passive"),e)}S.a.ios&&S.a.webView&&a.b.addEventListener("touchstart",()=>{});var j=!!U.a.passiveListener&&{passive:!0},F=!U.a.passiveListener||{passive:!0,capture:!0},$=!!U.a.passiveListener&&{passive:!1},N=!U.a.passiveListener||{passive:!1,capture:!0};a.a.addEventListener("click",(function(e){E("click",e)}),!0),U.a.passiveListener?(a.a.addEventListener(p.touchEvents.start,P,N),a.a.addEventListener(p.touchEvents.move,A,$),a.a.addEventListener(p.touchEvents.end,D,$),a.a.addEventListener(p.touchEvents.start,I,F),a.a.addEventListener(p.touchEvents.move,L,j),a.a.addEventListener(p.touchEvents.end,B,j),U.a.touch&&U.a.gestures&&(a.a.addEventListener("gesturestart",R,$),a.a.addEventListener("gesturechange",R,$),a.a.addEventListener("gestureend",R,$),a.a.addEventListener("gesturestart",M,j),a.a.addEventListener("gesturechange",M,j),a.a.addEventListener("gestureend",M,j))):(a.a.addEventListener(p.touchEvents.start,e=>{P(e),I(e)},!0),a.a.addEventListener(p.touchEvents.move,e=>{A(e),L(e)},!1),a.a.addEventListener(p.touchEvents.end,e=>{D(e),B(e)},!1),U.a.touch&&U.a.gestures&&(a.a.addEventListener("gesturestart",e=>{R(e),M(e)},!1),a.a.addEventListener("gesturechange",e=>{R(e),M(e)},!1),a.a.addEventListener("gestureend",e=>{R(e),M(e)},!1))),U.a.touch?(p.on("click",(function(e){var t=e&&e.detail&&"f7Overswipe"===e.detail,i=o;return r&&e.target!==r&&(i=!t),f.tapHold&&f.tapHoldPreventClicks&&n&&(i=!0),i&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),f.tapHold&&(s=setTimeout(()=>{n=!1},S.a.ios||S.a.androidChrome?100:400)),o=!1,r=null,!i})),p.on("touchstart",(function(a){return i=!1,n=!1,o=!1,a.targetTouches.length>1?(l&&w(),!0):(a.touches.length>1&&l&&w(),f.tapHold&&(s&&clearTimeout(s),s=setTimeout(()=>{a&&a.touches&&a.touches.length>1||(n=!0,a.preventDefault(),o=!0,g(a.target).trigger("taphold",a),p.emit("taphold",a))},f.tapHoldDelay)),r=a.target,e=a.targetTouches[0].pageX,t=a.targetTouches[0].pageY,f.activeState&&((l=m(r))&&!b(l)?y():l&&(c=setTimeout(y,80))),v&&x(r),!0)})),p.on("touchmove",(function(r){var n,a;if("touchmove"===r.type&&(n=r.targetTouches[0],a=f.touchClicksDistanceThreshold),a&&n){var l=n.pageX,h=n.pageY;(Math.abs(l-e)>a||Math.abs(h-t)>a)&&(i=!0)}else i=!0;i&&(o=!0,f.tapHold&&clearTimeout(s),f.activeState&&(clearTimeout(c),w()),v&&k())})),p.on("touchend",(function(e){return clearTimeout(c),clearTimeout(s),a.a.activeElement===e.target?(f.activeState&&w(),v&&T(),!0):(f.activeState&&(y(),setTimeout(w,0)),v&&T(),!(f.tapHoldPreventClicks&&n||o)||(e.cancelable&&e.preventDefault(),o=!0,!1))})),a.a.addEventListener("touchcancel",(function(){r=null,clearTimeout(c),clearTimeout(s),f.activeState&&w(),v&&T()}),{passive:!0})):f.activeState&&(p.on("touchstart",(function(r){var i=m(r.target);i&&(i.addClass("active-state"),"which"in r&&3===r.which&&setTimeout(()=>{g(".active-state").removeClass("active-state")},0)),v&&(e=r.pageX,t=r.pageY,x(r.target,r.pageX,r.pageY))})),p.on("touchmove",(function(){f.activeStateOnMouseMove||g(".active-state").removeClass("active-state"),v&&k()})),p.on("touchend",O),a.a.addEventListener("pointercancel",O,{passive:!0})),a.a.addEventListener("contextmenu",e=>{f.disableContextMenu&&(S.a.ios||S.a.android||S.a.cordova)&&e.preventDefault(),v&&(l&&w(),T())})}}};function q(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var i=e[r];if("*"!==i&&"+"!==i&&"?"!==i)if("\\"!==i)if("{"!==i)if("}"!==i)if(":"!==i)if("("!==i)t.push({type:"CHAR",index:r,value:e[r++]});else{var n=1,a="";if("?"===e[o=r+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0===--n){o++;break}}else if("("===e[o]&&(n++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);a+=e[o++]}else a+=e[o++]+e[o++];if(n)throw new TypeError("Unbalanced pattern at "+r);if(!a)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:a}),r=o}else{for(var s="",o=r+1;o<e.length;){var l=e.charCodeAt(o);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;s+=e[o++]}if(!s)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:s}),r=o}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,n=void 0===i?"./":i,a="[^"+J(t.delimiter||"/#?")+"]+?",s=[],o=0,l=0,c="",h=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},u=function(e){var t=h(e);if(void 0!==t)return t;var i=r[l],n=i.type,a=i.index;throw new TypeError("Unexpected "+n+" at "+a+", expected "+e)},d=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var p=h("CHAR"),f=h("NAME"),g=h("PATTERN");if(f||g){var v=p||"";-1===n.indexOf(v)&&(c+=v,v=""),c&&(s.push(c),c=""),s.push({name:f||o++,prefix:v,suffix:"",pattern:g||a,modifier:h("MODIFIER")||""})}else{var m=p||h("ESCAPED_CHAR");if(m)c+=m;else if(c&&(s.push(c),c=""),h("OPEN")){v=d();var b=h("NAME")||"",y=h("PATTERN")||"",w=d();u("CLOSE"),s.push({name:b||(y?o++:""),pattern:b&&!y?a:y,prefix:v,suffix:w,modifier:h("MODIFIER")||""})}else u("END")}}return s}function K(e,t){return function(e,t){void 0===t&&(t={});var r=Z(t),i=t.encode,n=void 0===i?function(e){return e}:i,a=t.validate,s=void 0===a||a,o=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",r)}));return function(t){for(var r="",i=0;i<e.length;i++){var a=e[i];if("string"!=typeof a){var l=t?t[a.name]:void 0,c="?"===a.modifier||"*"===a.modifier,h="*"===a.modifier||"+"===a.modifier;if(Array.isArray(l)){if(!h)throw new TypeError('Expected "'+a.name+'" to not repeat, but got an array');if(0===l.length){if(c)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<l.length;u++){var d=n(l[u],a);if(s&&!o[i].test(d))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but got "'+d+'"');r+=a.prefix+d+a.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var p=h?"an array":"a string";throw new TypeError('Expected "'+a.name+'" to be '+p)}}else{d=n(String(l),a);if(s&&!o[i].test(d))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+d+'"');r+=a.prefix+d+a.suffix}}else r+=a}return r}}(q(e,t),t)}function J(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Z(e){return e&&e.sensitive?"":"i"}function Q(e,t,r){return function(e,t,r){void 0===r&&(r={});for(var i=r.strict,n=void 0!==i&&i,a=r.start,s=void 0===a||a,o=r.end,l=void 0===o||o,c=r.encode,h=void 0===c?function(e){return e}:c,u="["+J(r.endsWith||"")+"]|$",d="["+J(r.delimiter||"/#?")+"]",p=s?"^":"",f=0,g=e;f<g.length;f++){var v=g[f];if("string"==typeof v)p+=J(h(v));else{var m=J(h(v.prefix)),b=J(h(v.suffix));if(v.pattern)if(t&&t.push(v),m||b)if("+"===v.modifier||"*"===v.modifier){var y="*"===v.modifier?"?":"";p+="(?:"+m+"((?:"+v.pattern+")(?:"+b+m+"(?:"+v.pattern+"))*)"+b+")"+y}else p+="(?:"+m+"("+v.pattern+")"+b+")"+v.modifier;else p+="("+v.pattern+")"+v.modifier;else p+="(?:"+m+b+")"+v.modifier}}if(l)n||(p+=d+"?"),p+=r.endsWith?"(?="+u+")":"$";else{var w=e[e.length-1],C="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;n||(p+="(?:"+d+"(?="+u+"))?"),C||(p+="(?="+d+"|"+u+")")}return new RegExp(p,Z(r))}(q(e,r),t,r)}function ee(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,n=r.exec(e.source);n;)t.push({name:n[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,r){var i=e.map((function(e){return ee(e,t,r).source}));return new RegExp("(?:"+i.join("|")+")",Z(r))}(e,t,r):Q(e,t,r)}var te={queue:[],clearQueue(){0!==te.queue.length&&te.queue.shift()()},routerQueue:[],clearRouterQueue(){if(0!==te.routerQueue.length){var e=te.routerQueue.pop(),{router:t,stateUrl:r,action:i}=e,n=t.params.animate;!1===t.params.pushStateAnimate&&(n=!1),"back"===i&&t.back({animate:n,pushState:!1}),"load"===i&&t.navigate(r,{animate:n,pushState:!1})}},handle(e){if(!te.blockPopstate){var t=e.state;te.previousState=te.state,te.state=t,te.allowChange=!0,te.clearQueue(),(t=te.state)||(t={}),this.views.forEach(e=>{var r=e.router,i=t[e.id];if(!i&&e.params.pushState&&(i={url:e.router.history[0]}),i){var n=i.url||void 0,a=r.params.animate;!1===r.params.pushStateAnimate&&(a=!1),n!==r.url&&(r.history.indexOf(n)>=0?r.allowPageChange?r.back({animate:a,pushState:!1}):te.routerQueue.push({action:"back",router:r}):r.allowPageChange?r.navigate(n,{animate:a,pushState:!1}):te.routerQueue.unshift({action:"load",stateUrl:n,router:r}))}})}},initViewState(e,t){var r=x.extend({},te.state||{},{[e]:t});te.state=r,a.b.history.replaceState(r,"")},push(e,t,r){if(te.allowChange){te.previousState=te.state;var i=x.extend({},te.previousState||{},{[e]:t});te.state=i,a.b.history.pushState(i,"",r)}else te.queue.push(()=>{te.push(e,t,r)})},replace(e,t,r){if(te.allowChange){te.previousState=te.state;var i=x.extend({},te.previousState||{},{[e]:t});te.state=i,a.b.history.replaceState(i,"",r)}else te.queue.push(()=>{te.replace(e,t,r)})},go(e){te.allowChange=!1,a.b.history.go(e)},back(){te.allowChange=!1,a.b.history.back()},allowChange:!0,previousState:{},state:a.b.history.state,blockPopstate:!0,init(e){g(a.b).on("load",()=>{setTimeout(()=>{te.blockPopstate=!1},0)}),a.a.readyState&&"complete"===a.a.readyState&&(te.blockPopstate=!1),g(a.b).on("popstate",te.handle.bind(e))}},re=te;var ie=function(e){var t,r,i,n,a,s,o,l,c,h=e,{$el:u,$navbarsEl:d,app:p,params:f}=h,v=!1,m=!1,b={},y=[],w=[],C=!0,_=[],k=[],T=f["".concat(p.theme,"SwipeBackAnimateShadow")],O=f["".concat(p.theme,"SwipeBackAnimateOpacity")],E=f["".concat(p.theme,"SwipeBackActiveArea")],P=f["".concat(p.theme,"SwipeBackThreshold")],A=p.rtl?"right center":"left center",D=p.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function I({progress:e,reset:t,transition:r,reflow:i}={}){var n=["overflow","transform","transform-origin","opacity"];if(!0===r||!1===r)for(var a=0;a<l.length;a+=1){var s=l[a];s&&s.el&&(!0===r&&s.el.classList.add("navbar-page-transitioning"),!1===r&&s.el.classList.remove("navbar-page-transitioning"))}i&&l.length&&l[0]&&l[0].el&&(l[0].el._clientLeft=l[0].el.clientLeft);for(var o=0;o<l.length;o+=1){var c=l[o];if(c&&c.el){!c.className||c.classNameSet||t||(c.el.classList.add(c.className),c.classNameSet=!0),c.className&&t&&c.el.classList.remove(c.className);for(var h=0;h<n.length;h+=1){var u=n[h];c[u]&&(t?c.el.style[u]="":"function"==typeof c[u]?c.el.style[u]=c[u](e):c.el.style[u]=c[u])}}}}function L(e){var r=f["".concat(p.theme,"SwipeBack")];!C||!r||v||p.swipeout&&p.swipeout.el||!h.allowPageChange||g(e.target).closest(".range-slider, .calendar-months").length>0||g(e.target).closest(".page-master, .page-master-detail").length>0&&f.masterDetailBreakpoint>0&&p.width>=f.masterDetailBreakpoint||(m=!1,v=!0,t=void 0,b.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,b.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,n=x.now(),a=h.dynamicNavbar)}function B(e){if(v){var n="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,c="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===t&&(t=!!(t||Math.abs(c-b.y)>Math.abs(n-b.x))||n<b.x&&!p.rtl||n>b.x&&p.rtl),t||e.f7PreventSwipeBack||p.preventSwipeBack)v=!1;else{if(!m){var C=!1,x=g(e.target),L=x.closest(".swipeout");L.length>0&&(!p.rtl&&L.find(".swipeout-actions-left").length>0&&(C=!0),p.rtl&&L.find(".swipeout-actions-right").length>0&&(C=!0)),((y=x.closest(".page")).hasClass("no-swipeback")||x.closest(".no-swipeback, .card-opened").length>0)&&(C=!0),(w=u.find(".page-previous:not(.stacked)")).length>1&&(w=w.eq(w.length-1));b.x,u.offset().left;if(r=u.width(),(p.rtl?b.x<u.offset().left-u[0].scrollLeft+(r-E):b.x-u.offset().left>E)&&(C=!0),0!==w.length&&0!==y.length||(C=!0),C)return void(v=!1);T&&0===(s=y.find(".page-shadow-effect")).length&&(s=g('<div class="page-shadow-effect"></div>'),y.append(s)),O&&0===(o=w.find(".page-opacity-effect")).length&&(o=g('<div class="page-opacity-effect"></div>'),w.append(o)),a&&(_=d.find(".navbar-current:not(.stacked)"),(k=d.find(".navbar-previous:not(.stacked)")).length>1&&(k=k.eq(k.length-1)),l=function(){var e,t,r=[],i=p.rtl?-1:1,n=_.hasClass("navbar-transparent")&&!_.hasClass("navbar-large")&&!_.hasClass("navbar-transparent-visible"),a=_.hasClass("navbar-large"),s=_.hasClass("navbar-large-collapsed"),o=_.hasClass("navbar-large-transparent")||_.hasClass("navbar-large")&&_.hasClass("navbar-transparent"),l=k.hasClass("navbar-transparent")&&!k.hasClass("navbar-large")&&!k.hasClass("navbar-transparent-visible"),c=k.hasClass("navbar-large"),h=k.hasClass("navbar-large-collapsed"),u=k.hasClass("navbar-large-transparent")||k.hasClass("navbar-large")&&k.hasClass("navbar-transparent"),d=a&&!s,v=c&&!h,m=_.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),b=k.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg");return f.iosAnimateNavbarBackIcon&&(e=_.hasClass("sliding")||_.find(".navbar-inner.sliding").length?_.find(".left").find(".back .icon + span").eq(0):_.find(".left.sliding").find(".back .icon + span").eq(0),t=k.hasClass("sliding")||k.find(".navbar-inner.sliding").length?k.find(".left").find(".back .icon + span").eq(0):k.find(".left.sliding").find(".back .icon + span").eq(0),e.length&&b.each((t,r)=>{g(r).hasClass("title")&&(r.f7NavbarLeftOffset+=e.prev(".icon")[0].offsetWidth)})),m.each((t,l)=>{var c=g(l),h=c.hasClass("subnavbar"),u=c.hasClass("left"),p=c.hasClass("title"),m=c.hasClass("navbar-bg");if((!p&&!m||!n)&&(d||!c.hasClass(".title-large"))){var b={el:l};if(d){if(p)return;if(c.hasClass("title-large"))return r.indexOf(b)<0&&r.push(b),b.overflow="visible",void c.find(".title-large-text").each((e,t)=>{r.push({el:t,transform:e=>"translateX(".concat(100*e*i,"%)")})})}if(v&&(d||c.hasClass("title-large")&&(r.indexOf(b)<0&&r.push(b),b.opacity=0),u))return r.indexOf(b)<0&&r.push(b),b.opacity=e=>1-e**.33,void c.find(".back span").each((e,t)=>{r.push({el:t,"transform-origin":A,transform:e=>"translateX(calc(".concat(e," * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc(").concat(e," * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale(").concat(1+1*e,")")})});if(m)return r.indexOf(b)<0&&r.push(b),d||v||(s?(o&&(b.className="ios-swipeback-navbar-bg-large"),b.transform=e=>"translateX(".concat(100*e*i,"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))")):b.transform=e=>"translateX(".concat(100*e*i,"%)")),!d&&v&&(b.className="ios-swipeback-navbar-bg-large",b.transform=e=>"translateX(".concat(100*e*i,"%) translateY(calc(-1 * ").concat(1-e," * var(--f7-navbar-large-title-height)))")),d&&v&&(b.transform=e=>"translateX(".concat(100*e*i,"%)")),void(d&&!v&&(b.transform=e=>"translateX(".concat(100*e*i,"%) translateY(calc(-").concat(e," * var(--f7-navbar-large-title-height)))")));if(!c.hasClass("title-large")){var y=c.hasClass("sliding")||c.parents(".navbar-inner.sliding").length;if(r.indexOf(b)<0&&r.push(b),(!h||h&&!y)&&(b.opacity=e=>1-e**.33),y){var w=b;if(u&&e.length&&f.iosAnimateNavbarBackIcon){var C={el:e[0]};w=C,r.push(C)}w.transform=e=>{var t=e*w.el.f7NavbarRightOffset;return 1===S.a.pixelRatio&&(t=Math.round(t)),"translate3d(".concat(t,h&&a?"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"px,0,0)")}}}}}),b.each((e,n)=>{var a=g(n),s=a.hasClass("subnavbar"),o=a.hasClass("left"),p=a.hasClass("title"),m=a.hasClass("navbar-bg");if(!p&&!m||!l){var b={el:n};if(v){if(p)return;if(r.indexOf(b)<0&&r.push(b),a.hasClass("title-large"))return b.opacity=1,b.overflow="visible",void a.find(".title-large-text").each((e,t)=>{r.push({el:t,"transform-origin":D,opacity:e=>e**3,transform:e=>"translateX(calc(".concat(1-e," * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc(").concat(e-1," * var(--f7-navbar-large-title-height) + ").concat(1-e," * var(--f7-navbar-large-title-padding-vertical))) scale(").concat(.5+.5*e,")")})})}if(m)return r.indexOf(b)<0&&r.push(b),d||v||(h?(u&&(b.className="ios-swipeback-navbar-bg-large"),b.transform=e=>"translateX(".concat((100*e-100)*i,"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))")):b.transform=e=>"translateX(".concat((100*e-100)*i,"%)")),!d&&v&&(b.transform=e=>"translateX(".concat((100*e-100)*i,"%) translateY(calc(-1 * ").concat(1-e," * var(--f7-navbar-large-title-height)))")),d&&!v&&(b.className="ios-swipeback-navbar-bg-large",b.transform=e=>"translateX(".concat((100*e-100)*i,"%) translateY(calc(-").concat(e," * var(--f7-navbar-large-title-height)))")),void(d&&v&&(b.transform=e=>"translateX(".concat((100*e-100)*i,"%)")));if(!a.hasClass("title-large")){var y=a.hasClass("sliding")||k.children(".navbar-inner.sliding").length;if(r.indexOf(b)<0&&r.push(b),(!s||s&&!y)&&(b.opacity=e=>e**3),y){var w=b;if(o&&t.length&&f.iosAnimateNavbarBackIcon){var C={el:t[0]};w=C,r.push(C)}w.transform=e=>{var t=w.el.f7NavbarLeftOffset*(1-e);return 1===S.a.pixelRatio&&(t=Math.round(t)),"translate3d(".concat(t,s&&c?"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"px,0,0)")}}}}}),r}()),g(".sheet.modal-in").length>0&&p.sheet&&p.sheet.close(g(".sheet.modal-in"))}e.f7PreventSwipePanel=!0,m=!0,p.preventSwipePanelBySwipeBack=!0,e.preventDefault();var B=p.rtl?-1:1;(i=(n-b.x-P)*B)<0&&(i=0);var R=Math.min(Math.max(i/r,0),1),M={percentage:R,progress:R,currentPageEl:y[0],previousPageEl:w[0],currentNavbarEl:_[0],previousNavbarEl:k[0]};u.trigger("swipeback:move",M),h.emit("swipebackMove",M);var j=i*B,F=(i/5-r/5)*B;p.rtl?(j=Math.max(j,-r),F=Math.max(F,0)):(j=Math.min(j,r),F=Math.min(F,0)),1===S.a.pixelRatio&&(j=Math.round(j),F=Math.round(F)),h.swipeBackActive=!0,g([y[0],w[0]]).addClass("page-swipeback-active"),y.transform("translate3d(".concat(j,"px,0,0)")),T&&(s[0].style.opacity=1-1*R),"ios"===p.theme&&w.transform("translate3d(".concat(F,"px,0,0)")),O&&(o[0].style.opacity=1-1*R),a&&I({progress:R})}}}function R(){if(p.preventSwipePanelBySwipeBack=!1,!v||!m)return v=!1,void(m=!1);v=!1,m=!1,h.swipeBackActive=!1;var e=g([y[0],w[0]]);if(e.removeClass("page-swipeback-active"),0===i)return e.transform(""),s&&s.length>0&&s.remove(),o&&o.length>0&&o.remove(),void(a&&I({reset:!0}));var t=x.now()-n,l=!1;(t<300&&i>10||t>=300&&i>r/2)&&(y.removeClass("page-current").addClass("page-next".concat("ios"!==p.theme?" page-next-on-right":"")),w.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),s&&(s[0].style.opacity=""),o&&(o[0].style.opacity=""),a&&(h.setNavbarPosition(_,"next"),h.setNavbarPosition(k,"current",!1)),l=!0),e.addClass("page-transitioning page-transitioning-swipeback"),l||(y[0]._clientLeft=y[0].clientLeft),e.transform(""),a&&I({progress:l?1:0,transition:!0,reflow:!l}),C=!1,h.allowPageChange=!1;var c={currentPageEl:y[0],previousPageEl:w[0],currentNavbarEl:_[0],previousNavbarEl:k[0]};l?(h.currentRoute=w[0].f7Page.route,h.currentPage=w[0],h.pageCallback("beforeOut",y,_,"current","next",{route:y[0].f7Page.route,swipeBack:!0}),h.pageCallback("beforeIn",w,k,"previous","current",{route:w[0].f7Page.route,swipeBack:!0},y[0]),u.trigger("swipeback:beforechange",c),h.emit("swipebackBeforeChange",c)):(u.trigger("swipeback:beforereset",c),h.emit("swipebackBeforeReset",c)),y.transitionEnd(()=>{e.removeClass("page-transitioning page-transitioning-swipeback"),a&&I({reset:!0,transition:!1}),C=!0,h.allowPageChange=!0,l?(1===h.history.length&&h.history.unshift(h.url),h.history.pop(),h.saveHistory(),f.pushState&&re.back(),h.pageCallback("afterOut",y,_,"current","next",{route:y[0].f7Page.route,swipeBack:!0}),h.pageCallback("afterIn",w,k,"previous","current",{route:w[0].f7Page.route,swipeBack:!0}),f.stackPages&&h.initialPages.indexOf(y[0])>=0?(y.addClass("stacked"),a&&_.addClass("stacked")):(h.pageCallback("beforeRemove",y,_,"next",{swipeBack:!0}),h.removePage(y),a&&h.removeNavbar(_)),u.trigger("swipeback:afterchange",c),h.emit("swipebackAfterChange",c),h.emit("routeChanged",h.currentRoute,h.previousRoute,h),f.preloadPreviousPage&&h.back(h.history[h.history.length-2],{preload:!0})):(u.trigger("swipeback:afterreset",c),h.emit("swipebackAfterReset",c)),s&&s.length>0&&s.remove(),o&&o.length>0&&o.remove()})}c=!("touchstart"!==p.touchEvents.start||!U.a.passiveListener)&&{passive:!0,capture:!1},u.on(p.touchEvents.start,L,c),p.on("touchmove:active",B),p.on("touchend:passive",R),h.on("routerDestroy",(function(){var e=!("touchstart"!==p.touchEvents.start||!U.a.passiveListener)&&{passive:!0,capture:!1};u.off(p.touchEvents.start,L,e),p.off("touchmove:active",B),p.off("touchend:passive",R)}))},ne=function(e,t,r){var i=this,n=t.route.redirect;if(r.initial&&i.params.pushState&&(r.replaceState=!0,r.history=!0),"function"==typeof n){i.allowPageChange=!1;var a=n.call(i,t,(function(t,n={}){i.allowPageChange=!0,i[e](t,x.extend({},r,n))}),(function(){i.allowPageChange=!0}));return a&&"string"==typeof a?(i.allowPageChange=!0,i[e](a,r)):i}return i[e](n,r)};function ae(e,t,r,i,n,a,s){var o=[];Array.isArray(r)?o.push(...r):r&&"function"==typeof r&&o.push(r),t&&(Array.isArray(t)?o.push(...t):o.push(t)),function t(){0!==o.length?o.shift().call(e,i,n,()=>{t()},()=>{s()}):a()}()}var se=function(e,t,r,i){var n=this;function a(){e&&e.route&&(n.params.routesBeforeEnter||e.route.beforeEnter)?(n.allowPageChange=!1,ae(n,n.params.routesBeforeEnter,e.route.beforeEnter,e,t,()=>{n.allowPageChange=!0,r()},()=>{i()})):r()}t&&t.route&&(n.params.routesBeforeLeave||t.route.beforeLeave)?(n.allowPageChange=!1,ae(n,n.params.routesBeforeLeave,t.route.beforeLeave,e,t,()=>{n.allowPageChange=!0,a()},()=>{i()})):a()},oe=function(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router.".concat(t,"(...)"))},le=function(e,t,r,i){function n(e){e.then(e=>{r({component:e.default||e._default||e})}).catch(e=>{throw i(),new Error(e)})}if(t instanceof Promise)n(t);else{var a=t.call(e);a instanceof Promise?n(a):r({component:a})}};class ce extends T{constructor(e,t){super({},[void 0===t?e:t]);var r=this;r.isAppRouter=void 0===t,r.isAppRouter?x.extend(!1,r,{app:e,params:e.params.view,routes:e.routes||[],cache:e.cache}):x.extend(!1,r,{app:e,view:t,viewId:t.id,params:t.params,routes:t.routes,$el:t.$el,el:t.el,$navbarsEl:t.$navbarsEl,navbarsEl:t.navbarsEl,history:t.history,scrollHistory:t.scrollHistory,cache:e.cache,dynamicNavbar:"ios"===e.theme&&t.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),r.useModules(),r.tempDom=a.a.createElement("div"),r.allowPageChange=!0;var i={},n={};return Object.defineProperty(r,"currentRoute",{enumerable:!0,configurable:!0,set(e={}){n=x.extend({},i),(i=e)&&(r.url=i.url,r.emit("routeChange",e,n,r))},get:()=>i}),Object.defineProperty(r,"previousRoute",{enumerable:!0,configurable:!0,get:()=>n,set(e){n=e}}),r}animatableNavElements(e,t,r,i,n){var a,s,o=this.dynamicNavbar,l=this.params.iosAnimateNavbarBackIcon;function c(e,t){var r,i=e.hasClass("sliding")||t.hasClass("sliding"),n=e.hasClass("subnavbar"),a=!i||!n,s=e.find(".back .icon");return i&&l&&e.hasClass("left")&&s.length>0&&s.next("span").length&&(e=s.next("span"),r=!0),{$el:e,isIconLabel:r,leftOffset:e[0].f7NavbarLeftOffset,rightOffset:e[0].f7NavbarRightOffset,isSliding:i,isSubnavbar:n,needsOpacityTransition:a}}return o&&(a=[],s=[],e.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((t,s)=>{var o=g(s);o.hasClass("left")&&i&&"forward"===n||o.hasClass("title")&&r||a.push(c(o,e.children(".navbar-inner")))}),t.hasClass("navbar-master")&&this.params.masterDetailBreakpoint>0&&this.app.width>=this.params.masterDetailBreakpoint||t.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((e,a)=>{var o=g(a);o.hasClass("left")&&r&&!i&&"forward"===n||o.hasClass("left")&&r&&"backward"===n||o.hasClass("title")&&i||s.push(c(o,t.children(".navbar-inner")))}),[s,a].forEach(e=>{e.forEach(t=>{var r=t,{isSliding:i,$el:n}=t,o=e===s?a:s;i&&n.hasClass("title")&&o&&o.forEach(e=>{if(e.isIconLabel){var t=e.$el[0];r.leftOffset+=t&&t.offsetLeft||0}})})})),{newNavEls:a,oldNavEls:s}}animate(e,t,r,i,n,a,s){var o=this;if(o.params.animateCustom)o.params.animateCustom.apply(o,[e,t,r,i,n,s]);else{var l=o.dynamicNavbar,c="ios"===o.app.theme;if(a){var h="router-transition-custom router-transition-".concat(a,"-").concat(n);return("forward"===n?t:e).animationEnd(()=>{o.$el.removeClass(h),l&&o.$navbarsEl.length&&(i&&o.$navbarsEl.prepend(i),r&&o.$navbarsEl.prepend(r)),s&&s()}),l&&(i&&t&&(o.setNavbarPosition(i,""),i.removeClass("navbar-next navbar-previous navbar-current"),t.prepend(i)),r&&e&&(o.setNavbarPosition(r,""),r.removeClass("navbar-next navbar-previous navbar-current"),e.prepend(r))),void o.$el.addClass(h)}var u,d,p,f,g,v,m="router-transition-".concat(n," router-transition");if(c&&l){o.params.masterDetailBreakpoint>0&&o.app.width>=o.params.masterDetailBreakpoint&&(r.hasClass("navbar-master")&&i.hasClass("navbar-master-detail")||r.hasClass("navbar-master-detail")&&i.hasClass("navbar-master"))||(g=r&&r.hasClass("navbar-large"),v=i&&i.hasClass("navbar-large"),p=g&&!r.hasClass("navbar-large-collapsed"),f=v&&!i.hasClass("navbar-large-collapsed"));var b=o.animatableNavElements(i,r,f,p,n);u=b.newNavEls,d=b.oldNavEls}("forward"===n?t:e).animationEnd(()=>{o.dynamicNavbar&&(i&&(i.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),i.addClass("navbar-no-title-large-transition"),x.nextFrame(()=>{i.removeClass("navbar-no-title-large-transition")})),r&&r.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),i.hasClass("sliding")||i.children(".navbar-inner.sliding").length?i.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):i.find(".sliding").transform(""),r.hasClass("sliding")||r.children(".navbar-inner.sliding").length?r.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):r.find(".sliding").transform("")),o.$el.removeClass(m),s&&s()}),l?(y(0),x.nextFrame(()=>{y(1),o.$el.addClass(m)})):o.$el.addClass(m)}function y(e){c&&l&&(1===e&&(f&&(i.addClass("router-navbar-transition-to-large"),r.addClass("router-navbar-transition-to-large")),p&&(i.addClass("router-navbar-transition-from-large"),r.addClass("router-navbar-transition-from-large"))),u.forEach(t=>{var r=t.$el,i="forward"===n?t.rightOffset:t.leftOffset;t.isSliding&&(t.isSubnavbar&&v?r[0].style.setProperty("transform","translate3d(".concat(i*(1-e),"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"),"important"):r.transform("translate3d(".concat(i*(1-e),"px,0,0)")))}),d.forEach(t=>{var r=t.$el,i="forward"===n?t.leftOffset:t.rightOffset;t.isSliding&&(t.isSubnavbar&&g?r.transform("translate3d(".concat(i*e,"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)")):r.transform("translate3d(".concat(i*e,"px,0,0)")))}))}}removeModal(e){this.removeEl(e)}removeTabContent(e){g(e).html("")}removeNavbar(e){this.removeEl(e)}removePage(e){var t=g(e),r=t&&t[0]&&t[0].f7Page;r&&r.route&&r.route.route&&r.route.route.keepAlive?t.remove():this.removeEl(e)}removeEl(e){if(e){var t=g(e);0!==t.length&&(t.find(".tab").each((e,t)=>{g(t).children().each((e,t)=>{t.f7Component&&(g(t).trigger("tab:beforeremove"),t.f7Component.$destroy())})}),t[0].f7Component&&t[0].f7Component.$destroy&&t[0].f7Component.$destroy(),this.params.removeElements&&(this.params.removeElementsWithTimeout?setTimeout(()=>{t.remove()},this.params.removeElementsTimeout):t.remove()))}}getPageEl(e){if("string"==typeof e)this.tempDom.innerHTML=e;else{if(g(e).hasClass("page"))return e;this.tempDom.innerHTML="",g(this.tempDom).append(e)}return this.findElement(".page",this.tempDom)}findElement(e,t,r){var i=this.view,n=this.app,a=g(t),s=e;r&&(s+=":not(.stacked)");var o=a.find(s).filter((e,t)=>0===g(t).parents(".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page").length);return o.length>1&&("string"==typeof i.selector&&(o=a.find("".concat(i.selector," ").concat(s))),o.length>1&&(o=a.find(".".concat(n.params.viewMainClass," ").concat(s)))),1===o.length?o:(r||(o=this.findElement(s,a,!0)),o&&1===o.length?o:o&&o.length>1?g(o[0]):void 0)}flattenRoutes(e=this.routes){var t=this,r=[];return e.forEach(e=>{var i=!1;if("tabs"in e&&e.tabs){var n=e.tabs.map(t=>{var r=x.extend({},e,{path:"".concat(e.path,"/").concat(t.path).replace("///","/").replace("//","/"),parentPath:e.path,tab:t});return delete r.tabs,delete r.routes,r});i=!0,r=r.concat(t.flattenRoutes(n))}if("detailRoutes"in e){var a=e.detailRoutes.map(t=>{var r=x.extend({},t);return r.masterRoute=e,r.masterRoutePath=e.path,r});r=r.concat(e,t.flattenRoutes(a))}if("routes"in e){var s=e.routes.map(t=>{var r=x.extend({},t);return r.path="".concat(e.path,"/").concat(r.path).replace("///","/").replace("//","/"),r});r=i?r.concat(t.flattenRoutes(s)):r.concat(e,t.flattenRoutes(s))}"routes"in e||"tabs"in e&&e.tabs||"detailRoutes"in e||r.push(e)}),r}parseRouteUrl(e){if(!e)return{};var t=x.parseUrlQuery(e),r=e.split("#")[1],i=e.split("#")[0].split("?")[0];return{query:t,hash:r,params:{},url:e,path:i}}generateUrl(e={}){if("string"==typeof e)return e;var{name:t,path:r,params:i,query:n}=e;if(!t&&!r)throw new Error('Framework7: "name" or "path" parameter is required');var a=t?this.findRouteByKey("name",t):this.findRouteByKey("path",r);if(!a)throw t?new Error('Framework7: route with name "'.concat(t,'" not found')):new Error('Framework7: route with path "'.concat(r,'" not found'));var s=this.constructRouteUrl(a,{params:i,query:n});if(!s)throw new Error("Framework7: can't construct URL for route with name \"".concat(t,'"'));return s}constructRouteUrl(e,{params:t,query:r}={}){var i,{path:n}=e,a=K(n);try{i=a(t||{})}catch(e){throw new Error("Framework7: error constructing route URL from passed params:\nRoute: ".concat(n,"\n").concat(e.toString()))}return r&&(i+="?".concat("string"==typeof r?r:x.serializeObject(r))),i}findTabRoute(e){var t,r=g(e),i=this.currentRoute.route.parentPath,n=r.attr("id");return this.flattenRoutes(this.routes).forEach(e=>{e.parentPath===i&&e.tab&&e.tab.id===n&&(t=e)}),t}findRouteByKey(e,t){var r,i=this.routes;return this.flattenRoutes(i).forEach(i=>{r||i[e]===t&&(r=i)}),r}findMatchingRoute(e){if(e){var t,r=this.routes,i=this.flattenRoutes(r),{path:n,query:a,hash:s,params:o}=this.parseRouteUrl(e);return i.forEach(r=>{if(!t){var i,l,c=[],h=[r.path];if(r.alias&&("string"==typeof r.alias?h.push(r.alias):Array.isArray(r.alias)&&r.alias.forEach(e=>{h.push(e)})),h.forEach(e=>{i||(i=ee(e,c).exec(n))}),i)c.forEach((e,t)=>{if("number"!=typeof e.name){var r=i[t+1];o[e.name]=null==r?r:decodeURIComponent(r)}}),r.parentPath&&(l=n.split("/").slice(0,r.parentPath.split("/").length-1).join("/")),t={query:a,hash:s,params:o,url:e,path:n,parentPath:l,route:r,name:r.name}}}),t}}replaceRequestUrlParams(e="",t={}){var r=e;return"string"==typeof r&&r.indexOf("{{")>=0&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&Object.keys(t.route.params).forEach(e=>{var i=new RegExp("{{".concat(e,"}}"),"g");r=r.replace(i,t.route.params[e]||"")}),r}removeFromXhrCache(e){for(var t=this.cache.xhr,r=!1,i=0;i<t.length;i+=1)t[i].url===e&&(r=i);!1!==r&&t.splice(r,1)}xhrRequest(e,t){var r=this,i=r.params,{ignoreCache:n}=t,a=e,s=a.indexOf("?")>=0;return i.passRouteQueryToRequest&&t&&t.route&&t.route.query&&Object.keys(t.route.query).length&&(a+="".concat(s?"&":"?").concat(x.serializeObject(t.route.query)),s=!0),i.passRouteParamsToRequest&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&(a+="".concat(s?"&":"?").concat(x.serializeObject(t.route.params)),s=!0),a.indexOf("{{")>=0&&(a=r.replaceRequestUrlParams(a,t)),i.xhrCacheIgnoreGetParameters&&a.indexOf("?")>=0&&(a=a.split("?")[0]),new Promise((e,s)=>{if(i.xhrCache&&!n&&a.indexOf("nocache")<0&&i.xhrCacheIgnore.indexOf(a)<0)for(var o=0;o<r.cache.xhr.length;o+=1){var l=r.cache.xhr[o];if(l.url===a&&x.now()-l.time<i.xhrCacheDuration)return void e(l.content)}r.xhr=r.app.request({url:a,method:"GET",beforeSend(e){r.emit("routerAjaxStart",e,t)},complete(n,o){r.emit("routerAjaxComplete",n),"error"!==o&&"timeout"!==o&&n.status>=200&&n.status<300||0===n.status?(i.xhrCache&&""!==n.responseText&&(r.removeFromXhrCache(a),r.cache.xhr.push({url:a,time:x.now(),content:n.responseText})),r.emit("routerAjaxSuccess",n,t),e(n.responseText)):(r.emit("routerAjaxError",n,t),s(n))},error(e){r.emit("routerAjaxError",e,t),s(e)}})})}setNavbarPosition(e,t,r){e.removeClass("navbar-previous navbar-current navbar-next"),t&&e.addClass("navbar-".concat(t)),!1===r?e.removeAttr("aria-hidden"):!0===r&&e.attr("aria-hidden","true"),e.trigger("navbar:position",{position:t}),this.emit("navbarPosition",e[0],t)}setPagePosition(e,t,r){e.removeClass("page-previous page-current page-next"),e.addClass("page-".concat(t)),!1===r?e.removeAttr("aria-hidden"):!0===r&&e.attr("aria-hidden","true"),e.trigger("page:position",{position:t}),this.emit("pagePosition",e[0],t)}removeThemeElements(e){var t,r=this.app.theme;"ios"===r?t=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":"md"===r?t=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":"aurora"===r&&(t=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),g(e).find(t).remove()}getPageData(e,t,r,i,n={},a){var s,o,l=g(e).eq(0),c=g(t).eq(0),h=l[0].f7Page||{};if(("next"===r&&"current"===i||"current"===r&&"previous"===i)&&(s="forward"),("current"===r&&"next"===i||"previous"===r&&"current"===i)&&(s="backward"),h&&!h.fromPage){var u=g(a);u.length&&(o=u[0].f7Page)}(o=h.pageFrom||o)&&o.pageFrom&&(o.pageFrom=null);var d={app:this.app,view:this.view,router:this,$el:l,el:l[0],$pageEl:l,pageEl:l[0],$navbarEl:c,navbarEl:c[0],name:l.attr("data-name"),position:r,from:r,to:i,direction:s,route:h.route?h.route:n,pageFrom:o};return l[0].f7Page=d,d}pageCallback(e,t,r,i,n,a={},s){if(t){var o=this,l=g(t);if(l.length){var c=g(r),{route:h}=a,u=o.params.restoreScrollTopOnBack&&!(o.params.masterDetailBreakpoint>0&&l.hasClass("page-master")&&o.app.width>=o.params.masterDetailBreakpoint),d=l[0].f7Page&&l[0].f7Page.route&&l[0].f7Page.route.route&&l[0].f7Page.route.route.keepAlive;"beforeRemove"===e&&d&&(e="beforeUnmount");var p="page".concat(e[0].toUpperCase()+e.slice(1,e.length)),f="page:".concat(e.toLowerCase()),v={};(v="beforeRemove"===e&&l[0].f7Page?x.extend(l[0].f7Page,{from:i,to:n,position:i}):o.getPageData(l[0],c[0],i,n,h,s)).swipeBack=!!a.swipeBack;var{on:m={},once:b={}}=a.route?a.route.route:{};if(a.on&&x.extend(m,a.on),a.once&&x.extend(b,a.once),"mounted"===e&&C(),"init"===e){if(u&&("previous"===i||!i)&&"current"===n&&o.scrollHistory[v.route.url]&&!l.hasClass("no-restore-scroll")){var y=l.find(".page-content");y.length>0&&(y=y.filter((e,t)=>0===g(t).parents(".tab:not(.tab-active)").length&&!g(t).is(".tab:not(.tab-active)"))),y.scrollTop(o.scrollHistory[v.route.url])}if(C(),l[0].f7PageInitialized)return l.trigger("page:reinit",v),void o.emit("pageReinit",v);l[0].f7PageInitialized=!0}if(u&&"beforeOut"===e&&"current"===i&&"previous"===n){var w=l.find(".page-content");w.length>0&&(w=w.filter((e,t)=>0===g(t).parents(".tab:not(.tab-active)").length&&!g(t).is(".tab:not(.tab-active)"))),o.scrollHistory[v.route.url]=w.scrollTop()}u&&"beforeOut"===e&&"current"===i&&"next"===n&&delete o.scrollHistory[v.route.url],l.trigger(f,v),o.emit(p,v),"beforeRemove"!==e&&"beforeUnmount"!==e||(l[0].f7RouteEventsAttached&&(l[0].f7RouteEventsOn&&Object.keys(l[0].f7RouteEventsOn).forEach(e=>{l.off(x.eventNameToColonCase(e),l[0].f7RouteEventsOn[e])}),l[0].f7RouteEventsOnce&&Object.keys(l[0].f7RouteEventsOnce).forEach(e=>{l.off(x.eventNameToColonCase(e),l[0].f7RouteEventsOnce[e])}),l[0].f7RouteEventsAttached=null,l[0].f7RouteEventsOn=null,l[0].f7RouteEventsOnce=null,delete l[0].f7RouteEventsAttached,delete l[0].f7RouteEventsOn,delete l[0].f7RouteEventsOnce),d||(l[0].f7Page&&l[0].f7Page.navbarEl&&delete l[0].f7Page.navbarEl.f7Page,l[0].f7Page=null))}}function C(){l[0].f7RouteEventsAttached||(l[0].f7RouteEventsAttached=!0,m&&Object.keys(m).length>0&&(l[0].f7RouteEventsOn=m,Object.keys(m).forEach(e=>{m[e]=m[e].bind(o),l.on(x.eventNameToColonCase(e),m[e])})),b&&Object.keys(b).length>0&&(l[0].f7RouteEventsOnce=b,Object.keys(b).forEach(e=>{b[e]=b[e].bind(o),l.once(x.eventNameToColonCase(e),b[e])})))}}saveHistory(){this.view.history=this.history,this.params.pushState&&(a.b.localStorage["f7router-".concat(this.view.id,"-history")]=JSON.stringify(this.history))}restoreHistory(){this.params.pushState&&a.b.localStorage["f7router-".concat(this.view.id,"-history")]&&(this.history=JSON.parse(a.b.localStorage["f7router-".concat(this.view.id,"-history")]),this.view.history=this.history)}clearHistory(){this.history=[],this.view&&(this.view.history=[]),this.saveHistory()}updateCurrentUrl(e){oe(this,"updateCurrentUrl"),this.history.length?this.history[this.history.length-1]=e:this.history.push(e);var{query:t,hash:r,params:i,url:n,path:a}=this.parseRouteUrl(e);if(this.currentRoute&&x.extend(this.currentRoute,{query:t,hash:r,params:i,url:n,path:a}),this.params.pushState){var s=this.params.pushStateRoot||"";re.replace(this.view.id,{url:e},s+this.params.pushStateSeparator+e)}this.saveHistory(),this.emit("routeUrlUpdate",this.currentRoute,this)}init(){var e=this,{app:t,view:r}=e;(r&&e.params.iosSwipeBack&&"ios"===t.theme||r&&e.params.mdSwipeBack&&"md"===t.theme||r&&e.params.auroraSwipeBack&&"aurora"===t.theme)&&ie(e);var i,n,s=e.params.url,o=a.a.location.href.split(a.a.location.origin)[1],{pushState:l,pushStateOnLoad:c,pushStateSeparator:h,pushStateAnimateOnLoad:u}=e.params,{pushStateRoot:d}=e.params;if(a.b.cordova&&l&&!h&&!d&&a.a.location.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete pushState configuration, trying to guess pushStateRoot"),d=a.a.location.pathname.split("index.html")[0]),l&&c?(d&&o.indexOf(d)>=0&&""===(o=o.split(d)[1])&&(o="/"),s=h.length>0&&o.indexOf(h)>=0?o.split(h)[1]:o,e.restoreHistory(),e.history.indexOf(s)>=0?e.history=e.history.slice(0,e.history.indexOf(s)+1):e.params.url===s?e.history=[s]:re.state&&re.state[r.id]&&re.state[r.id].url===e.history[e.history.length-1]?s=e.history[e.history.length-1]:e.history=[o.split(h)[0]||"/",s],e.history.length>1?i=!0:e.history=[],e.saveHistory()):(s||(s=o),a.a.location.search&&s.indexOf("?")<0&&(s+=a.a.location.search),a.a.location.hash&&s.indexOf("#")<0&&(s+=a.a.location.hash)),e.history.length>1?(n=e.findMatchingRoute(e.history[0]))||(n=x.extend(e.parseRouteUrl(e.history[0]),{route:{url:e.history[0],path:e.history[0].split("?")[0]}})):(n=e.findMatchingRoute(s))||(n=x.extend(e.parseRouteUrl(s),{route:{url:s,path:s.split("?")[0]}})),e.params.stackPages&&e.$el.children(".page").each((t,r)=>{var i=g(r);e.initialPages.push(i[0]),e.dynamicNavbar&&i.children(".navbar").length>0&&e.initialNavbars.push(i.children(".navbar")[0])}),0===e.$el.children(".page:not(.stacked)").length&&s&&e.params.loadInitialPage)e.navigate(s,{initial:!0,reloadCurrent:!0,pushState:!1});else if(e.$el.children(".page:not(.stacked)").length){var p;e.currentRoute=n,e.$el.children(".page:not(.stacked)").each((t,i)=>{var n,s=g(i);e.setPagePosition(s,"current"),e.dynamicNavbar&&((n=s.children(".navbar")).length>0?(e.$navbarsEl.parents(a.a).length||e.$el.prepend(e.$navbarsEl),e.setNavbarPosition(n,"current"),e.$navbarsEl.append(n),n.children(".title-large").length&&n.addClass("navbar-large"),s.children(".navbar").remove()):(e.$navbarsEl.addClass("navbar-hidden"),n.children(".title-large").length&&e.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.master&&e.params.masterDetailBreakpoint>0&&(s.addClass("page-master"),s.trigger("page:role",{role:"master"}),n&&n.length&&n.addClass("navbar-master"),r.checkMasterDetailBreakpoint());var o={route:e.currentRoute};e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&x.extend(o,e.currentRoute.route.options),e.currentPageEl=s[0],e.dynamicNavbar&&n.length&&(e.currentNavbarEl=n[0]),e.removeThemeElements(s),e.dynamicNavbar&&n.length&&e.removeThemeElements(n),o.route.route.tab&&(p=!0,e.tabLoad(o.route.route.tab,x.extend({},o))),e.pageCallback("init",s,n,"current",void 0,o)}),i&&e.navigate(s,{initial:!0,pushState:!1,history:!1,animate:u,once:{pageAfterIn(){(e.params.preloadPreviousPage||e.params["".concat(t.theme,"SwipeBack")])&&e.history.length>2&&e.back({preload:!0})}}}),i||p||(e.history.push(s),e.saveHistory())}!(s&&l&&c)||re.state&&re.state[r.id]||re.initViewState(r.id,{url:s}),e.emit("local::init routerInit",e)}destroy(){var e=this;e.emit("local::destroy routerDestroy",e),Object.keys(e).forEach(t=>{e[t]=null,delete e[t]}),e=null}}ce.prototype.forward=function(e,t={}){var r,i,n,s=this,o=g(e),l=s.app,c=s.view,h=x.extend(!1,{animate:s.params.animate,pushState:!0,replaceState:!1,history:!0,reloadCurrent:s.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:s.params.reloadDetail,on:{}},t),u=s.params.masterDetailBreakpoint>0,d=u&&h.route&&h.route.route&&!0===h.route.route.master,p=s.currentRoute.modal;if(p||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(e=>{s.currentRoute&&s.currentRoute.route&&s.currentRoute.route[e]&&(p=!0,n=e)}),p){var f=s.currentRoute.modal||s.currentRoute.route.modalInstance||l[n].get(),v=s.history[s.history.length-2],m=s.findMatchingRoute(v);!m&&v&&(m={url:v,path:v.split("?")[0],query:x.parseUrlQuery(v),route:{path:v.split("?")[0],url:v}}),s.modalRemove(f)}var b,y,w,C,_=s.dynamicNavbar,S=s.$el,k=o,T=h.reloadPrevious||h.reloadCurrent||h.reloadAll;if(s.allowPageChange=!1,0===k.length)return s.allowPageChange=!0,s;k.length&&s.removeThemeElements(k),_&&(w=k.children(".navbar"),y=s.$navbarsEl,0===w.length&&k[0]&&k[0].f7Page&&(w=k[0].f7Page.$navbarEl)),h.route&&h.route.route&&h.route.route.keepAlive&&!h.route.route.keepAliveData&&(h.route.route.keepAliveData={pageEl:o[0]});var O,E,P,A,D=S.children(".page:not(.stacked)").filter((e,t)=>t!==k[0]);if(_&&(O=y.children(".navbar:not(.stacked)").filter((e,t)=>t!==w[0])),h.reloadPrevious&&D.length<2)return s.allowPageChange=!0,s;if(u&&!h.reloadAll){for(var I=0;I<D.length;I+=1)r||!D[I].classList.contains("page-master")||(r=D[I]);if((E=!d&&r)&&r)for(var L=0;L<D.length;L+=1)D[L].classList.contains("page-master-detail")&&(i=D[L]);P=E&&h.reloadDetail&&l.width>=s.params.masterDetailBreakpoint&&r}E&&(A=!i||P||h.reloadAll||h.reloadCurrent);var B="next";if(h.reloadCurrent||h.reloadAll||P?B="current":h.reloadPrevious&&(B="previous"),k.removeClass("page-previous page-current page-next").addClass("page-".concat(B).concat(d?" page-master":"").concat(E?" page-master-detail":"").concat(A?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:B}),s.emit("pageUnstack",k[0]),s.emit("pagePosition",k[0],B),(d||E)&&(k.trigger("page:role",{role:d?"master":"detail",root:!!A}),s.emit("pageRole",k[0],{role:d?"master":"detail",detailRoot:!!A})),_&&w.length&&(w.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-".concat(B).concat(d?" navbar-master":"").concat(E?" navbar-master-detail":"").concat(A?" navbar-master-detail-root":"")).removeClass("stacked"),w.trigger("navbar:position",{position:B}),s.emit("navbarPosition",w[0],B),(d||E)&&s.emit("navbarRole",w[0],{role:d?"master":"detail",detailRoot:!!A})),h.reloadCurrent||P)b=D.eq(D.length-1),_&&(C=g(l.navbar.getElByPage(b)));else if(h.reloadPrevious)b=D.eq(D.length-2),_&&(C=g(l.navbar.getElByPage(b)));else if(h.reloadAll)b=D.filter((e,t)=>t!==k[0]),_&&(C=O.filter((e,t)=>t!==w[0]));else{var R=[],M=[];if(D.length>1){var j=0;for(j=0;j<D.length-1;j+=1)if(r&&D[j]===r)D.eq(j).addClass("page-master-stacked"),D.eq(j).trigger("page:masterstack"),s.emit("pageMasterStack",D[j]),_&&(g(l.navbar.getElByPage(r)).addClass("navbar-master-stacked"),s.emit("navbarMasterStack",l.navbar.getElByPage(r)));else{var F=l.navbar.getElByPage(D.eq(j));s.params.stackPages?(D.eq(j).addClass("stacked"),D.eq(j).trigger("page:stack"),s.emit("pageStack",D[j]),_&&g(F).addClass("stacked")):(R.push(D[j]),s.pageCallback("beforeRemove",D[j],O&&O[j],"previous",void 0,h),s.removePage(D[j]),_&&F&&(M.push(F),s.removeNavbar(F)))}}b=S.children(".page:not(.stacked)").filter((e,t)=>t!==k[0]&&R.indexOf(t)<0),_&&(C=y.children(".navbar:not(.stacked)").filter((e,t)=>t!==w[0]&&M.indexOf(M)<0)),R=[],M=[]}if(E&&!h.reloadAll&&((b.length>1||P)&&(b=b.filter((e,t)=>!t.classList.contains("page-master"))),C&&(C.length>1||P)&&(C=C.filter((e,t)=>!t.classList.contains("navbar-master")))),s.params.pushState&&(h.pushState||h.replaceState)&&!h.reloadPrevious){var $=s.params.pushStateRoot||"";re[h.reloadCurrent||P&&i||h.reloadAll||h.replaceState?"replace":"push"](c.id,{url:h.route.url},$+s.params.pushStateSeparator+h.route.url)}h.reloadPrevious||(s.currentPageEl=k[0],_&&w.length?s.currentNavbarEl=w[0]:delete s.currentNavbarEl,s.currentRoute=h.route);var N=h.route.url;h.history&&(((h.reloadCurrent||P&&i)&&s.history.length)>0||h.replaceState?s.history[s.history.length-(h.reloadPrevious?2:1)]=N:h.reloadPrevious?s.history[s.history.length-2]=N:h.reloadAll?s.history=[N]:s.history.push(N)),s.saveHistory();var z=k.parents(a.a).length>0,U=k[0].f7Component;if(h.reloadPrevious?(U&&!z?U.$mount(e=>{g(e).insertBefore(b)}):k.insertBefore(b),_&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),C.length?w.insertBefore(C):(s.$navbarsEl.parents(a.a).length||s.$el.prepend(s.$navbarsEl),y.append(w)))):(b.next(".page")[0]!==k[0]&&(U&&!z?U.$mount(e=>{S.append(e)}):S.append(k[0])),_&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),s.$navbarsEl.parents(a.a).length||s.$el.prepend(s.$navbarsEl),y.append(w[0]))),z?h.route&&h.route.route&&h.route.route.keepAlive&&!k[0].f7PageMounted&&(k[0].f7PageMounted=!0,s.pageCallback("mounted",k,w,B,T?B:"current",h,b)):s.pageCallback("mounted",k,w,B,T?B:"current",h,b),(h.reloadCurrent||P)&&b.length>0?s.params.stackPages&&s.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),s.emit("pageStack",b[0]),_&&C.addClass("stacked")):(s.pageCallback("beforeOut",b,C,"current",void 0,h),s.pageCallback("afterOut",b,C,"current",void 0,h),s.pageCallback("beforeRemove",b,C,"current",void 0,h),s.removePage(b),_&&C&&C.length&&s.removeNavbar(C)):h.reloadAll?b.each((e,t)=>{var r=g(t),i=g(l.navbar.getElByPage(r));s.params.stackPages&&s.initialPages.indexOf(r[0])>=0?(r.addClass("stacked"),r.trigger("page:stack"),s.emit("pageStack",r[0]),_&&i.addClass("stacked")):(r.hasClass("page-current")&&(s.pageCallback("beforeOut",b,C,"current",void 0,h),s.pageCallback("afterOut",b,C,"current",void 0,h)),s.pageCallback("beforeRemove",r,C&&C.eq(e),"previous",void 0,h),s.removePage(r),_&&i.length&&s.removeNavbar(i))}):h.reloadPrevious&&(s.params.stackPages&&s.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),s.emit("pageStack",b[0]),_&&C.addClass("stacked")):(s.pageCallback("beforeRemove",b,C,"previous",void 0,h),s.removePage(b),_&&C&&C.length&&s.removeNavbar(C))),h.route.route.tab&&s.tabLoad(h.route.route.tab,x.extend({},h,{history:!1,pushState:!1})),u&&c.checkMasterDetailBreakpoint(),s.pageCallback("init",k,w,B,T?B:"current",h,b),h.reloadCurrent||h.reloadAll||P)return s.allowPageChange=!0,s.pageCallback("beforeIn",k,w,B,"current",h),k.removeAttr("aria-hidden"),_&&w&&w.removeAttr("aria-hidden"),s.pageCallback("afterIn",k,w,B,"current",h),h.reloadCurrent&&h.clearPreviousHistory&&s.clearPreviousHistory(),P&&(s.setPagePosition(g(r),"previous"),r.f7Page&&r.f7Page.navbarEl&&s.setNavbarPosition(g(r.f7Page.navbarEl),"previous")),s;if(h.reloadPrevious)return s.allowPageChange=!0,s;function H(){s.setPagePosition(k,"current",!1),s.setPagePosition(b,"previous",!b.hasClass("page-master")),_&&(s.setNavbarPosition(w,"current",!1),s.setNavbarPosition(C,"previous",!C.hasClass("navbar-master"))),s.allowPageChange=!0,s.pageCallback("afterOut",b,C,"current","previous",h),s.pageCallback("afterIn",k,w,"next","current",h);var e=(s.params.preloadPreviousPage||s.params["".concat(l.theme,"SwipeBack")])&&!d;e||(k.hasClass("smart-select-page")||k.hasClass("photo-browser-page")||k.hasClass("autocomplete-page")||k.hasClass("color-picker-page"))&&(e=!0),e||(s.params.stackPages?(b.addClass("stacked"),b.trigger("page:stack"),s.emit("pageStack",b[0]),_&&C.addClass("stacked")):k.attr("data-name")&&"smart-select-page"===k.attr("data-name")||(s.pageCallback("beforeRemove",b,C,"previous",void 0,h),s.removePage(b),_&&C.length&&s.removeNavbar(C))),h.clearPreviousHistory&&s.clearPreviousHistory(),s.emit("routeChanged",s.currentRoute,s.previousRoute,s),s.params.pushState&&re.clearRouterQueue()}function W(){s.setPagePosition(b,"current",!1),s.setPagePosition(k,"next",!1),_&&(s.setNavbarPosition(C,"current",!1),s.setNavbarPosition(w,"next",!1))}if(s.pageCallback("beforeOut",b,C,"current","previous",h),s.pageCallback("beforeIn",k,w,"next","current",h),!h.animate||d&&l.width>=s.params.masterDetailBreakpoint)H();else{var V=s.params["".concat(s.app.theme,"PageLoadDelay")],Y=s.params.transition;h.transition&&(Y=h.transition),!Y&&s.currentRoute&&s.currentRoute.route&&(Y=s.currentRoute.route.transition),!Y&&s.currentRoute&&s.currentRoute.route.options&&(Y=s.currentRoute.route.options.transition),Y&&(k[0].f7PageTransition=Y),V?setTimeout(()=>{W(),s.animate(b,k,C,w,"forward",Y,()=>{H()})},V):(W(),s.animate(b,k,C,w,"forward",Y,()=>{H()}))}return s},ce.prototype.load=function(e={},t={},r){var i=this;if(!i.allowPageChange&&!r)return i;var n=e,a=t,{url:s,content:o,el:l,pageName:c,template:h,templateUrl:u,component:d,componentUrl:p}=n;if(!a.reloadCurrent&&a.route&&a.route.route&&a.route.route.parentPath&&i.currentRoute.route&&i.currentRoute.route.parentPath===a.route.route.parentPath){if(a.route.url===i.url)return i.allowPageChange=!0,!1;var f=Object.keys(a.route.params).length===Object.keys(i.currentRoute.params).length;if(f&&Object.keys(a.route.params).forEach(e=>{e in i.currentRoute.params&&i.currentRoute.params[e]===a.route.params[e]||(f=!1)}),f)return!!a.route.route.tab&&i.tabLoad(a.route.route.tab,a);if(!f&&a.route.route.tab&&i.currentRoute.route.tab&&i.currentRoute.parentPath===a.route.parentPath)return i.tabLoad(a.route.route.tab,a)}if(a.route&&a.route.url&&i.url===a.route.url&&!a.reloadCurrent&&!a.reloadPrevious&&!i.params.allowDuplicateUrls)return i.allowPageChange=!0,!1;function g(e,t){return i.forward(e,x.extend(a,t))}function v(){return i.allowPageChange=!0,i}if(!a.route&&s&&(a.route=i.parseRouteUrl(s),x.extend(a.route,{route:{url:s,path:s}})),(s||u||p||d)&&(i.allowPageChange=!1),o)i.forward(i.getPageEl(o),a);else if(h||u)try{i.pageTemplateLoader(h,u,a,g,v)}catch(e){throw i.allowPageChange=!0,e}else if(l)i.forward(i.getPageEl(l),a);else if(c)i.forward(i.$el.children('.page[data-name="'.concat(c,'"]')).eq(0),a);else if(d||p)try{i.pageComponentLoader(i.el,d,p,a,g,v)}catch(e){throw i.allowPageChange=!0,e}else s&&(i.xhr&&(i.xhr.abort(),i.xhr=!1),i.xhrRequest(s,a).then(e=>{i.forward(i.getPageEl(e),a)}).catch(()=>{i.allowPageChange=!0}));return i},ce.prototype.navigate=function(e,t={}){var r,i,n,a,s,o,l,c=this;if(c.swipeBackActive)return c;if("string"==typeof e?r=e:(r=e.url,i=e.route,n=e.name,a=e.path,s=e.query,o=e.params),n||a)return(r=c.generateUrl({path:a,name:n,params:o,query:s}))?c.navigate(r,t):c;var h=c.app;if(oe(c,"navigate"),"#"===r||""===r)return c;var u=r.replace("./","");if("/"!==u[0]&&0!==u.indexOf("#")){var d=c.currentRoute.parentPath||c.currentRoute.path;u=((d?"".concat(d,"/"):"/")+u).replace("///","/").replace("//","/")}if(!(l=i?x.extend(c.parseRouteUrl(u),{route:x.extend({},i)}):c.findMatchingRoute(u)))return c;if(l.route&&l.route.viewName){var p=l.route.viewName,f=h.views[p];if(!f)throw new Error('Framework7: There is no View with "'.concat(p,'" name that was specified in this route'));if(f!==c.view)return f.router.navigate(e,t)}if(l.route.redirect)return ne.call(c,"navigate",l,t);var g={};function v(){var e=!1;function t(e,t){c.allowPageChange=!1;var r=!1;t&&t.context&&(l.context?l.context=x.extend({},l.context,t.context):l.context=t.context,g.route.context=l.context),"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(i=>{if(e[i]){r=!0;var n=x.extend({},l,{route:e});c.allowPageChange=!0,c.modalLoad(i,n,x.extend(g,t))}}),r||c.load(e,x.extend(g,t),!0)}function r(){c.allowPageChange=!0}"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(t=>{l.route[t]&&!e&&(e=!0,c.modalLoad(t,l,g))}),l.route.keepAlive&&l.route.keepAliveData&&(c.load({el:l.route.keepAliveData.pageEl},g,!1),e=!0),"url content component pageName el componentUrl template templateUrl".split(" ").forEach(t=>{l.route[t]&&!e&&(e=!0,c.load({[t]:l.route[t]},g,!1))}),e||(l.route.async&&(c.allowPageChange=!1,l.route.async.call(c,g.route,c.currentRoute,t,r)),l.route.asyncComponent&&le(c,l.route.asyncComponent,t,r))}function m(){c.allowPageChange=!0}if(l.route.options?x.extend(g,l.route.options,t):x.extend(g,t),g.route=l,g&&g.context&&(l.context=g.context,g.route.context=g.context),c.params.masterDetailBreakpoint>0&&l.route.masterRoute){var b=!0,y=!1;if(c.currentRoute&&c.currentRoute.route&&(!c.currentRoute.route.master||c.currentRoute.route!==l.route.masterRoute&&c.currentRoute.route.path!==l.route.masterRoute.path||(b=!1),!c.currentRoute.route.masterRoute||c.currentRoute.route.masterRoute!==l.route.masterRoute&&c.currentRoute.route.masterRoute.path!==l.route.masterRoute.path||(b=!1,y=!0)),b||y&&t.reloadAll)return c.navigate({path:l.route.masterRoute.path,params:l.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,pushState:!t.initial,history:!t.initial,once:{pageAfterIn(){c.navigate(e,x.extend({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,pushState:!t.initial}))}}}),c}return se.call(c,l,c.currentRoute,()=>{l.route.modules?h.loadModules(Array.isArray(l.route.modules)?l.route.modules:[l.route.modules]).then(()=>{v()}).catch(()=>{m()}):v()},()=>{m()}),c},ce.prototype.refreshPage=function(){return oe(this,"refreshPage"),this.navigate(this.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})},ce.prototype.tabLoad=function(e,t={}){var r,i,n=this,a=x.extend({animate:n.params.animate,pushState:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t);a.route&&(a.preload||a.route===n.currentRoute||(i=n.previousRoute,n.currentRoute=a.route),a.preload?(r=a.route,i=n.currentRoute):(r=n.currentRoute,i||(i=n.previousRoute)),n.params.pushState&&a.pushState&&!a.reloadPrevious&&re.replace(n.view.id,{url:a.route.url},(n.params.pushStateRoot||"")+n.params.pushStateSeparator+a.route.url),a.history&&(n.history[Math.max(n.history.length-1,0)]=a.route.url,n.saveHistory()));var s,o=g(a.parentPageEl||n.currentPageEl);s=o.length&&o.find("#".concat(e.id)).length?o.find("#".concat(e.id)).eq(0):n.view.selector?"".concat(n.view.selector," #").concat(e.id):"#".concat(e.id);var l,c=n.app.tab.show({tabEl:s,animate:a.animate,tabRoute:a.route}),{$newTabEl:h,$oldTabEl:u,animated:d,onTabsChanged:p}=c;if(h&&h.parents(".page").length>0&&a.route){var f=h.parents(".page")[0].f7Page;f&&a.route&&(f.route=a.route)}if(h[0].f7RouterTabLoaded)return u&&u.length?(d?p(()=>{n.emit("routeChanged",n.currentRoute,n.previousRoute,n)}):n.emit("routeChanged",n.currentRoute,n.previousRoute,n),n):n;function v(t,r){var{url:i,content:a,el:s,template:o,templateUrl:l,component:c,componentUrl:f}=t;function v(t){n.allowPageChange=!0,t&&("string"==typeof t?h.html(t):(h.html(""),t.f7Component?t.f7Component.$mount(e=>{h.append(e)}):h.append(t)),h[0].f7RouterTabLoaded=!0,function(t){n.removeThemeElements(h);var r=h;"string"!=typeof t&&(r=g(t)),r.trigger("tab:init tab:mounted",e),n.emit("tabInit tabMounted",h[0],e),u&&u.length&&(d?p(()=>{n.emit("routeChanged",n.currentRoute,n.previousRoute,n),n.params.unloadTabContent&&n.tabRemove(u,h,e)}):(n.emit("routeChanged",n.currentRoute,n.previousRoute,n),n.params.unloadTabContent&&n.tabRemove(u,h,e)))}(t))}function m(){return n.allowPageChange=!0,n}if(a)v(a);else if(o||l)try{n.tabTemplateLoader(o,l,r,v,m)}catch(e){throw n.allowPageChange=!0,e}else if(s)v(s);else if(c||f)try{n.tabComponentLoader(h[0],c,f,r,v,m)}catch(e){throw n.allowPageChange=!0,e}else i&&(n.xhr&&(n.xhr.abort(),n.xhr=!1),n.xhrRequest(i,r).then(e=>{v(e)}).catch(()=>{n.allowPageChange=!0}))}function m(e,t){v(e,x.extend(a,t))}function b(){n.allowPageChange=!0}return"url content component el componentUrl template templateUrl".split(" ").forEach(t=>{e[t]&&(l=!0,v({[t]:e[t]},a))}),e.async?e.async.call(n,r,i,m,b):e.asyncComponent?le(n,e.asyncComponent,m,b):l||(n.allowPageChange=!0),n},ce.prototype.tabRemove=function(e,t,r){var i;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each((e,t)=>{t.f7Component&&(i=!0,g(t).trigger("tab:beforeremove",r),t.f7Component.$destroy())}),i||e.trigger("tab:beforeremove",r),this.emit("tabBeforeRemove",e[0],t[0],r),this.removeTabContent(e[0],r)},ce.prototype.modalLoad=function(e,t,r={}){var i,n=this,a=n.app,s="panel"===e,o=s?"panel":"modal",l=x.extend({animate:n.params.animate,pushState:!0,history:!0,on:{}},r),c=x.extend({},t.route[e]),h=t.route;function u(){var r=a[e].create(c);h.modalInstance=r;var i=r.el;function u(){r.close()}r.on("".concat(o,"Open"),()=>{i||(n.removeThemeElements(r.el),r.$el.trigger("".concat(e.toLowerCase(),":init ").concat(e.toLowerCase(),":mounted"),t,r),n.emit("".concat(s?"":"modalInit"," ").concat(e,"Init ").concat(e,"Mounted"),r.el,t,r)),n.once("swipeBackMove",u)}),r.on("".concat(o,"Close"),()=>{n.off("swipeBackMove",u),r.closeByRouter||n.back()}),r.on("".concat(o,"Closed"),()=>{r.$el.trigger("".concat(e.toLowerCase(),":beforeremove"),t,r),r.emit("".concat(s?"":"modalBeforeRemove ").concat(e,"BeforeRemove"),r.el,t,r);var i=r.el.f7Component;i&&i.$destroy(),x.nextTick(()=>{(i||c.component)&&n.removeModal(r.el),r.destroy(),delete r.route,delete h.modalInstance})}),l.route&&(n.params.pushState&&l.pushState&&re.push(n.view.id,{url:l.route.url,modal:e},(n.params.pushStateRoot||"")+n.params.pushStateSeparator+l.route.url),l.route!==n.currentRoute&&(r.route=x.extend(l.route,{modal:r}),n.currentRoute=r.route),l.history&&(n.history.push(l.route.url),n.saveHistory())),i&&(n.removeThemeElements(r.el),r.$el.trigger("".concat(e.toLowerCase(),":init ").concat(e.toLowerCase(),":mounted"),t,r),n.emit("".concat(o,"Init ").concat(e,"Init ").concat(e,"Mounted"),r.el,t,r)),r.open()}function d(e,t){var{url:r,content:i,template:s,templateUrl:o,component:l,componentUrl:h}=e;function d(e){e&&("string"==typeof e?c.content=e:e.f7Component?e.f7Component.$mount(e=>{c.el=e,a.root.append(e)}):c.el=e,u())}function p(){return n.allowPageChange=!0,n}if(i)d(i);else if(s||o)try{n.modalTemplateLoader(s,o,t,d,p)}catch(e){throw n.allowPageChange=!0,e}else if(l||h)try{n.modalComponentLoader(a.root[0],l,h,t,d,p)}catch(e){throw n.allowPageChange=!0,e}else r?(n.xhr&&(n.xhr.abort(),n.xhr=!1),n.xhrRequest(r,t).then(e=>{c.content=e,u()}).catch(()=>{n.allowPageChange=!0})):u()}function p(e,t){d(e,x.extend(l,t))}function f(){n.allowPageChange=!0}return"url content component el componentUrl template templateUrl".split(" ").forEach(e=>{c[e]&&!i&&(i=!0,d({[e]:c[e]},l))}),i||"actions"!==e||u(),c.async&&c.async.call(n,l.route,n.currentRoute,p,f),c.asyncComponent&&le(n,c.asyncComponent,p,f),n},ce.prototype.modalRemove=function(e){x.extend(e,{closeByRouter:!0}),e.close()},ce.prototype.backward=function(e,t){var r,i,n,s,o,l,c,h,u=this,d=g(e),p=u.app,f=u.view,v=x.extend({animate:u.params.animate,pushState:!0,replaceState:!1},t),m=u.params.masterDetailBreakpoint>0,b=m&&v.route&&v.route.route&&!0===v.route.route.master,y=u.dynamicNavbar,w=d,C=u.$el.children(".page-current"),_=m&&C.hasClass("page-master");if(w.length&&u.removeThemeElements(w),y&&(s=w.children(".navbar"),n=u.$navbarsEl,0===s.length&&w[0]&&w[0].f7Page&&(s=w[0].f7Page.$navbarEl),o=n.find(".navbar-current")),u.allowPageChange=!1,0===w.length||0===C.length)return u.allowPageChange=!0,u;if(u.removeThemeElements(w),v.route&&v.route.route&&v.route.route.keepAlive&&!v.route.route.keepAliveData&&(v.route.route.keepAliveData={pageEl:d[0]}),m){for(var k=u.$el.children(".page:not(.stacked)").filter((e,t)=>t!==w[0]),T=0;T<k.length;T+=1)r||!k[T].classList.contains("page-master")||(r=k[T]);!(l=!b&&r&&u.history.indexOf(v.route.url)>u.history.indexOf(r.f7Page.route.url))&&!b&&r&&r.f7Page&&v.route.route.masterRoute&&(l=v.route.route.masterRoute.path===r.f7Page.route.route.path)}if(l&&r&&r.f7Page&&(c=u.history.indexOf(v.route.url)-u.history.indexOf(r.f7Page.route.url)==1),w.addClass("page-previous".concat(b?" page-master":"").concat(l?" page-master-detail":"").concat(c?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:"previous"}),u.emit("pageUnstack",w[0]),u.emit("pagePosition",w[0],"previous"),(b||l)&&(w.trigger("page:role",{role:b?"master":"detail",root:!!c}),u.emit("pageRole",w[0],{role:b?"master":"detail",detailRoot:!!c})),y&&s.length>0&&(s.addClass("navbar-previous".concat(b?" navbar-master":"").concat(l?" navbar-master-detail":"").concat(c?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),s.trigger("navbar:position",{position:"previous"}),u.emit("navbarPosition",s[0],"previous"),(b||c)&&u.emit("navbarRole",s[0],{role:b?"master":"detail",detailRoot:!!c})),v.force&&(C.prev(".page-previous:not(.stacked)").length>0||0===C.prev(".page-previous").length))if(u.history.indexOf(v.route.url)>=0?(h=u.history.length-u.history.indexOf(v.route.url)-1,u.history=u.history.slice(0,u.history.indexOf(v.route.url)+2),f.history=u.history):u.history[[u.history.length-2]]?u.history[u.history.length-2]=v.route.url:u.history.unshift(u.url),h&&u.params.stackPages)C.prevAll(".page-previous").each((e,t)=>{var n,a=g(t);y&&(n=g(p.navbar.getElByPage(a))),a[0]!==w[0]&&a.index()>w.index()&&(u.initialPages.indexOf(a[0])>=0?(a.addClass("stacked"),a.trigger("page:stack"),u.emit("pageStack",a[0]),y&&n.addClass("stacked")):(u.pageCallback("beforeRemove",a,n,"previous",void 0,v),a[0]===r&&(i=!0),u.removePage(a),y&&n.length>0&&u.removeNavbar(n)))});else{var O,E=C.prev(".page-previous:not(.stacked)");y&&(O=g(p.navbar.getElByPage(E))),u.params.stackPages&&u.initialPages.indexOf(E[0])>=0?(E.addClass("stacked"),E.trigger("page:stack"),u.emit("pageStack",E[0]),O.addClass("stacked")):E.length>0&&(u.pageCallback("beforeRemove",E,O,"previous",void 0,v),E[0]===r&&(i=!0),u.removePage(E),y&&O.length&&u.removeNavbar(O))}var P=w.parents(a.a).length>0,A=w[0].f7Component;function D(){0===w.next(C).length&&(!P&&A?A.$mount(e=>{g(e).insertBefore(C)}):w.insertBefore(C)),y&&s.length&&(s.find(".title-large").length&&s.addClass("navbar-large"),s.insertBefore(o),o.length>0?s.insertBefore(o):(u.$navbarsEl.parents(a.a).length||u.$el.prepend(u.$navbarsEl),n.append(s))),P?v.route&&v.route.route&&v.route.route.keepAlive&&!w[0].f7PageMounted&&(w[0].f7PageMounted=!0,u.pageCallback("mounted",w,s,"previous","current",v,C)):u.pageCallback("mounted",w,s,"previous","current",v,C)}if(v.preload){D(),v.route.route.tab&&u.tabLoad(v.route.route.tab,x.extend({},v,{history:!1,pushState:!1,preload:!0})),b&&(w.removeClass("page-master-stacked").trigger("page:masterunstack"),u.emit("pageMasterUnstack",w[0]),y&&(g(p.navbar.getElByPage(w)).removeClass("navbar-master-stacked"),u.emit("navbarMasterUnstack",p.navbar.getElByPage(w)))),u.pageCallback("init",w,s,"previous","current",v,C);var I=w.prevAll(".page-previous:not(.stacked):not(.page-master)");return I.length>0&&I.each((e,t)=>{var r,i=g(t);y&&(r=g(p.navbar.getElByPage(i))),u.params.stackPages&&u.initialPages.indexOf(t)>=0?(i.addClass("stacked"),i.trigger("page:stack"),u.emit("pageStack",i[0]),y&&r.addClass("stacked")):(u.pageCallback("beforeRemove",i,r,"previous",void 0),u.removePage(i),y&&r.length&&u.removeNavbar(r))}),u.allowPageChange=!0,u}if(!(S.a.ie||S.a.edge||S.a.firefox&&!S.a.ios)&&u.params.pushState&&v.pushState)if(v.replaceState){var L=u.params.pushStateRoot||"";re.replace(f.id,{url:v.route.url},L+u.params.pushStateSeparator+v.route.url)}else h?re.go(-h):re.back();if(v.replaceState?u.history[u.history.length-1]=v.route.url:(1===u.history.length&&u.history.unshift(u.url),u.history.pop()),u.saveHistory(),u.currentPageEl=w[0],y&&s.length?u.currentNavbarEl=s[0]:delete u.currentNavbarEl,u.currentRoute=v.route,(S.a.ie||S.a.edge||S.a.firefox&&!S.a.ios)&&u.params.pushState&&v.pushState)if(v.replaceState){var B=u.params.pushStateRoot||"";re.replace(f.id,{url:v.route.url},B+u.params.pushStateSeparator+v.route.url)}else h?re.go(-h):re.back();function R(){u.setPagePosition(w,"current",!1),u.setPagePosition(C,"next",!0),y&&(u.setNavbarPosition(s,"current",!1),u.setNavbarPosition(o,"next",!0)),u.pageCallback("afterOut",C,o,"current","next",v),u.pageCallback("afterIn",w,s,"previous","current",v),u.params.stackPages&&u.initialPages.indexOf(C[0])>=0?(C.addClass("stacked"),C.trigger("page:stack"),u.emit("pageStack",C[0]),y&&o.addClass("stacked")):(u.pageCallback("beforeRemove",C,o,"next",void 0,v),u.removePage(C),y&&o.length&&u.removeNavbar(o)),u.allowPageChange=!0,u.emit("routeChanged",u.currentRoute,u.previousRoute,u),(u.params.preloadPreviousPage||u.params["".concat(p.theme,"SwipeBack")])&&u.history[u.history.length-2]&&!b&&u.back(u.history[u.history.length-2],{preload:!0}),u.params.pushState&&re.clearRouterQueue()}if(D(),v.route.route.tab&&u.tabLoad(v.route.route.tab,x.extend({},v,{history:!1,pushState:!1})),m&&(_||i)&&f.checkMasterDetailBreakpoint(!1),u.pageCallback("init",w,s,"previous","current",v,C),u.pageCallback("beforeOut",C,o,"current","next",v),u.pageCallback("beforeIn",w,s,"previous","current",v),!v.animate||_&&p.width>=u.params.masterDetailBreakpoint)R();else{var M=u.params.transition;C[0]&&C[0].f7PageTransition&&(M=C[0].f7PageTransition,delete C[0].f7PageTransition),v.transition&&(M=v.transition),!M&&u.previousRoute&&u.previousRoute.route&&(M=u.previousRoute.route.transition),!M&&u.previousRoute&&u.previousRoute.route&&u.previousRoute.route.options&&(M=u.previousRoute.route.options.transition),u.setPagePosition(C,"current"),u.setPagePosition(w,"previous",!1),y&&(u.setNavbarPosition(o,"current"),u.setNavbarPosition(s,"previous",!1)),u.animate(C,w,o,s,"backward",M,()=>{R()})}return u},ce.prototype.loadBack=function(e,t,r){var i=this;if(!i.allowPageChange&&!r)return i;var n=e,a=t,{url:s,content:o,el:l,pageName:c,template:h,templateUrl:u,component:d,componentUrl:p}=n;if(a.route.url&&i.url===a.route.url&&!a.reloadCurrent&&!a.reloadPrevious&&!i.params.allowDuplicateUrls)return!1;function f(e,t){return i.backward(e,x.extend(a,t))}function g(){return i.allowPageChange=!0,i}if(!a.route&&s&&(a.route=i.parseRouteUrl(s)),(s||u||p||d)&&(i.allowPageChange=!1),o)i.backward(i.getPageEl(o),a);else if(h||u)try{i.pageTemplateLoader(h,u,a,f,g)}catch(e){throw i.allowPageChange=!0,e}else if(l)i.backward(i.getPageEl(l),a);else if(c)i.backward(i.$el.children('.page[data-name="'.concat(c,'"]')).eq(0),a);else if(d||p)try{i.pageComponentLoader(i.el,d,p,a,f,g)}catch(e){throw i.allowPageChange=!0,e}else s&&(i.xhr&&(i.xhr.abort(),i.xhr=!1),i.xhrRequest(s,a).then(e=>{i.backward(i.getPageEl(e),a)}).catch(()=>{i.allowPageChange=!0}));return i},ce.prototype.back=function(...e){var t,r,i,n=this;if(n.swipeBackActive)return n;"object"==typeof e[0]?r=e[0]||{}:(t=e[0],r=e[1]||{});var{name:a,params:s,query:o}=r;if(a)return(t=n.generateUrl({name:a,params:s,query:o}))?n.back(t,x.extend({},r,{name:null,params:null,query:null})):n;var l=n.app;oe(n,"back");var c,h=n.currentRoute.modal;if(h||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach(e=>{n.currentRoute.route[e]&&(h=!0,c=e)}),h){var u,d=n.currentRoute.modal||n.currentRoute.route.modalInstance||l[c].get(),p=n.history[n.history.length-2];if(d&&d.$el){var f=d.$el.prevAll(".modal-in");if(f.length&&f[0].f7Modal){var g=f[0];n.$el.parents(g).length||(u=g.f7Modal.route)}}if(u||(u=n.findMatchingRoute(p)),!u&&p&&(u={url:p,path:p.split("?")[0],query:x.parseUrlQuery(p),route:{path:p.split("?")[0],url:p}}),!(t&&0!==t.replace(/[# ]/g,"").trim().length||u&&d))return n;var v=r.force&&u&&t;if(u&&d){var m=S.a.ie||S.a.edge||S.a.firefox&&!S.a.ios,b=n.params.pushState&&!1!==r.pushState,y=n.currentRoute&&n.currentRoute.route&&n.currentRoute.route.options&&!1===n.currentRoute.route.options.pushState;!b||m||y||re.back(),n.currentRoute=u,n.history.pop(),n.saveHistory(),b&&m&&!y&&re.back(),n.modalRemove(d),v&&n.navigate(t,{reloadCurrent:!0})}else d&&(n.modalRemove(d),t&&n.navigate(t,{reloadCurrent:!0}));return n}var w,C=n.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0);if(n.params.masterDetailBreakpoint>0){var _=[];n.$el.children(".page").each((e,t)=>{_.push(t.className)});var k=n.$el.children(".page-current").prevAll(".page-master").eq(0);if(k.length){var T=n.history[n.history.length-2],O=n.findMatchingRoute(T);O&&k[0].f7Page&&O.route===k[0].f7Page.route.route&&(C=k,r.preload||(w=l.width>=n.params.masterDetailBreakpoint))}}if(!r.force&&C.length&&!w){if(n.params.pushState&&C[0].f7Page&&n.history[n.history.length-2]!==C[0].f7Page.route.url)return n.back(n.history[n.history.length-2],x.extend(r,{force:!0})),n;var E=C[0].f7Page.route;return se.call(n,E,n.currentRoute,()=>{n.loadBack({el:C},x.extend(r,{route:E}))},()=>{}),n}if("#"===t&&(t=void 0),t&&"/"!==t[0]&&0!==t.indexOf("#")&&(t=((n.path||"/")+t).replace("//","/")),!t&&n.history.length>1&&(t=n.history[n.history.length-2]),w&&!r.force&&n.history[n.history.length-3])return n.back(n.history[n.history.length-3],x.extend({},r||{},{force:!0,animate:!1}));if(w&&!r.force)return n;if((i=n.findMatchingRoute(t))||t&&(i={url:t,path:t.split("?")[0],query:x.parseUrlQuery(t),route:{path:t.split("?")[0],url:t}}),!i)return n;if(i.route.redirect)return ne.call(n,"back",i,r);var P,A={};if(i.route.options?x.extend(A,i.route.options,r):x.extend(A,r),A.route=i,A&&A.context&&(i.context=A.context,A.route.context=A.context),A.force&&n.params.stackPages&&(n.$el.children(".page-previous.stacked").each((e,t)=>{t.f7Page&&t.f7Page.route&&t.f7Page.route.url===i.url&&(P=!0,n.loadBack({el:t},A))}),P))return n;function D(){var e=!1;function t(e,t){n.allowPageChange=!1,t&&t.context&&(i.context?i.context=x.extend({},i.context,t.context):i.context=t.context,A.route.context=i.context),n.loadBack(e,x.extend(A,t),!0)}function r(){n.allowPageChange=!0}i.route.keepAlive&&i.route.keepAliveData&&(n.loadBack({el:i.route.keepAliveData.pageEl},A),e=!0),"url content component pageName el componentUrl template templateUrl".split(" ").forEach(t=>{i.route[t]&&!e&&(e=!0,n.loadBack({[t]:i.route[t]},A))}),e||(i.route.async&&(n.allowPageChange=!1,i.route.async.call(n,i,n.currentRoute,t,r)),i.route.asyncComponent&&le(n,i.route.asyncComponent,t,r))}function I(){n.allowPageChange=!0}return A.preload?D():se.call(n,i,n.currentRoute,()=>{i.route.modules?l.loadModules(Array.isArray(i.route.modules)?i.route.modules:[i.route.modules]).then(()=>{D()}).catch(()=>{I()}):D()},()=>{I()}),n},ce.prototype.clearPreviousHistory=function(){oe(this,"clearPreviousHistory");var e=this.history[this.history.length-1];!function(e){oe(e,"clearPreviousPages");var t=e.app,r=e.dynamicNavbar;e.$el.children(".page").filter((t,r)=>!(!e.currentRoute||!e.currentRoute.modal&&!e.currentRoute.panel)||r!==e.currentPageEl).each((i,n)=>{var a=g(n),s=g(t.navbar.getElByPage(a));e.params.stackPages&&e.initialPages.indexOf(a[0])>=0?(a.addClass("stacked"),r&&s.addClass("stacked")):(e.pageCallback("beforeRemove",a,s,"previous",void 0,{}),e.removePage(a),r&&s.length&&e.removeNavbar(s))})}(this),this.history=[e],this.view.history=[e],this.saveHistory()};var he=ce,ue={name:"router",static:{Router:he},instance:{cache:{xhr:[],templates:[],components:[]}},create(){this.app?this.params.router&&(this.router=new he(this.app,this)):this.router=new he(this)}};var de=function(e){var t=e.app;if(!e.resizableInitialized){x.extend(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var r=g("html"),{$el:i}=e;if(i){var n,a,s,o,l,c,h,u={};(n=e.$el.children(".view-resize-handler")).length||(e.$el.append('<div class="view-resize-handler"></div>'),n=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=n,i.addClass("view-resizable");var d=!!U.a.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".view-resize-handler",f,d),t.on("touchmove:active",v),t.on("touchend:passive",m),t.on("resize",b),e.on("beforeOpen",b),e.once("viewDestroy",()=>{i.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",f,d),t.off("touchmove:active",v),t.off("touchend:passive",m),t.off("resize",b),e.off("beforeOpen",b)})}}function p(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var r=parseInt(e,10);return Number.isNaN(r)?null:r}function f(t){if(e.resizable&&i.hasClass("view-resizable")&&i.hasClass("view-master-detail")){u.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,u.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,s=!1,a=!0;var r=i.children(".page-master");c=p(r.css("min-width")),h=p(r.css("max-width"))}}function v(d){if(a){d.f7PreventSwipePanel=!0;var p="touchmove"===d.type?d.targetTouches[0].pageX:d.pageX;s||(l=n[0].offsetLeft+n[0].offsetWidth,i.addClass("view-resizing"),r.css("cursor","col-resize")),s=!0,d.preventDefault(),o=p-u.x;var f=l+o;c&&!Number.isNaN(c)&&(f=Math.max(f,c)),h&&!Number.isNaN(h)&&(f=Math.min(f,h)),f=Math.min(Math.max(f,0),t.width),e.resizableWidth=f,r[0].style.setProperty("--f7-page-master-width","".concat(f,"px")),i.trigger("view:resize",f),e.emit("local::resize viewResize",e,f)}}function m(){if(g("html").css("cursor",""),!a||!s)return a=!1,void(s=!1);a=!1,s=!1,r[0].style.setProperty("--f7-page-master-width","".concat(e.resizableWidth,"px")),i.removeClass("view-resizing")}function b(){e.resizableWidth&&(c=p(n.css("min-width")),h=p(n.css("max-width")),c&&!Number.isNaN(c)&&e.resizableWidth<c&&(e.resizableWidth=Math.max(e.resizableWidth,c)),h&&!Number.isNaN(h)&&e.resizableWidth>h&&(e.resizableWidth=Math.min(e.resizableWidth,h)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),r[0].style.setProperty("--f7-page-master-width","".concat(e.resizableWidth,"px")))}};class pe extends T{constructor(e,t,r={}){super(r,[e]);var i,n,a,s=e,o=g(t),l=this;if(0===o.length){var c="Framework7: can't create a View instance because ";throw c+="string"==typeof t?'the selector "'.concat(t,"\" didn't match any element"):"el must be an HTMLElement or Dom7 object",new Error(c)}return l.params=x.extend({routes:[],routesAdd:[]},s.params.view,r),l.params.routes.length>0?l.routes=l.params.routes:l.routes=[].concat(s.routes,l.params.routesAdd),i="string"==typeof t?t:(o.attr("id")?"#".concat(o.attr("id")):"")+(o.attr("class")?".".concat(o.attr("class").replace(/ /g,".").replace(".active","")):""),"ios"===s.theme&&l.params.iosDynamicNavbar&&0===(n=o.children(".navbars").eq(0)).length&&(n=g('<div class="navbars"></div>')),x.extend(!1,l,{app:s,$el:o,el:o[0],name:l.params.name,main:l.params.main||o.hasClass("view-main"),$navbarsEl:n,navbarsEl:n?n[0]:void 0,selector:i,history:[],scrollHistory:{}}),o[0].f7View=l,l.useModules(),s.views.push(l),l.main&&(s.views.main=l),l.name&&(s.views[l.name]=l),l.index=s.views.indexOf(l),a=l.name?"view_".concat(l.name):l.main?"view_main":"view_".concat(l.index),l.id=a,s.initialized?l.init():s.on("init",()=>{l.init()}),l}destroy(){var e=this,t=e.app;e.$el.trigger("view:beforedestroy"),e.emit("local::beforeDestroy viewBeforeDestroy",e),t.off("resize",e.checkMasterDetailBreakpoint),e.main?(t.views.main=null,delete t.views.main):e.name&&(t.views[e.name]=null,delete t.views[e.name]),e.$el[0].f7View=null,delete e.$el[0].f7View,t.views.splice(t.views.indexOf(e),1),e.params.router&&e.router&&e.router.destroy(),e.emit("local::destroy viewDestroy",e),Object.keys(e).forEach(t=>{e[t]=null,delete e[t]}),e=null}checkMasterDetailBreakpoint(e){var t=this.app,r=this.$el.hasClass("view-master-detail"),i=t.width>=this.params.masterDetailBreakpoint&&this.$el.children(".page-master").length;void 0===e&&i||!0===e?(this.$el.addClass("view-master-detail"),r||(this.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",this),this.$el.trigger("view:masterDetailBreakpoint"))):(this.$el.removeClass("view-master-detail"),r&&(this.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",this),this.$el.trigger("view:masterDetailBreakpoint")))}initMasterDetail(){var e=this.app;this.checkMasterDetailBreakpoint=this.checkMasterDetailBreakpoint.bind(this),this.checkMasterDetailBreakpoint(),this.params.masterDetailResizable&&de(this),e.on("resize",this.checkMasterDetailBreakpoint)}init(){this.params.router&&(this.params.masterDetailBreakpoint>0&&this.initMasterDetail(),this.router.init(),this.$el.trigger("view:init"),this.emit("local::init viewInit",this))}}pe.use(ue);var fe=pe;var ge={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init(){!function(e){e.on("click",(function(t){var r=g(t.target),i=r.closest("a"),n=i.length>0,s=n&&i.attr("href");if(n&&(i.is(e.params.clicks.externalLinks)||s&&s.indexOf("javascript:")>=0)){var o=i.attr("target");s&&a.b.cordova&&a.b.cordova.InAppBrowser&&("_system"===o||"_blank"===o)&&(t.preventDefault(),a.b.cordova.InAppBrowser.open(s,o))}else{Object.keys(e.modules).forEach(i=>{var n=e.modules[i].clicks;n&&(t.preventF7Router||Object.keys(n).forEach(i=>{var a=r.closest(i).eq(0);a.length>0&&n[i].call(e,a,a.dataset(),t)}))});var l={};if(n&&(t.preventDefault(),l=i.dataset()),!t.preventF7Router)if(!i.hasClass("prevent-router")&&!i.hasClass("router-prevent"))if(s&&s.length>0&&"#"!==s[0]||i.hasClass("back")){var c;if(l.view&&"current"===l.view?c=e.views.current:l.view?c=g(l.view)[0].f7View:(c=r.parents(".view")[0]&&r.parents(".view")[0].f7View,!i.hasClass("back")&&c&&c.params.linksView&&("string"==typeof c.params.linksView?c=g(c.params.linksView)[0].f7View:c.params.linksView instanceof fe&&(c=c.params.linksView))),c||e.views.main&&(c=e.views.main),!c||!c.router)return;if(l.context&&"string"==typeof l.context)try{l.context=JSON.parse(l.context)}catch(e){}i[0].f7RouteProps&&(l.props=i[0].f7RouteProps),i.hasClass("back")?c.router.back(s,l):c.router.navigate(s,l)}}}))}(this)}}},ve={name:"history",static:{history:re},on:{init(){re.init(this)}}},me={registrations:[],register(e,t){var r=this;return"serviceWorker"in a.b.navigator&&r.serviceWorker.container?new Promise((i,n)=>{r.serviceWorker.container.register(e,t?{scope:t}:{}).then(e=>{me.registrations.push(e),r.emit("serviceWorkerRegisterSuccess",e),i(e)}).catch(e=>{r.emit("serviceWorkerRegisterError",e),n(e)})}):new Promise((e,t)=>{t(new Error("Service worker is not supported"))})},unregister(e){var t,r=this;return"serviceWorker"in a.b.navigator&&r.serviceWorker.container?(t=e?Array.isArray(e)?e:[e]:me.registrations,Promise.all(t.map(e=>new Promise((t,i)=>{e.unregister().then(()=>{me.registrations.indexOf(e)>=0&&me.registrations.splice(me.registrations.indexOf(e),1),r.emit("serviceWorkerUnregisterSuccess",e),t()}).catch(t=>{r.emit("serviceWorkerUnregisterError",e,t),i(t)})})))):new Promise((e,t)=>{t(new Error("Service worker is not supported"))})}},be={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create(){x.extend(this,{serviceWorker:{container:"serviceWorker"in a.b.navigator?a.b.navigator.serviceWorker:void 0,registrations:me.registrations,register:me.register.bind(this),unregister:me.unregister.bind(this)}})},on:{init(){if("serviceWorker"in a.b.navigator){var e=this;if(e.serviceWorker.container){var t=e.params.serviceWorker.path,r=e.params.serviceWorker.scope;if(t&&(!Array.isArray(t)||t.length))(Array.isArray(t)?t:[t]).forEach(t=>{e.serviceWorker.register(t,r)})}}}}},ye={hide(){S.a.cordova&&a.b.StatusBar&&a.b.StatusBar.hide()},show(){S.a.cordova&&a.b.StatusBar&&a.b.StatusBar.show()},onClick(){var e;(e=g(".popup.modal-in").length>0?g(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):g(".panel.panel-in").length>0?g(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):g(".views > .view.tab-active").length>0?g(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):g(".views").length>0?g(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):this.root.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"))&&e.length>0&&(e.hasClass("tab")&&(e=e.parent(".tabs").children(".page-content.tab-active")),e.length>0&&e.scrollTop(0,300))},setTextColor(e){S.a.cordova&&a.b.StatusBar&&("white"===e?a.b.StatusBar.styleLightContent():a.b.StatusBar.styleDefault())},setBackgroundColor(e){S.a.cordova&&a.b.StatusBar&&a.b.StatusBar.backgroundColorByHexString(e)},isVisible:()=>!(!S.a.cordova||!a.b.StatusBar)&&a.b.StatusBar.isVisible,overlaysWebView(e=!0){S.a.cordova&&a.b.StatusBar&&a.b.StatusBar.overlaysWebView(e)},init(){var e=this.params.statusbar;e.enabled&&(S.a.cordova&&a.b.StatusBar&&(e.scrollTopOnClick&&g(a.b).on("statusTap",ye.onClick.bind(this)),S.a.ios&&(e.iosOverlaysWebView?a.b.StatusBar.overlaysWebView(!0):a.b.StatusBar.overlaysWebView(!1),"white"===e.iosTextColor?a.b.StatusBar.styleLightContent():a.b.StatusBar.styleDefault()),S.a.android&&(e.androidOverlaysWebView?a.b.StatusBar.overlaysWebView(!0):a.b.StatusBar.overlaysWebView(!1),"white"===e.androidTextColor?a.b.StatusBar.styleLightContent():a.b.StatusBar.styleDefault())),e.iosBackgroundColor&&S.a.ios&&ye.setBackgroundColor(e.iosBackgroundColor),e.androidBackgroundColor&&S.a.android&&ye.setBackgroundColor(e.androidBackgroundColor))}},we={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create(){x.extend(this,{statusbar:{hide:ye.hide,show:ye.show,overlaysWebView:ye.overlaysWebView,setTextColor:ye.setTextColor,setBackgroundColor:ye.setBackgroundColor,isVisible:ye.isVisible,init:ye.init.bind(this)}})},on:{init(){ye.init.call(this)}}};var Ce={name:"view",params:{view:{name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:6e5,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,pushState:!1,pushStateRoot:void 0,pushStateAnimate:!0,pushStateAnimateOnLoad:!1,pushStateSeparator:"#!",pushStateOnLoad:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:fe},create(){var e=this;x.extend(e,{views:x.extend([],{create:(t,r)=>new fe(e,t,r),get(e){var t=g(e);if(t.length&&t[0].f7View)return t[0].f7View}})}),Object.defineProperty(e.views,"current",{enumerable:!0,configurable:!0,get:()=>function(e){var t=g(".popover.modal-in .view"),r=g(".popup.modal-in .view"),i=g(".panel.panel-in .view"),n=g(".views");0===n.length&&(n=e.root);var a=n.children(".view");if(0===a.length&&(a=n.children(".tabs").children(".view")),a.length>1&&a.hasClass("tab")&&0===(a=n.children(".view.tab-active")).length&&(a=n.children(".tabs").children(".view.tab-active")),t.length>0&&t[0].f7View)return t[0].f7View;if(r.length>0&&r[0].f7View)return r[0].f7View;if(i.length>0&&i[0].f7View)return i[0].f7View;if(a.length>0){if(1===a.length&&a[0].f7View)return a[0].f7View;if(a.length>1)return e.views.main}}(e)}),e.view=e.views},on:{init(){var e=this;g(".view-init").each((t,r)=>{if(!r.f7View){var i=g(r).dataset();e.views.create(r,i)}})},"modalOpen panelOpen":function(e){var t=this;e.$el.find(".view-init").each((e,r)=>{if(!r.f7View){var i=g(r).dataset();t.views.create(r,i)}})},"modalBeforeDestroy panelBeforeDestroy":function(e){e&&e.$el&&e.$el.find(".view-init").each((e,t)=>{var r=t.f7View;r&&r.destroy()})}},vnode:{"view-init":{insert(e){var t=e.elm;if(!t.f7View){var r=g(t).dataset();this.views.create(t,r)}},destroy(e){var t=e.elm.f7View;t&&t.destroy()}}}},_e={size(e){var t=this,r=g(e);if(r.hasClass("navbars"))r=r.children(".navbar").each((e,r)=>{t.navbar.size(r)});else{var i=r.children(".navbar-inner");if(i.length){var n=i.hasClass("navbar-inner-centered-title")||t.params.navbar["".concat(t.theme,"CenterTitle")],a="ios"===t.theme&&!t.params.navbar["".concat(t.theme,"CenterTitle")];if((n||a)&&!(r.hasClass("stacked")||r.parents(".stacked").length>0||r.parents(".tab:not(.tab-active)").length>0||r.parents(".popup:not(.modal-in)").length>0)){"ios"!==t.theme&&t.params.navbar["".concat(t.theme,"CenterTitle")]&&i.addClass("navbar-inner-centered-title"),"ios"!==t.theme||t.params.navbar.iosCenterTitle||i.addClass("navbar-inner-left-title");var s,o,l,c,h=r.parents(".view").eq(0),u=t.rtl?i.children(".right"):i.children(".left"),d=t.rtl?i.children(".left"):i.children(".right"),p=i.children(".title"),f=i.children(".subnavbar"),v=0===u.length,m=0===d.length,b=v?0:u.outerWidth(!0),y=m?0:d.outerWidth(!0),w=p.outerWidth(!0),C=i.styles(),_=i[0].offsetWidth-parseInt(C.paddingLeft,10)-parseInt(C.paddingRight,10),x=r.hasClass("navbar-previous"),S=i.hasClass("sliding");h.length>0&&h[0].f7View&&(o=(s=h[0].f7View.router)&&s.dynamicNavbar),m&&(l=_-w),v&&(l=0),v||m||(l=(_-y-w+b)/2);var k=(_-w)/2;_-b-y>w?(k<b&&(k=b),k+w>_-y&&(k=_-y-w),c=k-l):c=0;var T=t.rtl?-1:1;if(o&&"ios"===t.theme){if(p.hasClass("sliding")||p.length>0&&S){var O=-(l+c)*T,E=(_-l-c-w)*T;if(x&&s&&s.params.iosAnimateNavbarBackIcon){var P=r.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");P.length>0&&(O+=P[0].offsetLeft)}p[0].f7NavbarLeftOffset=O,p[0].f7NavbarRightOffset=E}if(!v&&(u.hasClass("sliding")||S))if(t.rtl)u[0].f7NavbarLeftOffset=-(_-u[0].offsetWidth)/2*T,u[0].f7NavbarRightOffset=b*T;else if(u[0].f7NavbarLeftOffset=-b,u[0].f7NavbarRightOffset=(_-u[0].offsetWidth)/2,s&&s.params.iosAnimateNavbarBackIcon&&u.find(".back .icon").length>0&&u.find(".back .icon ~ span").length){var A=u[0].f7NavbarLeftOffset,D=u[0].f7NavbarRightOffset;u[0].f7NavbarLeftOffset=0,u[0].f7NavbarRightOffset=0,u.find(".back .icon ~ span")[0].f7NavbarLeftOffset=A,u.find(".back .icon ~ span")[0].f7NavbarRightOffset=D-u.find(".back .icon")[0].offsetWidth}m||!d.hasClass("sliding")&&!S||(t.rtl?(d[0].f7NavbarLeftOffset=-y*T,d[0].f7NavbarRightOffset=(_-d[0].offsetWidth)/2*T):(d[0].f7NavbarLeftOffset=-(_-d[0].offsetWidth)/2,d[0].f7NavbarRightOffset=y)),f.length&&(f.hasClass("sliding")||S)&&(f[0].f7NavbarLeftOffset=t.rtl?f[0].offsetWidth:-f[0].offsetWidth,f[0].f7NavbarRightOffset=-f[0].f7NavbarLeftOffset)}if(n){var I=c;t.rtl&&v&&m&&p.length>0&&(I=-I),p.css({left:"".concat(I,"px")})}}}}},hide(e,t=!0,r=!1){var i=this,n=g(e),a=n.hasClass("navbar")&&n.parent(".navbars").length;if(a&&(n=n.parents(".navbars")),n.length&&!n.hasClass("navbar-hidden")){var s="navbar-hidden".concat(t?" navbar-transitioning":"");(a?n.find(".navbar-current .title-large").length:n.find(".title-large").length)&&(s+=" navbar-large-hidden"),r&&(s+=" navbar-hidden-statusbar"),n.transitionEnd(()=>{n.removeClass("navbar-transitioning")}),n.addClass(s),a?n.children(".navbar").each((e,t)=>{g(t).trigger("navbar:hide"),i.emit("navbarHide",t)}):(n.trigger("navbar:hide"),i.emit("navbarHide",n[0]))}},show(e=".navbar-hidden",t=!0){var r=this,i=g(e),n=i.hasClass("navbar")&&i.parent(".navbars").length;n&&(i=i.parents(".navbars")),i.length&&i.hasClass("navbar-hidden")&&(t&&(i.addClass("navbar-transitioning"),i.transitionEnd(()=>{i.removeClass("navbar-transitioning")})),i.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),n?i.children(".navbar").each((e,t)=>{g(t).trigger("navbar:show"),r.emit("navbarShow",t)}):(i.trigger("navbar:show"),r.emit("navbarShow",i[0])))},getElByPage(e){var t,r,i;if(e.$navbarEl||e.$el?(i=e,t=e.$el):(t=g(e)).length>0&&(i=t[0].f7Page),i&&i.$navbarEl&&i.$navbarEl.length>0?r=i.$navbarEl:t&&(r=t.children(".navbar")),r&&(!r||0!==r.length))return r[0]},getPageByEl(e){var t,r=g(e);return r.parents(".page").length?r.parents(".page")[0]:(r.parents(".view").find(".page").each((e,i)=>{i&&i.f7Page&&i.f7Page.navbarEl&&r[0]===i.f7Page.navbarEl&&(t=i)}),t)},collapseLargeTitle(e){var t=g(e);if(!(t.hasClass("navbars")&&((t=t.find(".navbar")).length>1&&(t=g(e).find(".navbar-large.navbar-current")),t.length>1||!t.length))){var r=g(this.navbar.getPageByEl(t));t.addClass("navbar-large-collapsed"),r.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),this.emit("pageNavbarLargeCollapsed",r[0]),t.trigger("navbar:collapse"),this.emit("navbarCollapse",t[0])}},expandLargeTitle(e){var t=g(e);if(!(t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=g(e).find(".navbar-large.navbar-current")),t.length>1||!t.length))){var r=g(this.navbar.getPageByEl(t));t.removeClass("navbar-large-collapsed"),r.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),this.emit("pageNavbarLargeExpanded",r[0]),t.trigger("navbar:expand"),this.emit("navbarExpand",t[0])}},toggleLargeTitle(e){var t=g(e);t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=g(e).find(".navbar-large.navbar-current")),t.length>1||!t.length)||(t.hasClass("navbar-large-collapsed")?this.navbar.expandLargeTitle(t):this.navbar.collapseLargeTitle(t))},initNavbarOnScroll(e,t,r,i,n){var a,s,o,l,c,h,u,d,p,f,v,m,b,y,w=this,C=g(e),_=g(t),x=_.find(".title-large"),S=x.length||_.hasClass(".navbar-large"),k=44,T=w.params.navbar.snapPageScrollToLargeTitle,O=w.params.navbar.snapPageScrollToTransparentNavbar;(i||r&&S)&&((p=_.css("--f7-navbar-large-title-height"))&&p.indexOf("px")>=0?(p=parseInt(p,10),Number.isNaN(p)&&x.length?p=x[0].offsetHeight:Number.isNaN(p)&&("ios"===w.theme?p=52:"md"===w.theme?p=48:"aurora"===w.theme&&(p=38))):x.length?p=x[0].offsetHeight:"ios"===w.theme?p=52:"md"===w.theme?p=48:"aurora"===w.theme&&(p=38)),r&&S&&(k+=p);function E(){_.hasClass("with-searchbar-expandable-enabled")||!m||s<0||(s>=p/2&&s<p?g(m).scrollTop(p,100):s<p&&g(m).scrollTop(0,200))}function P(){_.hasClass("with-searchbar-expandable-enabled")||!m||s<0||(s>=f/2&&s<f?g(m).scrollTop(f,100):s<f&&g(m).scrollTop(0,200))}var A=null,D=null;function I(e){m=this,e&&e.target&&e.target!==m||(s=m.scrollTop,v=s,i?function(){if(!(_.hasClass("navbar-hidden")||_.parent(".navbars").hasClass("navbar-hidden"))){var e=_.hasClass("navbar-large-transparent")||_.hasClass("navbar-large")&&_.hasClass("navbar-transparent");A=D,D=Math.min(Math.max(s/p,0),1);var t=A>0&&A<1;_.hasClass("with-searchbar-expandable-enabled")||(d=_.hasClass("navbar-large-collapsed"),0===D&&d?w.navbar.expandLargeTitle(_[0]):1!==D||d||w.navbar.collapseLargeTitle(_[0]),0===D&&d||0===D&&t||1===D&&!d||1===D&&t?("md"===w.theme&&_.find(".navbar-inner").css("overflow",""),_.find(".title").css("opacity",""),_.find(".title-large-text, .subnavbar").css("transform",""),e?_.find(".navbar-bg").css("opacity",""):_.find(".navbar-bg").css("transform","")):D>0&&D<1&&("md"===w.theme&&_.find(".navbar-inner").css("overflow","visible"),_.find(".title").css("opacity",D),_.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, ".concat(-1*D*p,"px, 0)")),e?_.find(".navbar-bg").css("opacity",D):_.find(".navbar-bg").css("transform","translate3d(0px, ".concat(-1*D*p,"px, 0)"))),T&&(U.a.touch?y&&(clearTimeout(y),y=null,y=setTimeout(()=>{E(),clearTimeout(y),y=null},70)):(clearTimeout(b),b=setTimeout(()=>{E()},300))))}}():n&&function(){var e=_.hasClass("navbar-hidden")||_.parent(".navbars").hasClass("navbar-hidden");if(!_.hasClass("with-searchbar-expandable-enabled")&&!e){f||(f=t.offsetHeight);var r=s/f,i=_.hasClass("navbar-transparent-visible");if(r=Math.max(Math.min(r,1),0),i&&1===r||!i&&0===r)_.find(".navbar-bg, .title").css("opacity","");else{if(i&&0===r)return _.trigger("navbar:transparenthide"),w.emit("navbarTransparentHide",_[0]),_.removeClass("navbar-transparent-visible"),void _.find(".navbar-bg, .title").css("opacity","");if(!i&&1===r)return _.trigger("navbar:transparentshow"),w.emit("navbarTransparentShow",_[0]),_.addClass("navbar-transparent-visible"),void _.find(".navbar-bg, .title").css("opacity","");_.find(".navbar-bg, .title").css("opacity",r),O&&(U.a.touch?y&&(clearTimeout(y),y=null,y=setTimeout(()=>{P(),clearTimeout(y),y=null},70)):(clearTimeout(b),b=setTimeout(()=>{P()},300)))}}}(),C.hasClass("page-previous")||r&&(C.hasClass("page-with-card-opened")||(o=m.scrollHeight,l=m.offsetHeight,c=s+l>=o,u=_.hasClass("navbar-hidden")||_.parent(".navbars").hasClass("navbar-hidden"),c?w.params.navbar.showOnPageScrollEnd&&(h="show"):h=a>s?w.params.navbar.showOnPageScrollTop||s<=k?"show":"hide":s>k?"hide":"show","show"===h&&u?(w.navbar.show(_),u=!1):"hide"!==h||u||(w.navbar.hide(_),u=!0),a=s)))}function L(){v=!1}function B(){clearTimeout(y),y=null,y=setTimeout(()=>{!1!==v&&(n&&!i?P():E(),clearTimeout(y),y=null)},70)}C.on("scroll",".page-content",I,!0),U.a.touch&&(i&&T||n&&O)&&(w.on("touchstart:passive",L),w.on("touchend:passive",B)),(i||n)&&C.find(".page-content").each((e,t)=>{t.scrollTop>0&&I.call(t)}),C[0].f7DetachNavbarScrollHandlers=function(){delete C[0].f7DetachNavbarScrollHandlers,C.off("scroll",".page-content",I,!0),U.a.touch&&(i&&T||n&&O)&&(w.off("touchstart:passive",L),w.off("touchend:passive",B))}}},xe={name:"navbar",create(){var e=this;x.extend(e,{navbar:{size:_e.size.bind(e),hide:_e.hide.bind(e),show:_e.show.bind(e),getElByPage:_e.getElByPage.bind(e),getPageByEl:_e.getPageByEl.bind(e),collapseLargeTitle:_e.collapseLargeTitle.bind(e),expandLargeTitle:_e.expandLargeTitle.bind(e),toggleLargeTitle:_e.toggleLargeTitle.bind(e),initNavbarOnScroll:_e.initNavbarOnScroll.bind(e)}})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var e=this;g(".navbar").each((t,r)=>{e.navbar.size(r)})},pageBeforeRemove(e){e.$el[0].f7DetachNavbarScrollHandlers&&e.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn(e){if("ios"===this.theme){var t,r=e.$el.parents(".view")[0].f7View,i=this.navbar.getElByPage(e);if(t=i?g(i).parents(".navbars"):e.$el.parents(".view").children(".navbars"),e.$el.hasClass("no-navbar")||r.router.dynamicNavbar&&!i){var n=!!(e.pageFrom&&e.router.history.length>0);this.navbar.hide(t,n)}else this.navbar.show(t)}},pageReinit(e){var t=g(this.navbar.getElByPage(e));t&&0!==t.length&&this.navbar.size(t)},pageInit(e){var t,r,i,n=g(this.navbar.getElByPage(e));n&&0!==n.length&&(this.navbar.size(n),n.find(".title-large").length>0&&n.addClass("navbar-large"),n.hasClass("navbar-large")&&(this.params.navbar.collapseLargeTitleOnScroll&&(t=!0),e.$el.addClass("page-with-navbar-large")),!t&&n.hasClass("navbar-transparent")&&(r=!0),(this.params.navbar.hideOnPageScroll||e.$el.find(".hide-navbar-on-scroll").length||e.$el.hasClass("hide-navbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll"))&&(i=!(e.$el.find(".keep-navbar-on-scroll").length||e.$el.hasClass("keep-navbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))),(t||i||r)&&this.navbar.initNavbarOnScroll(e.el,n[0],i,t,r))},"panelOpen panelSwipeOpen modalOpen":function(e){var t=this;e.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each((e,r)=>{t.navbar.size(r)})},tabShow(e){var t=this;g(e).find(".navbar:not(.navbar-previous):not(.stacked)").each((e,r)=>{t.navbar.size(r)})}},clicks:{".navbar .title":function(e){if(this.params.navbar.scrollTopOnTitleClick&&!(e.closest("a").length>0)){var t,r=e.parents(".navbar"),i=r.parents(".navbars");0===(t=r.parents(".page-content")).length&&(r.parents(".page").length>0&&(t=r.parents(".page").find(".page-content")),0===t.length&&i.length&&i.nextAll(".page-current:not(.stacked)").length>0&&(t=i.nextAll(".page-current:not(.stacked)").find(".page-content")),0===t.length&&r.nextAll(".page-current:not(.stacked)").length>0&&(t=r.nextAll(".page-current:not(.stacked)").find(".page-content"))),t&&t.length>0&&(t.hasClass("tab")&&(t=t.parent(".tabs").children(".page-content.tab-active")),t.length>0&&t.scrollTop(0,300))}}},vnode:{navbar:{postpatch(e){this.navbar.size(e.elm)}}}},Se={setHighlight(e){if("md"===this.theme){var t=g(e);if(0!==t.length&&(t.hasClass("tabbar")||t.hasClass("tabbar-labels"))){var r=t.find(".tab-link-highlight"),i=t.find(".tab-link").length;if(0!==i){0===r.length?(t.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),r=t.find(".tab-link-highlight")):r.next().length&&t.children(".toolbar-inner").append(r);var n,a,s=t.find(".tab-link-active");if(t.hasClass("tabbar-scrollable")&&s&&s[0])n="".concat(s[0].offsetWidth,"px"),a="".concat(s[0].offsetLeft,"px");else{var o=s.index();n="".concat(100/i,"%"),a="".concat(100*(this.rtl?-o:o),"%")}x.nextFrame(()=>{r.css("width",n).transform("translate3d(".concat(a,",0,0)"))})}else r.remove()}}},init(e){this.toolbar.setHighlight(e)},hide(e,t=!0){var r=g(e);if(!r.hasClass("toolbar-hidden")){var i="toolbar-hidden".concat(t?" toolbar-transitioning":"");r.transitionEnd(()=>{r.removeClass("toolbar-transitioning")}),r.addClass(i),r.trigger("toolbar:hide"),this.emit("toolbarHide",r[0])}},show(e,t=!0){var r=g(e);r.hasClass("toolbar-hidden")&&(t&&(r.addClass("toolbar-transitioning"),r.transitionEnd(()=>{r.removeClass("toolbar-transitioning")})),r.removeClass("toolbar-hidden"),r.trigger("toolbar:show"),this.emit("toolbarShow",r[0]))},initToolbarOnScroll(e){var t,r,i,n,a,s,o,l=this,c=g(e),h=c.parents(".view").children(".toolbar");(0===h.length&&(h=c.find(".toolbar")),0===h.length&&(h=c.parents(".views").children(".tabbar, .tabbar-labels")),0!==h.length)&&(c.on("scroll",".page-content",u,!0),c[0].f7ScrollToolbarHandler=u);function u(e){if(!c.hasClass("page-with-card-opened")&&!c.hasClass("page-previous")){e&&e.target&&e.target!==this||(r=this.scrollTop,i=this.scrollHeight,n=this.offsetHeight,a=r+n>=i,o=h.hasClass("toolbar-hidden"),a?l.params.toolbar.showOnPageScrollEnd&&(s="show"):s=t>r?l.params.toolbar.showOnPageScrollTop||r<=44?"show":"hide":r>44?"hide":"show","show"===s&&o?(l.toolbar.show(h),o=!1):"hide"!==s||o||(l.toolbar.hide(h),o=!0),t=r)}}}},ke={name:"toolbar",create(){x.extend(this,{toolbar:{hide:Se.hide.bind(this),show:Se.show.bind(this),setHighlight:Se.setHighlight.bind(this),initToolbarOnScroll:Se.initToolbarOnScroll.bind(this),init:Se.init.bind(this)}})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove(e){e.$el[0].f7ScrollToolbarHandler&&e.$el.off("scroll",".page-content",e.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn(e){var t=e.$el.parents(".view").children(".toolbar");0===t.length&&(t=e.$el.parents(".views").children(".tabbar, .tabbar-labels")),0===t.length&&(t=e.$el.find(".toolbar")),0!==t.length&&(e.$el.hasClass("no-toolbar")?this.toolbar.hide(t):this.toolbar.show(t))},pageInit(e){var t=this;if(e.$el.find(".tabbar, .tabbar-labels").each((e,r)=>{t.toolbar.init(r)}),t.params.toolbar.hideOnPageScroll||e.$el.find(".hide-toolbar-on-scroll").length||e.$el.hasClass("hide-toolbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll")){if(e.$el.find(".keep-toolbar-on-scroll").length||e.$el.hasClass("keep-toolbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))return;t.toolbar.initToolbarOnScroll(e.el)}},init(){var e=this;e.root.find(".tabbar, .tabbar-labels").each((t,r)=>{e.toolbar.init(r)})}},vnode:{tabbar:{insert(e){this.toolbar.init(e.elm)}}}},Te={name:"subnavbar",on:{pageInit(e){e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar"),e.$el.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar")}}};class Oe{constructor(e,t,r){var i=this;if(e){var n=e[0].getBoundingClientRect(),a={x:t-n.left,y:r-n.top},s=n.width,o=n.height,l=Math.max((o**2+s**2)**.5,48);return i.$rippleWaveEl=g('<div class="ripple-wave" style="width: '.concat(l,"px; height: ").concat(l,"px; margin-top:-").concat(l/2,"px; margin-left:-").concat(l/2,"px; left:").concat(a.x,"px; top:").concat(a.y,'px;"></div>')),e.prepend(i.$rippleWaveEl),i.rippleTransform="translate3d(".concat(s/2-a.x,"px, ").concat(o/2-a.y,"px, 0) scale(1)"),x.nextFrame(()=>{i&&i.$rippleWaveEl&&i.$rippleWaveEl.transform(i.rippleTransform)}),i}}destroy(){var e=this;e.$rippleWaveEl&&e.$rippleWaveEl.remove(),Object.keys(e).forEach(t=>{e[t]=null,delete e[t]}),e=null}remove(){var e=this;if(!e.removing){var t=this.$rippleWaveEl,r=this.rippleTransform,i=x.nextTick(()=>{e.destroy()},400);e.removing=!0,t.addClass("ripple-wave-fill").transform(r.replace("scale(1)","scale(1.01)")).transitionEnd(()=>{clearTimeout(i),x.nextFrame(()=>{t.addClass("ripple-wave-out").transform(r.replace("scale(1)","scale(1.01)")),i=x.nextTick(()=>{e.destroy()},700),t.transitionEnd(()=>{clearTimeout(i),e.destroy()})})})}}}var Ee={name:"touch-ripple",static:{TouchRipple:Oe},create(){this.touchRipple={create:(...e)=>new Oe(...e)}}},Pe=[],Ae=[];var De=class extends T{constructor(e,t){super(t,[e]);var r={};return this.useModulesParams(r),this.params=x.extend(r,t),this.opened=!1,this.useModules(),this}onOpen(){this.opened=!0,Pe.push(this),g("html").addClass("with-modal-".concat(this.type.toLowerCase())),this.$el.trigger("modal:open ".concat(this.type.toLowerCase(),":open")),this.emit("local::open modalOpen ".concat(this.type,"Open"),this)}onOpened(){this.$el.trigger("modal:opened ".concat(this.type.toLowerCase(),":opened")),this.emit("local::opened modalOpened ".concat(this.type,"Opened"),this)}onClose(){this.opened=!1,this.type&&this.$el&&(Pe.splice(Pe.indexOf(this),1),g("html").removeClass("with-modal-".concat(this.type.toLowerCase())),this.$el.trigger("modal:close ".concat(this.type.toLowerCase(),":close")),this.emit("local::close modalClose ".concat(this.type,"Close"),this))}onClosed(){this.type&&this.$el&&(this.$el.removeClass("modal-out"),this.$el.hide(),this.$el.trigger("modal:closed ".concat(this.type.toLowerCase(),":closed")),this.emit("local::closed modalClosed ".concat(this.type,"Closed"),this))}open(e){var t,r=this,i=r.app,n=r.$el,s=r.$backdropEl,o=r.type,l=!0;if(void 0!==e?l=e:void 0!==r.params.animate&&(l=r.params.animate),!n||n.hasClass("modal-in"))return r;if("dialog"===o&&i.params.modal.queueDialogs&&(g(".dialog.modal-in").length>0?t=!0:Pe.length>0&&Pe.forEach(e=>{"dialog"===e.type&&(t=!0)}),t))return Ae.push(r),r;var c=n.parent(),h=n.parents(a.a).length>0;function u(){n.hasClass("modal-out")?r.onClosed():n.hasClass("modal-in")&&r.onOpened()}return i.params.modal.moveToRoot&&!c.is(i.root)&&(i.root.append(n),r.once("".concat(o,"Closed"),()=>{h?c.append(n):n.remove()})),n.show(),r._clientLeft=n[0].clientLeft,l?(s&&(s.removeClass("not-animated"),s.addClass("backdrop-in")),n.animationEnd(()=>{u()}),n.transitionEnd(()=>{u()}),n.removeClass("modal-out not-animated").addClass("modal-in"),r.onOpen()):(s&&s.addClass("backdrop-in not-animated"),n.removeClass("modal-out").addClass("modal-in not-animated"),r.onOpen(),r.onOpened()),r}close(e){var t=this,r=t.$el,i=t.$backdropEl,n=!0;if(void 0!==e?n=e:void 0!==t.params.animate&&(n=t.params.animate),!r||!r.hasClass("modal-in"))return Ae.indexOf(t)>=0&&Ae.splice(Ae.indexOf(t),1),t;if(i){var a=!0;"popup"===t.type&&t.$el.prevAll(".popup.modal-in").each((e,r)=>{var i=r.f7Modal;i&&i.params.closeByBackdropClick&&i.params.backdrop&&i.backdropEl===t.backdropEl&&(a=!1)}),a&&(i[n?"removeClass":"addClass"]("not-animated"),i.removeClass("backdrop-in"))}function s(){r.hasClass("modal-out")?t.onClosed():r.hasClass("modal-in")&&t.onOpened()}return r[n?"removeClass":"addClass"]("not-animated"),n?(r.animationEnd(()=>{s()}),r.transitionEnd(()=>{s()}),r.removeClass("modal-in").addClass("modal-out"),t.onClose()):(r.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),t.onClose(),t.onClosed()),"dialog"===t.type&&0!==Ae.length&&Ae.shift().open(),t}destroy(){this.destroyed||(this.emit("local::beforeDestroy modalBeforeDestroy ".concat(this.type,"BeforeDestroy"),this),this.$el&&(this.$el.trigger("modal:beforedestroy ".concat(this.type.toLowerCase(),":beforedestroy")),this.$el.length&&this.$el[0].f7Modal&&delete this.$el[0].f7Modal),x.deleteProps(this),this.destroyed=!0)}};var Ie=class extends De{constructor(e,t){var r=x.extend({backdrop:!0,closeByBackdropClick:!0,on:{}},t);super(e,r);var i,n,a=this;if(a.params=r,(i=a.params.el?g(a.params.el):g(a.params.content))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;if(0===i.length)return a.destroy();function s(e){a&&!a.destroyed&&n&&e.target===n[0]&&a.close()}return a.params.backdrop&&0===(n=e.root.children(".custom-modal-backdrop")).length&&(n=g('<div class="custom-modal-backdrop"></div>'),e.root.append(n)),a.on("customModalOpened",()=>{a.params.closeByBackdropClick&&a.params.backdrop&&e.on("click",s)}),a.on("customModalClose",()=>{a.params.closeByBackdropClick&&a.params.backdrop&&e.off("click",s)}),x.extend(a,{app:e,$el:i,el:i[0],$backdropEl:n,backdropEl:n&&n[0],type:"customModal"}),i[0].f7Modal=a,a}},Le={name:"modal",static:{Modal:De,CustomModal:Ie},create(){var e=this;e.customModal={create:t=>new Ie(e,t)}},params:{modal:{moveToRoot:!0,queueDialogs:!0}}};R.use([H,W,V,Y,X,G,ge,ue,ve,be,we,Ce,xe,ke,Te,Ee,Le]);var Be=R;var Re=class extends De{constructor(e,t){var r=x.extend({title:e.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},t);void 0===r.closeByBackdropClick&&(r.closeByBackdropClick=e.params.dialog.closeByBackdropClick),void 0===r.backdrop&&(r.backdrop=e.params.dialog.backdrop),super(e,r);var i,n,s,o=this,{title:l,text:c,content:h,buttons:u,verticalButtons:d,cssClass:p,backdrop:f}=r;if(o.params=r,o.params.el)i=g(o.params.el);else{var v=["dialog"];0===u.length&&v.push("dialog-no-buttons"),u.length>0&&v.push("dialog-buttons-".concat(u.length)),d&&v.push("dialog-buttons-vertical"),p&&v.push(p);var m="";u.length>0&&(m='\n          <div class="dialog-buttons">\n            '.concat(u.map(e=>'\n              <span class="dialog-button'.concat(e.bold?" dialog-button-bold":"").concat(e.color?" color-".concat(e.color):"").concat(e.cssClass?" ".concat(e.cssClass):"",'">').concat(e.text,"</span>\n            ")).join(""),"\n          </div>\n        "));var b='\n        <div class="'.concat(v.join(" "),'">\n          <div class="dialog-inner">\n            ').concat(l?'<div class="dialog-title">'.concat(l,"</div>"):"","\n            ").concat(c?'<div class="dialog-text">'.concat(c,"</div>"):"","\n            ").concat(h,"\n          </div>\n          ").concat(m,"\n        </div>\n      ");i=g(b)}if(i&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;if(0===i.length)return o.destroy();function y(e){var t=g(this).index(),r=u[t];r.onClick&&r.onClick(o,e),o.params.onClick&&o.params.onClick(o,t),!1!==r.close&&o.close()}function w(e){var t=e.keyCode;u.forEach((r,i)=>{r.keyCodes&&r.keyCodes.indexOf(t)>=0&&(a.a.activeElement&&a.a.activeElement.blur(),r.onClick&&r.onClick(o,e),o.params.onClick&&o.params.onClick(o,i),!1!==r.close&&o.close())})}function C(e){var t=e.target;0===g(t).closest(o.el).length&&o.params.closeByBackdropClick&&o.backdropEl&&o.backdropEl===t&&o.close()}return f&&0===(n=e.root.children(".dialog-backdrop")).length&&(n=g('<div class="dialog-backdrop"></div>'),e.root.append(n)),u&&u.length>0&&(o.on("open",()=>{i.find(".dialog-button").each((e,t)=>{u[e].keyCodes&&(s=!0),g(t).on("click",y)}),!s||e.device.ios||e.device.android||e.device.cordova||g(a.a).on("keydown",w)}),o.on("close",()=>{i.find(".dialog-button").each((e,t)=>{g(t).off("click",y)}),!s||e.device.ios||e.device.android||e.device.cordova||g(a.a).off("keydown",w),s=!1})),x.extend(o,{app:e,$el:i,el:i[0],$backdropEl:n,backdropEl:n&&n[0],type:"dialog",setProgress:(t,r)=>(e.progressbar.set(i.find(".progressbar"),t,r),o),setText(e){var t=i.find(".dialog-text");return 0===t.length&&(t=g('<div class="dialog-text"></div>'),void 0!==l?t.insertAfter(i.find(".dialog-title")):i.find(".dialog-inner").prepend(t)),t.html(e),o.params.text=e,o},setTitle(e){var t=i.find(".dialog-title");return 0===t.length&&(t=g('<div class="dialog-title"></div>'),i.find(".dialog-inner").prepend(t)),t.html(e),o.params.title=e,o}}),o.on("opened",()=>{o.params.closeByBackdropClick&&e.on("click",C)}),o.on("close",()=>{o.params.closeByBackdropClick&&e.off("click",C)}),i[0].f7Modal=o,o.params.destroyOnClose&&o.once("closed",()=>{setTimeout(()=>{o.destroy()},0)}),o}};function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:Re},create(){var e=this;function t(){return e.params.dialog.title||e.name}var r=e.params.dialog.destroyPredefinedDialogs,i=e.params.dialog.keyboardActions,n=e.params.dialog.autoFocus?{on:{opened(e){e.$el.find("input").eq(0).focus()}}}:{};e.dialog=x.extend(D({app:e,constructor:Re,defaultSelector:".dialog.modal-in"}),{alert(...n){var[a,s,o]=n;return 2===n.length&&"function"==typeof n[1]&&([a,o,s]=n),new Re(e,{title:void 0===s?t():s,text:a,buttons:[{text:e.params.dialog.buttonOk,bold:!0,onClick:o,keyCodes:i?[13,27]:null}],destroyOnClose:r}).open()},prompt(...a){var[s,o,l,c,h]=a;return"function"==typeof a[1]&&([s,l,c,h,o]=a),h=null==h?"":h,new Re(e,je({title:void 0===o?t():o,text:s,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'.concat(h,'"></div>'),buttons:[{text:e.params.dialog.buttonCancel,keyCodes:i?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:i?[13]:null}],onClick(e,t){var r=e.$el.find(".dialog-input").val();0===t&&c&&c(r),1===t&&l&&l(r)},destroyOnClose:r},n)).open()},confirm(...n){var[a,s,o,l]=n;return"function"==typeof n[1]&&([a,o,l,s]=n),new Re(e,{title:void 0===s?t():s,text:a,buttons:[{text:e.params.dialog.buttonCancel,onClick:l,keyCodes:i?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,onClick:o,keyCodes:i?[13]:null}],destroyOnClose:r}).open()},login(...a){var[s,o,l,c]=a;return"function"==typeof a[1]&&([s,l,c,o]=a),new Re(e,je({title:void 0===o?t():o,text:s,content:'\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="text" name="dialog-username" placeholder="'.concat(e.params.dialog.usernamePlaceholder,'" class="dialog-input">\n              </div>\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="password" name="dialog-password" placeholder="').concat(e.params.dialog.passwordPlaceholder,'" class="dialog-input">\n              </div>'),buttons:[{text:e.params.dialog.buttonCancel,keyCodes:i?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:i?[13]:null}],onClick(e,t){var r=e.$el.find('[name="dialog-username"]').val(),i=e.$el.find('[name="dialog-password"]').val();0===t&&c&&c(r,i),1===t&&l&&l(r,i)},destroyOnClose:r},n)).open()},password(...a){var[s,o,l,c]=a;return"function"==typeof a[1]&&([s,l,c,o]=a),new Re(e,je({title:void 0===o?t():o,text:s,content:'\n              <div class="dialog-input-field input">\n                <input type="password" name="dialog-password" placeholder="'.concat(e.params.dialog.passwordPlaceholder,'" class="dialog-input">\n              </div>'),buttons:[{text:e.params.dialog.buttonCancel,keyCodes:i?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:i?[13]:null}],onClick(e,t){var r=e.$el.find('[name="dialog-password"]').val();0===t&&c&&c(r),1===t&&l&&l(r)},destroyOnClose:r},n)).open()},preloader(t,i){var n=x["".concat(e.theme,"PreloaderContent")]||"";return new Re(e,{title:null==t?e.params.dialog.preloaderTitle:t,content:'<div class="preloader'.concat(i?" color-".concat(i):"",'">').concat(n,"</div>"),cssClass:"dialog-preloader",destroyOnClose:r}).open()},progress(...t){var[i,n,a]=t;2===t.length?"number"==typeof t[0]?[n,a,i]=t:"string"==typeof t[0]&&"string"==typeof t[1]&&([i,a,n]=t):1===t.length&&"number"==typeof t[0]&&([n,i,a]=t);var s=void 0===n,o=new Re(e,{title:void 0===i?e.params.dialog.progressTitle:i,cssClass:"dialog-progress",content:'\n              <div class="progressbar'.concat(s?"-infinite":"").concat(a?" color-".concat(a):"",'">\n                ').concat(s?"":"<span></span>","\n              </div>\n            "),destroyOnClose:r});return s||o.setProgress(n),o.open()}})}};var Ne=class extends De{constructor(e,t){var r=x.extend({on:{}},e.params.popup,t);super(e,r);var i,n,s,o,l=this;if(l.params=r,(i=l.params.el?g(l.params.el).eq(0):g(l.params.content).filter((e,t)=>1===t.nodeType).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;if(0===i.length)return l.destroy();function c(t){var r=t.target,i=g(r);if(!(!e.device.desktop&&e.device.cordova&&(a.b.Keyboard&&a.b.Keyboard.isVisible||a.b.cordova.plugins&&a.b.cordova.plugins.Keyboard&&a.b.cordova.plugins.Keyboard.isVisible))&&0===i.closest(l.el).length&&l.params&&l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===r){var n=!0;l.$el.nextAll(".popup.modal-in").each((e,t)=>{var r=t.f7Modal;r&&r.params.closeByBackdropClick&&r.params.backdrop&&r.backdropEl===l.backdropEl&&(n=!1)}),n&&l.close()}}function h(e){27===e.keyCode&&l.params.closeOnEscape&&l.close()}function u(t){return(e.height-2*t)/e.height}l.params.backdrop&&l.params.backdropEl?n=g(l.params.backdropEl):l.params.backdrop&&0===(n=e.root.children(".popup-backdrop")).length&&(n=g('<div class="popup-backdrop"></div>'),e.root.append(n)),x.extend(l,{app:e,push:i.hasClass("popup-push")||l.params.push,$el:i,el:i[0],$backdropEl:n,backdropEl:n&&n[0],type:"popup",$htmlEl:g("html")}),l.params.push&&i.addClass("popup-push");var d,p,f,v,m,b,y,w,C,_,S,k=!0,T=!1,O=!1;function E(e){!T&&k&&l.params.swipeToClose&&(l.params.swipeHandler&&0===g(e.target).closest(l.params.swipeHandler).length||(T=!0,O=!1,d={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},v=x.now(),f=void 0,l.params.swipeHandler||"touchstart"!==e.type||(b=g(e.target).closest(".page-content")[0])))}function P(t){if(T){if(p={x:"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,y:"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY},void 0===f&&(f=!!(f||Math.abs(p.x-d.x)>Math.abs(p.y-d.y))),f)return T=!1,void(O=!1);m=d.y-p.y,o&&s&&m>0&&(m=0);var r=m<0?"to-bottom":"to-top";if(i.transition(0),"string"==typeof l.params.swipeToClose&&r!==l.params.swipeToClose)return i.transform(""),void i.transition("");if(O)l.emit("local::swipeMove popupSwipeMove",l),l.$el.trigger("popup:swipemove");else{if(o&&s&&(_=i[0].offsetHeight,0===(S=i.prevAll(".popup.modal-in").eq(0)).length&&(S=e.root.children(".view, .views"))),b&&(y=b.scrollTop,C=b.scrollHeight,w=b.offsetHeight,!(C===w||"to-bottom"===r&&0===y||"to-top"===r&&y===C-w)))return i.transform(""),i.transition(""),T=!1,void(O=!1);O=!0,l.emit("local::swipeStart popupSwipeStart",l),l.$el.trigger("popup:swipestart")}if(t.preventDefault(),o&&s){var n=1-Math.abs(m/_),a=1-(1-u(s))*n;S.hasClass("popup")?S.hasClass("popup-push")?S.transition(0).transform("translate3d(0, calc(-1 * ".concat(n," * (var(--f7-popup-push-offset) + 10px)) , 0px) scale(").concat(a,")")):S.transition(0).transform("translate3d(0, 0px , 0px) scale(".concat(a,")")):S.transition(0).transform("translate3d(0,0,0) scale(".concat(a,")"))}i.transition(0).transform("translate3d(0,".concat(-m,"px,0)"))}}function A(){if(T=!1,O){l.emit("local::swipeEnd popupSwipeEnd",l),l.$el.trigger("popup:swipeend"),O=!1,k=!1,i.transition(""),o&&s&&S.transition("").transform("");var e=m<=0?"to-bottom":"to-top";if("string"==typeof l.params.swipeToClose&&e!==l.params.swipeToClose)return i.transform(""),void(k=!0);var t=Math.abs(m),r=(new Date).getTime()-v;r<300&&t>20||r>=300&&t>100?x.nextTick(()=>{"to-bottom"===e?i.addClass("swipe-close-to-bottom"):i.addClass("swipe-close-to-top"),i.transform(""),l.emit("local::swipeclose popupSwipeClose",l),l.$el.trigger("popup:swipeclose"),l.close(),k=!0}):(k=!0,i.transform(""))}}var D,I=!!U.a.passiveListener&&{passive:!0};return l.params.swipeToClose&&(i.on(e.touchEvents.start,E,I),e.on("touchmove",P),e.on("touchend:passive",A),l.once("popupDestroy",()=>{i.off(e.touchEvents.start,E,I),e.off("touchmove",P),e.off("touchend:passive",A)})),l.on("open",()=>{D=!1,l.params.closeOnEscape&&g(a.a).on("keydown",h),i.prevAll(".popup.modal-in").addClass("popup-behind"),l.push&&(o=l.push&&(e.width<630||e.height<630||i.hasClass("popup-tablet-fullscreen"))),o&&(s=parseInt(i.css("--f7-popup-push-offset"),10),Number.isNaN(s)&&(s=0),s&&(i.addClass("popup-push"),l.$htmlEl.addClass("with-modal-popup-push"),l.$htmlEl[0].style.setProperty("--f7-popup-push-scale",u(s))))}),l.on("opened",()=>{i.removeClass("swipe-close-to-bottom swipe-close-to-top"),l.params.closeByBackdropClick&&e.on("click",c)}),l.on("close",()=>{D=l.$el.prevAll(".popup-push.modal-in").length>0,l.params.closeOnEscape&&g(a.a).off("keydown",h),l.params.closeByBackdropClick&&e.off("click",c),i.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),o&&s&&!D&&(l.$htmlEl.removeClass("with-modal-popup-push"),l.$htmlEl.addClass("with-modal-popup-push-closing"))}),l.on("closed",()=>{o&&s&&!D&&(l.$htmlEl.removeClass("with-modal-popup-push-closing"),l.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))}),i[0].f7Modal=l,l}},ze={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1}},static:{Popup:Ne},create(){this.popup=D({app:this,constructor:Ne,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(e,t={}){this.popup.open(t.popup,t.animate,e)},".popup-close":function(e,t={}){this.popup.close(t.popup,t.animate,e)}}};var Ue=class extends De{constructor(e,t){var r=x.extend({on:{}},e.params.popover,t);super(e,r);var i,n=this;if(n.params=r,(i=n.params.el?g(n.params.el).eq(0):g(n.params.content).filter((e,t)=>1===t.nodeType).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;var s,o,l=g(n.params.targetEl).eq(0);if(0===i.length)return n.destroy();n.params.backdrop&&n.params.backdropEl?s=g(n.params.backdropEl):n.params.backdrop&&0===(s=e.root.children(".popover-backdrop")).length&&(s=g('<div class="popover-backdrop"></div>'),e.root.append(s)),0===i.find(".popover-angle").length?(o=g('<div class="popover-angle"></div>'),i.prepend(o)):o=i.find(".popover-angle");var c=n.open;function h(){n.resize()}function u(t){var r=t.target,i=g(r);!e.device.desktop&&e.device.cordova&&(a.b.Keyboard&&a.b.Keyboard.isVisible||a.b.cordova.plugins&&a.b.cordova.plugins.Keyboard&&a.b.cordova.plugins.Keyboard.isVisible)||0===i.closest(n.el).length&&(n.params.closeByBackdropClick&&n.params.backdrop&&n.backdropEl&&n.backdropEl===r||n.params.closeByOutsideClick)&&n.close()}function d(e){27===e.keyCode&&n.params.closeOnEscape&&n.close()}return x.extend(n,{app:e,$el:i,el:i[0],$targetEl:l,targetEl:l[0],$angleEl:o,angleEl:o[0],$backdropEl:s,backdropEl:s&&s[0],type:"popover",open(...e){var[t,r]=e;return"boolean"==typeof e[0]&&([r,t]=e),t&&(n.$targetEl=g(t),n.targetEl=n.$targetEl[0]),c.call(n,r)}}),n.on("popoverOpen",()=>{n.resize(),e.on("resize",h),g(a.b).on("keyboardDidShow keyboardDidHide",h),n.on("popoverClose popoverBeforeDestroy",()=>{e.off("resize",h),g(a.b).off("keyboardDidShow keyboardDidHide",h)})}),n.params.closeOnEscape&&(n.on("popoverOpen",()=>{g(a.a).on("keydown",d)}),n.on("popoverClose",()=>{g(a.a).off("keydown",d)})),n.on("popoverOpened",()=>{(n.params.closeByOutsideClick||n.params.closeByBackdropClick)&&e.on("click",u)}),n.on("popoverClose",()=>{(n.params.closeByOutsideClick||n.params.closeByBackdropClick)&&e.off("click",u)}),i[0].f7Modal=n,n}resize(){var{app:e,$el:t,$targetEl:r,$angleEl:i}=this,{targetX:n,targetY:a}=this.params;t.css({left:"",top:""});var s,o,l,c,h,u,[d,p]=[t.width(),t.height()],f=0;"ios"===e.theme||"aurora"===e.theme?(i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),f=i.width()/2):t.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var v=parseInt(g("html").css("--f7-safe-area-top"),10);if(Number.isNaN(v)&&(v=0),r&&r.length>0){l=r.outerWidth(),c=r.outerHeight();var m=r.offset();h=m.left-e.left,u=m.top-e.top;var b=r.parents(".page");b.length>0&&(u-=b[0].scrollTop)}else void 0!==n&&"undefined"!==a&&(h=n,u=a,l=this.params.targetWidth||0,c=this.params.targetHeight||0);var y,[w,C,_]=[0,0,0],x="md"===e.theme?"bottom":"top";"md"===e.theme?(p<e.height-u-c?(x="bottom",C=u+c):p<u-v?(C=u-p,x="top"):(x="middle",C=c/2+u-p/2),C=Math.max(8,Math.min(C,e.height-p-8)),h<e.width/2?(y="right",w="middle"===x?h+l:h):(y="left",w="middle"===x?h-d:h+l-d),w=Math.max(8,Math.min(w,e.width-d-8)),t.addClass("popover-on-".concat(x," popover-on-").concat(y))):(p+f<u-v?C=u-p-f:p+f<e.height-u-c?(x="bottom",C=u+c+f):(x="middle",_=C=c/2+u-p/2,_-=C=Math.max(5,Math.min(C,e.height-p-5))),"top"===x||"bottom"===x?(_=w=l/2+h-d/2,w=Math.max(5,Math.min(w,e.width-d-5)),"top"===x&&i.addClass("on-bottom"),"bottom"===x&&i.addClass("on-top"),s=d/2-f+(_-=w),s=Math.max(Math.min(s,d-2*f-13),13),i.css({left:"".concat(s,"px")})):"middle"===x&&(w=h-d-f,i.addClass("on-right"),(w<5||w+d>e.width)&&(w<5&&(w=h+l+f),w+d>e.width&&(w=e.width-d-5),i.removeClass("on-right").addClass("on-left")),o=p/2-f+_,o=Math.max(Math.min(o,p-2*f-13),13),i.css({top:"".concat(o,"px")})));t.css({top:"".concat(C,"px"),left:"".concat(w,"px")})}},He={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1}},static:{Popover:Ue},create(){var e=this;e.popover=x.extend(D({app:e,constructor:Ue,defaultSelector:".popover.modal-in"}),{open(t,r,i){var n=g(t);if(n.length>1){var a=g(r).parents(".page");a.length&&n.each((e,t)=>{var r=g(t);r.parents(a)[0]===a[0]&&(n=r)})}n.length>1&&(n=n.eq(n.length-1));var s=n[0].f7Modal,o=n.dataset();return s||(s=new Ue(e,Object.assign({el:n,targetEl:r},o))),s.open(r,i)}})},clicks:{".popover-open":function(e,t={}){this.popover.open(t.popover,e,t.animate)},".popover-close":function(e,t={}){this.popover.close(t.popover,t.animate,e)}}};var We=class extends De{constructor(e,t){var r=x.extend({on:{}},e.params.sheet,t);super(e,r);var i,n,s,o,l=this;if(l.params=r,void 0===l.params.backdrop&&(l.params.backdrop="ios"!==e.theme),(i=l.params.el?g(l.params.el).eq(0):g(l.params.content).filter((e,t)=>1===t.nodeType).eq(0))&&i.length>0&&i[0].f7Modal)return i[0].f7Modal;if(0===i.length)return l.destroy();function c(t){var r=t.target,i=g(r);!e.device.desktop&&e.device.cordova&&(a.b.Keyboard&&a.b.Keyboard.isVisible||a.b.cordova.plugins&&a.b.cordova.plugins.Keyboard&&a.b.cordova.plugins.Keyboard.isVisible)||0===i.closest(l.el).length&&(l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===r||l.params.closeByOutsideClick)&&l.close()}function h(e){27===e.keyCode&&l.params.closeOnEscape&&l.close()}function u(t){return(e.height-2*t)/e.height}l.params.backdrop&&l.params.backdropEl?n=g(l.params.backdropEl):l.params.backdrop&&0===(n=e.root.children(".sheet-backdrop")).length&&(n=g('<div class="sheet-backdrop"></div>'),e.root.append(n)),x.extend(l,{app:e,push:i.hasClass("sheet-modal-push")||l.params.push,$el:i,el:i[0],$backdropEl:n,backdropEl:n&&n[0],type:"sheet",$htmlEl:g("html")}),l.params.push&&i.addClass("sheet-modal-push");var d,p,f,v,m,b,y,w,C,_,S,k,T,O,E,P,A,D,I=!1,L=!1;function B(e){I||!l.params.swipeToClose&&!l.params.swipeToStep||l.params.swipeHandler&&0===g(e.target).closest(l.params.swipeHandler).length||(I=!0,L=!1,d={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},v=x.now(),f=void 0,b=i.hasClass("sheet-modal-top"),l.params.swipeHandler||"touchstart"!==e.type||(E=g(e.target).closest(".page-content")[0]))}function R(t){if(I){if(p={x:"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,y:"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY},void 0===f&&(f=!!(f||Math.abs(p.x-d.x)>Math.abs(p.y-d.y))),f)return I=!1,void(L=!1);var r,n=(m=d.y-p.y)<0?"to-bottom":"to-top";if(!L){if(E&&!i.hasClass("modal-in-swipe-step")&&(P=E.scrollTop,A=E.scrollHeight,D=E.offsetHeight,!(A===D||"to-bottom"===n&&0===P||"to-top"===n&&P===A-D)))return i.transform(""),I=!1,void(L=!1);l.push&&o&&(T=e.root.children(".view, .views")),_=i[0].offsetHeight,w=x.getTranslate(i[0],"y"),b?(S=l.params.swipeToClose?-_:-y,k=0):(S=0,k=l.params.swipeToClose?_:y),L=!0}if(C=w-m,C=Math.min(Math.max(C,S),k),t.preventDefault(),l.push&&o){var a=(C-w)/_;l.params.swipeToStep&&(a=b?C/y:1-(y-C)/y),a=Math.abs(a);var s=1-(a=Math.min(Math.max(a,0),1)),c=1-(1-u(o))*s;T.transition(0).transform("translate3d(0,0,0) scale(".concat(c,")")),l.params.swipeToStep&&T.css("border-radius","".concat(O*s,"px"))}if(i.transition(0).transform("translate3d(0,".concat(C,"px,0)")),l.params.swipeToStep)r=b?1-C/y:(y-C)/y,r=Math.min(Math.max(r,0),1),i.trigger("sheet:stepprogress",r),l.emit("local::stepProgress sheetStepProgress",l,r)}}function M(){if(I=!1,L){L=!1,i.transform("").transition(""),l.push&&o&&(T.transition("").transform(""),T.css("border-radius",""));var e=m<0?"to-bottom":"to-top",t=Math.abs(m);if(0!==t&&C!==w){var r=(new Date).getTime()-v;if(l.params.swipeToStep){var n=b?"to-bottom":"to-top",a=b?"to-top":"to-bottom",s=Math.abs(C),c=Math.abs(y);if(r<300&&t>10)return e===n&&s<c&&(i.removeClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",1),l.emit("local::stepProgress sheetStepProgress",l,1),i.trigger("sheet:stepopen"),l.emit("local::stepOpen sheetStepOpen",l),l.push&&o&&(l.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",u(o)),T.css("border-radius",""))),e===a&&s>c&&(l.params.swipeToClose?l.close():(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),l.emit("local::stepProgress sheetStepProgress",l,0),i.trigger("sheet:stepclose"),l.emit("local::stepClose sheetStepClose",l),l.push&&o&&(l.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),T.css("border-radius","0px")))),void(e===a&&s<=c&&(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),l.emit("local::stepProgress sheetStepProgress",l,0),i.trigger("sheet:stepclose"),l.emit("local::stepClose sheetStepClose",l),l.push&&o&&(l.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),T.css("border-radius","0px"))));if(r>=300){var h=!i.hasClass("modal-in-swipe-step");h?h&&(s>c+(_-c)/2?l.params.swipeToClose&&l.close():s>c/2&&(i.addClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",0),l.emit("local::stepProgress sheetStepProgress",l,0),i.trigger("sheet:stepclose"),l.emit("local::stepClose sheetStepClose",l),l.push&&o&&(l.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),T.css("border-radius","0px")))):s<c/2?(i.removeClass("modal-in-swipe-step"),i.trigger("sheet:stepprogress",1),l.emit("local::stepProgress sheetStepProgress",l,1),i.trigger("sheet:stepopen"),l.emit("local::stepOpen sheetStepOpen",l),l.push&&o&&(l.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",u(o)),T.css("border-radius",""))):s-c>(_-c)/2&&l.params.swipeToClose&&l.close()}}else{if(e!==(b?"to-top":"to-bottom"))return;(r<300&&t>20||r>=300&&t>_/2)&&l.close()}}}}function j(){l.setSwipeStep(!0)}l.setSwipeStep=function(e=!0){var t=i.find(".sheet-modal-swipe-step").eq(0);t.length&&(y=i.hasClass("sheet-modal-top")?-(t.offset().top-i.offset().top+t[0].offsetHeight):i[0].offsetHeight-(t.offset().top-i.offset().top+t[0].offsetHeight),i[0].style.setProperty("--f7-sheet-swipe-step","".concat(y,"px")),e||i.addClass("modal-in-swipe-step"))};var F=!!U.a.passiveListener&&{passive:!0};return(l.params.swipeToClose||l.params.swipeToStep)&&(i.on(e.touchEvents.start,B,F),e.on("touchmove",R),e.on("touchend:passive",M),l.once("sheetDestroy",()=>{i.off(e.touchEvents.start,B,F),e.off("touchmove",R),e.off("touchend:passive",M)})),l.on("open",()=>{l.params.closeOnEscape&&g(a.a).on("keydown",h),i.prevAll(".popup.modal-in").addClass("popup-behind"),l.params.swipeToStep&&(l.setSwipeStep(!1),e.on("resize",j)),l.params.scrollToEl&&function(){var e=g(l.params.scrollToEl).eq(0);if(0!==e.length&&0!==(s=e.parents(".page-content")).length){var t,r=parseInt(s.css("padding-top"),10),n=parseInt(s.css("padding-bottom"),10),a=s[0].offsetHeight-r-i.height(),o=s[0].scrollHeight-r-i.height(),c=s.scrollTop(),h=e.offset().top-r+e[0].offsetHeight;if(h>a){var u=c+h-a;u+a>o&&(t=u+a-o+n,a===o&&(t=i.height()),s.css({"padding-bottom":"".concat(t,"px")})),s.scrollTop(u,300)}}}(),l.push&&(o=parseInt(i.css("--f7-sheet-push-offset"),10),Number.isNaN(o)&&(o=0),o&&(i.addClass("sheet-modal-push"),l.$htmlEl.addClass("with-modal-sheet-push"),l.params.swipeToStep?(T=e.root.children(".view, .views"),O=parseFloat(i.css("border-".concat(b?"bottom":"top","-left-radius"))),T.css("border-radius","0px")):l.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",u(o))))}),l.on("opened",()=>{(l.params.closeByOutsideClick||l.params.closeByBackdropClick)&&e.on("click",c)}),l.on("close",()=>{l.params.swipeToStep&&(i.removeClass("modal-in-swipe-step"),e.off("resize",j)),l.params.closeOnEscape&&g(a.a).off("keydown",h),l.params.scrollToEl&&s&&s.length>0&&s.css({"padding-bottom":""}),(l.params.closeByOutsideClick||l.params.closeByBackdropClick)&&e.off("click",c),i.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),l.push&&o&&(l.$htmlEl.removeClass("with-modal-sheet-push"),l.$htmlEl.addClass("with-modal-sheet-push-closing"))}),l.on("closed",()=>{l.push&&o&&(l.$htmlEl.removeClass("with-modal-sheet-push-closing"),l.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))}),l.stepOpen=function(){i.removeClass("modal-in-swipe-step"),l.push&&(o||(o=parseInt(i.css("--f7-sheet-push-offset"),10),Number.isNaN(o)&&(o=0)),o&&l.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",u(o)))},l.stepClose=function(){i.addClass("modal-in-swipe-step"),l.push&&l.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},l.stepToggle=function(){i.toggleClass("modal-in-swipe-step")},i[0].f7Modal=l,l}},Ve={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null}},static:{Sheet:We},create(){var e=this;e.sheet=x.extend({},D({app:e,constructor:We,defaultSelector:".sheet-modal.modal-in"}),{stepOpen(t){var r=e.sheet.get(t);if(r&&r.stepOpen)return r.stepOpen()},stepClose(t){var r=e.sheet.get(t);if(r&&r.stepClose)return r.stepClose()},stepToggle(t){var r=e.sheet.get(t);if(r&&r.stepToggle)return r.stepToggle()}})},clicks:{".sheet-open":function(e,t={}){g(".sheet-modal.modal-in").length>0&&t.sheet&&g(t.sheet)[0]!==g(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(t.sheet,t.animate,e)},".sheet-close":function(e,t={}){this.sheet.close(t.sheet,t.animate,e)}}};var Ye={init(e){var t=g(e);0===t.length||t.children(".preloader-inner").length>0||t.children(".preloader-inner-line").length>0||t.append(x["".concat(this.theme,"PreloaderContent")])},visible:!1,show(e="white"){if(!Ye.visible){var t=x["".concat(this.theme,"PreloaderContent")]||"";g("html").addClass("with-modal-preloader"),this.root.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'.concat(e,'">').concat(t,"</div>\n      </div>\n    ")),Ye.visible=!0}},showIn(e,t="white"){var r=x["".concat(this.theme,"PreloaderContent")]||"";g(e||"html").addClass("with-modal-preloader"),g(e||this.root).append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'.concat(t,'">').concat(r,"</div>\n      </div>\n    "))},hide(){Ye.visible&&(g("html").removeClass("with-modal-preloader"),this.root.find(".preloader-backdrop, .preloader-modal").remove(),Ye.visible=!1)},hideIn(e){g(e||"html").removeClass("with-modal-preloader"),g(e||this.root).find(".preloader-backdrop, .preloader-modal").remove()}},Xe={name:"preloader",create(){x.extend(this,{preloader:{init:Ye.init.bind(this),show:Ye.show.bind(this),hide:Ye.hide.bind(this),showIn:Ye.showIn.bind(this),hideIn:Ye.hideIn.bind(this)}})},on:{photoBrowserOpen(e){var t=this;e.$el.find(".preloader").each((e,r)=>{t.preloader.init(r)})},tabMounted(e){var t=this;g(e).find(".preloader").each((e,r)=>{t.preloader.init(r)})},pageInit(e){var t=this;e.$el.find(".preloader").each((e,r)=>{t.preloader.init(r)})}},vnode:{preloader:{insert(e){var t=e.elm;this.preloader.init(t)}}}},Ge={init(){var e,t,r,i,n,s,o,l,c,h,u,d,p,f,v,m,b,y,w,C,_,x=this;function S(i,a){t=!1,e=!0,_=!1,r="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY,n=g(i.target).closest("li").eq(0),p=n.index(),o=n.parents(".sortable");var l=n.parents(".list-group");l.length&&l.parents(o).length&&(o=l),s=o.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),x.panel&&(x.panel.allowOpen=!1),x.swipeout&&(x.swipeout.allow=!1),a&&(n.addClass("sorting"),o.addClass("sortable-sorting"),_=!0)}var k=!!x.support.passiveListener&&{passive:!1,capture:!1};g(a.a).on(x.touchEvents.start,".list.sortable .sortable-handler",S,k),x.on("touchmove:active",(function(a){if(e&&n){var p="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY;if(!t){f=n.parents(".page"),v=n.parents(".page-content");var _=parseInt(v.css("padding-top"),10),x=parseInt(v.css("padding-bottom"),10);C=v[0].scrollTop,b=f.offset().top+_,m=f.height()-_-x,n.addClass("sorting"),o.addClass("sortable-sorting"),y=n[0].offsetTop,c=n[0].offsetTop,h=n.parent().height()-y-n.height(),l=n[0].offsetHeight,w=n.offset().top}t=!0,a.preventDefault(),a.f7PreventSwipePanel=!0,i=p-r;var S=v[0].scrollTop-C,k=Math.min(Math.max(i+S,-c),h);n.transform("translate3d(0,".concat(k,"px,0)"));var T,O=!0;i+S+44<-c&&(O=!1),i+S-44>h&&(O=!1),d=void 0,u=void 0,O&&(w+i+l+44>b+m&&(T=w+i+l+44-(b+m)),w+i<b+44&&(T=w+i-b-44),T&&(v[0].scrollTop+=T)),s.each((e,t)=>{var r=g(t);if(r[0]!==n[0]){var i=r[0].offsetTop,a=r.height(),s=y+k;s>=i-a/2&&n.index()<r.index()?(r.transform("translate3d(0, ".concat(-l,"px,0)")),u=r,d=void 0):s<=i+a/2&&n.index()>r.index()?(r.transform("translate3d(0, ".concat(l,"px,0)")),u=void 0,d||(d=r)):r.transform("translate3d(0, 0%,0)")}})}})),x.on("touchend:passive",(function(){if(!e||!t)return e&&!t&&(x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),_&&(n.removeClass("sorting"),o.removeClass("sortable-sorting"))),e=!1,void(t=!1);var r;x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),s.transform(""),n.removeClass("sorting"),o.removeClass("sortable-sorting"),u?r=u.index():d&&(r=d.index());var i=o.dataset().sortableMoveElements;if(void 0===i&&(i=x.params.sortable.moveElements),i&&(u&&n.insertAfter(u),d&&n.insertBefore(d)),(u||d)&&o.hasClass("virtual-list")){void 0===(p=n[0].f7VirtualListIndex)&&(p=n.attr("data-virtual-list-index")),d?void 0===(r=d[0].f7VirtualListIndex)&&(r=d.attr("data-virtual-list-index")):void 0===(r=u[0].f7VirtualListIndex)&&(r=u.attr("data-virtual-list-index")),r=null!==r?parseInt(r,10):void 0;var a=o[0].f7VirtualList;p&&(p=parseInt(p,10)),r&&(r=parseInt(r,10)),a&&a.moveItem(p,r)}void 0===r||Number.isNaN(r)||r===p||(n.trigger("sortable:sort",{from:p,to:r}),x.emit("sortableSort",n[0],{from:p,to:r,el:n[0]},o[0])),d=void 0,u=void 0,e=!1,t=!1})),g(a.a).on("taphold",".sortable-tap-hold",(e,t)=>{S(t,!0)})},enable(e=".list.sortable"){var t=g(e);0!==t.length&&(t.addClass("sortable-enabled"),t.trigger("sortable:enable"),this.emit("sortableEnable",t[0]))},disable(e=".list.sortable"){var t=g(e);0!==t.length&&(t.removeClass("sortable-enabled"),t.trigger("sortable:disable"),this.emit("sortableDisable",t[0]))},toggle(e=".list.sortable"){var t=g(e);0!==t.length&&(t.hasClass("sortable-enabled")?this.sortable.disable(t):this.sortable.enable(t))}},qe={name:"sortable",params:{sortable:{moveElements:!0}},create(){x.extend(this,{sortable:{init:Ge.init.bind(this),enable:Ge.enable.bind(this),disable:Ge.disable.bind(this),toggle:Ge.toggle.bind(this)}})},on:{init(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(e,t={}){this.sortable.enable(t.sortable)},".sortable-disable":function(e,t={}){this.sortable.disable(t.sortable)},".sortable-toggle":function(e,t={}){this.sortable.toggle(t.sortable)}}};var Ke=class extends T{constructor(e,t={}){super(t,[e]);var r,i=this;"md"===e.theme?r=48:"ios"===e.theme?r=44:"aurora"===e.theme&&(r=38);var n={cols:1,height:r,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,itemTemplate:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:e=>'\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'.concat(e,"</div>\n              </div>\n            </div>\n          </li>\n        ").trim(),on:{}};if(i.useModulesParams(n),i.params=x.extend(n,t),void 0!==i.params.height&&i.params.height||(i.params.height=r),i.$el=g(t.el),i.el=i.$el[0],0!==i.$el.length){i.$el[0].f7VirtualList=i,i.items=i.params.items,i.params.showFilteredItemsOnly&&(i.filteredItems=[]),i.params.itemTemplate?"string"==typeof i.params.itemTemplate?i.renderItem=e.t7.compile(i.params.itemTemplate):"function"==typeof i.params.itemTemplate&&(i.renderItem=i.params.itemTemplate):i.params.renderItem&&(i.renderItem=i.params.renderItem),i.$pageContentEl=i.$el.parents(".page-content"),i.pageContentEl=i.$pageContentEl[0],i.$scrollableParentEl=i.params.scrollableParentEl?g(i.params.scrollableParentEl).eq(0):i.$pageContentEl,!i.$scrollableParentEl.length&&i.$pageContentEl.length&&(i.$scrollableParentEl=i.$pageContentEl),i.scrollableParentEl=i.$scrollableParentEl[0],void 0!==i.params.updatableScroll?i.updatableScroll=i.params.updatableScroll:(i.updatableScroll=!0,S.a.ios&&S.a.osVersion.split(".")[0]<8&&(i.updatableScroll=!1));var s,o=i.params.ul;i.$ul=o?g(i.params.ul):i.$el.children("ul"),0===i.$ul.length&&i.params.createUl&&(i.$el.append("<ul></ul>"),i.$ul=i.$el.children("ul")),i.ul=i.$ul[0],s=i.ul||i.params.createUl?i.$ul:i.$el,x.extend(i,{$itemsWrapEl:s,itemsWrapEl:s[0],domCache:{},displayDomCache:{},tempDomElement:a.a.createElement("ul"),lastRepaintY:null,fragment:a.a.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:"function"==typeof i.params.height}),i.useModules();var l,c,h,u,d=i.handleScroll.bind(i),p=i.handleResize.bind(i);return i.attachEvents=function(){l=i.$el.parents(".page").eq(0),c=i.$el.parents(".tab").filter((e,t)=>0===g(t).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length).eq(0),h=i.$el.parents(".panel").eq(0),u=i.$el.parents(".popup").eq(0),i.$scrollableParentEl.on("scroll",d),l.length&&l.on("page:reinit",p),c.length&&c.on("tab:show",p),h.length&&h.on("panel:open",p),u.length&&u.on("popup:open",p),e.on("resize",p)},i.detachEvents=function(){i.$scrollableParentEl.off("scroll",d),l.length&&l.off("page:reinit",p),c.length&&c.off("tab:show",p),h.length&&h.off("panel:open",p),u.length&&u.off("popup:open",p),e.off("resize",p)},i.init(),i}}setListSize(){var e=this,t=e.filteredItems||e.items;if(e.pageHeight=e.$scrollableParentEl[0].offsetHeight,e.dynamicHeight){e.listHeight=0,e.heights=[];for(var r=0;r<t.length;r+=1){var i=e.params.height(t[r]);e.listHeight+=i,e.heights.push(i)}}else e.listHeight=Math.ceil(t.length/e.params.cols)*e.params.height,e.rowsPerScreen=Math.ceil(e.pageHeight/e.params.height),e.rowsBefore=e.params.rowsBefore||2*e.rowsPerScreen,e.rowsAfter=e.params.rowsAfter||e.rowsPerScreen,e.rowsToRender=e.rowsPerScreen+e.rowsBefore+e.rowsAfter,e.maxBufferHeight=e.rowsBefore/2*e.params.height;(e.updatableScroll||e.params.setListHeight)&&e.$itemsWrapEl.css({height:"".concat(e.listHeight,"px")})}render(e,t){var r=this;e&&(r.lastRepaintY=null);var i=-(r.$el[0].getBoundingClientRect().top-r.$scrollableParentEl[0].getBoundingClientRect().top);if(void 0!==t&&(i=t),null===r.lastRepaintY||Math.abs(i-r.lastRepaintY)>r.maxBufferHeight||!r.updatableScroll&&r.$scrollableParentEl[0].scrollTop+r.pageHeight>=r.$scrollableParentEl[0].scrollHeight){r.lastRepaintY=i;var n,a,s,o=r.filteredItems||r.items,l=0,c=0;if(r.dynamicHeight){var h,u=0;r.maxBufferHeight=r.pageHeight;for(var d=0;d<r.heights.length;d+=1)h=r.heights[d],void 0===n&&(u+h>=i-2*r.pageHeight*r.params.dynamicHeightBufferSize?n=d:l+=h),void 0===a&&((u+h>=i+2*r.pageHeight*r.params.dynamicHeightBufferSize||d===r.heights.length-1)&&(a=d+1),c+=h),u+=h;a=Math.min(a,o.length)}else(n=(parseInt(i/r.params.height,10)-r.rowsBefore)*r.params.cols)<0&&(n=0),a=Math.min(n+r.rowsToRender*r.params.cols,o.length);var p,f=[];for(r.reachEnd=!1,p=n;p<a;p+=1){var g=void 0,v=r.items.indexOf(o[p]);p===n&&(r.currentFromIndex=v),p===a-1&&(r.currentToIndex=v),r.filteredItems?r.items[v]===r.filteredItems[r.filteredItems.length-1]&&(r.reachEnd=!0):v===r.items.length-1&&(r.reachEnd=!0),r.params.renderExternal?f.push(o[p]):r.domCache[v]?(g=r.domCache[v]).f7VirtualListIndex=v:(r.renderItem?r.tempDomElement.innerHTML=r.renderItem(o[p],v).trim():r.tempDomElement.innerHTML=o[p].toString().trim(),g=r.tempDomElement.childNodes[0],r.params.cache&&(r.domCache[v]=g),g.f7VirtualListIndex=v),p===n&&(s=r.dynamicHeight?l:p*r.params.height/r.params.cols),r.params.renderExternal||(g.style.top="".concat(s,"px"),r.emit("local::itemBeforeInsert vlItemBeforeInsert",r,g,o[p]),r.fragment.appendChild(g))}r.updatableScroll||(r.dynamicHeight?r.itemsWrapEl.style.height="".concat(c,"px"):r.itemsWrapEl.style.height="".concat(p*r.params.height/r.params.cols,"px")),r.params.renderExternal?o&&0===o.length&&(r.reachEnd=!0):(r.emit("local::beforeClear vlBeforeClear",r,r.fragment),r.itemsWrapEl.innerHTML="",r.emit("local::itemsBeforeInsert vlItemsBeforeInsert",r,r.fragment),o&&0===o.length?(r.reachEnd=!0,r.params.emptyTemplate&&(r.itemsWrapEl.innerHTML=r.params.emptyTemplate)):r.itemsWrapEl.appendChild(r.fragment),r.emit("local::itemsAfterInsert vlItemsAfterInsert",r,r.fragment)),void 0!==t&&e&&r.$scrollableParentEl.scrollTop(t,0),r.params.renderExternal&&r.params.renderExternal(r,{fromIndex:n,toIndex:a,listHeight:r.listHeight,topPosition:s,items:f})}}filterItems(e,t=!0){var r=this;r.filteredItems=[];for(var i=0;i<e.length;i+=1)r.filteredItems.push(r.items[e[i]]);t&&(r.$scrollableParentEl[0].scrollTop=0),r.update()}resetFilter(){var e=this;e.params.showFilteredItemsOnly?e.filteredItems=[]:(e.filteredItems=null,delete e.filteredItems),e.update()}scrollToItem(e){var t=this;if(e>t.items.length)return!1;var r=0;if(t.dynamicHeight)for(var i=0;i<e;i+=1)r+=t.heights[i];else r=e*t.params.height;var n=t.$el[0].offsetTop;return t.render(!0,n+r-parseInt(t.$scrollableParentEl.css("padding-top"),10)),!0}handleScroll(){this.render()}isVisible(){return!!(this.el.offsetWidth||this.el.offsetHeight||this.el.getClientRects().length)}handleResize(){this.isVisible()&&(this.setListSize(),this.render(!0))}appendItems(e){for(var t=0;t<e.length;t+=1)this.items.push(e[t]);this.update()}appendItem(e){this.appendItems([e])}replaceAllItems(e){this.items=e,delete this.filteredItems,this.domCache={},this.update()}replaceItem(e,t){this.items[e]=t,this.params.cache&&delete this.domCache[e],this.update()}prependItems(e){for(var t=this,r=e.length-1;r>=0;r-=1)t.items.unshift(e[r]);if(t.params.cache){var i={};Object.keys(t.domCache).forEach(r=>{i[parseInt(r,10)+e.length]=t.domCache[r]}),t.domCache=i}t.update()}prependItem(e){this.prependItems([e])}moveItem(e,t){var r=this,i=e,n=t;if(i!==n){var a=r.items.splice(i,1)[0];if(n>=r.items.length?(r.items.push(a),n=r.items.length-1):r.items.splice(n,0,a),r.params.cache){var s={};Object.keys(r.domCache).forEach(e=>{var t=parseInt(e,10),a=i<n?i:n,o=i<n?n:i,l=i<n?-1:1;(t<a||t>o)&&(s[t]=r.domCache[t]),t===a&&(s[o]=r.domCache[t]),t>a&&t<=o&&(s[t+l]=r.domCache[t])}),r.domCache=s}r.update()}}insertItemBefore(e,t){var r=this;if(0!==e)if(e>=r.items.length)r.appendItem(t);else{if(r.items.splice(e,0,t),r.params.cache){var i={};Object.keys(r.domCache).forEach(t=>{var n=parseInt(t,10);n>=e&&(i[n+1]=r.domCache[n])}),r.domCache=i}r.update()}else r.prependItem(t)}deleteItems(e){for(var t,r=this,i=0,n=function(n){var a=e[n];void 0!==t&&a>t&&(i=-n),a+=i,t=e[n];var s=r.items.splice(a,1)[0];if(r.filteredItems&&r.filteredItems.indexOf(s)>=0&&r.filteredItems.splice(r.filteredItems.indexOf(s),1),r.params.cache){var o={};Object.keys(r.domCache).forEach(e=>{var t=parseInt(e,10);t===a?delete r.domCache[a]:parseInt(e,10)>a?o[t-1]=r.domCache[e]:o[t]=r.domCache[e]}),r.domCache=o}},a=0;a<e.length;a+=1)n(a);r.update()}deleteAllItems(){var e=this;e.items=[],delete e.filteredItems,e.params.cache&&(e.domCache={}),e.update()}deleteItem(e){this.deleteItems([e])}clearCache(){this.domCache={}}update(e){e&&this.params.cache&&(this.domCache={}),this.setListSize(),this.render(!0)}init(){this.attachEvents(),this.setListSize(),this.render()}destroy(){var e=this;e.detachEvents(),e.$el[0].f7VirtualList=null,delete e.$el[0].f7VirtualList,x.deleteProps(e),e=null}},Je={name:"virtualList",static:{VirtualList:Ke},create(){this.virtualList=O({defaultSelector:".virtual-list",constructor:Ke,app:this,domProp:"f7VirtualList"})}},Ze={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow(){var e=g(a.a.createElement("textarea"));e.addClass("textarea-resizable-shadow"),e.prop({disabled:!0,readonly:!0}),Ze.textareaResizableShadow=e},textareaResizableShadow:void 0,resizeTextarea(e){var t=g(e);Ze.textareaResizableShadow||Ze.createTextareaResizableShadow();var r=Ze.textareaResizableShadow;if(t.length&&t.hasClass("resizable")){0===Ze.textareaResizableShadow.parents().length&&this.root.append(r);var i=a.b.getComputedStyle(t[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach(e=>{var t=i[e];"font-size line-height letter-spacing width".split(" ").indexOf(e)>=0&&(t=t.replace(",",".")),r.css(e,t)});var n=t[0].clientHeight;r.val("");var s=r[0].scrollHeight;r.val(t.val()),r.css("height",0);var o=r[0].scrollHeight;n!==o&&(o>s?t.css("height","".concat(o,"px")):o<n&&t.css("height",""),(o>s||o<n)&&(t.trigger("textarea:resize",{initialHeight:s,currentHeight:n,scrollHeight:o}),this.emit("textareaResize",{initialHeight:s,currentHeight:n,scrollHeight:o})))}},validate(e){var t=g(e);if(!t.length)return!0;var r=t.parents(".item-input"),i=t.parents(".input");function n(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}t[0].f7ValidateReadonly&&(t[0].readOnly=!1);var a=t[0].validity,s=t.dataset().errorMessage||t[0].validationMessage||"";if(!a)return n(),!0;if(!a.valid){var o=t.nextAll(".item-input-error-message, .input-error-message");return s&&(0===o.length&&(o=g('<div class="'.concat(i.length?"input-error-message":"item-input-error-message",'"></div>'))).insertAfter(t),o.text(s)),o.length>0&&(r.addClass("item-input-with-error-message"),i.addClass("input-with-error-message")),r.addClass("item-input-invalid"),i.addClass("input-invalid"),t.addClass("input-invalid"),n(),!1}return r.removeClass("item-input-invalid item-input-with-error-message"),i.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),n(),!0},validateInputs(e){var t=this;return g(e).find("input, textarea, select").toArray().map(e=>t.input.validate(e)).indexOf(!1)<0},focus(e){var t=g(e),r=t.attr("type");Ze.ignoreTypes.indexOf(r)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur(e){var t=g(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState(e){var t=g(e);if(t.is("input, select, textarea, .item-input [contenteditable]")||(t=t.find("input, select, textarea, .item-input [contenteditable]").eq(0)),t.length){var r;r=t[0].hasAttribute("contenteditable")?t.find(".text-editor-placeholder").length?"":t.html():t.val();var i=t.parents(".item-input"),n=t.parents(".input");r&&"string"==typeof r&&""!==r.trim()||Array.isArray(r)&&r.length>0?(i.addClass("item-input-with-value"),n.addClass("input-with-value"),t.addClass("input-with-value"),t.trigger("input:notempty"),this.emit("inputNotEmpty",t[0])):(i.removeClass("item-input-with-value"),n.removeClass("input-with-value"),t.removeClass("input-with-value"),t.trigger("input:empty"),this.emit("inputEmpty",t[0]))}},scrollIntoView(e,t=0,r,i){var n=g(e),a=n.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!a.length)return!1;var s=a[0].offsetHeight,o=a[0].scrollTop,l=parseInt(a.css("padding-top"),10),c=parseInt(a.css("padding-bottom"),10),h=a.offset().top-o,u=n.offset().top-h,d=u+o-l,p=u+o-s+c+n[0].offsetHeight,f=d+(p-d)/2;return o>d?(a.scrollTop(r?f:d,t),!0):o<p?(a.scrollTop(r?f:p,t),!0):(i&&a.scrollTop(r?f:p,t),!1)},init(){var e=this;Ze.createTextareaResizableShadow(),g(a.a).on("click",".input-clear-button",(function(){var t=g(this).siblings("input, textarea").eq(0),r=t.val();t.val("").trigger("input change").focus().trigger("input:clear",r),e.emit("inputClear",r)})),g(a.a).on("mousedown",".input-clear-button",(function(e){e.preventDefault()})),g(a.a).on("change input","input, textarea, select, .item-input [contenteditable]",(function(){var t=g(this),r=t.attr("type"),i=t[0].nodeName.toLowerCase(),n=t[0].hasAttribute("contenteditable");Ze.ignoreTypes.indexOf(r)>=0||(e.input.checkEmptyState(t),n||(null!==t.attr("data-validate-on-blur")||!t.dataset().validate&&null===t.attr("validate")||e.input.validate(t),"textarea"===i&&t.hasClass("resizable")&&e.input.resizeTextarea(t)))}),!0),g(a.a).on("focus","input, textarea, select, .item-input [contenteditable]",(function(){var t=this;e.params.input.scrollIntoViewOnFocus&&(S.a.android?g(a.b).once("resize",()=>{a.a&&a.a.activeElement===t&&e.input.scrollIntoView(t,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)}):e.input.scrollIntoView(t,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(t)}),!0),g(a.a).on("blur","input, textarea, select, .item-input [contenteditable]",(function(){var t=g(this),r=t[0].nodeName.toLowerCase();e.input.blur(t),(t.dataset().validate||null!==t.attr("validate")||null!==t.attr("data-validate-on-blur"))&&e.input.validate(t),"textarea"===r&&t.hasClass("resizable")&&Ze.textareaResizableShadow&&Ze.textareaResizableShadow.remove()}),!0),g(a.a).on("invalid","input, textarea, select",(function(t){var r=g(this);null!==r.attr("data-validate-on-blur")||!r.dataset().validate&&null===r.attr("validate")||(t.preventDefault(),e.input.validate(r))}),!0)}};S.a.android;var Qe=class extends T{constructor(e,t={}){super(t,[e]);var r=this,i=x.extend({on:{}},e.params.smartSelect);void 0===i.searchbarDisableButton&&(i.searchbarDisableButton="aurora"!==e.theme),r.useModulesParams(i),r.params=x.extend({},i,t),r.app=e;var n=g(r.params.el).eq(0);if(0===n.length)return r;if(n[0].f7SmartSelect)return n[0].f7SmartSelect;var a,s=n.find("select").eq(0);if(0===s.length)return r;r.params.setValueText&&(0===(a=g(r.params.valueEl)).length&&(a=n.find(".item-after")),0===a.length&&(a=g('<div class="item-after"></div>')).insertAfter(n.find(".item-title")));var o=t.url;o||(n.attr("href")&&"#"!==n.attr("href")?o=n.attr("href"):s.attr("name")&&(o="".concat(s.attr("name").toLowerCase(),"-select/"))),o||(o=r.params.url);var l=s[0].multiple,c=l?"checkbox":"radio",h=x.id();function u(){r.open()}function d(){var e=r.$selectEl.val();r.$el.trigger("smartselect:change",e),r.emit("local::change smartSelectChange",r,e),r.vl&&r.vl.clearCache(),r.setValueText()}function p(){var e,t,i,n=this.value,a=[];if("checkbox"===this.type){for(var s=0;s<r.selectEl.options.length;s+=1)(e=r.selectEl.options[s]).value===n&&(e.selected=this.checked),e.selected&&(t=(i=e.dataset?e.dataset.displayAs:g(e).data("display-value-as"))&&void 0!==i?i:e.textContent,a.push(t.trim()));r.maxLength&&r.checkMaxLength()}else(e=r.$selectEl.find('option[value="'.concat(n,'"]'))[0])||(e=r.$selectEl.find("option").filter((e,t)=>t.value===n)[0]),a=[t=(i=e.dataset?e.dataset.displayAs:g(e).data("display-as"))&&void 0!==i?i:e.textContent],r.selectEl.value=n;r.$selectEl.trigger("change"),r.params.setValueText&&r.$valueEl.text(r.formatValueText(a)),r.params.closeOnSelect&&"radio"===r.inputType&&r.close()}return x.extend(r,{$el:n,el:n[0],$selectEl:s,selectEl:s[0],$valueEl:a,valueEl:a&&a[0],url:o,multiple:l,inputType:c,id:h,inputName:"".concat(c,"-").concat(h),selectName:s.attr("name"),maxLength:s.attr("maxlength")||t.maxLength}),n[0].f7SmartSelect=r,r.attachEvents=function(){n.on("click",u),n.on("change","select",d)},r.detachEvents=function(){n.off("click",u),n.off("change","select",d)},r.attachInputsEvents=function(){r.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',p)},r.detachInputsEvents=function(){r.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',p)},r.useModules(),r.init(),r}setValue(e){var t,r,i,n=this,a=e,s=[];if(n.multiple){Array.isArray(a)||(a=[a]);for(var o=0;o<n.selectEl.options.length;o+=1)t=n.selectEl.options[o],a.indexOf(t.value)>=0?t.selected=!0:t.selected=!1,t.selected&&(i=(r=t.dataset?t.dataset.displayAs:g(t).data("display-value-as"))&&void 0!==r?r:t.textContent,s.push(i.trim()))}else(t=n.$selectEl.find('option[value="'.concat(a,'"]'))[0])&&(s=[i=(r=t.dataset?t.dataset.displayAs:g(t).data("display-as"))&&void 0!==r?r:t.textContent]),n.selectEl.value=a;return n.params.setValueText&&n.$valueEl.text(n.formatValueText(s)),n.$selectEl.trigger("change"),n}unsetValue(){var e=this;e.params.setValueText&&e.$valueEl.text(e.formatValueText([])),e.$selectEl.find("option").each((e,t)=>{t.selected=!1,t.checked=!1}),e.$selectEl[0].value=null,e.$containerEl&&e.$containerEl.find('input[name="'.concat(e.inputName,'"][type="checkbox"], input[name="').concat(e.inputName,'"][type="radio"]')).prop("checked",!1),e.$selectEl.trigger("change")}getValue(){return this.$selectEl.val()}get view(){var e,{params:t,$el:r}=this;if(t.view&&(e=t.view),e||(e=r.parents(".view").length&&r.parents(".view")[0].f7View),!e&&"page"===t.openIn)throw Error("Smart Select requires initialized View");return e}checkMaxLength(){var e=this.$containerEl;this.selectEl.selectedOptions.length>=this.maxLength?e.find('input[type="checkbox"]').each((e,t)=>{t.checked?g(t).parents("li").removeClass("disabled"):g(t).parents("li").addClass("disabled")}):e.find(".disabled").removeClass("disabled")}formatValueText(e){return this.params.formatValueText?this.params.formatValueText.call(this,e,this):e.join(", ")}setValueText(e){var t=[];void 0!==e?t=Array.isArray(e)?e:[e]:this.$selectEl.find("option").each((e,r)=>{var i=g(r);if(r.selected){var n=r.dataset?r.dataset.displayAs:i.data("display-value-as");n&&void 0!==n?t.push(n):t.push(r.textContent.trim())}}),this.params.setValueText&&this.$valueEl.text(this.formatValueText(t))}getItemsData(){var e,t=this,r=t.app.theme,i=[];return t.$selectEl.find("option").each((n,a)=>{var s=g(a),o=s.dataset(),l=o.optionImage||t.params.optionImage,c=o.optionIcon||t.params.optionIcon,h="ios"===r&&(o.optionIconIos||t.params.optionIconIos),u="md"===r&&(o.optionIconMd||t.params.optionIconMd),d="aurora"===r&&(o.optionIconAurora||t.params.optionIconAurora),p=l||c||h||u||d,f=o.optionColor,v=o.optionClass||"";s[0].disabled&&(v+=" disabled");var m=s.parent("optgroup")[0],b=m&&m.label,y=!1;m&&m!==e&&(y=!0,e=m,i.push({groupLabel:b,isLabel:y})),i.push({value:s[0].value,text:s[0].textContent.trim(),selected:s[0].selected,groupEl:m,groupLabel:b,image:l,icon:c,iconIos:h,iconMd:u,iconAurora:d,color:f,className:v,disabled:s[0].disabled,id:t.id,hasMedia:p,checkbox:"checkbox"===t.inputType,radio:"radio"===t.inputType,inputName:t.inputName,inputType:t.inputType})}),t.items=i,i}renderSearchbar(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):'\n      <form class="searchbar">\n        <div class="searchbar-inner">\n          <div class="searchbar-input-wrap">\n            <input type="search" spellcheck="'.concat(e.params.searchbarSpellcheck||"false",'" placeholder="').concat(e.params.searchbarPlaceholder,'"/>\n            <i class="searchbar-icon"></i>\n            <span class="input-clear-button"></span>\n          </div>\n          ').concat(e.params.searchbarDisableButton?'\n          <span class="searchbar-disable-button">'.concat(e.params.searchbarDisableText,"</span>\n          "):"","\n        </div>\n      </form>\n    ")}renderItem(e,t){var r,i=this;if(i.params.renderItem)return i.params.renderItem.call(i,e,t);if(e.isLabel)r='<li class="item-divider">'.concat(e.groupLabel,"</li>");else{var n,a=e.selected;if(i.params.virtualList){var s=i.getValue();a=i.multiple?s.indexOf(e.value)>=0:s===e.value,i.multiple&&(n=i.multiple&&!a&&s.length===parseInt(i.maxLength,10))}var{icon:o,iconIos:l,iconMd:c,iconAurora:h}=e,u=o||l||c||h,d=function(e=""){return e.indexOf(":")>=0?e.split(":")[1]:""}(o||l||c||h||""),p=function(e=""){if(e.indexOf(":")>=0){var t=e.split(":")[0];return"f7"===t&&(t="f7-icons"),"material"===t&&(t="material-icons"),t}return e}(o||l||c||h||"");r='\n        <li class="'.concat(e.className||"").concat(n?" disabled":"",'">\n          <label class="item-').concat(e.inputType,' item-content">\n            <input type="').concat(e.inputType,'" name="').concat(e.inputName,'" value="').concat(e.value,'" ').concat(a?"checked":"",'/>\n            <i class="icon icon-').concat(e.inputType,'"></i>\n            ').concat(e.hasMedia?'\n              <div class="item-media">\n                '.concat(u?'<i class="icon '.concat(p,'">').concat(d,"</i>"):"","\n                ").concat(e.image?'<img src="'.concat(e.image,'">'):"","\n              </div>\n            "):"",'\n            <div class="item-inner">\n              <div class="item-title').concat(e.color?" text-color-".concat(e.color):"",'">').concat(e.text,"</div>\n            </div>\n          </label>\n        </li>\n      ")}return r}renderItems(){var e=this;return e.params.renderItems?e.params.renderItems.call(e,e.items):"\n      ".concat(e.items.map((t,r)=>"".concat(e.renderItem(t,r))).join(""),"\n    ")}renderPage(){var e=this;if(e.params.renderPage)return e.params.renderPage.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var r=e.$el.find(".item-title");t=r.length?r.text().trim():""}var i=e.params.cssClass;return'\n      <div class="page smart-select-page '.concat(i,'" data-name="smart-select-page" data-select-name="').concat(e.selectName,'">\n        <div class="navbar ').concat(e.params.navbarColorTheme?"color-".concat(e.params.navbarColorTheme):"",'">\n          <div class="navbar-bg"></div>\n          <div class="navbar-inner sliding ').concat(e.params.navbarColorTheme?"color-".concat(e.params.navbarColorTheme):"",'">\n            <div class="left">\n              <a class="link back">\n                <i class="icon icon-back"></i>\n                <span class="if-not-md">').concat(e.params.pageBackLinkText,"</span>\n              </a>\n            </div>\n            ").concat(t?'<div class="title">'.concat(t,"</div>"):"","\n            ").concat(e.params.searchbar?'<div class="subnavbar">'.concat(e.renderSearchbar(),"</div>"):"","\n          </div>\n        </div>\n        ").concat(e.params.searchbar?'<div class="searchbar-backdrop"></div>':"",'\n        <div class="page-content">\n          <div class="list smart-select-list-').concat(e.id," ").concat(e.params.virtualList?" virtual-list":""," ").concat(e.params.formColorTheme?"color-".concat(e.params.formColorTheme):"",'">\n            <ul>').concat(!e.params.virtualList&&e.renderItems(e.items),"</ul>\n          </div>\n        </div>\n      </div>\n    ")}renderPopup(){var e=this;if(e.params.renderPopup)return e.params.renderPopup.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var r=e.$el.find(".item-title");t=r.length?r.text().trim():""}var i=e.params.cssClass||"";return'\n      <div class="popup smart-select-popup '.concat(i," ").concat(e.params.popupTabletFullscreen?"popup-tablet-fullscreen":"",'" data-select-name="').concat(e.selectName,'">\n        <div class="view">\n          <div class="page smart-select-page ').concat(e.params.searchbar?"page-with-subnavbar":"",'" data-name="smart-select-page">\n            <div class="navbar ').concat(e.params.navbarColorTheme?"color-".concat(e.params.navbarColorTheme):"",'">\n              <div class="navbar-bg"></div>\n              <div class="navbar-inner sliding">\n                ').concat(t?'<div class="title">'.concat(t,"</div>"):"",'\n                <div class="right">\n                  <a class="link popup-close" data-popup=".smart-select-popup[data-select-name=\'').concat(e.selectName,"']\">").concat(e.params.popupCloseLinkText,"</span></a>\n                </div>\n                ").concat(e.params.searchbar?'<div class="subnavbar">'.concat(e.renderSearchbar(),"</div>"):"","\n              </div>\n            </div>\n            ").concat(e.params.searchbar?'<div class="searchbar-backdrop"></div>':"",'\n            <div class="page-content">\n              <div class="list smart-select-list-').concat(e.id," ").concat(e.params.virtualList?" virtual-list":""," ").concat(e.params.formColorTheme?"color-".concat(e.params.formColorTheme):"",'">\n                <ul>').concat(!e.params.virtualList&&e.renderItems(e.items),"</ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")}renderSheet(){var e=this;if(e.params.renderSheet)return e.params.renderSheet.call(e,e.items);var t=e.params.cssClass;return'\n      <div class="sheet-modal smart-select-sheet '.concat(t,'" data-select-name="').concat(e.selectName,'">\n        <div class="toolbar toolbar-top ').concat(e.params.toolbarColorTheme?"color-".concat(e.params.toolbarColorTheme):"",'">\n          <div class="toolbar-inner">\n            <div class="left"></div>\n            <div class="right">\n              <a class="link sheet-close">').concat(e.params.sheetCloseLinkText,'</a>\n            </div>\n          </div>\n        </div>\n        <div class="sheet-modal-inner">\n          <div class="page-content">\n            <div class="list smart-select-list-').concat(e.id," ").concat(e.params.virtualList?" virtual-list":""," ").concat(e.params.formColorTheme?"color-".concat(e.params.formColorTheme):"",'">\n              <ul>').concat(!e.params.virtualList&&e.renderItems(e.items),"</ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")}renderPopover(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e.items);var t=e.params.cssClass;return'\n      <div class="popover smart-select-popover '.concat(t,'" data-select-name="').concat(e.selectName,'">\n        <div class="popover-inner">\n          <div class="list smart-select-list-').concat(e.id," ").concat(e.params.virtualList?" virtual-list":""," ").concat(e.params.formColorTheme?"color-".concat(e.params.formColorTheme):"",'">\n            <ul>').concat(!e.params.virtualList&&e.renderItems(e.items),"</ul>\n          </div>\n        </div>\n      </div>\n    ")}scrollToSelectedItem(){var e=this,{params:t,$containerEl:r}=e;if(!e.opened)return e;if(t.virtualList){var i;e.vl.items.forEach((e,t)=>{void 0===i&&e.selected&&(i=t)}),void 0!==i&&e.vl.scrollToItem(i)}else{var n=r.find("input:checked").parents("li");if(!n.length)return e;var a=r.find(".page-content");a.scrollTop(n.offset().top-a.offset().top-parseInt(a.css("padding-top"),10))}return e}onOpen(e,t){var r=this,i=r.app,n=g(t);if(r.$containerEl=n,r.openedIn=e,r.opened=!0,r.params.virtualList&&(r.vl=i.virtualList.create({el:n.find(".virtual-list"),items:r.items,renderItem:r.renderItem.bind(r),height:r.params.virtualListHeight,searchByItem:(e,t)=>!!(t.text&&t.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0)})),r.params.scrollToSelectedItem&&r.scrollToSelectedItem(),r.params.searchbar){var a=n.find(".searchbar");if("page"===e&&"ios"===i.theme&&(a=g(i.navbar.getElByPage(n)).find(".searchbar")),r.params.appendSearchbarNotFound&&("page"===e||"popup"===e)){var s=null;(s="string"==typeof r.params.appendSearchbarNotFound?g('<div class="block searchbar-not-found">'.concat(r.params.appendSearchbarNotFound,"</div>")):"boolean"==typeof r.params.appendSearchbarNotFound?g('<div class="block searchbar-not-found">Nothing found</div>'):r.params.appendSearchbarNotFound)&&n.find(".page-content").append(s[0])}var o=x.extend({el:a,backdropEl:n.find(".searchbar-backdrop"),searchContainer:".smart-select-list-".concat(r.id),searchIn:".item-title"},"object"==typeof r.params.searchbar?r.params.searchbar:{});r.searchbar=i.searchbar.create(o)}r.maxLength&&r.checkMaxLength(),r.params.closeOnSelect&&r.$containerEl.find('input[type="radio"][name="'.concat(r.inputName,'"]:checked')).parents("label").once("click",()=>{r.close()}),r.attachInputsEvents(),r.$el.trigger("smartselect:open"),r.emit("local::open smartSelectOpen",r)}onOpened(){this.$el.trigger("smartselect:opened"),this.emit("local::opened smartSelectOpened",this)}onClose(){var e=this;e.destroyed||(e.vl&&e.vl.destroy&&(e.vl.destroy(),e.vl=null,delete e.vl),e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),e.detachInputsEvents(),e.$el.trigger("smartselect:close"),e.emit("local::close smartSelectClose",e))}onClosed(){var e=this;e.destroyed||(e.opened=!1,e.$containerEl=null,delete e.$containerEl,e.$el.trigger("smartselect:closed"),e.emit("local::closed smartSelectClosed",e))}openPage(){var e=this;if(e.opened)return e;e.getItemsData();var t=e.renderPage(e.items);return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn(t,r){e.onOpen("page",r.el)},pageAfterIn(t,r){e.onOpened("page",r.el)},pageBeforeOut(t,r){e.onClose("page",r.el)},pageAfterOut(t,r){e.onClosed("page",r.el)}}}}),e}openPopup(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopup(e.items),push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen(t){e.onOpen("popup",t.el)},popupOpened(t){e.onOpened("popup",t.el)},popupClose(t){e.onClose("popup",t.el)},popupClosed(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e}openSheet(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderSheet(e.items),backdrop:!1,scrollToEl:e.$el,closeByOutsideClick:!0,push:e.params.sheetPush,swipeToClose:e.params.sheetSwipeToClose,on:{sheetOpen(t){e.onOpen("sheet",t.el)},sheetOpened(t){e.onOpened("sheet",t.el)},sheetClose(t){e.onClose("sheet",t.el)},sheetClosed(t){e.onClosed("sheet",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,sheet:t}}):e.modal=e.app.sheet.create(t).open(),e}openPopover(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopover(e.items),targetEl:e.$el,on:{popoverOpen(t){e.onOpen("popover",t.el)},popoverOpened(t){e.onOpened("popover",t.el)},popoverClose(t){e.onClose("popover",t.el)},popoverClosed(t){e.onClosed("popover",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popover:t}}):e.modal=e.app.popover.create(t).open(),e}open(e){var t=this;if(t.opened)return t;var r=!1;function i(){r=!0}if(t.$el&&t.$el.trigger("smartselect:beforeopen",{prevent:i}),t.emit("local::beforeOpen smartSelectBeforeOpen",t,i),r)return t;var n=e||t.params.openIn;return t["open".concat(n.split("").map((e,t)=>0===t?e.toUpperCase():e).join(""))](),t}close(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",()=>{x.nextTick(()=>{e.destroyed||(e.modal.destroy(),delete e.modal)})}),e.modal.close()),e):e}init(){this.attachEvents(),this.setValueText()}destroy(){var e=this;e.emit("local::beforeDestroy smartSelectBeforeDestroy",e),e.$el.trigger("smartselect:beforedestroy"),e.detachEvents(),delete e.$el[0].f7SmartSelect,x.deleteProps(e),e.destroyed=!0}},et={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!0,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:Qe},create(){var e=this;e.smartSelect=x.extend(O({defaultSelector:".smart-select",constructor:Qe,app:e,domProp:"f7SmartSelect"}),{open(t){var r=e.smartSelect.get(t);if(r&&r.open)return r.open()},close(t){var r=e.smartSelect.get(t);if(r&&r.close)return r.close()}})},on:{tabMounted(e){var t=this;g(e).find(".smart-select-init").each((e,r)=>{t.smartSelect.create(x.extend({el:r},g(r).dataset()))})},tabBeforeRemove(e){g(e).find(".smart-select-init").each((e,t)=>{t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()})},pageInit(e){var t=this;e.$el.find(".smart-select-init").each((e,r)=>{t.smartSelect.create(x.extend({el:r},g(r).dataset()))})},pageBeforeRemove(e){e.$el.find(".smart-select-init").each((e,t)=>{t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()})}},clicks:{".smart-select":function(e,t){e[0].f7SmartSelect||this.smartSelect.create(x.extend({el:e},t)).open()}},vnode:{"smart-select-init":{insert(e){var t=e.elm;this.smartSelect.create(x.extend({el:t},g(t).dataset()))},destroy(e){var t=e.elm;t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()}}}},tt={destroy(e){var t=g(e).closest(".page");t.length&&t[0].f7LazyDestroy&&t[0].f7LazyDestroy()},create(e){var t=this,r=g(e).closest(".page").eq(0),i=r.find(".lazy");if(0!==i.length||r.hasClass("lazy")){var n=t.params.lazy.placeholder;!1!==n&&i.each((e,t)=>{g(t).attr("data-src")&&!g(t).attr("src")&&g(t).attr("src",n)});var s=[],o=!1;if(t.params.lazy.observer&&U.a.intersectionObserver){var l=r[0].f7LazyObserver;return l||(l=new a.b.IntersectionObserver((function(e,r){e.forEach(e=>{if(e.isIntersecting){if(t.params.lazy.sequential&&o)return void(s.indexOf(e.target)<0&&s.push(e.target));o=!0,t.lazy.loadImage(e.target,c),r.unobserve(e.target)}})}),{root:r[0]})),i.each((e,t)=>{t.f7LazyObserverAdded||(t.f7LazyObserverAdded=!0,l.observe(t))}),void(r[0].f7LazyDestroy||(r[0].f7LazyDestroy=()=>{l.disconnect(),delete r[0].f7LazyDestroy,delete r[0].f7LazyObserver}))}r[0].f7LazyDestroy||(r[0].f7LazyDestroy=function(){r[0].f7LazyAttached=!1,delete r[0].f7LazyAttached,r.off("lazy",h),r.off("scroll",h,!0),r.find(".tab").off("tab:mounted tab:show",h),t.off("resize",h)}),r[0].f7LazyAttached||(r[0].f7LazyAttached=!0,r.on("lazy",h),r.on("scroll",h,!0),r.find(".tab").on("tab:mounted tab:show",h),t.on("resize",h)),h()}function c(e){s.indexOf(e)>=0&&s.splice(s.indexOf(e),1),o=!1,t.params.lazy.sequential&&s.length>0&&(o=!0,t.lazy.loadImage(s[0],c))}function h(){t.lazy.load(r,e=>{t.params.lazy.sequential&&o?s.indexOf(e)<0&&s.push(e):(o=!0,t.lazy.loadImage(e,c))})}},isInViewport(e){var t=e.getBoundingClientRect(),r=this.params.lazy.threshold||0;return t.top>=0-r&&t.left>=0-r&&t.top<=this.height+r&&t.left<=this.width+r},loadImage(e,t){var r=this,i=g(e),n=i.attr("data-background"),s=n||i.attr("data-src");function o(){i.removeClass("lazy").addClass("lazy-loaded"),n?i.css("background-image","url(".concat(s,")")):s&&i.attr("src",s),t&&t(e),i.trigger("lazy:loaded"),r.emit("lazyLoaded",i[0])}if(!s)return i.trigger("lazy:load"),r.emit("lazyLoad",i[0]),void o();var l=new a.b.Image;l.onload=o,l.onerror=function(){i.removeClass("lazy").addClass("lazy-loaded"),n?i.css("background-image","url(".concat(r.params.lazy.placeholder||"",")")):i.attr("src",r.params.lazy.placeholder||""),t&&t(e),i.trigger("lazy:error"),r.emit("lazyError",i[0])},l.src=s,i.removeAttr("data-src").removeAttr("data-background"),i.trigger("lazy:load"),r.emit("lazyLoad",i[0])},load(e,t){var r=this,i=g(e);i.hasClass("page")||(i=i.parents(".page").eq(0)),0!==i.length&&i.find(".lazy").each((e,i)=>{g(i).parents(".tab:not(.tab-active)").length>0||r.lazy.isInViewport(i)&&(t?t(i):r.lazy.loadImage(i))})}},rt={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create(){x.extend(this,{lazy:{create:tt.create.bind(this),destroy:tt.destroy.bind(this),loadImage:tt.loadImage.bind(this),load:tt.load.bind(this),isInViewport:tt.isInViewport.bind(this)}})},on:{pageInit(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageAfterIn(e){this.params.lazy.observer&&U.a.intersectionObserver||(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageBeforeRemove(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.destroy(e.$el)},tabMounted(e){var t=g(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.create(t)},tabBeforeRemove(e){if(!this.params.lazy.observer||!U.a.intersectionObserver){var t=g(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.destroy(t)}}}};var it=class extends T{constructor(e,t={}){super(t,[e]);var r=this,i={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};r.useModulesParams(i),r.params=x.extend(i,t);var n,a=g(r.params.el);if(0===a.length)return r;if(a[0].f7Searchbar)return a[0].f7Searchbar;a[0].f7Searchbar=r;var s,o,l,c,h=a.parents(".navbar");if(a.parents(".page").length>0)n=a.parents(".page");else if(h.length>0&&!(n=g(e.navbar.getPageByEl(h[0]))).length){var u=a.parents(".view").find(".page-current");u[0]&&u[0].f7Page&&u[0].f7Page.navbarEl===h[0]&&(n=u)}t.foundEl?s=g(t.foundEl):"string"==typeof r.params.foundEl&&n&&(s=n.find(r.params.foundEl)),t.notFoundEl?o=g(t.notFoundEl):"string"==typeof r.params.notFoundEl&&n&&(o=n.find(r.params.notFoundEl)),t.hideOnEnableEl?l=g(t.hideOnEnableEl):"string"==typeof r.params.hideOnEnableEl&&n&&(l=n.find(r.params.hideOnEnableEl)),t.hideOnSearchEl?c=g(t.hideOnSearchEl):"string"==typeof r.params.hideOnSearchEl&&n&&(c=n.find(r.params.hideOnSearchEl));var d,p,f,v,m=r.params.expandable||a.hasClass("searchbar-expandable"),b=r.params.inline||a.hasClass("searchbar-inline");function y(e){e.preventDefault()}function w(e){r.enable(e),r.$el.addClass("searchbar-focused")}function C(){r.$el.removeClass("searchbar-focused"),"aurora"!==e.theme||v&&v.length&&r.params.disableButton||r.query||r.disable()}function _(){var e=r.$inputEl.val().trim();(r.$searchContainer&&r.$searchContainer.length>0&&(r.params.searchIn||r.isVirtualList||r.params.searchIn===r.params.searchItem)||r.params.customSearch)&&r.search(e,!0)}function S(e,t){r.$el.trigger("searchbar:clear",t),r.emit("local::clear searchbarClear",r,t)}function k(e){r.disable(e)}function T(){!r||r&&!r.$el||r.enabled&&(r.$el.removeClass("searchbar-enabled"),r.expandable&&r.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function O(){!r||r&&!r.$el||r.enabled&&(r.$el.addClass("searchbar-enabled"),r.expandable&&r.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return void 0===r.params.backdrop&&(r.params.backdrop=!b&&"aurora"!==e.theme),r.params.backdrop&&0===(d=r.params.backdropEl?g(r.params.backdropEl):n&&n.length>0?n.find(".searchbar-backdrop"):a.siblings(".searchbar-backdrop")).length&&(d=g('<div class="searchbar-backdrop"></div>'),n&&n.length?a.parents(n).length>0&&h&&0===a.parents(h).length?d.insertBefore(a):d.insertBefore(n.find(".page-content").eq(0)):d.insertBefore(a)),r.params.searchContainer&&(p=g(r.params.searchContainer)),f=r.params.inputEl?g(r.params.inputEl):a.find('input[type="search"]').eq(0),r.params.disableButton&&(v=r.params.disableButtonEl?g(r.params.disableButtonEl):a.find(".searchbar-disable-button")),x.extend(r,{app:e,view:e.views.get(a.parents(".view")),$el:a,el:a[0],$backdropEl:d,backdropEl:d&&d[0],$searchContainer:p,searchContainer:p&&p[0],$inputEl:f,inputEl:f[0],$disableButtonEl:v,disableButtonEl:v&&v[0],disableButtonHasMargin:!1,$pageEl:n,pageEl:n&&n[0],$navbarEl:h,navbarEl:h&&h[0],$foundEl:s,foundEl:s&&s[0],$notFoundEl:o,notFoundEl:o&&o[0],$hideOnEnableEl:l,hideOnEnableEl:l&&l[0],$hideOnSearchEl:c,hideOnSearchEl:c&&c[0],previousQuery:"",query:"",isVirtualList:p&&p.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:m,inline:b}),r.attachEvents=function(){a.on("submit",y),r.params.disableButton&&r.$disableButtonEl.on("click",k),r.params.disableOnBackdropClick&&r.$backdropEl&&r.$backdropEl.on("click",k),r.expandable&&"ios"===e.theme&&r.view&&h.length&&r.$pageEl&&(r.$pageEl.on("page:beforeout",T),r.$pageEl.on("page:beforein",O)),r.$inputEl.on("focus",w),r.$inputEl.on("blur",C),r.$inputEl.on(r.params.inputEvents,_),r.$inputEl.on("input:clear",S)},r.detachEvents=function(){a.off("submit",y),r.params.disableButton&&r.$disableButtonEl.off("click",k),r.params.disableOnBackdropClick&&r.$backdropEl&&r.$backdropEl.off("click",k),r.expandable&&"ios"===e.theme&&r.view&&h.length&&r.$pageEl&&(r.$pageEl.off("page:beforeout",T),r.$pageEl.off("page:beforein",O)),r.$inputEl.off("focus",w),r.$inputEl.off("blur",C),r.$inputEl.off(r.params.inputEvents,_),r.$inputEl.off("input:clear",S)},r.useModules(),r.init(),r}clear(e){var t=this;if(!t.query&&e&&g(e.target).hasClass("searchbar-clear"))return t.disable(),t;var r=t.value;return t.$inputEl.val("").trigger("change").focus(),t.$el.trigger("searchbar:clear",r),t.emit("local::clear searchbarClear",t,r),t}setDisableButtonMargin(){var e=this;if(!e.expandable){var t=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-".concat(t.rtl?"left":"right"),"".concat(-e.disableButtonEl.offsetWidth,"px")),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}}enable(e){var t=this;if(t.enabled)return t;var r=t.app;function i(){if(t.$backdropEl&&(t.$searchContainer&&t.$searchContainer.length||t.params.customSearch)&&!t.$el.hasClass("searchbar-enabled")&&!t.query&&t.backdropShow(),t.$el.addClass("searchbar-enabled"),(!t.$disableButtonEl||t.$disableButtonEl&&0===t.$disableButtonEl.length)&&t.$el.addClass("searchbar-enabled-no-disable-button"),!t.expandable&&t.$disableButtonEl&&t.$disableButtonEl.length>0&&"md"!==r.theme&&(t.disableButtonHasMargin||t.setDisableButtonMargin(),t.$disableButtonEl.css("margin-".concat(r.rtl?"left":"right"),"0px")),t.expandable){var e=t.$el.parents(".navbar");if(e.hasClass("navbar-large")&&t.$pageEl){var i=t.$pageEl.find(".page-content"),n=e.find(".title-large");i.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.hasClass("navbar-large-collapsed")&&n.length&&i.length&&(i.transition(0),i[0].scrollTop-=n[0].offsetHeight,setTimeout(()=>{i.transition("")},200))}"md"===r.theme&&e.length?e.addClass("with-searchbar-expandable-enabled"):(e.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.addClass("navbar-large-collapsed"))}t.$hideOnEnableEl&&t.$hideOnEnableEl.addClass("hidden-by-searchbar"),t.$el.trigger("searchbar:enable"),t.emit("local::enable searchbarEnable",t)}t.enabled=!0;var n=!1;return!0===e&&a.a.activeElement!==t.inputEl&&(n=!0),r.device.ios&&"ios"===r.theme?t.expandable?(n&&t.$inputEl.focus(),i()):(n&&t.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?i():x.nextTick(()=>{i()},400)):(n&&t.$inputEl.focus(),"md"===r.theme&&t.expandable&&t.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(r.rtl?100:0),i()),t}disable(){var e=this;if(!e.enabled)return e;var t=e.app;if(e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable){var r=e.$el.parents(".navbar"),i=e.$pageEl&&e.$pageEl.find(".page-content");if(r.hasClass("navbar-large")&&i.length){var n=r.find(".title-large");if(e.$el.transitionEnd(()=>{i.removeClass("with-searchbar-expandable-closing")}),r.hasClass("navbar-large")&&r.hasClass("navbar-large-collapsed")&&n.length){var a=i[0].scrollTop,s=n[0].offsetHeight;a>s&&(i.transition(0),i[0].scrollTop=a+s,setTimeout(()=>{i.transition("")},200))}i.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}"md"===t.theme&&r.length?(r.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd(()=>{r.removeClass("with-searchbar-expandable-closing")})):(r.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd(()=>{r.removeClass("with-searchbar-expandable-closing")}),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))}return!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"md"!==t.theme&&e.$disableButtonEl.css("margin-".concat(t.rtl?"left":"right"),"".concat(-e.disableButtonEl.offsetWidth,"px")),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e}toggle(){return this.enabled?this.disable():this.enable(!0),this}backdropShow(){return this.$backdropEl&&this.$backdropEl.addClass("searchbar-backdrop-in"),this}backdropHide(){return this.$backdropEl&&this.$backdropEl.removeClass("searchbar-backdrop-in"),this}search(e,t){var r=this;if(r.previousQuery=r.query||"",e===r.previousQuery)return r;t||(r.enabled||r.enable(),r.$inputEl.val(e),r.$inputEl.trigger("input")),r.query=e,r.value=e;var{$searchContainer:i,$el:n,$foundEl:a,$notFoundEl:s,$hideOnSearchEl:o,isVirtualList:l}=r;if(e.length>0&&o?o.addClass("hidden-by-searchbar"):o&&o.removeClass("hidden-by-searchbar"),(i&&i.length&&n.hasClass("searchbar-enabled")||r.params.customSearch&&n.hasClass("searchbar-enabled"))&&(0===e.length?r.backdropShow():r.backdropHide()),r.params.customSearch)return n.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery}),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;var c,h=[];if(l){if(r.virtualList=i[0].f7VirtualList,""===e.trim())return r.virtualList.resetFilter(),s&&s.hide(),a&&a.show(),n.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery}),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;if(c=r.params.removeDiacritics?x.removeDiacritics(e):e,r.virtualList.params.searchAll)h=r.virtualList.params.searchAll(c,r.virtualList.items)||[];else if(r.virtualList.params.searchByItem)for(var u=0;u<r.virtualList.items.length;u+=1)r.virtualList.params.searchByItem(c,r.virtualList.params.items[u],u)&&h.push(u)}else{var d;d=r.params.removeDiacritics?x.removeDiacritics(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),i.find(r.params.searchItem).removeClass("hidden-by-searchbar").each((e,t)=>{var i=g(t),n=[],a=r.params.searchIn?i.find(r.params.searchIn):i;r.params.searchIn===r.params.searchItem&&(a=i),a.each((e,t)=>{var i=g(t).text().trim().toLowerCase();r.params.removeDiacritics&&(i=x.removeDiacritics(i)),n.push(i)}),n=n.join(" ");for(var s=0,o=0;o<d.length;o+=1)n.indexOf(d[o])>=0&&(s+=1);s===d.length||r.params.ignore&&i.is(r.params.ignore)?h.push(i[0]):i.addClass("hidden-by-searchbar")}),r.params.hideDividers&&i.find(r.params.searchGroupTitle).each((e,t)=>{for(var i=g(t),n=i.nextAll(r.params.searchItem),a=!0,s=0;s<n.length;s+=1){var o=n.eq(s);if(o.is(r.params.searchGroupTitle))break;o.hasClass("hidden-by-searchbar")||(a=!1)}var l=r.params.ignore&&i.is(r.params.ignore);a&&!l?i.addClass("hidden-by-searchbar"):i.removeClass("hidden-by-searchbar")}),r.params.hideGroups&&i.find(r.params.searchGroup).each((e,t)=>{var i=g(t),n=r.params.ignore&&i.is(r.params.ignore);0!==i.find(r.params.searchItem).filter((e,t)=>!g(t).hasClass("hidden-by-searchbar")).length||n?i.removeClass("hidden-by-searchbar"):i.addClass("hidden-by-searchbar")})}return 0===h.length?(s&&s.show(),a&&a.hide()):(s&&s.hide(),a&&a.show()),l&&r.virtualList&&r.virtualList.filterItems(h),n.trigger("searchbar:search",{query:e,previousQuery:r.previousQuery,foundItems:h}),r.emit("local::search searchbarSearch",r,e,r.previousQuery,h),r}init(){var e=this;e.expandable&&e.$el&&e.$el.addClass("searchbar-expandable"),e.inline&&e.$el&&e.$el.addClass("searchbar-inline"),e.attachEvents()}destroy(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),x.deleteProps(e)}},nt={name:"searchbar",static:{Searchbar:it},create(){this.searchbar=O({defaultSelector:".searchbar",constructor:it,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted(e){var t=this;g(e).find(".searchbar-init").each((e,r)=>{var i=g(r);t.searchbar.create(x.extend(i.dataset(),{el:r}))})},tabBeforeRemove(e){g(e).find(".searchbar-init").each((e,t)=>{t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()})},pageInit(e){var t=this;e.$el.find(".searchbar-init").each((e,r)=>{var i=g(r);t.searchbar.create(x.extend(i.dataset(),{el:r}))}),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((e,r)=>{var i=g(r);t.searchbar.create(x.extend(i.dataset(),{el:r}))})},pageBeforeRemove(e){e.$el.find(".searchbar-init").each((e,t)=>{t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((e,t)=>{t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()})}},clicks:{".searchbar-clear":function(e,t={}){var r=this.searchbar.get(t.searchbar);r&&r.clear()},".searchbar-enable":function(e,t={}){var r=this.searchbar.get(t.searchbar);r&&r.enable(!0)},".searchbar-disable":function(e,t={}){var r=this.searchbar.get(t.searchbar);r&&r.disable()},".searchbar-toggle":function(e,t={}){var r=this.searchbar.get(t.searchbar);r&&r.toggle()}},vnode:{"searchbar-init":{insert(e){var t=e.elm,r=g(t);this.searchbar.create(x.extend(r.dataset(),{el:t}))},destroy(e){var t=e.elm;t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}}}};Be.use([$e,ze,He,Ve,Xe,qe,Je,et,rt,nt]);var at=Be,st={text:e=>null==e?"":e,noUndefinedProps(e){var t={};return Object.keys(e).forEach(r=>{void 0!==e[r]&&(t[r]=e[r])}),t},isTrueProp:e=>!0===e||""===e,isStringProp:e=>"string"==typeof e&&""!==e,isObject:e=>"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object,now:()=>Date.now(),extend(...e){var t,r,i=!0;"boolean"==typeof e[0]?([i,t]=e,e.splice(0,2),r=e):([t]=e,e.splice(0,1),r=e);for(var n=0;n<r.length;n+=1){var a=e[n];if(null!=a)for(var s=Object.keys(Object(a)),o=0,l=s.length;o<l;o+=1){var c=s[o],h=Object.getOwnPropertyDescriptor(a,c);void 0!==h&&h.enumerable&&(i?st.isObject(t[c])&&st.isObject(a[c])?st.extend(t[c],a[c]):!st.isObject(t[c])&&st.isObject(a[c])?(t[c]={},st.extend(t[c],a[c])):t[c]=a[c]:t[c]=a[c])}}return t},flattenArray(...e){var t=[];return e.forEach(e=>{Array.isArray(e)?t.push(...st.flattenArray(...e)):t.push(e)}),t},classNames(...e){var t=[];e.forEach(e=>{"object"==typeof e&&e.constructor===Object?Object.keys(e).forEach(r=>{e[r]&&t.push(r)}):e&&t.push(e)});var r=[];return t.forEach(e=>{r.indexOf(e)<0&&r.push(e)}),r.join(" ")},bindMethods(e,t=[]){for(var r=0;r<t.length;r+=1)e[t[r]]&&(e[t[r]]=e[t[r]].bind(e))}},ot=st,lt={instance:null,Framework7:null,events:null,init(e,t={},r){var{events:i,Framework7:n}=lt,a=ot.extend({},t,{root:e});r&&r.length&&!a.routes&&(a.routes=r);var s=new n(a);s,s.initialized?(lt.instance=s,s,i.emit("ready",lt.instance)):s.on("init",()=>{lt.instance=s,s,i.emit("ready",lt.instance)})},ready(e){e&&(lt.instance?e(lt.instance):lt.events.once("ready",e))},routers:{views:[],tabs:[],modals:null}},ct=lt,ht=0,ut={proto:{pageComponentLoader(e,t,r,i,n,a){var s,o=e;if(ct.routers.views.forEach(t=>{t.el&&t.el===e&&(s=t)}),s){var l,c={component:t,id:"".concat(ot.now(),"_").concat(ht+=1),props:ot.extend({f7route:i.route,$f7route:i.route,f7router:this,$f7router:this},i.route.params,i.props||{})};s.component&&(s.component.$f7router=this,s.component.$f7route=i.route),ct.events.on("viewRouterDidUpdate",(function e(t){if(t===s&&!l){ct.events.off("viewRouterDidUpdate",e);var r=o.children[o.children.length-1];c.el=r,n(r),l=!0}})),s.pages.push(c),s.setPages(s.pages)}else a()},removePage(e){if(e){var t,r=this;if((t="length"in e&&e[0]?e[0].f7Page:e.f7Page)&&t.route&&t.route.route&&t.route.route.keepAlive)r.app.$(e).remove();else{var i,n,a;if(ct.routers.views.forEach(e=>{e.el&&e.el===r.el&&(i=e)}),"length"in e){if(0===e.length)return;n=e[0]}else n=e;if(n)i.pages.forEach((e,t)=>{e.el===n&&(a=!0,i.pages.splice(t,1),i.setPages(i.pages))}),a||n.parentNode.removeChild(n)}}},tabComponentLoader(e,t,r,i,n,a){var s;if(e||a(),ct.routers.tabs.forEach(t=>{t.el&&t.el===e&&(s=t)}),s){var o,l={id:"".concat(ot.now(),"_").concat(ht+=1),component:t,props:ot.extend({f7route:i.route,$f7route:i.route,f7router:this,$f7router:this},i.route.params,i.props||{})};s.component&&(s.component.$f7router=this,s.component.$f7route=i.route),ct.events.on("tabRouterDidUpdate",(function t(r){if(r===s&&!o){ct.events.off("tabRouterDidUpdate",t);var i=e.children[0];n(i),o=!0}})),s.setTabContent(l)}else a()},removeTabContent(e){if(e){var t;ct.routers.tabs.forEach(r=>{r.el&&r.el===e&&(t=r)});var r=t&&t.component;t&&r?t.setTabContent(null):e.innerHTML=""}},modalComponentLoader(e,t,r,i,n,a){var s=ct.routers.modals;if(s){var o,l={component:t,id:"".concat(ot.now(),"_").concat(ht+=1),props:ot.extend({f7route:i.route,$f7route:i.route,f7router:this,$f7router:this},i.route.params,i.props||{})};s.component&&(s.component.$f7router=this,s.component.$f7route=i.route),ct.events.on("modalsRouterDidUpdate",(function e(){if(!o){ct.events.off("modalsRouterDidUpdate",e);var t=s.el.children[s.el.children.length-1];l.el=t,n(t),o=!0}})),s.modals.push(l),s.setModals(s.modals)}else a()},removeModal(e){var t,r=ct.routers.modals;r&&(r.modals.forEach(r=>{r.el===e&&(t=r)}),r.modals.splice(r.modals.indexOf(t),1),r.setModals(r.modals))}}};function dt(e){ct.ready(e)}var pt={},ft={name:"phenomePlugin",installed:!1,install(e={}){if(!ft.installed){ft.installed=!0;ct.Framework7=this,ct.events=new this.Events;var t=e.Vue||i.a;Object.defineProperty(t.prototype,"$f7",{get:()=>ct.instance});var{theme:r}=e;"md"===r&&(pt.md=!0),"ios"===r&&(pt.ios=!0),"aurora"===r&&(pt.aurora=!0),r&&"auto"!==r||(pt.ios=!!this.device.ios,pt.aurora=this.device.desktop&&this.device.electron,pt.md=!pt.ios&&!pt.aurora),ct.ready(()=>{pt.ios="ios"===ct.instance.theme,pt.md="md"===ct.instance.theme,pt.aurora="aurora"===ct.instance.theme}),Object.defineProperty(t.prototype,"$theme",{get:()=>({ios:ct.instance?"ios"===ct.instance.theme:pt.ios,md:ct.instance?"md"===ct.instance.theme:pt.md,aurora:ct.instance?"aurora"===ct.instance.theme:pt.aurora})}),t.prototype.Dom7=this.$,t.prototype.$$=this.$,t.prototype.$device=this.device,t.prototype.$request=this.request,t.prototype.$utils=this.utils,t.prototype.$f7ready=dt,Object.defineProperty(t.prototype,"$f7route",{get(){var e;if(this.props&&this.props.f7route)return this.props.f7route;if(this.f7route)return this.f7route;if(this._f7route)return this._f7route;this.$vnode&&this.$vnode.data&&this.$vnode.data.props&&this.$vnode.data.props.f7route&&(e=this.$vnode.data.props.f7route);for(var t=this;t&&!e;)t._f7route&&(e=t._f7route),t=t.$parent;return e},set(e){this._f7route=e}}),Object.defineProperty(t.prototype,"$f7router",{get(){var e;if(this.props&&this.props.f7router)return this.props.f7router;if(this.f7router)return this.f7router;if(this._f7router)return this._f7router;this.$vnode&&this.$vnode.data&&this.$vnode.data.props&&this.$vnode.data.props.f7route&&(e=this.$vnode.data.props.f7router);for(var t=this;t&&!e;)t._f7router?e=t._f7router:t.f7View?e=t.f7View.router:t.$refs&&t.$refs.el&&t.$refs.el.f7View&&(e=t.$refs.el.f7View.router),t=t.$parent;return e},set(e){this._f7router=e}}),this.Router.use(ut)}}},gt=ft,vt=(r(20),r(21),r(22),{colorProps:{color:String,colorTheme:String,textColor:String,bgColor:String,borderColor:String,rippleColor:String,themeDark:Boolean},colorClasses(e){var{color:t,colorTheme:r,textColor:i,bgColor:n,borderColor:a,rippleColor:s,themeDark:o}=e;return{"theme-dark":o,["color-".concat(t)]:t,["color-theme-".concat(r)]:r,["text-color-".concat(i)]:i,["bg-color-".concat(n)]:n,["border-color-".concat(a)]:a,["ripple-color-".concat(s)]:s}},linkIconProps:{icon:String,iconMaterial:String,iconF7:String,iconIos:String,iconMd:String,iconAurora:String,iconColor:String,iconSize:[String,Number]},linkRouterProps:{back:Boolean,external:Boolean,force:Boolean,animate:{type:Boolean,default:void 0},ignoreCache:Boolean,reloadCurrent:Boolean,reloadAll:Boolean,reloadPrevious:Boolean,reloadDetail:{type:Boolean,default:void 0},routeTabId:String,view:String,routeProps:Object,preventRouter:Boolean,transition:String},linkRouterAttrs(e){var t,r,{force:i,reloadCurrent:n,reloadPrevious:a,reloadAll:s,reloadDetail:o,animate:l,ignoreCache:c,routeTabId:h,view:u,transition:d}=e;return"animate"in e&&void 0!==l&&(t=l.toString()),"reloadDetail"in e&&void 0!==o&&(r=o.toString()),{"data-force":i||void 0,"data-reload-current":n||void 0,"data-reload-all":s||void 0,"data-reload-previous":a||void 0,"data-reload-detail":r,"data-animate":t,"data-ignore-cache":c||void 0,"data-route-tab-id":h||void 0,"data-view":ot.isStringProp(u)?u:void 0,"data-transition":ot.isStringProp(d)?d:void 0}},linkRouterClasses(e){var{back:t,linkBack:r,external:i,preventRouter:n}=e;return{back:t||r,external:i,"prevent-router":n}},linkActionsProps:{searchbarEnable:[Boolean,String],searchbarDisable:[Boolean,String],searchbarClear:[Boolean,String],searchbarToggle:[Boolean,String],panelOpen:[Boolean,String],panelClose:[Boolean,String],panelToggle:[Boolean,String],popupOpen:[Boolean,String],popupClose:[Boolean,String],actionsOpen:[Boolean,String],actionsClose:[Boolean,String],popoverOpen:[Boolean,String],popoverClose:[Boolean,String],loginScreenOpen:[Boolean,String],loginScreenClose:[Boolean,String],sheetOpen:[Boolean,String],sheetClose:[Boolean,String],sortableEnable:[Boolean,String],sortableDisable:[Boolean,String],sortableToggle:[Boolean,String],cardOpen:[Boolean,String],cardPreventOpen:[Boolean,String],cardClose:[Boolean,String],menuClose:{type:[Boolean,String],default:void 0}},linkActionsAttrs(e){var{searchbarEnable:t,searchbarDisable:r,searchbarClear:i,searchbarToggle:n,panelOpen:a,panelClose:s,panelToggle:o,popupOpen:l,popupClose:c,actionsOpen:h,actionsClose:u,popoverOpen:d,popoverClose:p,loginScreenOpen:f,loginScreenClose:g,sheetOpen:v,sheetClose:m,sortableEnable:b,sortableDisable:y,sortableToggle:w,cardOpen:C,cardClose:_}=e;return{"data-searchbar":ot.isStringProp(t)&&t||ot.isStringProp(r)&&r||ot.isStringProp(i)&&i||ot.isStringProp(n)&&n||void 0,"data-panel":ot.isStringProp(a)&&a||ot.isStringProp(s)&&s||ot.isStringProp(o)&&o||void 0,"data-popup":ot.isStringProp(l)&&l||ot.isStringProp(c)&&c||void 0,"data-actions":ot.isStringProp(h)&&h||ot.isStringProp(u)&&u||void 0,"data-popover":ot.isStringProp(d)&&d||ot.isStringProp(p)&&p||void 0,"data-sheet":ot.isStringProp(v)&&v||ot.isStringProp(m)&&m||void 0,"data-login-screen":ot.isStringProp(f)&&f||ot.isStringProp(g)&&g||void 0,"data-sortable":ot.isStringProp(b)&&b||ot.isStringProp(y)&&y||ot.isStringProp(w)&&w||void 0,"data-card":ot.isStringProp(C)&&C||ot.isStringProp(_)&&_||void 0}},linkActionsClasses(e){var{searchbarEnable:t,searchbarDisable:r,searchbarClear:i,searchbarToggle:n,panelOpen:a,panelClose:s,panelToggle:o,popupOpen:l,popupClose:c,actionsClose:h,actionsOpen:u,popoverOpen:d,popoverClose:p,loginScreenOpen:f,loginScreenClose:g,sheetOpen:v,sheetClose:m,sortableEnable:b,sortableDisable:y,sortableToggle:w,cardOpen:C,cardPreventOpen:_,cardClose:x,menuClose:S}=e;return{"searchbar-enable":t||""===t,"searchbar-disable":r||""===r,"searchbar-clear":i||""===i,"searchbar-toggle":n||""===n,"panel-close":s||""===s,"panel-open":a||""===a,"panel-toggle":o||""===o,"popup-close":c||""===c,"popup-open":l||""===l,"actions-close":h||""===h,"actions-open":u||""===u,"popover-close":p||""===p,"popover-open":d||""===d,"sheet-close":m||""===m,"sheet-open":v||""===v,"login-screen-close":g||""===g,"login-screen-open":f||""===f,"sortable-enable":b||""===b,"sortable-disable":y||""===y,"sortable-toggle":w||""===w,"card-close":x||""===x,"card-open":C||""===C,"card-prevent-open":_||""===_,"menu-close":S||""===S}}}),mt=function(e,t,r){var i,n=e;i="function"==typeof t?t(n.state,n.props):t,Object.keys(i).forEach(e=>{n.$set(n.state,e,i[e])}),"function"==typeof r&&r()},bt={name:"f7-routable-modals",data:()=>({state:{modals:[]}}),render(){var e=this.$createElement;return e("div",{ref:"el",class:"framework7-modals"},[this.state.modals.map(t=>{var r=t.component;return e(r,{key:t.id,props:t.props})})])},updated(){this.routerData&&ct.events.emit("modalsRouterDidUpdate",this.routerData)},beforeDestroy(){this.routerData&&(ct.routers.modals=null,this.routerData=null,delete this.routerData)},mounted(){var e=this,t=e.$refs.el;e.routerData={modals:e.state.modals,el:t,component:e,setModals(t){e.setState({modals:t})}},ct.routers.modals=e.routerData},methods:{setState(e,t){mt(this,e,t)}}},yt=function(e){var t={},r=e.$props;Object.keys(r).forEach(e=>{void 0!==r[e]&&(t[e]=r[e])});var i=[];return Object.keys(e.$slots).forEach(t=>{i.push(...e.$slots[t])}),t.children=i,t},wt={name:"f7-app",props:Object.assign({id:[String,Number],params:Object,routes:Array},vt.colorProps),render(){var e=this.$createElement,t=this.props,{id:r,style:i,className:n}=t;return e("div",{ref:"el",style:i,class:ot.classNames(n,"framework7-root",vt.colorClasses(t)),attrs:{id:r||"framework7-root"}},[this.$slots.default,e(bt)])},mounted(){var{params:e={},routes:t}=this.props,r=this.$refs.el,i=r.parentNode;i&&i!==document.body&&i.parentNode===document.body&&(i.style.height="100%"),ct.instance||ct.init(r,e,t)},computed:{props(){return yt(this)}}},Ct=function(e,t,...r){var i=e;t.split(" ").forEach(e=>{i.$emit(e,...r)})},_t={name:"f7-view",props:Object.assign({id:[String,Number],tab:Boolean,tabActive:Boolean,name:String,router:Boolean,linksView:[Object,String],url:String,main:Boolean,stackPages:Boolean,xhrCache:Boolean,xhrCacheIgnore:Array,xhrCacheIgnoreGetParameters:Boolean,xhrCacheDuration:Number,preloadPreviousPage:Boolean,allowDuplicateUrls:Boolean,reloadPages:Boolean,reloadDetail:Boolean,masterDetailResizable:Boolean,masterDetailBreakpoint:Number,removeElements:Boolean,removeElementsWithTimeout:Boolean,removeElementsTimeout:Number,restoreScrollTopOnBack:Boolean,loadInitialPage:Boolean,iosSwipeBack:Boolean,iosSwipeBackAnimateShadow:Boolean,iosSwipeBackAnimateOpacity:Boolean,iosSwipeBackActiveArea:Number,iosSwipeBackThreshold:Number,mdSwipeBack:Boolean,mdSwipeBackAnimateShadow:Boolean,mdSwipeBackAnimateOpacity:Boolean,mdSwipeBackActiveArea:Number,mdSwipeBackThreshold:Number,auroraSwipeBack:Boolean,auroraSwipeBackAnimateShadow:Boolean,auroraSwipeBackAnimateOpacity:Boolean,auroraSwipeBackActiveArea:Number,auroraSwipeBackThreshold:Number,pushState:Boolean,pushStateRoot:String,pushStateAnimate:Boolean,pushStateAnimateOnLoad:Boolean,pushStateSeparator:String,pushStateOnLoad:Boolean,animate:Boolean,transition:String,iosDynamicNavbar:Boolean,iosAnimateNavbarBackIcon:Boolean,materialPageLoadDelay:Number,passRouteQueryToRequest:Boolean,passRouteParamsToRequest:Boolean,routes:Array,routesAdd:Array,routesBeforeEnter:[Function,Array],routesBeforeLeave:[Function,Array],init:{type:Boolean,default:!0}},vt.colorProps),data(){yt(this);return{state:{pages:[]}}},render(){var e=this.$createElement,t=this.props,{id:r,style:i,tab:n,main:a,tabActive:s,className:o}=t,l=ot.classNames(o,"view",{"view-main":a,"tab-active":s,tab:n},vt.colorClasses(t));return e("div",{ref:"el",style:i,class:l,attrs:{id:r}},[this.$slots.default,this.state.pages.map(t=>{var r=t.component;return e(r,{key:t.id,props:t.props})})])},created(){ot.bindMethods(this,["onSwipeBackMove","onSwipeBackBeforeChange","onSwipeBackAfterChange","onSwipeBackBeforeReset","onSwipeBackAfterReset","onTabShow","onTabHide","onViewInit"])},mounted(){var e=this,t=e.$refs.el;e.$f7ready(r=>{r.on("tabShow",e.onTabShow),r.on("tabHide",e.onTabHide),e.routerData={el:t,component:e,pages:e.state.pages,instance:null,setPages(t){e.setState({pages:t})}},ct.routers.views.push(e.routerData),e.props.init&&(e.routerData.instance=r.views.create(t,Object.assign({on:{init:e.onViewInit}},ot.noUndefinedProps(e.$options.propsData||{}))),e.f7View=e.routerData.instance,e.f7View.on("resize",e.onResize),e.f7View.on("swipebackMove",e.onSwipeBackMove),e.f7View.on("swipebackBeforeChange",e.onSwipeBackBeforeChange),e.f7View.on("swipebackAfterChange",e.onSwipeBackAfterChange),e.f7View.on("swipebackBeforeReset",e.onSwipeBackBeforeReset),e.f7View.on("swipebackAfterReset",e.onSwipeBackAfterReset))})},beforeDestroy(){ct.instance&&(ct.instance.off("tabShow",this.onTabShow),ct.instance.off("tabHide",this.onTabHide)),this.f7View&&(this.f7View.off("resize",this.onResize),this.f7View.off("swipebackMove",this.onSwipeBackMove),this.f7View.off("swipebackBeforeChange",this.onSwipeBackBeforeChange),this.f7View.off("swipebackAfterChange",this.onSwipeBackAfterChange),this.f7View.off("swipebackBeforeReset",this.onSwipeBackBeforeReset),this.f7View.off("swipebackAfterReset",this.onSwipeBackAfterReset),this.f7View.destroy&&this.f7View.destroy()),ct.routers.views.splice(ct.routers.views.indexOf(this.routerData),1),this.routerData=null,delete this.routerData},updated(){this.routerData&&ct.events.emit("viewRouterDidUpdate",this.routerData)},methods:{onViewInit(e){this.dispatchEvent("view:init viewInit",e),this.props.init||(this.routerData.instance=e,this.f7View=this.routerData.instance)},onResize(e,t){this.dispatchEvent("view:resize viewResize",t)},onSwipeBackMove(e){var t=e;this.dispatchEvent("swipeback:move swipeBackMove",t)},onSwipeBackBeforeChange(e){var t=e;this.dispatchEvent("swipeback:beforechange swipeBackBeforeChange",t)},onSwipeBackAfterChange(e){var t=e;this.dispatchEvent("swipeback:afterchange swipeBackAfterChange",t)},onSwipeBackBeforeReset(e){var t=e;this.dispatchEvent("swipeback:beforereset swipeBackBeforeReset",t)},onSwipeBackAfterReset(e){var t=e;this.dispatchEvent("swipeback:afterreset swipeBackAfterReset",t)},onTabShow(e){e===this.$refs.el&&this.dispatchEvent("tab:show tabShow",e)},onTabHide(e){e===this.$refs.el&&this.dispatchEvent("tab:hide tabHide",e)},dispatchEvent(e,...t){Ct(this,e,...t)},setState(e,t){mt(this,e,t)}},computed:{props(){return yt(this)}}},xt=r(4),St=r(2),kt=r.n(St),Tt=r(12),Ot=r.n(Tt),Et=i.a.observable({debug:!1,utils:kt.a,count:0,message:"Hello!",fonts:["Chalkduster"],onlineAvailableIconPacks:[],defaultIconPacks:[],defaultLibraryName:"com.elgato.elgato",state:{lastSaved:"--",decomposeSVG:!1,showToolTips:!0,iconPackSortOrder:[],expandedCategories:["com.elgato.elgato"],hiddenCategories:[],compositions:[],favorites:[],iconSize:40},loadDefaults(){kt.a.fetchXhr("./static/defaults.json","json").then(e=>{e.json().then(e=>{this.defaultIconPacks=e.defaultIconPacks,e.hasOwnProperty("defaultLibraryName")&&(console.log("store.loadDefaults: defaultLibraryName",e.defaultLibraryName),this.defaultLibraryName=e.defaultLibraryName,this.state.expandedCategories=[this.defaultLibraryName])})})},checkProp(e,t){["hiddenCategories","iconPackSortOrder","iconSize"].includes(e)&&this.throttledSave()},removeProp(e,t){if(this.state.hasOwnProperty(e)){var r=this.state[e].indexOf(t);r>-1&&this.state[e].splice(r,1)}},setProp(e,t){this.state.hasOwnProperty(e)&&(this.checkProp(e,t),this.state[e]=t)},clearProp(e){this.state.hasOwnProperty(e)&&this.state[e].splice(0,this.state[e].length)},toggleProp(e,t){if(!this.state.hasOwnProperty(e))return console.info("store.toggleProp: property ".concat(e," not found"));var r=this.state[e].indexOf(t);r>-1?(this.state[e].splice(r,1),this.throttledSave()):this.state[e].push(t),this.checkProp(e,t)},setHidden(e){this.setProp("hiddenCategories",e)},isHidden(e){return this.state.hiddenCategories.includes(e)},toggleHidden(e,t){this.toggleProp("hiddenCategories",e)},setExpanded(e){this.setProp("expandedCategories",e)},isExpanded(e){return this.state.expandedCategories.includes(e)},setIconSize(e){this.setProp("iconSize",e),document.documentElement.style.setProperty("--kc-thumbnail-size","".concat(e,"px"))},toggleExpanded(e){this.toggleProp("expandedCategories",e)},clearExpanded(){this.clearProp("expandedCategories")},setMessageAction(e){this.debug&&this.dbg("setMessageAction triggered with",e),this.state.message=e},clearMessageAction(){this.debug&&this.dbg("clearMessageAction triggered"),this.state.message=""},setState(e,t){this.debug&&this.dbg("setState",e,t),this.state[e]=t,this.setMessageAction("".concat(e," = ").concat(t))},load(){console.assert($SD,"StreamDeck not connected"),$SD&&(this.dbg("loading global settings"),$SD.api.getGlobalSettings())},save(e){console.assert($SD,"StreamDeck not connected",e),$SD&&(console.log("store::save",e||""),this.state.lastSaved=(new Date).toLocaleString(),$SD.api.setGlobalSettings(null,this.state))},use(e){["fonts","favorites"].forEach(t=>{e.hasOwnProperty(t)&&delete e[t]}),Object.entries(e).forEach(e=>this.state[e[0]]=e[1]),e.hasOwnProperty("iconSize")&&document.documentElement.style.setProperty("--kc-thumbnail-size","".concat(e.iconSize,"px")),this.dbg("********** STORE USE ***********",this.state)}});Et.loadDefaults(),Et.throttledSave=kt.a.debounce(Et.save,600,Et),Et.dbg=Et.debug?console.log.bind(window.console,"[**STORE**] "):()=>{},i.a.prototype.$store=Et;var Pt=r(6),At={name:"f7-block-title",props:Object.assign({id:[String,Number],large:Boolean,medium:Boolean},vt.colorProps),render(){var e=this.$createElement,t=this.props,{className:r,id:i,style:n,large:a,medium:s}=t;return e("div",{style:n,class:ot.classNames(r,"block-title",{"block-title-large":a,"block-title-medium":s},vt.colorClasses(t)),attrs:{id:i}},[this.$slots.default])},computed:{props(){return yt(this)}}},Dt={name:"f7-block",props:Object.assign({id:[String,Number],inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,strong:Boolean,tabs:Boolean,tab:Boolean,tabActive:Boolean,accordionList:Boolean,accordionOpposite:Boolean,noHairlines:Boolean,noHairlinesMd:Boolean,noHairlinesIos:Boolean,noHairlinesAurora:Boolean},vt.colorProps),created(){ot.bindMethods(this,["onTabShow","onTabHide"])},mounted(){var e=this,t=e.$refs.el;t&&(e.eventTargetEl=t,e.$f7ready(t=>{t.on("tabShow",e.onTabShow),t.on("tabHide",e.onTabHide)}))},beforeDestroy(){this.$refs.el&&this.$f7&&(this.$f7.off("tabShow",this.onTabShow),this.$f7.off("tabHide",this.onTabHide),delete this.eventTargetEl)},render(){var e=this.$createElement,t=this.props,{className:r,inset:i,xsmallInset:n,smallInset:a,mediumInset:s,largeInset:o,xlargeInset:l,strong:c,accordionList:h,accordionOpposite:u,tabs:d,tab:p,tabActive:f,noHairlines:g,noHairlinesIos:v,noHairlinesMd:m,noHairlinesAurora:b,id:y,style:w}=t;return e("div",{style:w,class:ot.classNames(r,"block",{inset:i,"xsmall-inset":n,"small-inset":a,"medium-inset":s,"large-inset":o,"xlarge-inset":l,"block-strong":c,"accordion-list":h,"accordion-opposite":u,tabs:d,tab:p,"tab-active":f,"no-hairlines":g,"no-hairlines-md":m,"no-hairlines-ios":v,"no-hairlines-aurora":b},vt.colorClasses(t)),ref:"el",attrs:{id:y}},[this.$slots.default])},methods:{onTabShow(e){this.eventTargetEl===e&&this.dispatchEvent("tabShow tab:show",e)},onTabHide(e){this.eventTargetEl===e&&this.dispatchEvent("tabHide tab:hide",e)},dispatchEvent(e,...t){Ct(this,e,...t)}},computed:{props(){return yt(this)}}},It={name:"f7-badge",props:Object.assign({id:[String,Number],tooltip:String,tooltipTrigger:String},vt.colorProps),render(){var e=this.$createElement,t=this.props,{className:r,id:i,style:n}=t;return e("span",{ref:"el",style:n,class:ot.classNames(r,"badge",vt.colorClasses(t)),attrs:{id:i}},[this.$slots.default])},watch:{"props.tooltip":function(e){if(!e&&this.f7Tooltip)return this.f7Tooltip.destroy(),this.f7Tooltip=null,void delete this.f7Tooltip;e&&!this.f7Tooltip&&this.$f7?this.f7Tooltip=this.$f7.tooltip.create({targetEl:this.$refs.el,text:e,trigger:this.props.tooltipTrigger}):e&&this.f7Tooltip&&this.f7Tooltip.setText(e)}},mounted(){var e=this,t=e.$refs.el;if(t){var{tooltip:r,tooltipTrigger:i}=e.props;r&&e.$f7ready(n=>{e.f7Tooltip=n.tooltip.create({targetEl:t,text:r,trigger:i})})}},beforeDestroy(){this.f7Tooltip&&this.f7Tooltip.destroy&&(this.f7Tooltip.destroy(),this.f7Tooltip=null,delete this.f7Tooltip)},computed:{props(){return yt(this)}}},Lt={name:"f7-list-item-content",props:Object.assign({id:[String,Number],title:[String,Number],text:[String,Number],media:String,subtitle:[String,Number],header:[String,Number],footer:[String,Number],after:[String,Number],badge:[String,Number],badgeColor:String,mediaList:Boolean,mediaItem:Boolean,checkbox:Boolean,checked:Boolean,defaultChecked:Boolean,indeterminate:Boolean,radio:Boolean,radioIcon:String,name:String,value:[String,Number,Array],readonly:Boolean,required:Boolean,disabled:Boolean},vt.colorProps),render(){var e,t,r,i,n,a,s,o,l,c,h,u,d,p=this.$createElement,f=this.props,{id:g,className:v,style:m,radio:b,radioIcon:y,checkbox:w,value:C,name:_,checked:x,defaultChecked:S,readonly:k,disabled:T,required:O,media:E,header:P,footer:A,title:D,subtitle:I,text:L,after:B,badge:R,mediaList:M,mediaItem:j,badgeColor:F}=f,$=[],N=[],z=[],U=[],H=[],W=[],V=[],Y=[],X=[],G=[],q=[],K=[],J=[],Z=[],Q=[],ee=[],te=[],re=this.$slots.default,ie=[];re&&re.length&&re.forEach(e=>{Array.isArray(e)?ie.push(...e):ie.push(e)});var ne,ae=this.$slots["content-start"];(ae&&ae.length&&$.push(...ae),ie.forEach(e=>{var t;void 0!==e&&((t=e.data?e.data.slot:void 0)&&"inner"!==t||H.push(e),"content-start"===t&&$.push(e),"content"===t&&N.push(e),"content-end"===t&&z.push(e),"after-start"===t&&V.push(e),"after"===t&&Y.push(e),"after-end"===t&&X.push(e),"media"===t&&G.push(e),"inner-start"===t&&U.push(e),"inner-end"===t&&W.push(e),"before-title"===t&&q.push(e),"title"===t&&K.push(e),"after-title"===t&&J.push(e),"subtitle"===t&&Z.push(e),"text"===t&&Q.push(e),"header"===t&&ee.push(e),"footer"===t&&te.push(e))}),(b||w)&&(c=p("input",{ref:"inputEl",domProps:{checked:x,readonly:k,disabled:T,required:O,value:C},on:{change:this.onChange},attrs:{name:_,type:b?"radio":"checkbox"}}),h=p("i",{class:"icon icon-".concat(b?"radio":"checkbox")})),E||G.length)&&(E&&(ne=p("img",{attrs:{src:E}})),l=p("div",{class:"item-media"},[ne,G]));var se=j||M;return(P||ee.length)&&(u=p("div",{class:"item-header"},[P,ee])),(A||te.length)&&(d=p("div",{class:"item-footer"},[A,te])),(D||K.length||!se&&u||!se&&d)&&(e=p("div",{class:"item-title"},[!se&&u,D,K,!se&&d])),(I||Z.length)&&(s=p("div",{class:"item-subtitle"},[I,Z])),(L||Q.length)&&(o=p("div",{class:"item-text"},[L,Q])),(B||R||Y.length)&&(B&&(r=p("span",[B])),R&&(i=p(It,{attrs:{color:F}},[R])),t=p("div",{class:"item-after"},[V,r,i,Y,X])),se?(a=p("div",{class:"item-title-row"},[q,e,J,t]),n=p("div",{ref:"innerEl",class:"item-inner"},[U,u,a,s,o,H,d,W])):n=p("div",{ref:"innerEl",class:"item-inner"},[U,q,e,J,t,H,W]),p(w||b?"label":"div",{ref:"el",style:m,class:ot.classNames(v,"item-content",{"item-checkbox":w,"item-radio":b,"item-radio-icon-start":b&&"start"===y,"item-radio-icon-end":b&&"end"===y},vt.colorClasses(f)),attrs:{id:g}},[$,c,h,l,n,N,z])},created(){ot.bindMethods(this,"onClick onChange".split(" "))},mounted(){var{el:e,inputEl:t}=this.$refs,{indeterminate:r}=this.props;r&&t&&(t.indeterminate=!0),e.addEventListener("click",this.onClick)},updated(){var{inputEl:e}=this.$refs,{indeterminate:t}=this.props;e&&(e.indeterminate=t)},beforeDestroy(){var{el:e}=this.$refs;e.removeEventListener("click",this.onClick)},methods:{onClick(e){this.dispatchEvent("click",e)},onChange(e){this.dispatchEvent("change",e)},dispatchEvent(e,...t){Ct(this,e,...t)}},computed:{props(){return yt(this)}}},Bt=e=>{if(!e)return e;var t="style class domProps slot key ref attrs on props".split(" ");return Object.keys(e).forEach(r=>{if("className"===r)return e.class=e.className,void delete e.className;if("dangerouslySetInnerHTML"===r)return e.domProps||(e.domProps={}),e.domProps.innerHTML=e[r],e.domProps.innerHTML&&e.domProps.innerHTML.__html&&(e.domProps.innerHTML=e.domProps.innerHTML.__html),void delete e.dangerouslySetInnerHTML;if(r.match(/^on?([A-Z])/)){e.on||(e.on={});var i=r.replace(/(^on?)([A-Z])/,(e,t,r)=>r.toLowerCase());return e.on[i]=e[r],void delete e[r]}t.indexOf(r)>=0||(e.attrs||(e.attrs={}),e.attrs[r]||(e.attrs[r]=e[r],delete e[r]))}),e},Rt={name:"f7-list-item",props:Object.assign({id:[String,Number],title:[String,Number],text:[String,Number],media:String,subtitle:[String,Number],header:[String,Number],footer:[String,Number],tooltip:String,tooltipTrigger:String,link:[Boolean,String],target:String,tabLink:[Boolean,String],tabLinkActive:Boolean,after:[String,Number],badge:[String,Number],badgeColor:String,mediaItem:Boolean,mediaList:Boolean,divider:Boolean,groupTitle:Boolean,swipeout:Boolean,swipeoutOpened:Boolean,sortable:{type:Boolean,default:void 0},sortableOpposite:{type:Boolean,default:void 0},accordionItem:Boolean,accordionItemOpened:Boolean,smartSelect:Boolean,smartSelectParams:Object,noChevron:Boolean,chevronCenter:Boolean,checkbox:Boolean,radio:Boolean,radioIcon:String,checked:Boolean,defaultChecked:Boolean,indeterminate:Boolean,name:String,value:[String,Number,Array],readonly:Boolean,required:Boolean,disabled:Boolean,virtualListIndex:Number},vt.colorProps,{},vt.linkRouterProps,{},vt.linkActionsProps),data(){var e=yt(this);return{state:{isMedia:e.mediaItem||e.mediaList,isSortable:e.sortable,isSortableOpposite:e.sortableOpposite,isSimple:!1}}},render(){var e,t,r=this.$createElement,i=this.props,{id:n,style:a,className:s,title:o,text:l,media:c,subtitle:h,header:u,footer:d,link:p,tabLink:f,tabLinkActive:g,href:v,target:m,after:b,badge:y,badgeColor:w,mediaItem:C,mediaList:_,divider:x,groupTitle:S,swipeout:k,accordionItem:T,accordionItemOpened:O,smartSelect:E,checkbox:P,radio:A,radioIcon:D,checked:I,defaultChecked:L,indeterminate:B,name:R,value:M,readonly:j,required:F,disabled:$,sortable:N,sortableOpposite:z,noChevron:U,chevronCenter:H,virtualListIndex:W}=i,V=C||_||this.state.isMedia,Y=N||this.state.isSortable,X=Y&&(z||this.state.isSortableOpposite),G=this.state.isSimple;if(!G&&(t=r(Lt,{on:!(p||v||T||E)?{click:this.onClick,change:this.onChange}:void 0,attrs:{title:o,text:l,media:c,subtitle:h,after:b,header:u,footer:d,badge:y,badgeColor:w,mediaList:V,accordionItem:T,checkbox:P,checked:I,defaultChecked:L,indeterminate:B,radio:A,radioIcon:D,name:R,value:M,readonly:j,required:F,disabled:$}},[this.$slots["content-start"],this.$slots.content,this.$slots["content-end"],this.$slots.media,this.$slots["inner-start"],this.$slots.inner,this.$slots["inner-end"],this.$slots["after-start"],this.$slots.after,this.$slots["after-end"],this.$slots.header,this.$slots.footer,this.$slots["before-title"],this.$slots.title,this.$slots["after-title"],this.$slots.subtitle,this.$slots.text,k||T?null:this.$slots.default,Y&&!1!==N&&X&&r("div",{class:"sortable-handler",slot:"content-start"})]),p||v||T||E)){var q=Object.assign({href:!0===p?"":p||v,target:m,"data-tab":ot.isStringProp(f)&&f||void 0},vt.linkRouterAttrs(i),{},vt.linkActionsAttrs(i)),K=ot.classNames({"item-link":!0,"smart-select":E,"tab-link":f||""===f,"tab-link-active":g},vt.linkRouterClasses(i),vt.linkActionsClasses(i));e=r("a",Bt(Object.assign({ref:"linkEl",class:K},q)),[t])}var J=ot.classNames(s,{"item-divider":x,"list-group-title":S,"media-item":V,swipeout:k,"accordion-item":T,"accordion-item-opened":O,disabled:$&&!(A||P),"no-chevron":U,"chevron-center":H,"disallow-sorting":!1===N},vt.colorClasses(i));if(x||S)return r("li",{ref:"el",style:a,class:J,attrs:{id:n,"data-virtual-list-index":W}},[r("span",[this.$slots.default||[o]])]);if(G)return r("li",{ref:"el",style:a,class:J,attrs:{id:n,"data-virtual-list-index":W}},[o,this.$slots.default]);var Z=p||v||E||T?e:t;return r("li",{ref:"el",style:a,class:J,attrs:{id:n,"data-virtual-list-index":W}},[this.$slots["root-start"],k?r("div",{class:"swipeout-content"},[Z]):Z,Y&&!1!==N&&!X&&r("div",{class:"sortable-handler"}),(k||T)&&this.$slots.default,this.$slots.root,this.$slots["root-end"]])},watch:{"props.tooltip":function(e){if(!e&&this.f7Tooltip)return this.f7Tooltip.destroy(),this.f7Tooltip=null,void delete this.f7Tooltip;e&&!this.f7Tooltip&&this.$f7?this.f7Tooltip=this.$f7.tooltip.create({targetEl:this.$refs.el,text:e,trigger:this.props.tooltipTrigger}):e&&this.f7Tooltip&&this.f7Tooltip.setText(e)},"props.swipeoutOpened":function(e){if(this.props.swipeout){var t=this.$refs.el;e?this.$f7.swipeout.open(t):this.$f7.swipeout.close(t)}}},created(){ot.bindMethods(this,["onClick","onChange","onSwipeoutOpen","onSwipeoutOpened","onSwipeoutClose","onSwipeoutClosed","onSwipeoutDelete","onSwipeoutDeleted","onSwipeoutOverswipeEnter","onSwipeoutOverswipeExit","onSwipeout","onAccBeforeOpen","onAccOpen","onAccOpened","onAccBeforeClose","onAccClose","onAccClosed"])},mounted(){var e=this,{el:t,linkEl:r}=e.$refs;if(t){var{link:i,href:n,smartSelect:a,swipeout:s,swipeoutOpened:o,accordionItem:l,smartSelectParams:c,routeProps:h,tooltip:u,tooltipTrigger:d}=e.props;!!(i||n||l||a)&&r&&r.addEventListener("click",e.onClick),r&&h&&(r.f7RouteProps=h),e.$listEl=e.$$(t).parents(".list, .list-group").eq(0),e.$listEl.length&&e.setState({isMedia:e.$listEl.hasClass("media-list"),isSimple:e.$listEl.hasClass("simple-list"),isSortable:e.$listEl.hasClass("sortable"),isSortableOpposite:e.$listEl.hasClass("sortable-opposite")}),e.$f7ready(r=>{if(e.eventTargetEl=t,s&&(r.on("swipeoutOpen",e.onSwipeoutOpen),r.on("swipeoutOpened",e.onSwipeoutOpened),r.on("swipeoutClose",e.onSwipeoutClose),r.on("swipeoutClosed",e.onSwipeoutClosed),r.on("swipeoutDelete",e.onSwipeoutDelete),r.on("swipeoutDeleted",e.onSwipeoutDeleted),r.on("swipeoutOverswipeEnter",e.onSwipeoutOverswipeEnter),r.on("swipeoutOverswipeExit",e.onSwipeoutOverswipeExit),r.on("swipeout",e.onSwipeout)),l&&(r.on("accordionBeforeOpen",e.onAccBeforeOpen),r.on("accordionOpen",e.onAccOpen),r.on("accordionOpened",e.onAccOpened),r.on("accordionBeforeClose",e.onAccBeforeClose),r.on("accordionClose",e.onAccClose),r.on("accordionClosed",e.onAccClosed)),a){var i=ot.extend({el:t.querySelector("a.smart-select")},c||{});e.f7SmartSelect=r.smartSelect.create(i)}o&&r.swipeout.open(t),u&&(e.f7Tooltip=r.tooltip.create({targetEl:t,text:u,trigger:d}))})}},updated(){var{$listEl:e}=this,{linkEl:t}=this.$refs,{routeProps:r}=this.props;if(t&&r&&(t.f7RouteProps=r),e&&(!e||0!==e.length)){var i=e.hasClass("media-list"),n=e.hasClass("simple-list"),a=e.hasClass("sortable"),s=e.hasClass("sortable-opposite");i!==this.state.isMedia&&this.setState({isMedia:i}),n!==this.state.isSimple&&this.setState({isSimple:n}),a!==this.state.isSortable&&(this.setState({isSortable:a}),s!==this.state.isSortableOpposite&&this.setState({isSortableOpposite:s}))}},beforeDestroy(){var{linkEl:e}=this.$refs,{link:t,href:r,smartSelect:i,swipeout:n,accordionItem:a}=this.props;if(e&&(!(t||r||a||i)||e.removeEventListener("click",this.onClick),delete e.f7RouteProps),this.$f7){var s=this.$f7;n&&(s.off("swipeoutOpen",this.onSwipeoutOpen),s.off("swipeoutOpened",this.onSwipeoutOpened),s.off("swipeoutClose",this.onSwipeoutClose),s.off("swipeoutClosed",this.onSwipeoutClosed),s.off("swipeoutDelete",this.onSwipeoutDelete),s.off("swipeoutDeleted",this.onSwipeoutDeleted),s.off("swipeoutOverswipeEnter",this.onSwipeoutOverswipeEnter),s.off("swipeoutOverswipeExit",this.onSwipeoutOverswipeExit),s.off("swipeout",this.onSwipeout)),a&&(s.off("accordionBeforeOpen",this.onAccBeforeOpen),s.off("accordionOpen",this.onAccOpen),s.off("accordionOpened",this.onAccOpened),s.off("accordionBeforeClose",this.onAccBeforeClose),s.off("accordionClose",this.onAccClose),s.off("accordionClosed",this.onAccClosed))}i&&this.f7SmartSelect&&this.f7SmartSelect.destroy(),this.f7Tooltip&&this.f7Tooltip.destroy&&(this.f7Tooltip.destroy(),this.f7Tooltip=null,delete this.f7Tooltip),this.eventTargetEl=null,delete this.eventTargetEl},methods:{onClick(e){"input"!==e.target.tagName.toLowerCase()&&this.dispatchEvent("click",e)},onSwipeoutOverswipeEnter(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:overswipeenter swipeoutOverswipeEnter")},onSwipeoutOverswipeExit(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:overswipeexit swipeoutOverswipeExit")},onSwipeoutDeleted(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:deleted swipeoutDeleted")},onSwipeoutDelete(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:delete swipeoutDelete")},onSwipeoutClose(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:close swipeoutClose")},onSwipeoutClosed(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:closed swipeoutClosed")},onSwipeoutOpen(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:open swipeoutOpen")},onSwipeoutOpened(e){this.eventTargetEl===e&&this.dispatchEvent("swipeout:opened swipeoutOpened")},onSwipeout(e,t){this.eventTargetEl===e&&this.dispatchEvent("swipeout",t)},onAccBeforeClose(e,t){this.eventTargetEl===e&&this.dispatchEvent("accordion:beforeclose accordionBeforeClose",t)},onAccClose(e){this.eventTargetEl===e&&this.dispatchEvent("accordion:close accordionClose")},onAccClosed(e){this.eventTargetEl===e&&this.dispatchEvent("accordion:closed accordionClosed")},onAccBeforeOpen(e,t){this.eventTargetEl===e&&this.dispatchEvent("accordion:beforeopen accordionBeforeOpen",t)},onAccOpen(e){this.eventTargetEl===e&&this.dispatchEvent("accordion:open accordionOpen")},onAccOpened(e){this.eventTargetEl===e&&this.dispatchEvent("accordion:opened accordionOpened")},onChange(e){this.dispatchEvent("change",e)},onInput(e){this.dispatchEvent("input",e)},dispatchEvent(e,...t){Ct(this,e,...t)},setState(e,t){mt(this,e,t)}},computed:{props(){return yt(this)}}},Mt={name:"f7-list",props:Object.assign({id:[String,Number],inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,mediaList:Boolean,sortable:Boolean,sortableTapHold:Boolean,sortableEnabled:Boolean,sortableMoveElements:{type:Boolean,default:void 0},sortableOpposite:Boolean,accordionList:Boolean,accordionOpposite:Boolean,contactsList:Boolean,simpleList:Boolean,linksList:Boolean,noHairlines:Boolean,noHairlinesBetween:Boolean,noHairlinesMd:Boolean,noHairlinesBetweenMd:Boolean,noHairlinesIos:Boolean,noHairlinesBetweenIos:Boolean,noHairlinesAurora:Boolean,noHairlinesBetweenAurora:Boolean,noChevron:Boolean,chevronCenter:Boolean,tab:Boolean,tabActive:Boolean,form:Boolean,formStoreData:Boolean,inlineLabels:Boolean,virtualList:Boolean,virtualListParams:Object},vt.colorProps),render(){var e=this.$createElement,t=this.props,{id:r,style:i,form:n,sortableMoveElements:a}=t,{list:s,default:o}=this.$slots,l=[],c=[],h=s||[],u=ot.flattenArray(o),d=!1;u.forEach(e=>{var t;void 0!==e&&((t=e.tag)&&!("li"===t||"F7ListItem"===t||"F7ListButton"===t||"F7ListInput"===t||t.indexOf("list-item")>=0||t.indexOf("list-button")>=0||t.indexOf("list-input")>=0||t.indexOf("f7-list-item")>=0||t.indexOf("f7-list-button")>=0||t.indexOf("f7-list-input")>=0)?d?c.push(e):l.push(e):t&&(d=!0,h.push(e)))});var p=n?"form":"div";return h.length>0?e(p,{ref:"el",style:i,class:this.classes,attrs:{id:r,"data-sortable-move-elements":void 0!==a?a.toString():void 0}},[this.$slots["before-list"],l,e("ul",[h]),this.$slots["after-list"],c]):e(p,{ref:"el",style:i,class:this.classes,attrs:{id:r,"data-sortable-move-elements":void 0!==a?a.toString():void 0}},[this.$slots["before-list"],l,this.$slots["after-list"],c])},computed:{classes(){var e=this.props,{inset:t,xsmallInset:r,smallInset:i,mediumInset:n,largeInset:a,xlargeInset:s,mediaList:o,simpleList:l,linksList:c,sortable:h,sortableTapHold:u,sortableEnabled:d,sortableOpposite:p,accordionList:f,accordionOpposite:g,contactsList:v,virtualList:m,tab:b,tabActive:y,noHairlines:w,noHairlinesIos:C,noHairlinesMd:_,noHairlinesAurora:x,noHairlinesBetween:S,noHairlinesBetweenIos:k,noHairlinesBetweenMd:T,noHairlinesBetweenAurora:O,formStoreData:E,inlineLabels:P,className:A,noChevron:D,chevronCenter:I}=e;return ot.classNames(A,"list",{inset:t,"xsmall-inset":r,"small-inset":i,"medium-inset":n,"large-inset":a,"xlarge-inset":s,"media-list":o,"simple-list":l,"links-list":c,sortable:h,"sortable-tap-hold":u,"sortable-enabled":d,"sortable-opposite":p,"accordion-list":f,"accordion-opposite":g,"contacts-list":v,"virtual-list":m,tab:b,"tab-active":y,"no-hairlines":w,"no-hairlines-md":_,"no-hairlines-ios":C,"no-hairlines-aurora":x,"no-hairlines-between":S,"no-hairlines-between-md":T,"no-hairlines-between-ios":k,"no-hairlines-between-aurora":O,"form-store-data":E,"inline-labels":P,"no-chevron":D,"chevron-center":I},vt.colorClasses(e))},props(){return yt(this)}},created(){ot.bindMethods(this,["onSortableEnable","onSortableDisable","onSortableSort","onTabShow","onTabHide","onSubmit"])},mounted(){var e=this,t=e.$refs.el,{virtualList:r,virtualListParams:i,form:n}=e.props;e.$f7ready(a=>{if(e.eventTargetEl=t,a.on("sortableEnable",e.onSortableEnable),a.on("sortableDisable",e.onSortableDisable),a.on("sortableSort",e.onSortableSort),a.on("tabShow",e.onTabShow),a.on("tabHide",e.onTabHide),n&&t.addEventListener("submit",e.onSubmit),r){var s=i||{};(s.renderItem||s.itemTemplate||s.renderExternal)&&(e.f7VirtualList=a.virtualList.create(ot.extend({el:t,on:{itemBeforeInsert(t,r){e.dispatchEvent("virtual:itembeforeinsert virtualItemBeforeInsert",this,t,r)},beforeClear(t){e.dispatchEvent("virtual:beforeclear virtualBeforeClear",this,t)},itemsBeforeInsert(t){e.dispatchEvent("virtual:itemsbeforeinsert virtualItemsBeforeInsert",this,t)},itemsAfterInsert(t){e.dispatchEvent("virtual:itemsafterinsert virtualItemsAfterInsert",this,t)}}},s)))}})},beforeDestroy(){var e=this.$refs.el,t=this.$f7;e&&t&&(t.off("sortableEnable",this.onSortableEnable),t.off("sortableDisable",this.onSortableDisable),t.off("sortableSort",this.onSortableSort),t.off("tabShow",this.onTabShow),t.off("tabHide",this.onTabHide),e.removeEventListener("submit",this.onSubmit),this.eventTargetEl=null,delete this.eventTargetEl,this.virtualList&&this.f7VirtualList&&this.f7VirtualList.destroy&&this.f7VirtualList.destroy())},methods:{onSubmit(e){this.dispatchEvent("submit",e)},onSortableEnable(e){this.eventTargetEl===e&&this.dispatchEvent("sortable:enable sortableEnable")},onSortableDisable(e){this.eventTargetEl===e&&this.dispatchEvent("sortable:disable sortableDisable")},onSortableSort(e,t,r){this.eventTargetEl===r&&this.dispatchEvent("sortable:sort sortableSort",t)},onTabShow(e){this.eventTargetEl===e&&this.dispatchEvent("tab:show tabShow",e)},onTabHide(e){this.eventTargetEl===e&&this.dispatchEvent("tab:hide tabHide",e)},dispatchEvent(e,...t){Ct(this,e,...t)}}},jt={name:"f7-searchbar",props:Object.assign({id:[String,Number],noShadow:Boolean,noHairline:Boolean,form:{type:Boolean,default:!0},placeholder:{type:String,default:"Search"},spellcheck:{type:Boolean,default:void 0},disableButton:{type:Boolean,default:!0},disableButtonText:{type:String,default:"Cancel"},clearButton:{type:Boolean,default:!0},value:[String,Number,Array],inputEvents:{type:String,default:"change input compositionend"},expandable:Boolean,inline:Boolean,searchContainer:[String,Object],searchIn:{type:String,default:".item-title"},searchItem:{type:String,default:"li"},searchGroup:{type:String,default:".list-group"},searchGroupTitle:{type:String,default:".item-divider, .list-group-title"},foundEl:{type:[String,Object],default:".searchbar-found"},notFoundEl:{type:[String,Object],default:".searchbar-not-found"},backdrop:{type:Boolean,default:void 0},backdropEl:[String,Object],hideOnEnableEl:{type:[String,Object],default:".searchbar-hide-on-enable"},hideOnSearchEl:{type:[String,Object],default:".searchbar-hide-on-search"},ignore:{type:String,default:".searchbar-ignore"},customSearch:{type:Boolean,default:!1},removeDiacritics:{type:Boolean,default:!1},hideDividers:{type:Boolean,default:!0},hideGroups:{type:Boolean,default:!0},init:{type:Boolean,default:!0}},vt.colorProps),render(){var e,t,r=this.$createElement,i=this.props,{placeholder:n,spellcheck:a,clearButton:s,disableButton:o,disableButtonText:l,form:c,noShadow:h,noHairline:u,expandable:d,className:p,style:f,id:g,value:v,inline:m}=i;s&&(e=r("span",{ref:"clearEl",class:"input-clear-button"})),o&&(t=r("span",{ref:"disableEl",class:"searchbar-disable-button"},[l]));var b,y=c?"form":"div",w=ot.classNames(p,"searchbar",{"searchbar-inline":m,"no-shadow":h,"no-hairline":u,"searchbar-expandable":d},vt.colorClasses(i));return b=r("input",{ref:"inputEl",domProps:{value:v},on:{input:this.onInput,change:this.onChange,focus:this.onFocus,blur:this.onBlur},attrs:{placeholder:n,type:"search",spellcheck:a}}),r(y,{ref:"el",style:f,class:w,attrs:{id:g}},[this.$slots["before-inner"],r("div",{class:"searchbar-inner"},[this.$slots["inner-start"],r("div",{class:"searchbar-input-wrap"},[this.$slots["input-wrap-start"],b,r("i",{class:"searchbar-icon"}),e,this.$slots["input-wrap-end"]]),t,this.$slots["inner-end"],this.$slots.default]),this.$slots["after-inner"]])},created(){ot.bindMethods(this,["onSubmit","onClearButtonClick","onDisableButtonClick","onInput","onChange","onFocus","onBlur"])},mounted(){var e=this,{init:t,inputEvents:r,searchContainer:i,searchIn:n,searchItem:a,searchGroup:s,searchGroupTitle:o,hideOnEnableEl:l,hideOnSearchEl:c,foundEl:h,notFoundEl:u,backdrop:d,backdropEl:p,disableButton:f,ignore:g,customSearch:v,removeDiacritics:m,hideDividers:b,hideGroups:y,form:w,expandable:C,inline:_}=e.props,{el:x,clearEl:S,disableEl:k}=e.$refs;w&&x&&x.addEventListener("submit",e.onSubmit,!1),S&&S.addEventListener("click",e.onClearButtonClick),k&&k.addEventListener("click",e.onDisableButtonClick),t&&e.$f7ready(()=>{var t=ot.noUndefinedProps({el:e.$refs.el,inputEvents:r,searchContainer:i,searchIn:n,searchItem:a,searchGroup:s,searchGroupTitle:o,hideOnEnableEl:l,hideOnSearchEl:c,foundEl:h,notFoundEl:u,backdrop:d,backdropEl:p,disableButton:f,ignore:g,customSearch:v,removeDiacritics:m,hideDividers:b,hideGroups:y,expandable:C,inline:_,on:{search(t,r,i){e.dispatchEvent("searchbar:search searchbarSearch",t,r,i)},clear(t,r){e.dispatchEvent("searchbar:clear searchbarClear",t,r)},enable(t){e.dispatchEvent("searchbar:enable searchbarEnable",t)},disable(t){e.dispatchEvent("searchbar:disable searchbarDisable",t)}}});Object.keys(t).forEach(e=>{""===t[e]&&delete t[e]}),e.f7Searchbar=e.$f7.searchbar.create(t)})},beforeDestroy(){var{el:e,clearEl:t,disableEl:r}=this.$refs;this.props.form&&e&&e.removeEventListener("submit",this.onSubmit,!1),t&&t.removeEventListener("click",this.onClearButtonClick),r&&r.removeEventListener("click",this.onDisableButtonClick),this.f7Searchbar&&this.f7Searchbar.destroy&&this.f7Searchbar.destroy()},methods:{search(e){if(this.f7Searchbar)return this.f7Searchbar.search(e)},enable(){if(this.f7Searchbar)return this.f7Searchbar.enable()},disable(){if(this.f7Searchbar)return this.f7Searchbar.disable()},toggle(){if(this.f7Searchbar)return this.f7Searchbar.toggle()},clear(){if(this.f7Searchbar)return this.f7Searchbar.clear()},onChange(e){this.dispatchEvent("change",e)},onInput(e){this.dispatchEvent("input",e)},onFocus(e){this.dispatchEvent("focus",e)},onBlur(e){this.dispatchEvent("blur",e)},onSubmit(e){this.dispatchEvent("submit",e)},onClearButtonClick(e){this.dispatchEvent("click:clear clickClear",e)},onDisableButtonClick(e){this.dispatchEvent("click:disable clickDisable",e)},dispatchEvent(e,...t){Ct(this,e,...t)}},computed:{props(){return yt(this)}}},Ft={name:"f7-icon",props:Object.assign({id:[String,Number],material:String,f7:String,icon:String,ios:String,aurora:String,md:String,tooltip:String,tooltipTrigger:String,size:[String,Number]},vt.colorProps),data(){yt(this);return{state:(()=>{var e=this,t=e.$f7;return t||e.$f7ready(()=>{e.setState({_theme:e.$theme})}),{_theme:t?e.$theme:null}})()}},render(){var e=this.$createElement,t=this.props,{id:r,style:i}=t,n=t.size;return"number"!=typeof n&&parseFloat(n)!==1*n||(n="".concat(n,"px")),e("i",{ref:"el",style:ot.extend({fontSize:n,width:n,height:n},i),class:this.classes,attrs:{id:r}},[this.iconTextComputed,this.$slots.default])},watch:{"props.tooltip":function(e){if(!e&&this.f7Tooltip)return this.f7Tooltip.destroy(),this.f7Tooltip=null,void delete this.f7Tooltip;e&&!this.f7Tooltip&&this.$f7?this.f7Tooltip=this.$f7.tooltip.create({targetEl:this.$refs.el,text:e,trigger:this.props.tooltipTrigger}):e&&this.f7Tooltip&&this.f7Tooltip.setText(e)}},mounted(){var e=this,t=e.$refs.el;if(t){var{tooltip:r,tooltipTrigger:i}=e.props;r&&e.$f7ready(n=>{e.f7Tooltip=n.tooltip.create({targetEl:t,text:r,trigger:i})})}},beforeDestroy(){this.f7Tooltip&&this.f7Tooltip.destroy&&(this.f7Tooltip.destroy(),this.f7Tooltip=null,delete this.f7Tooltip)},computed:{iconTextComputed(){var{material:e,f7:t,md:r,ios:i,aurora:n}=this.props,a=this.state._theme,s=e||t;return r&&a&&a.md&&(r.indexOf("material:")>=0||r.indexOf("f7:")>=0)?s=r.split(":")[1]:i&&a&&a.ios&&(i.indexOf("material:")>=0||i.indexOf("f7:")>=0)?s=i.split(":")[1]:n&&a&&a.aurora&&(n.indexOf("material:")>=0||n.indexOf("f7:")>=0)&&(s=n.split(":")[1]),s},classes(){var e,t={icon:!0},r=this.props,i=this.state._theme,{material:n,f7:a,icon:s,md:o,ios:l,aurora:c,className:h}=r;if(i&&i.ios?e=l:i&&i.md?e=o:i&&i.aurora&&(e=c),e){var u=e.split(":"),d=u[0],p=u[1];"material"!==d&&"f7"!==d||(t["material-icons"]="material"===d,t["f7-icons"]="f7"===d),"icon"===d&&(t[p]=!0)}else t={icon:!0,"material-icons":n,"f7-icons":a},s&&(t[s]=!0);return ot.classNames(h,t,vt.colorClasses(r))},props(){return yt(this)}},methods:{setState(e,t){mt(this,e,t)}}},$t={name:"f7-link",props:Object.assign({id:[String,Number],noLinkClass:Boolean,text:String,tabLink:[Boolean,String],tabLinkActive:Boolean,tabbarLabel:Boolean,iconOnly:Boolean,badge:[String,Number],badgeColor:[String],iconBadge:[String,Number],href:{type:[String,Boolean],default:"#"},target:String,tooltip:String,tooltipTrigger:String,smartSelect:Boolean,smartSelectParams:Object},vt.colorProps,{},vt.linkIconProps,{},vt.linkRouterProps,{},vt.linkActionsProps),data(){return{state:{isTabbarLabel:yt(this).tabbarLabel}}},render(){var e,t,r,i,n=this.$createElement,a=this,s=a.props,{text:o,badge:l,badgeColor:c,iconOnly:h,iconBadge:u,icon:d,iconColor:p,iconSize:f,iconMaterial:g,iconF7:v,iconMd:m,iconIos:b,iconAurora:y,id:w,style:C}=s,_=a.$slots.default||[];return Object.keys(a.$slots).forEach(e=>{void 0!==a.$slots[e]&&"default"!==e&&a.$slots[e].forEach(e=>_.push(e))}),o&&(l&&(r=n(It,{attrs:{color:c}},[l])),t=n("span",{class:a.state.isTabbarLabel?"tabbar-label":""},[o,r])),(d||g||v||m||b||y)&&(u&&(i=n(It,{attrs:{color:c}},[u])),e=n(Ft,{attrs:{material:g,f7:v,icon:d,md:m,ios:b,aurora:y,color:p,size:f}},[i])),h||!o&&_&&0===_.length||!o&&!_?a.iconOnlyComputed=!0:a.iconOnlyComputed=!1,n("a",Bt(Object.assign({ref:"el",style:C,class:a.classes},a.attrs,{attrs:{id:w}})),[e,t,_])},watch:{"props.tooltip":function(e){if(!e&&this.f7Tooltip)return this.f7Tooltip.destroy(),this.f7Tooltip=null,void delete this.f7Tooltip;e&&!this.f7Tooltip&&this.$f7?this.f7Tooltip=this.$f7.tooltip.create({targetEl:this.$refs.el,text:e,trigger:this.props.tooltipTrigger}):e&&this.f7Tooltip&&this.f7Tooltip.setText(e)}},created(){ot.bindMethods(this,["onClick"])},mounted(){var e=this,t=e.$refs.el;t.addEventListener("click",e.onClick);var{tabbarLabel:r,tabLink:i,tooltip:n,tooltipTrigger:a,smartSelect:s,smartSelectParams:o,routeProps:l}=e.props,c=!1;(r||(i||""===i)&&e.$$(t).parents(".tabbar-labels").length)&&(c=!0),e.setState({isTabbarLabel:c}),l&&(t.f7RouteProps=l),e.$f7ready(r=>{if(s){var i=ot.extend({el:t},o||{});e.f7SmartSelect=r.smartSelect.create(i)}n&&(e.f7Tooltip=r.tooltip.create({targetEl:t,text:n,trigger:a}))})},updated(){var e=this.$refs.el,{routeProps:t}=this.props;t&&(e.f7RouteProps=t)},beforeDestroy(){var e=this.$refs.el;e.removeEventListener("click",this.onClick),delete e.f7RouteProps,this.f7SmartSelect&&this.f7SmartSelect.destroy&&this.f7SmartSelect.destroy(),this.f7Tooltip&&this.f7Tooltip.destroy&&(this.f7Tooltip.destroy(),this.f7Tooltip=null,delete this.f7Tooltip)},computed:{attrs(){var e=this.props,{href:t,target:r,tabLink:i}=e,n=t;return!0===t&&(n="#"),!1===t&&(n=void 0),ot.extend({href:n,target:r,"data-tab":ot.isStringProp(i)&&i||void 0},vt.linkRouterAttrs(e),vt.linkActionsAttrs(e))},classes(){var e=this.props,{tabLink:t,tabLinkActive:r,noLinkClass:i,smartSelect:n,className:a}=e;return ot.classNames(a,{link:!(i||this.state.isTabbarLabel),"icon-only":this.iconOnlyComputed,"tab-link":t||""===t,"tab-link-active":r,"smart-select":n},vt.colorClasses(e),vt.linkRouterClasses(e),vt.linkActionsClasses(e))},props(){return yt(this)}},methods:{onClick(e){this.dispatchEvent("click",e)},dispatchEvent(e,...t){Ct(this,e,...t)},setState(e,t){mt(this,e,t)}}},Nt=(console.log.bind(window.console,"%c[kc-icon-library] ","color: #ff9900"),{components:{f7Searchbar:jt,f7Block:Dt,f7BlockTitle:At,f7List:Mt,f7ListItem:Rt,f7Link:$t},props:{currentComposition:Object,iconPacks:Array,iconPackLibrary:Object,hideUninstall:Boolean},data(){return window.ll=this,this.utils=kt.a,this.trackMouseIsStillOver=kt.a.debounce(e=>{e&&e()},400),{dbgCounter:0,dragover:!1,trackMouseOver:"",placeholder:"static/placeholder.png",app:{},tmpCanvas:null,dbg:()=>{},libraryLoaded:!1,tags:[],inline:!1,searchresults:[],inSearch:!1,inSelectMode:!1,customsearch:!0,observer:null,error:{type:""},isActive:!1,iconSize:{current:Et.state.iconSize,min:24,max:144,step:16},initiallyHidden:!0}},methods:{scaleThumbnails(e){var t=e?this.iconSize.step:-this.iconSize.step,r=Et.state.iconSize||40,i=kt.a.minmax(r+t,this.iconSize.min,this.iconSize.max);this.iconSize.current=i,Et.setIconSize(i)},addToCanvas(e,t,r){this.currentComposition.mainview.addObjectToCanvas(t,null,null,null,e,r)},mouseOverRef(e,t,r){if("gif"===t.type){var i=this.$refs[e][0];i&&(r?t.savedSrc&&!t.savedSrc.includes(this.placeholder)&&(i.src=t.savedSrc):(t.savedSrc!==i.src&&(t.savedSrc=i.src),i.src=t.path))}},toggleEditor(e){this.$root.toggleEditor(e)},lastSaved:()=>"",isSelected:e=>!Et.isHidden(e.uuid),isIconPackHidden(e){return!0===this.inSelectMode&&this.inSearch?!this.searchresults.includes(e):!0!==this.inSelectMode&&(!this.inSearch&&!this.isSelected(e))},handleInfoClick(){var e=this.$f7,t=this.$$(".open-toast-center");t.on("mousedown",(function(e,t){e.stopPropagation()})),t.on("click",(function(t,r){var i=t.target.parentElement.dataset.path,n=(e="")=>String(e).split("\n")[0].substring(0,200);Promise.all([kt.a.readFile("".concat(i,"/manifest.json")),kt.a.readFile("".concat(i,"/license.txt"))]).then(t=>{var r=t[0];r.License=n(t[1]),e.dialog.alert(["Author","Version","Description","License"].map(e=>"<p>".concat(e," : ").concat(n(r[e])||"","</p>")).join(""),i.split("/").pop())}),t.stopPropagation()}))},logMe(e,t,r){console.log("LogMe",e,t,r)},openStreamDeckIconStore(e,t){$SD.api.openUrl("streamdeck://open/store/icons")},setSelectMode(e){e.altKey&&e.shiftKey?this.$root.prefsOpen=!this.$root.prefsOpen:(this.inSelectMode=!this.inSelectMode,this.inSelectMode||(this.inSearch=this.inSelectMode,this.installObserver(!0)),this.resetSearchBars())},search(e,t="searchicons"){var r=1==(e&&e.length>0);if(r){var i=[],n=e.toLowerCase();".searchiconpacks"===t?i.push(...this.iconPacks.filter(e=>e.name.toLowerCase().includes(n)||e.author.toLowerCase().includes(n)||e.tags.join(" ").toLowerCase().includes(n))):this.iconPacks.forEach(e=>{this.isSelected(e)&&i.push(...e.icons.filter(e=>e.name.toLowerCase().includes(n)||e.tagsAsString&&e.tagsAsString.toLowerCase().includes(n)))}),this.searchresults=i}else this.searchresults=[];this.inSearch=r},isExpanded(e){return!this.inSelectMode&&Et.isExpanded(e.uuid)},toggleHidden(e,t){if(t&&t.altKey)if(Et.isHidden(e.uuid))Et.clearProp("hiddenCategories");else{var r=[...this.iconPackLibrary.allUUIDs].filter(e=>e!==Et.defaultLibraryName);Et.setHidden(r)}else Et.toggleHidden(e.uuid)},doLog(e){console.log("doLog",e)},setIconPackSeen(e){var t,r,i=null===(t=$SD)||void 0===t||null===(r=t.actionInfo)||void 0===r?void 0:r.context;e&&i&&$SD.api.send(i,"iconPackSeen",{payload:{iconPack:e.uuid}})},trackMouse(e,t){!0===e.isNew&&(!0===t?(this.trackMouseOver=e.uuid,this.trackMouseIsStillOver(()=>{e.uuid==this.trackMouseOver&&(e.isNew=!1,this.setIconPackSeen(e))})):this.trackMouseOver="")},requestUninstall(e,t){var r=this.$f7;if(t.stopPropagation(),t&&t.altKey);else{var i=tr("Are you sure you want to uninstall %s icon pack?").sprintf('"'.concat(this.utils.capitalize(e.name),'"')),n=tr("Uninstall Icon Pack");r.dialog.confirm(i,n,t=>{var r=$SD.actionInfo?$SD.actionInfo.context:null;Et.removeProp("expandedCategories",e.uuid),Object(Pt.setTimeout)(()=>{console.log("uninstalling...",e.uuid),$SD.api.send(r,"uninstall",{payload:{iconPack:e.uuid}})},10)},(function(e){console.log("onSaveComposition::callbackCancel",e)}))}},expand(e,t){t&&t.altKey?Et.isExpanded(e.uuid)?Et.clearExpanded():Et.setExpanded([...this.iconPackLibrary.allUUIDs]):Et.toggleExpanded(e.uuid),this.installObserver(!0)},initLazyLoad(){Object(Pt.setTimeout)(()=>{if("IntersectionObserver"in window)this.installObserver();else{var e=[];document.querySelectorAll(".minions-container .mini").forEach(t=>{t.dataset&&t.dataset.hasOwnProperty("src")&&e.push(t)}),this.lazyLoad(e)}},1)},changeProp(e,t){this.iconPackLibrary[e]=t},resetSearchBars(){[".searchiconpacks",".searchicons"].forEach(e=>{this.$f7.searchbar.clear(e)})},onSortIconPacks(e){this.iconPackLibrary.sort(e),Et.setProp("iconPackSortOrder",this.iconPackLibrary.allUUIDs)},initIconSearchBar(){var e=this.$$,t=kt.a.debounce((e,t)=>{console.log("now searching...",e,t),this.search(e,t)},400);[".searchiconpacks",".searchicons"].forEach(r=>{var i=this.$f7.searchbar.get(r);i.$el.each((function(t,r){e(this).find("span.input-clear-button").on("click",(e,t,r)=>{i.clear()})})),i.on("search",(e,i,n)=>{i&&i.length?(e.el.classList.add("search-active"),t(i,r)):(e.el.classList.remove("search-active"),t(null,r))})})},installObserver(e){this.observer&&(this.observer.disconnect(),this.observer=null,e||document.querySelectorAll(".minions-container .mini.lazy-loaded").forEach(e=>{e.classList.contains("lazy-loaded")&&e.classList.remove("lazy-loaded")}));var t={root:document.querySelector(".iconlist"),rootMargin:"0px 0px 600px 0px",threshold:.1},r=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){r.unobserve(e.target);var t=e.target.closest(".minions-container").querySelectorAll(".expanded .mini"),i=[];t.forEach(e=>{e.classList.contains("lazy-loaded")||e.dataset.hasOwnProperty("src")&&i.push(e)}),i.length>0&&this.lazyLoad(i)}})},t);Object.values(document.querySelectorAll(".minions-container > h3")).forEach(e=>{r.observe(e)}),this.observer=r},lazyLoad(e){Array.isArray(e)?this.loadThreaded(e):this.loadThreaded([e])},blobtoDataURL(e,t=72,r=72){this.tmpCanvas||(this.tmpCanvas=document.createElement("canvas"));var i=this.tmpCanvas;return i.width===t&&i.height===r||(i.width=t,i.height=r),new Promise((function(t,r){var n=new Image;n.onload=()=>{i.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,i.width,i.height),t(i.toDataURL("image/png"))},n.src=e}))},loadThreaded(e){if(e.length)Object(Pt.setTimeout)(()=>{var t=e.shift();try{if("gif"==t.dataset.src.split(".").pop()){t.dataset.hover=t.dataset.src;var r=t.dataset.src.replace(/\.gif$/,".png");t.setAttribute("src",r)}else t.setAttribute("src",t.dataset.src);t.classList.add("lazy-loaded")}catch(e){kt.a.readFile(t.dataset.src,{responseType:"blob"}).then(e=>{this.blobtoDataURL(e).then(e=>{t.classList.add("lazy-loaded"),t.setAttribute("src",e)})})}e.length?this.loadThreaded(e):Et.throttledSave&&Et.throttledSave()},10)},removeUnavailable(e){var t=[],r=this.iconPackLibrary.allUUIDs;e.forEach((e,i)=>{r.indexOf(e)<0&&t.unshift(i)}),t.forEach(t=>{e.splice(t,1)})}},mounted(){this.iconPackLibrary.on("update",()=>{this.removeUnavailable(Et.state.iconPackSortOrder),this.removeUnavailable(Et.state.hiddenCategories),this.removeUnavailable(Et.state.expandedCategories),Object(Pt.setTimeout)(()=>{this.initLazyLoad(),this.initIconSearchBar(),Object(Pt.setTimeout)(()=>{this.initiallyHidden=!1},80)},this.$prefs.initLazyLoad||100)})}});r(29);function zt(e,t,r,i,n,a,s,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):n&&(l=o?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(e,t){return l.call(t),h(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var Ut=zt(Nt,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"iconlibrary",class:{hasBottomBar:e.$prefs.showBottomBar}},[r("div",{staticClass:"iconlibrary-top"},[r("div",{staticClass:"left"},[e.$prefs.showMenu?r("a",{staticClass:"kc_icons kc_burger",on:{click:function(t){return e.toggleEditor(t)}}}):e._e()]),e._v(" "),r("div",{staticClass:"right"},[r("f7-list",{staticClass:"lib-search-list"},[r("f7-list-item",[r("div",{staticClass:"searchbars"},[r("f7-searchbar",{directives:[{name:"show",rawName:"v-show",value:e.inSelectMode,expression:"inSelectMode"}],staticClass:"searchiconpacks",attrs:{inline:"","search-container":".iconlist","custom-search":e.customsearch,"search-item":".minions-container","search-in":"title",placeholder:e.tr("Search in iconpacks"),"disable-button":!1,"clear-button":!0}}),e._v(" "),r("f7-searchbar",{directives:[{name:"show",rawName:"v-show",value:!e.inSelectMode,expression:"!inSelectMode"}],staticClass:"searchicons",attrs:{inline:"","search-container":".iconlist","custom-search":e.customsearch,"search-in":"img[title]",placeholder:e.tr("Search in icons"),"disable-button":!1,"clear-button":!0}})],1)]),e._v(" "),r("f7-list-item",{staticClass:"ficon",attrs:{name:"Hello"}},[r("div",{staticClass:"filterIcon",class:{selectModeEnabled:e.inSelectMode},attrs:{"data-done":e.tr("Done")},on:{click:e.setSelectMode}})])],1)],1)]),e._v(" "),r("div",{staticClass:"iconlist nomargin grid",class:{selectModeEnabled:e.inSelectMode,searchModeEnabled:e.inSearch}},[r("div",{staticClass:"minions-wrapper",class:{initiallyHidden:e.initiallyHidden,hideUninstall:e.hideUninstall}},[e._m(0),e._v(" "),!e.inSelectMode&&e.inSearch?r("div",{staticClass:"minions-container expanded",attrs:{id:"dbg-first-div"}},[r("div",{staticClass:"minions insearch"},e._l(e.searchresults,(function(t,i){return r("div",{key:1e4+i,staticClass:"imgtype",class:t.type,on:{click:function(r){return e.currentComposition.mainview.addObjectToCanvas(t,null,null,null,r,t)}}},[r("img",{staticClass:"mini",attrs:{src:t.path,alt:t.name,title:t.name,tags:t.tagsAsString}})])})),0)]):e._e(),e._v(" "),r("f7-list",{attrs:{id:"dbg-f7list",sortable:"","sortable-enabled":""},on:{"sortable:sort":e.onSortIconPacks}},e._l(e.iconPacks,(function(t,i){return r("li",{directives:[{name:"show",rawName:"v-show",value:!!e.inSelectMode||0==e.inSearch&&e.isSelected(t),expression:"inSelectMode ? true : inSearch == false && isSelected(item)"}],key:t.path,staticClass:"minions-container",class:{"no-sorting user-class":"true"==t.pinned&&"true"!==t.canhide,expanded:e.isExpanded(t),hiddenBySearchbar:e.isIconPackHidden(t)},attrs:{id:"dbg-f7-li",title:t.tagsAsString}},[e.inSelectMode?r("label",[r("input",{staticStyle:{display:"none","z-index":"1000"},attrs:{type:"checkbox",name:"checkbox-"+t.name},domProps:{value:t.name,checked:!e.$store.isHidden(t.uuid)},on:{click:function(r){return e.toggleHidden(t,r)}}}),e._v(" "),r("i",{staticClass:"icon kc-icon-checkbox"})]):e._e(),e._v(" "),e.inSelectMode?r("h3",{staticClass:"heading",class:{selectModeEnabled:e.inSelectMode}},[r("div",{staticClass:"headthumb"},[r("img",{attrs:{src:t.path+"/"+t.icon}})]),e._v(" "),r("span",{staticClass:"icon-pack-span"},[r("span",{staticClass:"icon-pack-name",attrs:{"data-count":e.iconPackLibrary.stats[t.uuid]||0}},[e._v(e._s(t.name))])])]):r("h3",{staticClass:"heading",class:{selectModeEnabled:e.inSelectMode},on:{mouseenter:function(r){return e.trackMouse(t,!0)},mouseleave:function(r){return e.trackMouse(t,!1)},click:function(r){return e.expand(t,r)}}},[r("div",{staticClass:"headthumb"},[r("img",{attrs:{src:t.path+"/"+t.icon}})]),e._v(" "),r("span",{staticClass:"icon-pack-span"},[r("span",{staticClass:"icon-pack-name",attrs:{"data-count":e.iconPackLibrary.stats[t.uuid]||0}},[e._v(e._s(t.name))])]),e._v(" "),r("f7-link",{ref:""+t.uuid,refInFor:!0,staticClass:"kc_icons newbadge infront",class:{hidden:!t.isNew}}),e._v(" "),r("f7-link",{staticClass:"kc_icons trash infront andy",class:{"no-uninstall":"true"==t.pinned},on:{click:function(r){return e.requestUninstall(t,r)}}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.inSelectMode,expression:"!inSelectMode"}],staticClass:"minions",attrs:{name:t.name}},e._l(t.icons,(function(n,a){return r("div",{key:1e3*i+a,staticClass:"imgtype",class:n.type},[r("img",{ref:i+"_"+a,refInFor:!0,staticClass:"mini",attrs:{src:"gif"==n.type&&n.src||e.placeholder,"data-src":n.path,alt:n.name,title:n.uuid,tags:n.tagsAsString},on:{mouseover:function(t){return e.mouseOverRef(i+"_"+a,n)},mouseleave:function(t){return e.mouseOverRef(i+"_"+a,n,!0)},click:function(r){return e.addToCanvas(r,n,t)}}})])})),0),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.inSelectMode,expression:"inSelectMode"}],staticClass:"sortable-handler"})])})),0)],1)]),e._v(" "),e.$prefs.showBottomBar?r("div",{staticClass:"iconlibrary-bottom"},[r("div",{staticClass:"bb-left"},[e.$prefs.showMenu?r("a",{staticClass:"kc_icons kc_burger",on:{click:function(t){return e.toggleEditor(t)}}}):e._e(),e._v(" "),e.$root.ui.condensed?r("a",{staticClass:"kc-icon-store-link",attrs:{target:"_blank"},on:{click:e.openStreamDeckIconStore}},[r("i",{staticClass:"icon kc-icon-store"})]):r("a",{staticClass:"kc-icon-store-link",attrs:{title:e.tr("Get more icon packs..."),target:"_blank"},on:{click:e.openStreamDeckIconStore}},[e._v("\n                "+e._s(e.tr("Get more icon packs..."))+"\n            ")]),e._v(" "),e.$prefs.showStatistics?r("div",{staticClass:"iconpack-info"},[e._v("IconPacks: "+e._s(e.iconPackLibrary.length)+"    Icons: "+e._s(e.iconPackLibrary.stats.__count))]):e._e()]),e._v(" "),r("div",{staticClass:"bb-right"},[r("a",{staticClass:"zoom kc_icons kc_minus",class:{disabled:e.iconSize.current<=e.iconSize.min},on:{click:function(t){return e.scaleThumbnails()}}}),e._v(" "),r("a",{staticClass:"zoom kc_icons kc_plus",class:{disabled:e.iconSize.current>=e.iconSize.max},on:{click:function(t){return e.scaleThumbnails(!0)}}})])]):e._e()])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"list simple-list searchbar-not-found"},[t("ul",[t("li",[this._v("Nothing found")])])])}],!1,null,null,null).exports,Ht=r(13),Wt=r.n(Ht),Vt=console.log.bind(window.console,"[webfontloader] "),Yt=zt({components:{SmartSelect:et,VirtualList:Je,f7Block:Dt,f7BlockTitle:At,f7List:Mt,f7ListItem:Rt},props:{mainview:Object,systemFonts:Array,googleFonts:Array},data(){return window.insp=this,{dbg:()=>{},vlData:{items:[]},findFont:tr("Find Font"),inputDisabled:!1,fontSelect:null,fontSelectItem:{},customFonts:Et.fonts,inspectorIcons:["align_left","align_center","align_right","align_top","align_middle","align_bottom"],propGroups:{fill:[{property:"fill"}],opacity:[{property:"opacity"}],lines:[{property:"stroke"},{property:"strokeWidth",title:""}]}}},methods:{disabledFonts(){return!(this.fontSelect&&Number(this.fontSelect.$selectEl[0].length>0)&&this.mainview.selectedLayer&&"i-text"==this.mainview.selectedLayer.type)},setSmartSelectValue(e,t){this.fontSelect||(this.fontSelect=this.$f7.smartSelect.get(".fontselect .smart-select"),this.fontSelect&&(this.fontSelectItem=document.querySelector(".fontselect .item-after"),this.fontSelect.on("change",()=>{console.log("setSmartSelectValue:fontSelect changed"),this.changeFont()}))),e&&this.fontSelect&&this.fontSelect.getValue()!=e&&this.fontSelect.setValue(e)},onSSOpen(e){var t=e.vl.items.findIndex(e=>!0===e.selected);(t<e.vl.currentFromIndex||t>e.vl.currentToIndex)&&e.vl.scrollToItem(t),e.searchbar.inputEl.placeholder=this.$strings["Find Font"];var r=e.searchbar.$pageEl[0].querySelector(".link.popup-close");r&&(r.innerText=this.$strings.Close)},searchAll(e,t){for(var r=[],i=0;i<t.length;i+=1)(t[i].title.toLowerCase().indexOf(e.toLowerCase())>=0||""===e.trim())&&r.push(i);return r},renderExternal(e,t){this.dbg("kc-inspector::renderExternal",e,t),this.vlData=t},isDisabled(e,t){return"fonts"==t?!(this.mainview.selectedLayer&&"i-text"==this.mainview.selectedLayer.type):null===this.mainview.selectedLayer[e.property]||void 0===this.mainview.selectedLayer[e.property]},changeFont(){var e=this.fontSelect&&this.fontSelect.getValue();e&&e.length&&""!=e&&(this.dbg("changeFont: new fontName:",e,e.length),this.loadFont(e,this.fontSelectItem))},applyFont(e,t,r=200){this.dbg("applyFont: new font:",e,t,r);var i=document.getElementById("fontloader");i&&(i.style.fontFamily=e),setTimeout(()=>{t.style.fontFamily=e,this.mainview.applyFont(e)},r)},loadFont(e,t){var r=this;this.$f7;if(this.systemFonts.includes(e)||this.customFonts.includes(e))return this.dbg("Loading Local Font:",e),void this.applyFont(e,t,10);var i=this.$root.handlePreloader,n=document.querySelector(".kc-preloader"),a=document.querySelector(".canvas-container");Wt.a.load({loading:function(){Vt("WebFontConfig::loading"),i(!0,n,a)},active:function(){Vt("WebFontConfig::active");r.applyFont(e,t,100),setTimeout(()=>{i(!1,n,a)},100)},inactive:function(){Vt("WebFontConfig::inactive"),i(!1,n,a)},fontloading:function(e,t){Vt("WebFontConfig::fontloading",e,t)},fontactive:function(e,t){Vt("WebFontConfig::fontactive",e,t)},fontinactive:function(e,t){Vt("WebFontConfig::fontinactive",e,t)},google:{families:[e]}})}}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"kc-inspector"},[r("f7-block-title",[e._v(e._s(e.tr("Inspector")))]),e._v(" "),r("f7-list",{staticClass:"pi-mini",class:e.mainview&&e.mainview.selectedLayer&&!e.$root.disableLayerControls?"pi-list ":"pi-list disabled"},[r("f7-list-item",{attrs:{title:e.tr("Color")}},[r("input",{key:"id_color",attrs:{id:"id_color",name:"id_color",title:"xColor",type:"color"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.fill,"fill")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"fill",t.target.value)}}})]),e._v(" "),r("f7-list-item",{attrs:{title:e.tr("Stroke")}},[r("div",{staticStyle:{display:"flex"}},[r("input",{key:"id_strokewidth",attrs:{id:"id_strokewidth",name:"id_strokewidth",type:"number",step:"1",max:"100",min:"0"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.strokeWidth,"strokeWidth")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"strokeWidth",t.target.value)}}}),e._v(" "),r("input",{key:"id_stroke",attrs:{id:"id_stroke",name:"id_stroke",type:"color"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.stroke,"stroke")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"stroke",t.target.value)}}})])]),e._v(" "),r("f7-list-item",{attrs:{title:e.tr("Opacity")}},[r("div",{staticClass:"flex-align-center"},[r("input",{key:"id_opacity_range",attrs:{id:"id_opacity_range",name:"id_opacity_range",type:"range",step:"0.01",max:"1",min:"0"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.opacity,"opacity")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"opacity",t.target.value)}}}),e._v(" "),r("input",{key:"id_opacity",attrs:{id:"id_opacity",name:"id_opacity",title:"Opacity",type:"number",step:"0.01",max:"1",min:"0"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.opacity,"opacity")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"opacity",t.target.value)}}})])]),e._v(" "),r("f7-list-item",{attrs:{title:e.tr("Angle")}},[r("div",{staticClass:"flex-align-center"},[r("input",{key:"id_angle_range",attrs:{id:"id_angle_range",name:"id_angle_range",type:"range",step:"1",max:"360",min:"0"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.angle,"angle")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"angle",t.target.value)}}}),e._v(" "),r("input",{key:"id_angle",attrs:{id:"id_angle",name:"id_angle",title:"Angle",type:"number",step:"1",max:"360",min:"0"},domProps:{value:e._f("formatvalue")(e.mainview.selectedLayer&&e.mainview.selectedLayer.angle,"angle")},on:{input:function(t){e.mainview&&e.mainview.updateProperty(t,"angle",t.target.value)}}})])]),e._v(" "),r("f7-list-item",{staticClass:"fontselect",attrs:{disabled:e.disabledFonts(),title:e.tr("Font"),value:e.setSmartSelectValue(e.mainview.selectedLayer&&e.mainview.selectedLayer.fontFamily),fontselect:"","smart-select":"","smart-select-params":{on:{open:e.onSSOpen},popupCloseLinkText:"Close",virtualList:!0,virtualListHeight:28,routableModals:!1,cssClass:"smartselect-font",closeOnSelect:!0,openIn:"popup",searchbar:!0,searchbarPlaceholder:"Find Font"}}},[r("select",{attrs:{name:"Font"}},[r("optgroup",{staticClass:"systemFonts",attrs:{label:"System Fonts"}},e._l(e.systemFonts,(function(t,i){return r("option",{key:i,domProps:{value:t}},[e._v(e._s(t))])})),0),e._v(" "),r("optgroup",{staticClass:"googleFonts",attrs:{label:"Google Fonts"}},e._l(e.googleFonts,(function(t,i){return r("option",{key:i,domProps:{value:t}},[e._v(e._s(t))])})),0)])])],1)],1)}),[],!1,null,null,null).exports,Xt=zt({props:{mainview:Object,reverseLayers:Array,disableLayerControls:Boolean},components:{f7Block:Dt,f7BlockTitle:At,f7List:Mt,f7ListItem:Rt},data:()=>({utils:kt.a,isListScrolling:!1}),created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.isLayersScrolling()},setVisibility(e,t,r){console.log("setVisibility",r,t.name,this.reverseLayers[r],t,e),this.$emit("clickFromChildComponent");var i=this.reverseLayers[r];i.visible=!i.visible},isLayersScrolling(){setTimeout(()=>{this.isListScrolling=this.$refs.layerlist.$el&&this.$refs.layerlist.$el.scrollHeight>this.$refs.layerlist.$el.clientHeight},1)}}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"kc-inspector kc-inspector-layers"},[r("f7-block-title",[r("span",{staticClass:"kc-tooltip",class:{disabled:0==e.reverseLayers.length},attrs:{"data-tooltip":"::LayersList"}},[e._v(e._s(e.tr("Layers")))]),e._v(" "),r("span",{staticClass:"topNavIcons"},[r("span",{directives:[{name:"show",rawName:"v-show",value:e.reverseLayers.length>0,expression:"reverseLayers.length > 0"}],staticClass:"kc_icons trash kc-tooltip",class:{disabled:e.$root.disableLayerControls},attrs:{"data-tooltip":"::DeleteAllLayers"},on:{click:function(t){return e.mainview.onDeleteAllLayers(t)}}})])]),e._v(" "),r("f7-list",{staticClass:"layerlist extralist single",class:{scrolling:e.isListScrolling}},[r("f7-list-item",{directives:[{name:"show",rawName:"v-show",value:e.mainview.hasExtraLayer(),expression:"mainview.hasExtraLayer()"}],staticClass:"extraLayer",attrs:{title:e.utils.truncString(e.mainview.extraLayer.name,24,8),alt:e.mainview.extraLayer.name}},[r("div",{staticClass:"endlist"},[r("i",{staticClass:"kc_icons kc-tooltip trash",attrs:{"data-tooltip":"::DeleteLayer","data-title":e.mainview.extraLayer.name},on:{click:function(t){return e.mainview.showMainCanvasFor()}}})])])],1),e._v(" "),r("f7-list",{ref:"layerlist",staticClass:"layerlist shortlistx",class:{scrolling:e.isListScrolling,single:e.reverseLayers.length<2},attrs:{test:e.isLayersScrolling(),sortable:"","sortable-enabled":"","sortable-move-elements":!1},on:{"sortable:sort":e.mainview.onSortLayers}},e._l(e.reverseLayers,(function(t,i){return r("f7-list-item",{key:i,class:e.mainview.selectedLayer===t?"selected":"",attrs:{title:e.utils.truncString(t.name,14,8),alt:t.name},on:{click:function(r){return e.mainview.clickLayer(t,r)}}},[r("div",{staticClass:"endlist"},[r("i",{staticClass:"kc_icons kc-tooltip",class:t.visible?"eye":"eye_off",attrs:{"data-tooltip":"::ShowHideLayer","data-title":t.name},on:{click:function(r){return e.setVisibility(r,t,i)}}}),e._v(" "),r("i",{staticClass:"kc_icons kc-tooltip trash",attrs:{"data-tooltip":"::DeleteLayer","data-title":t.name},on:{click:function(r){return e.mainview.onDeleteItem(t,i)}}})])])})),1)],1)}),[],!1,null,null,null).exports,Gt={name:"f7-popup",props:Object.assign({id:[String,Number],tabletFullscreen:Boolean,opened:Boolean,animate:Boolean,backdrop:Boolean,backdropEl:[String,Object],closeByBackdropClick:Boolean,closeOnEscape:Boolean,swipeToClose:{type:[Boolean,String],default:!1},swipeHandler:[String,Object],push:Boolean},vt.colorProps),render(){var e=this.$createElement,t=this.props,{className:r,id:i,style:n,tabletFullscreen:a,push:s}=t;return e("div",{ref:"el",style:n,class:ot.classNames(r,"popup",{"popup-tablet-fullscreen":a,"popup-push":s},vt.colorClasses(t)),attrs:{id:i}},[this.$slots.default])},watch:{"props.opened":function(e){this.f7Popup&&(e?this.f7Popup.open():this.f7Popup.close())}},created(){ot.bindMethods(this,["onOpen","onOpened","onClose","onClosed","onSwipeStart","onSwipeMove","onSwipeEnd","onSwipeClose"])},mounted(){var e=this,t=e.$refs.el;if(t){var r=e.props,{closeByBackdropClick:i,backdrop:n,backdropEl:a,animate:s,closeOnEscape:o,swipeToClose:l,swipeHandler:c}=r,h={el:t,on:{swipeStart:e.onSwipeStart,swipeMove:e.onSwipeMove,swipeEnd:e.onSwipeEnd,swipeClose:e.onSwipeClose,open:e.onOpen,opened:e.onOpened,close:e.onClose,closed:e.onClosed}},u=e.$options.propsData;void 0!==u.closeByBackdropClick&&(h.closeByBackdropClick=i),void 0!==u.closeOnEscape&&(h.closeOnEscape=o),void 0!==u.animate&&(h.animate=s),void 0!==u.backdrop&&(h.backdrop=n),void 0!==u.backdropEl&&(h.backdropEl=a),void 0!==u.swipeToClose&&(h.swipeToClose=l),void 0!==u.swipeHandler&&(h.swipeHandler=c),e.$f7ready(()=>{e.f7Popup=e.$f7.popup.create(h),e.props.opened&&e.f7Popup.open(!1)})}},beforeDestroy(){this.f7Popup&&this.f7Popup.destroy()},methods:{onSwipeStart(e){this.dispatchEvent("popup:swipestart popupSwipeStart",e)},onSwipeMove(e){this.dispatchEvent("popup:swipemove popupSwipeMove",e)},onSwipeEnd(e){this.dispatchEvent("popup:swipeend popupSwipeEnd",e)},onSwipeClose(e){this.dispatchEvent("popup:swipeclose popupSwipeClose",e)},onOpen(e){this.dispatchEvent("popup:open popupOpen",e)},onOpened(e){this.dispatchEvent("popup:opened popupOpened",e)},onClose(e){this.dispatchEvent("popup:close popupClose",e)},onClosed(e){this.dispatchEvent("popup:closed popupClosed",e)},open(e){if(this.f7Popup)return this.f7Popup.open(e)},close(e){if(this.f7Popup)return this.f7Popup.close(e)},dispatchEvent(e,...t){Ct(this,e,...t)}},computed:{props(){return yt(this)}}},qt={name:"f7-preloader",props:Object.assign({id:[String,Number],size:[Number,String]},vt.colorProps),data(){yt(this);return{state:(()=>{var e=this,t=e.$f7;return t||e.$f7ready(()=>{e.setState({_theme:e.$theme})}),{_theme:t?e.$theme:null}})()}},render(){var e,t=this.$createElement,{sizeComputed:r,props:i}=this,{id:n,style:a,className:s}=i,o=this.state._theme,l={};return r&&(l.width="".concat(r,"px"),l.height="".concat(r,"px"),l["--f7-preloader-size"]="".concat(r,"px")),a&&ot.extend(l,a||{}),o&&o.md?e=t("span",{class:"preloader-inner"},[t("span",{class:"preloader-inner-gap"}),t("span",{class:"preloader-inner-left"},[t("span",{class:"preloader-inner-half-circle"})]),t("span",{class:"preloader-inner-right"},[t("span",{class:"preloader-inner-half-circle"})])]):o&&o.ios?e=t("span",{class:"preloader-inner"},[t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"}),t("span",{class:"preloader-inner-line"})]):o&&o.aurora?e=t("span",{class:"preloader-inner"},[t("span",{class:"preloader-inner-circle"})]):o||(e=t("span",{class:"preloader-inner"})),t("span",{style:l,class:ot.classNames(s,"preloader",vt.colorClasses(i)),attrs:{id:n}},[e])},computed:{sizeComputed(){var e=this.props.size;return e&&"string"==typeof e&&e.indexOf("px")>=0&&(e=e.replace("px","")),e},props(){return yt(this)}},methods:{setState(e,t){mt(this,e,t)}}},Kt={name:"f7-page-content",props:Object.assign({id:[String,Number],tab:Boolean,tabActive:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},vt.colorProps),render(){var e,t,r=this.$createElement,i=this.props,{ptr:n,ptrPreloader:a,ptrDistance:s,ptrBottom:o,ptrMousewheel:l,infinite:c,infinitePreloader:h,id:u,style:d,infiniteDistance:p,infiniteTop:f}=i;return n&&a&&(e=r("div",{class:"ptr-preloader"},[r(qt),r("div",{class:"ptr-arrow"})])),c&&h&&(t=r(qt,{class:"infinite-scroll-preloader"})),r("div",{style:d,class:this.classes,ref:"el",attrs:{id:u,"data-ptr-distance":s||void 0,"data-ptr-mousewheel":l||void 0,"data-infinite-distance":p||void 0}},[o?null:e,f?t:null,this.$slots.default,f?null:t,o?e:null])},computed:{classes(){var e=this.props,{className:t,tab:r,tabActive:i,ptr:n,ptrBottom:a,infinite:s,infiniteTop:o,hideBarsOnScroll:l,hideNavbarOnScroll:c,hideToolbarOnScroll:h,messagesContent:u,loginScreen:d}=e;return ot.classNames(t,"page-content",{tab:r,"tab-active":i,"ptr-content":n,"ptr-bottom":a,"infinite-scroll-content":s,"infinite-scroll-top":o,"hide-bars-on-scroll":l,"hide-navbar-on-scroll":c,"hide-toolbar-on-scroll":h,"messages-content":u,"login-screen-content":d},vt.colorClasses(e))},props(){return yt(this)}},created(){ot.bindMethods(this,["onPtrPullStart","onPtrPullMove","onPtrPullEnd","onPtrRefresh","onPtrDone","onInfinite","onTabShow","onTabHide"])},mounted(){var e=this,t=e.$refs.el,{ptr:r,infinite:i,tab:n}=e.props;e.$f7ready(a=>{e.eventTargetEl=t,r&&(a.on("ptrPullStart",e.onPtrPullStart),a.on("ptrPullMove",e.onPtrPullMove),a.on("ptrPullEnd",e.onPtrPullEnd),a.on("ptrRefresh",e.onPtrRefresh),a.on("ptrDone",e.onPtrDone)),i&&a.on("infinite",e.onInfinite),n&&(a.on("tabShow",e.onTabShow),a.on("tabHide",e.onTabHide))})},beforeDestroy(){this.$f7&&(this.$f7.off("ptrPullStart",this.onPtrPullStart),this.$f7.off("ptrPullMove",this.onPtrPullMove),this.$f7.off("ptrPullEnd",this.onPtrPullEnd),this.$f7.off("ptrRefresh",this.onPtrRefresh),this.$f7.off("ptrDone",this.onPtrDone),this.$f7.off("infinite",this.onInfinite),this.$f7.off("tabShow",this.onTabShow),this.$f7.off("tabHide",this.onTabHide),this.eventTargetEl=null,delete this.eventTargetEl)},methods:{onPtrPullStart(e){this.eventTargetEl===e&&this.dispatchEvent("ptr:pullstart ptrPullStart")},onPtrPullMove(e){this.eventTargetEl===e&&this.dispatchEvent("ptr:pullmove ptrPullMove")},onPtrPullEnd(e){this.eventTargetEl===e&&this.dispatchEvent("ptr:pullend ptrPullEnd")},onPtrRefresh(e,t){this.eventTargetEl===e&&this.dispatchEvent("ptr:refresh ptrRefresh",t)},onPtrDone(e){this.eventTargetEl===e&&this.dispatchEvent("ptr:done ptrDone")},onInfinite(e){this.eventTargetEl===e&&this.dispatchEvent("infinite")},onTabShow(e){this.eventTargetEl===e&&this.dispatchEvent("tab:show tabShow",e)},onTabHide(e){this.eventTargetEl===e&&this.dispatchEvent("tab:hide tabHide",e)},dispatchEvent(e,...t){Ct(this,e,...t)}}},Jt={name:"f7-page",props:Object.assign({id:[String,Number],name:String,stacked:Boolean,withSubnavbar:{type:Boolean,default:void 0},subnavbar:{type:Boolean,default:void 0},withNavbarLarge:{type:Boolean,default:void 0},navbarLarge:{type:Boolean,default:void 0},noNavbar:Boolean,noToolbar:Boolean,tabs:Boolean,pageContent:{type:Boolean,default:!0},noSwipeback:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},vt.colorProps),data(){yt(this);return{state:{hasSubnavbar:!1,hasNavbarLarge:!1,hasNavbarLargeCollapsed:!1,hasCardExpandableOpened:!1,routerPositionClass:"",routerForceUnstack:!1,routerPageRole:null,routerPageRoleDetailRoot:!1,routerPageMasterStack:!1}}},render(){var e,t,r,i,n=this.$createElement,a=this.props,{id:s,style:o,name:l,pageContent:c,messagesContent:h,ptr:u,ptrDistance:d,ptrPreloader:p,ptrBottom:f,ptrMousewheel:g,infinite:v,infiniteDistance:m,infinitePreloader:b,infiniteTop:y,hideBarsOnScroll:w,hideNavbarOnScroll:C,hideToolbarOnScroll:_,loginScreen:x,className:S,stacked:k,tabs:T,subnavbar:O,withSubnavbar:E,navbarLarge:P,withNavbarLarge:A,noNavbar:D,noToolbar:I,noSwipeback:L}=a,B=[],R=[],{static:M,fixed:j,default:F}=this.$slots;e="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index".split(" "),r=this.$options.propsData.messagesContent,F&&F.forEach(n=>{if(void 0!==n){var a=!1,s=n.tag;if(s){s.indexOf("subnavbar")>=0&&(t=!0),s.indexOf("navbar")>=0&&n.componentOptions&&n.componentOptions.propsData&&"large"in n.componentOptions.propsData&&(n.componentOptions.propsData.large||""===n.componentOptions.propsData.large)&&(i=!0),void 0===r&&s.indexOf("messages")>=0&&(r=!0);for(var o=0;o<e.length;o+=1)s.indexOf(e[o])>=0&&(a=!0);c&&(a?B.push(n):R.push(n))}else c&&R.push(n)}});var $=void 0===O&&void 0===E&&(t||this.state.hasSubnavbar),N=void 0===P&&void 0===A&&(i||this.state.hasNavbarLarge),z=ot.classNames(S,"page",this.state.routerPositionClass,{stacked:k&&!this.state.routerForceUnstack,tabs:T,"page-with-subnavbar":O||E||$,"page-with-navbar-large":P||A||N,"no-navbar":D,"no-toolbar":I,"no-swipeback":L,"page-master":"master"===this.state.routerPageRole,"page-master-detail":"detail"===this.state.routerPageRole,"page-master-detail-root":!0===this.state.routerPageRoleDetailRoot,"page-master-stacked":!0===this.state.routerPageMasterStack,"page-with-navbar-large-collapsed":!0===this.state.hasNavbarLargeCollapsed,"page-with-card-opened":!0===this.state.hasCardExpandableOpened,"login-screen-page":x},vt.colorClasses(a));if(!c)return n("div",{ref:"el",style:o,class:z,attrs:{id:s,"data-name":l}},[j,M,F]);var U=n(Kt,{on:{ptrPullStart:this.onPtrPullStart,ptrPullMove:this.onPtrPullMove,ptrPullEnd:this.onPtrPullEnd,ptrRefresh:this.onPtrRefresh,ptrDone:this.onPtrDone,infinite:this.onInfinite},attrs:{ptr:u,ptrDistance:d,ptrPreloader:p,ptrBottom:f,ptrMousewheel:g,infinite:v,infiniteTop:y,infiniteDistance:m,infinitePreloader:b,hideBarsOnScroll:w,hideNavbarOnScroll:C,hideToolbarOnScroll:_,messagesContent:h||r,loginScreen:x}},[M,R]);return n("div",{ref:"el",style:o,class:z,attrs:{id:s,"data-name":l}},[B,j,U])},created(){ot.bindMethods(this,["onPtrPullStart","onPtrPullMove","onPtrPullEnd","onPtrRefresh","onPtrDone","onInfinite","onPageMounted","onPageInit","onPageReinit","onPageBeforeIn","onPageBeforeOut","onPageAfterOut","onPageAfterIn","onPageBeforeRemove","onPageBeforeUnmount","onPageStack","onPageUnstack","onPagePosition","onPageRole","onPageMasterStack","onPageMasterUnstack","onPageNavbarLargeCollapsed","onPageNavbarLargeExpanded","onCardOpened","onCardClose","onPageTabShow","onPageTabHide"])},mounted(){var e=this,t=e.$refs.el;e.$f7ready(r=>{e.eventTargetEl=t,r.on("pageMounted",e.onPageMounted),r.on("pageInit",e.onPageInit),r.on("pageReinit",e.onPageReinit),r.on("pageBeforeIn",e.onPageBeforeIn),r.on("pageBeforeOut",e.onPageBeforeOut),r.on("pageAfterOut",e.onPageAfterOut),r.on("pageAfterIn",e.onPageAfterIn),r.on("pageBeforeRemove",e.onPageBeforeRemove),r.on("pageBeforeUnmount",e.onPageBeforeUnmount),r.on("pageStack",e.onPageStack),r.on("pageUnstack",e.onPageUnstack),r.on("pagePosition",e.onPagePosition),r.on("pageRole",e.onPageRole),r.on("pageMasterStack",e.onPageMasterStack),r.on("pageMasterUnstack",e.onPageMasterUnstack),r.on("pageNavbarLargeCollapsed",e.onPageNavbarLargeCollapsed),r.on("pageNavbarLargeExpanded",e.onPageNavbarLargeExpanded),r.on("cardOpened",e.onCardOpened),r.on("cardClose",e.onCardClose),r.on("pageTabShow",e.onPageTabShow),r.on("pageTabHide",e.onPageTabHide)})},beforeDestroy(){if(this.$f7){var e=this.$f7;e.off("pageMounted",this.onPageMounted),e.off("pageInit",this.onPageInit),e.off("pageReinit",this.onPageReinit),e.off("pageBeforeIn",this.onPageBeforeIn),e.off("pageBeforeOut",this.onPageBeforeOut),e.off("pageAfterOut",this.onPageAfterOut),e.off("pageAfterIn",this.onPageAfterIn),e.off("pageBeforeRemove",this.onPageBeforeRemove),e.off("pageBeforeUnmount",this.onPageBeforeUnmount),e.off("pageStack",this.onPageStack),e.off("pageUnstack",this.onPageUnstack),e.off("pagePosition",this.onPagePosition),e.off("pageRole",this.onPageRole),e.off("pageMasterStack",this.onPageMasterStack),e.off("pageMasterUnstack",this.onPageMasterUnstack),e.off("pageNavbarLargeCollapsed",this.onPageNavbarLargeCollapsed),e.off("pageNavbarLargeExpanded",this.onPageNavbarLargeExpanded),e.off("cardOpened",this.onCardOpened),e.off("cardClose",this.onCardClose),e.off("pageTabShow",this.onPageTabShow),e.off("pageTabHide",this.onPageTabHide),this.eventTargetEl=null,delete this.eventTargetEl}},methods:{onPtrPullStart(...e){this.dispatchEvent("ptr:pullstart ptrPullStart",...e)},onPtrPullMove(...e){this.dispatchEvent("ptr:pullmove ptrPullMove",...e)},onPtrPullEnd(...e){this.dispatchEvent("ptr:pullend ptrPullEnd",...e)},onPtrRefresh(...e){this.dispatchEvent("ptr:refresh ptrRefresh",...e)},onPtrDone(...e){this.dispatchEvent("ptr:done ptrDone",...e)},onInfinite(...e){this.dispatchEvent("infinite",...e)},onPageMounted(e){this.eventTargetEl===e.el&&this.dispatchEvent("page:mounted pageMounted",e)},onPageInit(e){if(this.eventTargetEl===e.el){var{withSubnavbar:t,subnavbar:r,withNavbarLarge:i,navbarLarge:n}=this.props;void 0===t&&void 0===r&&(e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length||e.$el.children(".navbar").find(".subnavbar").length)&&this.setState({hasSubnavbar:!0}),void 0===i&&void 0===n&&e.$navbarEl&&e.$navbarEl.hasClass("navbar-large")&&this.setState({hasNavbarLarge:!0}),this.dispatchEvent("page:init pageInit",e)}},onPageReinit(e){this.eventTargetEl===e.el&&this.dispatchEvent("page:reinit pageReinit",e)},onPageBeforeIn(e){this.eventTargetEl===e.el&&(e.swipeBack||("next"===e.from&&this.setState({routerPositionClass:"page-next"}),"previous"===e.from&&this.setState({routerPositionClass:"page-previous"})),this.dispatchEvent("page:beforein pageBeforeIn",e))},onPageBeforeOut(e){this.eventTargetEl===e.el&&this.dispatchEvent("page:beforeout pageBeforeOut",e)},onPageAfterOut(e){this.eventTargetEl===e.el&&("next"===e.to&&this.setState({routerPositionClass:"page-next"}),"previous"===e.to&&this.setState({routerPositionClass:"page-previous"}),this.dispatchEvent("page:afterout pageAfterOut",e))},onPageAfterIn(e){this.eventTargetEl===e.el&&(this.setState({routerPositionClass:"page-current"}),this.dispatchEvent("page:afterin pageAfterIn",e))},onPageBeforeRemove(e){this.eventTargetEl===e.el&&this.dispatchEvent("page:beforeremove pageBeforeRemove",e)},onPageBeforeUnmount(e){this.eventTargetEl===e.el&&this.dispatchEvent("page:beforeunmount pageBeforeUnmount",e)},onPageStack(e){this.eventTargetEl===e&&this.setState({routerForceUnstack:!1})},onPageUnstack(e){this.eventTargetEl===e&&this.setState({routerForceUnstack:!0})},onPagePosition(e,t){this.eventTargetEl===e&&this.setState({routerPositionClass:"page-".concat(t)})},onPageRole(e,t){this.eventTargetEl===e&&this.setState({routerPageRole:t.role,routerPageRoleDetailRoot:t.detailRoot})},onPageMasterStack(e){this.eventTargetEl===e&&this.setState({routerPageMasterStack:!0})},onPageMasterUnstack(e){this.eventTargetEl===e&&this.setState({routerPageMasterStack:!1})},onPageNavbarLargeCollapsed(e){this.eventTargetEl===e&&this.setState({hasNavbarLargeCollapsed:!0})},onPageNavbarLargeExpanded(e){this.eventTargetEl===e&&this.setState({hasNavbarLargeCollapsed:!1})},onCardOpened(e,t){this.eventTargetEl===t&&this.setState({hasCardExpandableOpened:!0})},onCardClose(e,t){this.eventTargetEl===t&&this.setState({hasCardExpandableOpened:!1})},onPageTabShow(e){this.eventTargetEl===e&&this.dispatchEvent("page:tabshow pageTabShow")},onPageTabHide(e){this.eventTargetEl===e&&this.dispatchEvent("page:tabhide pageTabHide")},dispatchEvent(e,...t){Ct(this,e,...t)},setState(e,t){mt(this,e,t)}},computed:{props(){return yt(this)}}};function Zt(e,t,r,i,n,a,s){try{var o=e[a](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(i,n)}var Qt=Qt||{},er=zt({components:{kcIconLibrary:Ut,kcInspector:Yt,kcLayers:Xt,f7Page:Jt,f7Popup:Gt,f7Block:Dt,f7List:Mt,f7ListItem:Rt},created(){window.addEventListener("resize",this.handleResize),this.handleResize()},destroyed(){window.removeEventListener("resize",this.handleResize)},data(){return window.home=this,!1,{dbg:()=>{},app:this.$f7,extraLayer:{name:"",src:"",value:""},itemIndex:0,canvas:{},thumbnailCanvas:null,toolIcons:["tool_text","tool_image","tool_oval","tool_ellipse","tool_rect_flat","tool_rect","tool_rect_outline","tool_triangle","tool_triangle_line","tool_gradient","tool_line"],preview:null,layers:this.$root.currentComposition.layers,selectedLayer:{angle:-1,name:"",opacity:1},savedCompositions:[],scalesLinked:!1,video:{},shiftDown:!1,data:{me:{fill:"#000000",font:"Arial"}},disabledIcons:!1,showDetails:!1}},methods:{handleClickInParent(e){console.log("•••••••••• Click",e)},debugInfo(){var e=this.canvas.getActiveObject(),t=this.canvas.getObjects();console.log("debugInfo"),console.log("==>",e,t)},fixObjectStyles(e,t="fontFamily",r){if(e&&e.styles){var i=e.styles[0];for(var n in i)i[n][t]=r}},hasExtraLayer(){return this.extraLayer.hasOwnProperty("src")&&this.extraLayer.src.length>0},clickedGif(e){this.dbg("gif clicked ",e.target),this.sendToStreamDeck({thumbnail:e.target.src,event:e})},onShowDetails(){this.dbg("onShowDetails:",!this.showDetails),this.showDetails=!this.showDetails},showMainCanvasFor(e,t,r,i=!0){this.dbg("showMainCanvasFor:",e,t,r),t?(this.extraLayer.name=e?e.split("/").pop():"",this.extraLayer.src=t,i&&this.sendToStreamDeck({thumbnail:t,event:r})):(this.extraLayer.src="",this.extraLayer.name="",this.updatePreviewIMG(r,i))},handleResize(){this.$prefs.showEditor?this.$root.ui.condensed=window.innerWidth<800:this.$root.ui.condensed=window.innerWidth<500},compileSDIcon(e){this.dbg("compileSDIcon",e)},toolClicked(e,t){this.extraLayer.src="";var r=this;switch(e){case"tool_text":this.addText();break;case"tool_image":var i=document.querySelector("#elgfilepicker");i?(i.onchange=function(e){r.handleFileLoad(e.srcElement.files[0],t),i.value=""},i.click()):alert("Not yet!");break;case"tool_line":this.addPathOfType("Line");break;case"tool_rect_flat":this.addPathOfType("Rect",{radius:0});break;case"tool_rect":this.addPathOfType("Rect");break;case"tool_rect_outline":this.addPathOfType("Rect",{strokeWidth:4});break;case"tool_gradient":this.addPathOfType("Rect",{gradient:!0});break;case"tool_oval":this.addPathOfType("Circle");break;case"tool_ellipse":this.addPathOfType("Ellipse",{strokeWidth:4},t);break;case"tool_triangle":this.addPathOfType("Triangle");break;case"tool_triangle_line":this.addPathOfType("Triangle",{strokeWidth:4})}},getInputType(e){switch(e){case"fill":case"stroke":return"color";case"fontFamily":return"text";default:return"number"}},initCanvas(){Qt.canvasWidth=288,Qt.canvasHeight=288,xt.fabric.Object.prototype.set({borderColor:"silver",borderDashArray:[3,3],cornerStrokeColor:"rgba(192,192,255,0.5)",cornerColor:"#efefff",cornerSize:7,transparentCorners:!1}),xt.fabric.Object.prototype.setOriginToCenter=function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.set({originX:"center",originY:"center",left:e.x,top:e.y})},xt.fabric.Object.prototype.setCenterToOrigin=function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.set({originX:this._originalOriginX,originY:this._originalOriginY,left:e.x,top:e.y})},xt.fabric.Object.prototype.objectCaching=!1,this.sourceCanvas=document.querySelector("#kc_composer_canvas"),this.thumbnailCanvas=document.getElementById("thumbnail"),this.itemIndex=0,this.preview=document.querySelector("#preview");var e=xt.fabric.Canvas;this.canvas=new e("kc_composer_canvas",{selection:!1,preserveObjectStacking:!0,backgroundColor:"#000",width:Qt.canvasWidth,height:Qt.canvasHeight}),this.canvas.on({"object:added":this.addedObject,"object:removed":this.updateLayers,"object:selected":this.selectObject,"selection:updated":this.selectionUpdated,"selection:created":this.selectionCreated,"selection:cleared":this.selectionCleared,"mouse:up":this.mouseUp,"mouse:down":this.mouseDown,"text:changed":this.textChanged})},updateControls(e){},clickLayer(e){this.canvas.discardActiveObject(),this.selectedLayer=e,this.canvas.setActiveObject(e),this.updateAllPreviews()},selectionCreated(e){this.logEvent(e,"selection:created"),this.selectedLayer=e.target},selectionUpdated(e){this.logEvent(e,"selection:updated"),this.selectedLayer=e.target,this.canvas.renderAll()},textChanged(e){this.logEvent(e,"text:changed"),this.selectedLayer&&(this.selectedLayer.name=e.target.text)},mouseDown(e){this.logEvent(e,"mouse:down")},mouseUp(e){this.hasObjects()&&this.updatePreviewIMG(e)},hasObjects(){return this.canvas.getObjects().length>0||this.extraLayer.src.length>0},logEvent(e,t){},selectObject(e){this.logEvent(e,"selectObject"),this.canvas.renderAll()},selectionCleared(e){this.logEvent(e,"selectionCleared"),this.selectedLayer=null},hidePreviewIMG(){this.canvas&&this.preview&&(this.dbg("hiding preview"),this.thumbnailCanvas.style.display="block",this.preview.style.display="none")},getActiveClass(e){this.canvas.getActiveObject();return this.selectedLayer===e.target?"selected":""},findLayer(e){return this.$root.currentComposition.layers.find(t=>t==e)},onDeleteAllLayers(e,t){this.dbg("onDeleteAllLayers",e,this.selectedLayer),this.selectedLayer&&(this.canvas.remove(this.selectedLayer),this.selectedLayer=null),this.canvas.discardActiveObject(),this.$root.currentComposition.layers.splice(0,this.$root.currentComposition.layers.length),this.canvas.clear(),t&&this.updateAllPreviews(e)},fixCompositionSource(e){e&&e.data&&e.data.objects&&e.data.objects.map(e=>{this.dbg("fixCompositionSource",e.src),e.src=e.src.replace("http://localhost:8080/",sReplace).replace("http://127.0.0.1:8080/",sReplace)})},onLoadComposition(e){this.dbg("----\x3e onLoadComposition",e);var t=this,r=this.$f7,i=function(r){t.dbg("onLoadComposition::callbackOk",r,e),Array.isArray(e)?t.addCompositions(e):t.loadOneComposition(e)};this.canvas.getObjects().length?r.dialog.confirm("This will replace your current composition","Load Composition",i,(function(e){t.dbg("onLoadComposition::callbackCancel",e)})):i("canvas was empty")},loadOneComposition(e){var t=this;this.dbg("loadOneComposition::Before LoadFromJSON"),this.dbg(e.data);var r=e.hasOwnProperty("data")?e.data:e;this.onDeleteAllLayers(null,!1),r.objects.map(e=>{this.dbg("src:BEFORE:",e.src)}),r.objects.map(e=>{this.dbg("src:AFTER:",e.src)}),this.canvas.loadFromJSON(r,(function(){t.updateAllPreviews()}))},addCompositions(e){var t=this.$f7,r=this;t.dialog.create({title:"Append composition to list of compositions?",text:"You can either append the new compositions to your list, or replace the list.",destroyOnClose:!0,buttons:[{text:"Cancel",color:"gray",cssClass:"thirdbutton",keyCodes:[27]},{text:"Replace",color:"gray",onClick:function(t,i){r.savedCompositions.splice(0,r.savedCompositions.length),e.map(e=>r.savedCompositions.push(e))}},{text:"Append",bold:!0,keyCodes:[10,13],onClick:function(t,i){console.log("APPEND",t,i),e.map(e=>console.log(e)),e.map(e=>r.savedCompositions.push(e))}}]}).open()},loadCompositions(e){this.dbg("mainview.loadCompositions",e),Array.isArray(e)?this.savedCompositions=e:"object"==typeof e&&(this.savedCompositions.splice(0,this.savedCompositions.length),Object.values(e).map(e=>this.savedCompositions.push(e)))},onCopyComposition(e,t,r){this.dbg("onCopyComposition...",e,t,r),kt.a.copyToClipboard(JSON.stringify(t))},onCopyCompositions(e){if(this.dbg("onCopyCompositions...",e),this.savedCompositions.length){var t=JSON.stringify(this.savedCompositions);this.dbg("compositions",t),kt.a.copyToClipboard(t)}},onSaveComposition(e){this.dbg("onSaveComposition...",e);this.canvas,this.savedCompositions;var t=this.createSaveDialog(!0);this.dbg(t,t.el.querySelector(".dialog-input"));var r=t.el.querySelector(".dialog-input");r&&(r.focus(),r.setSelectionRange(0,r.value.length))},hasContext:(e,t)=>$SD.actionInfo?$SD.actionInfo.actionsInfo.find(r=>r.coordinates.row===e&&r.coordinates.column===t):null,isCurrentContext:e=>($SD.actionInfo?$SD.actionInfo.context:null)==e,testContext(e){this.dbg("testContext",$SD.actionInfo,e.rows,e.cols),this.coordinatesArr=[];for(var t=$SD.actionInfo?$SD.actionInfo.context:void 0,r=new Map,i=0;i<e.rows;i++)for(var n=0;n<e.cols;n++){var a=this.hasContext(i,n),s={currentContext:"",occupied:""};a&&(s.occupied="occupied",s.currentContext=a.context==t?"currentContext":""),this.coordinatesArr.push(s),r.set("".concat(i,",").concat(n),s)}},createSaveDialog(e){var t=this.$f7,r=this,i={rows:4,cols:8};this.testContext(i);var n,a,s=Math.round(180/i.cols),o="Icon ".concat((new Date).toLocaleTimeString()),l=$SD.actionInfo?$SD.actionInfo.context:null,c=e=>"".concat(Array(i.cols).join(0).split(0).map((t,r)=>{var i=this.hasContext(e,r);return'<div class="super-mini '.concat(i?"":"occupied"," ").concat(i&&l==i.context?"currentcontext":"",'  data-context="').concat(i?i.context:"",'" style="width: ').concat(s,"px; height: ").concat(s,"px; min-width: ").concat(s,"px; min-height: ").concat(s,'px;"></div>')}).join("")),h="".concat(Array(i.rows).join(0).split(0).map((e,t)=>'<div class="row-mini">'.concat(c(t),"</div>")).join("")),u='<span class="kc_icons save margin-right-8" ></span>';a="".concat(u," ").concat(tr("Save icon"));var d="<details ".concat("",' class="dialog-details"><summary>').concat(tr("Save icon to multiple keys"),'</summary><div class="streamdecklogo"></div>'),p='<div class="dialog-input-field input"><span>Title:</span><input type="text" class="dialog-input" value="'.concat(o,'"></div>');n='<div class="dialog-custom-save"> '.concat(p).concat(d,'<div class="row-mini-wrapper"><div class="minions streamdeck">').concat(h,"</div></div></details></div>");var f=t.dialog.create({title:a,buttons:[{text:"Cancel"},{text:"OK",cssClass:"dialog-button-bold"}],content:n,cssClass:"saveDialog",destroyOnClose:!0,onClick:function(e,i){var n=1==i?"OK":"Cancel";if(console.log(n+"-button clicked: ",e,i,t.device),1===i)r.canvas,this.savedCompositions},on:{opened:function(){var e=this,t=this.$el.find(".dialog-input"),r=this.$el.find("summary"),i=t[0];i&&(i.oninput=function(e){f.myProp=e.target.value}),(t=this.$el.find(".super-mini")).click((function(t,i){if(!t.target.classList.contains("occupied")){t.target.classList.toggle("selected"),t.target.classList.contains("selected");var n=e.$el.find(".super-mini.selected"),a="";0==n.length?(a="current",f.setTitle("".concat(u," ").concat(tr("Save icon to current key:")))):(a=n.length,n.length>1?f.setTitle("".concat(u," ").concat(tr("Save icon to these keys:"))):f.setTitle("".concat(u," ").concat(tr("Save icon to this key:")))),r.text("Save icon to ".concat(a," ").concat(n.length<2?"key":"keys"))}}))},close:function(){}}});return this.dbg(f),!0===e&&f.open(),f},onDeleteComposition(e,t,r){this.dbg("onDeleteComposition",e,t,r);var i=this,n=this.$f7,a=this.savedCompositions;e.stopImmediatePropagation(),e.stopPropagation();n.dialog.confirm("This will delete composition '".concat(a[r].name,"'"),"Delete Composition",(function(t){a.splice(r,1),i.sendToStreamDeck({compositions:a,event:e})}),(function(e){this.dbg("onDeleteComposition::callbackCancel",e)}))},onDeleteLayer(e,t){this.dbg("onDeleteLayer",e,e.tooltip),this.selectedLayer==e&&(this.canvas.discardActiveObject(),this.selectedLayer=null),this.canvas.remove(e),this.updateAllPreviews()},onDeleteActiveLayer(){var e=this.canvas.getActiveObject();if(e)e.index},onDeleteItem(e){var t=this.$root.currentComposition.layers.indexOf(e);this.onDeleteLayer(e),this.$root.currentComposition.layers.splice(t,1)},onDeleteExtraLayer(){},onSortLayers(e){this.dbg("onSortLayers:",e,e.detail);this.canvas.getActiveObject();var t=this.canvas.getObjects(),r=t.length-1,i=t[r-e.from];this.canvas.moveTo(i,r-e.to),this.$root.setLayers(this.canvas.getObjects()),this.updateAllPreviews()},updateAllPreviews(e){this.canvas.renderAll(),this.updatePreviewIMG(e)},updatePreviewIMG(e,t=!0){this.canvas&&this.preview&&(this.preview.crossOrigin="anonymous",this.copyCanvas(),this.preview.src=this.thumbnailCanvas.toDataURL(),this.preview.style.display="block",t&&this.sendToStreamDeck({thumbnail:this.preview.src,event:e}))},sendToStreamDeck(e){var t=$SD.actionInfo?$SD.actionInfo.context:null;this.dbg("sendToStreamDeck",t,$SD.messageType,e),"registerIconEditor"==$SD.messageType&&$SD.api.setImage(t,e.thumbnail)},copyCanvas(e,t){var r=this.canvas,i=(e=e||this.thumbnailCanvas,r.getActiveObject());r.suspendUpdate=!0,r.discardActiveObject(),r.renderAll();var n=this.sourceCanvas.width,a=this.sourceCanvas.height,s=e.width/this.sourceCanvas.width,o=e.height/this.sourceCanvas.height,l=e.getContext("2d");e.width=n*s,e.height=a*o,l.clearRect(0,0,l.width,l.height),l.scale(s,o),l.drawImage(this.sourceCanvas,0,0),i&&r.setActiveObject(i),r.suspendUpdate=!1},updateProperty(e,t,r){var i,n=e.target.value-Math.round(r)<0?Number(r)-10:Number(r)+10;i=this.shiftDown?n:e.target.value;var a=this;this.updateActiveObject((function(e){switch(t){case"angle":e._setOriginToCenter(),e.set({angle:i}).setCoords(),e._resetOrigin();break;case"scaleX":case"scaleY":a.scalesLinked?(e.set("scaleX",i).setCoords(),e.set("scaleY",i).setCoords(),a.selectedLayer.scaleX=i,a.selectedLayer.scaleY=i):e.set(t,i).setCoords();break;case"opacity":case"fill":case"stroke":a.fixObjectStyles(e,t,i),e.set(t,i).setCoords();break;default:e.set(t,parseInt(i,10)).setCoords()}}))},updateActiveObject(e){var t=this.canvas.getActiveObject();t&&e(t),this.updateAllPreviews()},addLayer(e){this.dbg("---------- addLayer",e);var t=e.text,r=this.canvas.getObjects().indexOf(e);null==t&&(t=e.name?e.get("name"):e.get("type")+" "+r),void 0===e.name&&(e.name=t);var i=kt.a.fixColor(e.color);e.color&&(e.color=i),e.stroke&&(e.stroke=kt.a.fixColor(e.stroke)),e.visible=!0,this.$root.currentComposition.layers.push(e)},updateLayers(e){this.dbg("updateLayers called...",e)},applyFont(e){this.selectedLayer.fontFamily=e,this.fixObjectStyles(this.selectedLayer,"fontFamily",e),this.updateAllPreviews(),this.canvas.requestRenderAll()},addedObject(e){this.dbg("addedObject",e,e.target.name,e.target.selected),Object.values(this.$root.currentComposition.layers).map(e=>{e.selected=!1}),this.addLayer(e.target),this.selectedLayer=e.target},addToCanvas(e){this.dbg("addToCanvas",e),e&&(e.hasOwnProperty("angle")||(e.angle=0),e.hasOwnProperty("stroke")||(e.stroke="#000",e.strokeWidth=0),this.canvas.add(e))},addObjectToCanvas(e,t,r,i,n,a){this.dbg("addObjectToCanvas",e,t,r,i,n,a),this.$prefs.showEditor||this.onDeleteAllLayers(n,!1);var s,o,l=this.canvas,c=this,h=0,u="object"==typeof e,d=e;if(window.kccanvas=l,u&&(e.path?(d=e.path,t=e.path.split("/").pop(),h=parseInt(e.scale||0)):t=e),e.path&&e.path.startsWith("data:image/"))c.showMainCanvasFor(e.name,e.path,n);else{if(d.name)t=d.name,s="image/svg+xml"==d.type;else if("string"==typeof d){""!=t&&null!=t||(t=d.split("/").pop());var p=d.split(".").pop();if(s="svg"==p,o="svg"==d.substr(1,4),["png","jpg","svg"].includes(p)&&(h=-2),"gif"==p)return void kt.a.readFile(e.path,{responseType:"blob"}).then(t=>{c.showMainCanvasFor(e.path,t,n)})}this.showMainCanvasFor(t,"",n,!1),!u&&n&&n.target?h=n.shiftKey?"height":parseInt(n.target.getAttribute("data-scale")):d.indexOf&&(h=n.target.hasAttribute("data-scale")?parseInt(n.target.getAttribute("data-scale")):-2==h?"fit":h>1?0:d.indexOf("/parts/")<0?-1:0);s||o?c.app.request.get(d,(function(a){c.dbg("...fabric.loadSVGFromString.... needsScaling",h),xt.fabric.loadSVGFromString(a,(function(a,s){Math.abs(144-s.width)<c.$prefs.svgScalingThreshold&&(h=0),e&&e.options&&Object.entries(e.options).map(e=>s[e[0]]=e[1]),c.processSVG(a,s,n,d,t,r,h,i,!0)}))})):xt.fabric.Image.fromURL(d,(function(e){c.addImageToCanvas(e,t,r,h,i)}))}},processSVG(e,t,r,i,n,a,s,o,l){this.dbg("processSVG",t,r,i,n);var c=this,h=this.canvas,u=e[0].fill,d={hasSameFillColor:!0,hasGradient:!1};e.map((function(e,t){var r=e.fill;r&&"object"!=typeof r?r!=u&&(d.hasSameFillColor=!1):(d.hasSameFillColor=!1,d.hasGradient=!0)}));var p=!(!t.decompose||!this.$root.canUse("decompose"));if(r&&r.altKey&&(p=!p),1===e.length&&(d.hasSameFillColor=!1),!0===d.hasSameFillColor){var f=xt.fabric.util.groupSVGElements(e,t);c.addImageToCanvas(f,n,a,s,o,kt.a.fixColor(u))}else if(!0!==d.hasGradient&&p){var g,v=e.map((function(e){return xt.fabric.util.object.clone(e)})),m=xt.fabric.util.groupSVGElements(v,t),b=c.getImageScaling(m,Qt.canvasWidth,Qt.canvasHeight,"fit");m=null,e.map((function(e){for(var t=String(null!=e.id?e.id:n),r=h.getObjects(),i=t,a=1;r.filter(e=>e.name==t).length;)t="".concat(i," [").concat(a,"]"),a++;e._setOriginToCenter(),g=e.set({uuid:kt.a.generateUUID(),left:e.left*b.scale+b.l,top:e.top*b.scale+b.t,name:t,index:c.itemIndex,opacity:e.opacity,angle:e.angle}).scale(b.scale).setCoords(),++c.itemIndex,c.addToCanvas(g)})),g&&h.setActiveObject(g),c.updateAllPreviews()}else if(l){f=xt.fabric.util.groupSVGElements(e,t);c.addImageToCanvas(f,n,a,s,o,kt.a.fixColor(u))}else xt.fabric.Image.fromURL(i,(function(e){c.addImageToCanvas(e,n,a,s,o)}))},addImageToCanvas(e,t,r,i,n,a,s){var o,l=this.canvas,c=l.width,h=l.height;"fit"==i?o=!0:(o=i>1?i:0,c=i>1?l.width/i:l.width,h=i>1?l.height/i:l.height,i=this.data.me.scaleMode?"width":"height");var u=this.getImageScaling(e,c,h,i);this.dbg("addImageToCanvas",e,c,h,u),o||(u.scale=2);var d=u.l,p=u.t;s&&1==s.scale&&(d=e.left*u.scale,p=e.top*u.scale);var f=e.set({left:d,top:p,originX:"center",originY:"center",angle:0,opacity:1,name:t,index:this.itemIndex,uuid:kt.a.generateUUID()}).scale(u.scale).setCoords();f.transformMatrix=null,++this.itemIndex,n&&(f.globalCompositeOperation="source-atop",this.addToCanvas(n)),this.dbg("*** main:addImageToCanvas:: add:",t,f.name,f,f.fill);var g,v,m;if("string"==typeof f.fill&&"rgb"==f.fill.substr(0,3)){f.fill.indexOf(",");var b=f.fill.substr(4).split(")")[0].split(","),y=(g=b[0],v=b[1],m=b[2],"#"+[g,v,m].map(e=>Math.round(e).toString(16).padStart(2,0)).join(""));this.dbg("converted fill from:",f.fill," to ",y),f.fill=y}if(this.addToCanvas(f),s&&1==s.scale){var w=new xt.fabric.Point(e.left,e.top);f.setPositionByOrigin(w,"left","top")}else l.centerObject(f);r&&r(),l.setActiveObject(f),Object(Pt.setTimeout)(()=>{l.requestRenderAll()},20),this.$set(this.data.me,"fill",a||"#0000ff"),this.updateAllPreviews()},addText(){var e=this.canvas,t=new xt.fabric.IText("Click to edit "+this.itemIndex,{left:10,top:10,fontFamily:this.data.me.font||"Arial",fill:"#FFFFFF",index:this.itemIndex,uuid:kt.a.generateUUID(),originX:"center",originY:"center",ownCaching:!1});++this.itemIndex,t.left=e.width/2-t.getScaledWidth()/2,t.top=e.height-1.25*t.getScaledHeight(),kt.a.getBrightness(t,e)>75?t.set("fill","#000000"):t.set("fill","#FFFFFF"),this.addToCanvas(t),e.centerObject(t),e.setActiveObject(t),this.data.me.fill=this.data.me.fill||"#FFFFFF",this.data.me.font=this.data.me.font||"arial",t.bringToFront(),this.updateAllPreviews()},isWallpaper:()=>!1,addPathOfType(e="Rect",t={},r=null){var i="Line"===e?xt.fabric.Rect:xt.fabric[e],n=t.hasOwnProperty("radius")?t.radius:44,a=t.hasOwnProperty("strokeWidth")?t.strokeWidth:0,s=t.hasOwnProperty("stroke")?t.stroke:"#000000",o=t.hasOwnProperty("fill")?t.fill:"#0000FF",l=this.canvas.width,c=this.canvas.height,h="".concat(kt.a.capitalize(e));this.dbg("addPathOfType",e,t,r,l,c);switch(e){case"Line":n=0,c=4,l-=16;break;case"Rect":break;case"Circle":case"Ellipse":n=l/2-a;break;case"Triangle":break;default:n=0}a>0&&(s="#00ffff",o="transparent",l-=2*a,c-=2*a);var u=new i({left:0,top:0,width:l,height:c,originX:"center",originY:"center",rx:this.isWallpaper()?0:n,ry:this.isWallpaper()?0:n,index:this.itemIndex,name:h+this.itemIndex,uuid:kt.a.generateUUID(),fill:o,opacity:1,strokeWidth:a,stroke:s,radius:n,selectable:!0});this.dbg(u,this.canvas),t.gradient&&(u.name="Gradient "+this.itemIndex,u.setGradient("fill",{type:"linear",x1:-10,y1:0,x2:0,y2:u.height,colorStops:{0:"rgba(255,255,255,0.8)",.45:"rgba(255,255,255,0.05)",.55:"rgba(40,40,40,0.1)",1:"rgba(0,0,0,0.7)"}})),++this.itemIndex,this.addToCanvas(u),this.canvas.centerObject(u),this.canvas.setActiveObject(u),t.gradient||(this.data.me.fill=this.data.me.fill||"#0000FF"),u.bringToFront(),this.updateAllPreviews(r)},getImageScaling(e,t,r,i){var n=1,a=0,s=0,o=Math.ceil;return"width"==i||"height"==i||"fit"==i?(n=kt.a.rectInBounds(e,{width:t,height:r},i),a=o((t-e.width*n)/2),s=o((r-e.height*n)/2)):(a=t-o(e.width/2),s=r-o(e.height/2)),{l:a,t:s,scale:n}},initBeta(){this.initCanvas(),this.handleDragDrop(),this.handleClipboard()},handleKeyEvents(e){if(this.canvas){var t=this.canvas,r=e.shiftKey?10:1,i=t.getActiveObject(),n=null;if(['.input-focused:not([type="color"])',".with-modal-popup"].map(e=>{document.querySelector(e)&&(n=!0)}),n)return!0;if(i&&(i.isEditing||i.inCompositionMode))return this.dbg("editing text... exit handleKeyEvents"),!0;switch(e.keyCode){case 38:i&&(i.top-=r,t.renderAll(),e.stopPropagation());break;case 40:i&&(i.top+=r,t.renderAll(),e.stopPropagation());break;case 37:i&&(i.left-=r,t.renderAll(),e.stopPropagation());break;case 39:i&&(i.left+=r,t.renderAll(),e.stopPropagation());break;case 8:case 46:i&&(this.onDeleteItem(i),e.stopPropagation())}}},handleDragDrop(){var e=this,t=document.getElementById("kc_composer");function r(e){e.preventDefault(),e.stopPropagation()}function i(e){t.classList.contains("highlight")||t.classList.add("highlight")}function n(e){t.classList.remove("highlight")}function a(t){var r=new FileReader;"application/json"===t.type?(r.onloadend=function(){var t=kt.a.parseJson(r.result);t&&t.hasOwnProperty("objects")&&e.onLoadComposition(t)},r.readAsText(t)):(r.onloadend=function(){var i=document.createElement("img");i.src=r.result,i.onload=function(){var r=new xt.fabric.Image(i);e.addImageToCanvas(r,t.name,null,"fit")}},r.readAsDataURL(t))}["dragenter","dragover","dragleave","drop"].forEach(e=>{t.addEventListener(e,r,!1),document.body.addEventListener(e,r,!1)}),["dragenter","dragover"].forEach(e=>{t.addEventListener(e,i,!1)}),["dragleave","drop"].forEach(e=>{t.addEventListener(e,n,!1)}),t.addEventListener("drop",(function(e){!function(e){(e=[...e]).forEach(a)}(e.dataTransfer.files)}),!1)},handleClipboard(e){var t=this;document.addEventListener("paste",(function(e){var r=null;['.input-focused:not([type="color"])',".with-modal-popup"].map(e=>{document.querySelector(e)&&(r=!0)}),console.log("CAN PASTE?",!r,e),r||(e.preventDefault(),e.stopPropagation(),function(e,r){for(var i,n=e.clipboardData,a=0;a<n.items.length;a++){var s=n.items[a];if(s.type.match("image/*")){if("break"===function(){console.log("FOUND IMAGE on CLIPBOARD");var e=s.getAsFile(),r=new FileReader;return r.onloadend=function(){var e=document.createElement("img");e.src=r.result,e.onload=function(){var r=new xt.fabric.Image(e);t.addImageToCanvas(r,"pastedImage",null,"fit")}},r.readAsDataURL(e),"break"}())break}else s.type.match("text/*")&&(console.log("FOUND TEXT on CLIPBOARD"),s.getAsString((function(n){if("svg"==(n=n.trim()).split(".").pop()){n.match(/((\/|\\|\/\/|https?:\\\\|https?:\/\/)[a-z0-9_@\-^!#$%&+={}.\/\\\[\]]+)+\.[a-z]+$/i).length?kt.a.readFile(n).then(e=>{kt.a.isSVG(e)&&xt.fabric.loadSVGFromString(e,(function(e,i){var a=n.split(".")[0].split("/").pop()||"clipboardSVG",s=xt.fabric.util.groupSVGElements(e,i);t.addImageToCanvas(s,a,r,"fit",null,null)}))}):xt.fabric.loadSVGFromURL(n,(function(i,a){t.processSVG(i,a,e,n,"andytest",r,"fit",null,!1)}),null,{crossOrigin:"anonymous"})}else if(i=kt.a.parseJson(n))Array.isArray(i)?t.addCompositions(i):t.onLoadComposition(i);else{kt.a.isSVG(n)&&xt.fabric.loadSVGFromString(n,(function(e,i){var n=xt.fabric.util.groupSVGElements(e,i);t.addImageToCanvas(n,"clipboardSVG",r,"fit",null,null)}))}})))}}(e))}))},handleFileLoad(e,t){var r=this;if(e){var i,n=this,a=this.$root.handlePreloader,s=document.querySelector(".kc-preloader"),o=e.name.split(".").pop(),l=decodeURIComponent(e.name);this.dbg("filepicker changed:: type",o,e,e.name,l),(i=function*(){var e;if(o.includes("gif"))a(!0,s),document.querySelector(".kc_gif_preview").src=l,kt.a.readFile(l,{responseType:"blob"}).then(e=>{n.showMainCanvasFor(l,e,t),a(!1,s)});else if("json"==o)e=yield kt.a.fetchXhr(l,"json").then(e=>e.json()),r.onLoadComposition(e);else if(["sdIcon","zip"].includes(o))e=yield kt.a.fetchXhr(l,"arraybuffer").then(e=>e.arraybuffer()),Ot.a.loadAsync(e).then((function(e){e.forEach((function(e,t){console.log("zipEntry.name",t.name,e,t)}))}));else{e=yield kt.a.fetchXhr(l,"blob").then(e=>e.blob()).then(e=>kt.a.fetchFile(e));var i=new Image;i.src=e,i.onload=function(){n.addImageToCanvas(new xt.fabric.Image(i),l,null,"fit"),n.showMainCanvasFor(l,e,t)}}},function(){var e=this,t=arguments;return new Promise((function(r,n){var a=i.apply(e,t);function s(e){Zt(a,r,n,s,o,"next",e)}function o(e){Zt(a,r,n,s,o,"throw",e)}s(void 0)}))})()}}},beforeCreate(e,t){this.$root.currentComposition.mainview=this},mounted(){window.home=this,this.selectedLayer=null,this.$f7ready(e=>{this.$$(document).on("keydown",e=>this.handleKeyEvents(e),!0),this.handleResize()}),Object(Pt.setTimeout)(()=>{this.initBeta()},50)}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("f7-page",{class:{showEditor:e.$prefs.showEditor},attrs:{name:"home",navbar:""}},[r("div",{staticClass:"kc-tab page-content"},[r("div",{staticClass:"kc_main_area"},[r("div",{staticClass:"cccard introx",staticStyle:{"text-align":"center"},attrs:{id:"kc_composer"}},[r("div",{staticClass:"kc-canvas-container"},[r("div",{staticClass:"kc-preloader kc_gif_overlay"}),e._v(" "),r("canvas",{staticClass:"card-image",staticStyle:{width:"288x",height:"288px"},attrs:{id:"kc_composer_canvas",width:"288",height:"288",alt:""}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hasExtraLayer(),expression:"hasExtraLayer()"}],staticClass:"kc_gif_overlay"},[r("img",{staticClass:"kc_gif_preview",attrs:{src:e.extraLayer.src,alt:"",width:"288",height:"288"},on:{click:e.clickedGif}})]),e._v(" "),r("f7-list",{staticClass:"canvasToolIcons xhidden"},[r("f7-list-item",e._l(e.toolIcons,(function(t,i){return r("button",{key:i,staticClass:"pi-icon",class:t,attrs:{disabled:e.disabledIcons},on:{click:function(r){return e.toolClicked(t,r)}}})})),0)],1)],1),e._v(" "),r("div",{staticClass:"kc-info-area"},[r("f7-block",{staticClass:"kc-info-area-header"},[r("kc-inspector",e._b({attrs:{systemFonts:e.$root.systemFonts,googleFonts:e.$root.googleFonts}},"kc-inspector",e.$root.currentComposition,!1))],1),e._v(" "),r("f7-block",{staticClass:"layersblock"},[r("kc-layers",e._b({attrs:{reverseLayers:e.$root.reverseLayers},on:{clickFromChildComponent:e.handleClickInParent}},"kc-layers",e.$root.currentComposition,!1))],1)],1)]),e._v(" "),r("kc-icon-library",{attrs:{currentComposition:e.$root.currentComposition,iconPackLibrary:e.$root.iconPackLibrary,iconPacks:e.$root.iconPackLibrary.iconPacks,hideUninstall:e.$root.hideUninstall}})],1)]),e._v(" "),r("div",{staticClass:"thumbnailContainer",staticStyle:{display:"none"}},[r("canvas",{staticStyle:{display:"block"},attrs:{id:"thumbnail",crossorigin:"Anonymous",width:"144",height:"144"}}),e._v(" "),r("img",{attrs:{width:"144",height:"144",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",id:"preview",name:"andy",crossorigin:"Anonymous",alt:"PREVIEW"}})]),e._v(" "),r("input",{staticClass:"sdpi-item-value",staticStyle:{display:"none"},attrs:{type:"file",id:"elgfilepicker",accept:".jpg, .jpeg, .png, .bmt, .svg, .gif, .sdIcon, .json"}})])}),[],!1,null,null,null).exports,rr=r(14),ir={name:"f7-nav-title",props:Object.assign({id:[String,Number],title:String,subtitle:String,sliding:Boolean},vt.colorProps),render(){var e,t=this.$createElement,r=this.props,{title:i,subtitle:n,id:a,style:s,sliding:o,className:l}=r;n&&(e=t("span",{class:"subtitle"},[n]));var c,h=ot.classNames(l,"title",{sliding:o},vt.colorClasses(r)),u=this.$slots;return u&&Object.keys(u).length&&(c=[],Object.keys(u).forEach(e=>{c.push(...u[e])})),t("div",{style:s,class:h,attrs:{id:a}},[c,!c&&i,!c&&e])},computed:{props(){return yt(this)}}},nr={name:"f7-nav-left",props:Object.assign({id:[String,Number],backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:Boolean},vt.colorProps),render(){var e,t=this.$createElement,r=this.props,{backLink:i,backLinkUrl:n,backLinkForce:a,backLinkShowText:s,sliding:o,className:l,style:c,id:h}=r,u=s;if(void 0===u&&(u=!this.$theme.md),i){var d=!0!==i&&u?i:void 0;e=t($t,{class:d?void 0:"icon-only",on:{click:this.onBackClick},attrs:{href:n||"#",back:!0,icon:"icon-back",force:a||void 0,text:d}})}var p=ot.classNames(l,"left",{sliding:o},vt.colorClasses(r)),f=[],g=this.$slots;return g&&Object.keys(g).length&&Object.keys(g).forEach(e=>{f.push(...g[e])}),t("div",{style:c,class:p,attrs:{id:h}},[e,f])},created(){ot.bindMethods(this,["onBackClick"])},methods:{onBackClick(e){this.dispatchEvent("back-click backClick click:back clickBack",e)},dispatchEvent(e,...t){Ct(this,e,...t)}},computed:{props(){return yt(this)}}},ar={name:"f7-nav-right",props:Object.assign({id:[String,Number],sliding:Boolean},vt.colorProps),render(){var e=this.$createElement,t=this.props,{className:r,id:i,style:n,sliding:a}=t,s=ot.classNames(r,"right",{sliding:a},vt.colorClasses(t)),o=[],l=this.$slots;return l&&Object.keys(l).length&&Object.keys(l).forEach(e=>{o.push(...l[e])}),e("div",{style:n,class:s,attrs:{id:i}},[o])},computed:{props(){return yt(this)}}},sr={name:"f7-navbar",props:Object.assign({id:[String,Number],backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:{type:Boolean,default:!0},title:String,subtitle:String,hidden:Boolean,noShadow:Boolean,noHairline:Boolean,innerClass:String,innerClassName:String,large:Boolean,largeTransparent:Boolean,transparent:Boolean,titleLarge:String},vt.colorProps),data(){yt(this);return{state:(()=>{var e=this,t=e.$f7;return t||e.$f7ready(()=>{e.setState({_theme:e.$theme})}),{_theme:t?e.$theme:null,routerPositionClass:"",largeCollapsed:!1,routerNavbarRole:null,routerNavbarRoleDetailRoot:!1,routerNavbarMasterStack:!1,transparentVisible:!1}})()}},render(){var e,t,r,i,n=this.$createElement,a=this.props,{backLink:s,backLinkUrl:o,backLinkForce:l,backLinkShowText:c,sliding:h,title:u,subtitle:d,innerClass:p,innerClassName:f,className:g,id:v,style:m,hidden:b,noShadow:y,noHairline:w,large:C,largeTransparent:_,transparent:x,titleLarge:S}=a,{_theme:k,routerPositionClass:T,largeCollapsed:O,transparentVisible:E}=this.state,P=k&&k.ios&&this.$f7&&!this.$f7.params.navbar.iosCenterTitle,A=k&&k.md&&this.$f7&&this.$f7.params.navbar.mdCenterTitle||k&&k.aurora&&this.$f7&&this.$f7.params.navbar.auroraCenterTitle,D=this.$slots,I=C||_,L=x||I&&_,B=L&&E,R=ot.classNames(g,"navbar",T&&T,{"navbar-hidden":b,"navbar-large":I,"navbar-large-collapsed":I&&O,"navbar-transparent":L,"navbar-transparent-visible":B,"navbar-master":"master"===this.state.routerNavbarRole,"navbar-master-detail":"detail"===this.state.routerNavbarRole,"navbar-master-detail-root":!0===this.state.routerNavbarRoleDetailRoot,"navbar-master-stacked":!0===this.state.routerNavbarMasterStack,"no-shadow":y,"no-hairline":w},vt.colorClasses(a));(s||D["nav-left"]||D.left)&&(e=n(nr,{on:{backClick:this.onBackClick},attrs:{backLink:s,backLinkUrl:o,backLinkForce:l,backLinkShowText:c}},[D["nav-left"],D.left])),(u||d||D.title)&&(t=n(ir,{attrs:{title:u,subtitle:d}},[D.title])),(D["nav-right"]||D.right)&&(r=n(ar,[D["nav-right"],D.right]));var M=S;!M&&C&&u&&(M=u),(M||D["title-large"])&&(i=n("div",{class:"title-large"},[n("div",{class:"title-large-text"},[M||"",this.$slots["title-large"]])]));var j=n("div",{class:ot.classNames("navbar-inner",p,f,{sliding:h,"navbar-inner-left-title":P,"navbar-inner-centered-title":A})},[e,t,r,i,this.$slots.default]);return n("div",{ref:"el",style:m,class:R,attrs:{id:v}},[n("div",{class:"navbar-bg"}),this.$slots["before-inner"],j,this.$slots["after-inner"]])},created(){ot.bindMethods(this,["onBackClick","onHide","onShow","onExpand","onCollapse","onNavbarPosition","onNavbarRole","onNavbarMasterStack","onNavbarMasterUnstack","onTransparentHide","onTransparentShow"])},mounted(){var e=this,{el:t}=e.$refs;t&&e.$f7ready(r=>{e.eventTargetEl=t,r.on("navbarShow",e.onShow),r.on("navbarHide",e.onHide),r.on("navbarCollapse",e.onCollapse),r.on("navbarExpand",e.onExpand),r.on("navbarPosition",e.onNavbarPosition),r.on("navbarRole",e.onNavbarRole),r.on("navbarMasterStack",e.onNavbarMasterStack),r.on("navbarMasterUnstack",e.onNavbarMasterUnstack),r.on("navbarTransparentShow",e.onNavbarTransparentShow),r.on("navbarTransparentHide",e.onNavbarTransparentHide)})},updated(){if(this.$f7){var e=this.$refs.el;this.$f7.navbar.size(e)}},beforeDestroy(){var{el:e}=this.$refs;if(e&&this.$f7){var t=this.$f7;t.off("navbarShow",this.onShow),t.off("navbarHide",this.onHide),t.off("navbarCollapse",this.onCollapse),t.off("navbarExpand",this.onExpand),t.off("navbarPosition",this.onNavbarPosition),t.off("navbarRole",this.onNavbarRole),t.off("navbarMasterStack",this.onNavbarMasterStack),t.off("navbarMasterUnstack",this.onNavbarMasterUnstack),t.off("navbarTransparentShow",this.onNavbarTransparentShow),t.off("navbarTransparentHide",this.onNavbarTransparentHide),this.eventTargetEl=null,delete this.eventTargetEl}},methods:{onHide(e){this.eventTargetEl===e&&this.dispatchEvent("navbar:hide navbarHide")},onShow(e){this.eventTargetEl===e&&this.dispatchEvent("navbar:show navbarShow")},onExpand(e){this.eventTargetEl===e&&(this.setState({largeCollapsed:!1}),this.dispatchEvent("navbar:expand navbarExpand"))},onCollapse(e){this.eventTargetEl===e&&(this.setState({largeCollapsed:!0}),this.dispatchEvent("navbar:collapse navbarCollapse"))},onNavbarTransparentShow(e){this.eventTargetEl===e&&(this.setState({transparentVisible:!0}),this.dispatchEvent("navbar:transparentshow navbarTransparentShow"))},onNavbarTransparentHide(e){this.eventTargetEl===e&&(this.setState({transparentVisible:!1}),this.dispatchEvent("navbar:transparenthide navbarTransparentHide"))},onNavbarPosition(e,t){this.eventTargetEl===e&&this.setState({routerPositionClass:t?"navbar-".concat(t):""})},onNavbarRole(e,t){this.eventTargetEl===e&&this.setState({routerNavbarRole:t.role,routerNavbarRoleDetailRoot:t.detailRoot})},onNavbarMasterStack(e){this.eventTargetEl===e&&this.setState({routerNavbarMasterStack:!0})},onNavbarMasterUnstack(e){this.eventTargetEl===e&&this.setState({routerNavbarMasterStack:!1})},hide(e){this.$f7&&this.$f7.navbar.hide(this.$refs.el,e)},show(e){this.$f7&&this.$f7.navbar.show(this.$refs.el,e)},size(){this.$f7&&this.$f7.navbar.size(this.$refs.el)},onBackClick(e){this.dispatchEvent("back-click backClick click:back clickBack",e)},dispatchEvent(e,...t){Ct(this,e,...t)},setState(e,t){mt(this,e,t)}},computed:{props(){return yt(this)}}},or=zt({components:{f7Page:Jt,f7View:_t,f7Navbar:sr,f7NavTitle:ir,f7NavRight:ar,f7Popup:Gt,f7Link:$t,f7Block:Dt,f7BlockTitle:At},data:()=>({acknowledgements:rr})},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("f7-popup",{attrs:{id:"kc-about-popup",opened:e.$root.aboutOpen,closeOnEscape:""},on:{"popup:closed":function(t){e.$root.aboutOpen=!1}}},[r("f7-view",[r("f7-page",[r("f7-navbar",[r("f7-nav-title",{staticClass:"keycreator_logo",attrs:{sliding:""}}),e._v(" "),r("f7-nav-right",[r("f7-link",{attrs:{"popup-close":""}},[e._v(e._s(e.tr("Close")))])],1)],1),e._v(" "),r("f7-block",{staticClass:"hasmargins"},[r("div",{staticClass:"acknowledgements info center"},[r("div",{staticClass:"longstring capitalize"},[e._v("Version: "+e._s(e.$root.manifest.PluginVersion))])]),e._v(" "),r("f7-block-title",[e._v(e._s(e.tr("Acknowledgements")))]),e._v(" "),r("div",{staticClass:"acknowledgements"},e._l(e.acknowledgements,(function(t,i){return r("div",{key:i},[r("h4",{key:i},[e._v(e._s(t.title))]),e._v(" "),r("p",[e._v(e._s(t.text))])])})),0)],1)],1)],1)],1)}),[],!1,null,null,null).exports,lr=zt({components:{f7Page:Jt,f7View:_t,f7Navbar:sr,f7NavTitle:ir,f7NavRight:ar,f7Popup:Gt,f7Link:$t,f7Block:Dt,f7BlockTitle:At,f7List:Mt,f7ListItem:Rt},data:()=>({}),methods:{changePreference(e,t,r){console.log("changePreference",typeof e,e,t,this.$prefs[t],r.target.value),"boolean"==typeof e?this.$prefs[t]=!e:"number"==typeof e&&(this.$prefs[t]=r.target.value)},checkItemType:e=>(console.log("itm:",e,typeof e,evt.target.value),!0)}},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("f7-popup",{attrs:{id:"kc-prefs-popup",opened:e.$root.prefsOpen,closeOnEscape:""},on:{"popup:closed":function(t){e.$root.prefsOpen=!1}}},[r("f7-view",[r("f7-page",[r("f7-navbar",[r("f7-nav-title",{staticClass:"keycreator_logo",attrs:{sliding:""}}),e._v(" "),r("f7-nav-right",[r("f7-link",{attrs:{"popup-close":""}},[e._v(e._s(e.tr("Close")))])],1)],1),e._v(" "),r("f7-block",{staticClass:"hasmargins"},[r("div",{staticClass:"acknowledgements info center"},[r("div",{staticClass:"longstring capitalize"},[e._v("Version: "+e._s(e.$root.manifest.PluginVersion))])]),e._v(" "),r("f7-block-title",[e._v(e._s(e.tr("Settings")))]),e._v(" "),r("div",{staticClass:"acknowledgements"},[r("f7-list",e._l(e.$prefs,(function(t,i){return r("f7-list-item",{key:i},["boolean"==typeof t?r("label",[r("input",{staticStyle:{display:"none","z-index":"1000"},attrs:{type:"checkbox",name:"checkbox-"+i},domProps:{value:t,checked:t},on:{click:function(r){return e.changePreference(t,i,r)}}}),e._v(" "),r("i",{staticClass:"icon kc-icon-checkbox"})]):e._e(),e._v(" "),r("div",{staticClass:"icon-pack-span"},[e._v(e._s(i))]),e._v(" "),"number"==typeof t?r("input",{staticStyle:{"text-align":"center"},attrs:{type:"number",name:"number-"+i},domProps:{value:t},on:{change:function(r){return e.changePreference(t,i,r)}}}):e._e()])})),1)],1)],1)],1)],1)],1)}),[],!1,null,null,null),cr=zt({components:{f7App:wt,f7View:_t,kcAboutPopup:or,kcPrefsPopup:lr.exports},data:()=>({hasBackdrop:!0,bdEl:".popup-backdrop",f7params:{name:"KeyCreator",theme:"aurora",activeStateElements:".minions, canvas",sortable:{moveElements:!1},data:function(){return{user:{firstName:"Andy",lastName:"Fuchs"}}},routes:{path:"/",component:er}}})},(function(){var e=this.$createElement,t=this._self._c||e;return t("f7-app",{staticClass:"theme-dark color-theme-gray",attrs:{params:this.f7params}},[t("f7-view",{staticClass:"safe-areas color-theme-gray",attrs:{main:"",url:"/"}}),this._v(" "),t("kc-about-popup"),this._v(" "),t("kc-prefs-popup")],1)}),[],!1,null,null,null).exports,hr=r(15),ur=r.n(hr),dr=r(16);r(30);function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){gr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vr={author:"",description:"",icons:[],name:"",tags:[],url:"",version:""},mr={loaded:!1};var br=()=>{};var yr={wrapper:null,loadJSONPromise:e=>yr.loadDataPromise(e,!0),loadDataPromise:(e,t=!1)=>(e=decodeURIComponent(e),new Promise((function(r,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var i;if(404===n.status)console.error("File not found:",e,n),i=!0===t?mr:"";else try{(i=!0===t?JSON.parse(n.responseText):n.responseText).loaded=!0}catch(r){console.error("Error reading",e,r,n),i=!0===t?mr:""}r(i)}},n.onerror=function(){console.log("[Error]::ReadFile.reply was not JSON",e,n),r({})},n.open("GET",e,!0),n.send(null)}))),loadIconPackData(e){var t=["".concat(e.librarypath).concat(e.path,"/manifest.json"),"".concat(e.librarypath).concat(e.path,"/icons.json")];return Promise.all(t.map(yr.loadJSONPromise))},loadDataForIconPack:e=>yr.loadIconPackData(e).then(t=>(Object.entries(t[0]).forEach(t=>{e[t[0].toLowerCase()]="boolean"==typeof t[1]?t[1]:decodeURIComponent(t[1])}),e.icons=t[1],yr.wrapper?new yr.wrapper(e):e)),ensureProperIconPackName:e=>e.includes("sdIconPack")?e:"".concat(e,".sdIconPack"),loadIconPacks(e,t){if(e||t){var r=Array.isArray(e)?null:e.replace(/\/?$/,"/");return(t&&Array.isArray(t)?Promise.resolve(t):Array.isArray(e)?Promise.resolve(e):yr.loadJSONPromise("".concat(e,"icons.json"))).then(e=>{br("loadIconPacks (DATA)",e);var t=[];return e&&e.length&&(t=e.map(e=>{if("string"==typeof e)return fr(fr({},vr),{},{name:e.toLowerCase(),uuid:e,path:this.ensureProperIconPackName(e),librarypath:r});var t=encodeURI(e.fullpath).split("/");return fr(fr(fr({},vr),e),{},{path:this.ensureProperIconPackName(t.pop()),librarypath:"".concat(t.join("/"),"/")})})),t?Promise.all(t.map(yr.loadDataForIconPack)).then(e=>e.filter(e=>!1!==e.loaded)):[]},e=>{console.log(e)})}}},wr=yr;function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sr{static lowerCaseTags(e){return Array.isArray(e)?e.map(e=>e.trim().toLowerCase()):e.split(",").map(e=>e.trim().toLowerCase())}static applyTags(e){return Array.isArray(e)?e.map(e=>e.trim()):e.split(",").map(e=>e.trim())}constructor(e){this.tagsAsString="",this.forceLowerCase=!1,this.isFavorites=e&&"com.elgato.favorites"===e.uuid,e.librarypath&&(this.librarypath=e.librarypath),Object.entries(e).forEach(e=>this[e[0]]=e[1]);this.forceLowerCase;this.icons.forEach(e=>{!e.path.startsWith("".concat(this.path,"/icons/"))&&(e.path="".concat(this.path,"/icons/").concat(e.path)),e.type||(e.type=e.path.split(".").pop()),e.tagsAsString||(e.tagsAsString=Array.isArray(e.tags)?e.tags.join(","):e.tags||"")})}set name(e){this.__name=e}get name(){return this.__name}set path(e){this.__path=decodeURIComponent(e)}get path(){return this.librarypath+this.__path}set tags(e){var t=this.forceLowerCase?Sr.lowerCaseTags:Sr.applyTags;this.__tags=t(e),this.tagsAsString=this.__tags.join(",")}get tags(){return this.__tags}get icons(){return this.isFavorites?this.iconPackLibrary?this.iconPackLibrary.store.state.favorites:[]:this.__icons}set icons(e){this.__icons=e}addIcon(e){this.icons.push(_r(_r({},this.iconTemplate),e))}}class kr{constructor(e){this.dbg=console.log.bind(window.console,"[ESDCIconPackLibrary] ");var t=[];this.on=(e,r)=>{t[e]||(t[e]=[]),t[e].push(r)},this.emit=(e,...r)=>{t[e]&&t[e].forEach(e=>e(...r))},this.store=e.store||null,this.__iconPacks=[],this.expandedCategories=[],this.tags=[],this.stats={__count:0}}get length(){return this.__iconPacks.length}get iconPacks(){return this.__iconPacks}set iconPacks(e){return Array.isArray(e)&&(this.__iconPacks=e.filter(e=>e),this.update()),this.emit("update"),this.__iconPacks}get all(){return this.__iconPacks}get allCategories(){return this.__iconPacks.map(e=>e.uuid)}get allUUIDs(){return this.__iconPacks.map(e=>e.uuid)}set tags(e){this.__tags=Array.isArray(e)?e.map(e=>e.trim().toLowerCase()):e.split(",").map(e=>e.trim().toLowerCase())}get tags(){return this.__tags}updateIconPacks(){this.__iconPacks=[].concat.apply(this.__iconPacks.filter(e=>e.pinned),this.__iconPacks.filter(e=>"true"!==e.pinned))}update(){this.updateIconPacks(),this.__iconPacks.map(e=>{this.stats[e.uuid]=e.icons.length,this.tags=[...new Set([...this.tags,...e.tags||[]])],this.stats.__count+=e.icons.length})}sort(e,t){this.dbg(e,t,this.iconPacks);var r=[...this.iconPacks];r.move(e.from,e.to),//!private addition to prototype!!
this.iconPacks=r}addIconPack(e){Array.isArray(e)?this.iconPacks=[].concat.apply(this.iconPacks,e):(this.iconPacks.push(e),this.update())}addIconPackArray(e,t){this.dbg("----\x3einIconPackArray",e),this.iconPacks=[].concat.apply([],e)}loadIconPack(e,t){var r=e||"../../IconPacks/__Library/",i=t||"com.elgato.blue";wr.wrapper=Sr,wr.loadIconPacks(r,[i]).then(e=>{this.iconPacks=[].concat.apply(this.iconPacks,e)})}loadLibraryArray(e){this.dbg("loadLibraryArray",e),Array.isArray&&(wr.wrapper=Sr,Promise.all([wr.loadIconPacks("./static/",this.store.defaultIconPacks),wr.loadIconPacks(e,null)]).then(e=>{var t=[].concat.apply([],e);if(this.store&&this.store.state&&this.store.state.iconPackSortOrder){var r=this.store.state.iconPackSortOrder;this.iconPacks=t.sort((e,t)=>r.indexOf(e.uuid)-r.indexOf(t.uuid))}else this.iconPacks=t}))}}function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){Er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}at.use(gt);var Pr={showMenu:!1,showEditor:!1,showBottomBar:!0,showStatistics:!1,decompose:!1,fontLoadingDelayinMS:200,iconPackLibraryLoadingDelayinMS:200,svgScalingThreshold:48,initLazyLoad:300,minSDBuildForUninstall:18950};i.a.prototype.$prefs=Pr;var Ar=i.a.observable(dr.Localization);i.a.prototype.$strings=Ar;var Dr=e=>(console.assert(Ar[e],"String is missing",e),Ar[e]||e);i.a.prototype.tr=Dr,Ar.loadLocalization=function(e){e&&kt.a.readFile("".concat(e,".json")).then(e=>{if(e&&e.hasOwnProperty("Localization"))for(var t in e.Localization)Ar[t]=e.Localization[t]})},Storage.prototype.setObject=function(e,t){t&&this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e,t={}){return this.getItem(e)?JSON.parse(this.getItem(e)):t},Array.prototype.move=function(e,t){return this.splice(t,0,this.splice(e,1)[0]),this},i.a.filter("formatvalue",(function(e,t){var r=null;return["scaleX","scaleY","opacity"].includes(t)?r=Number(e).toFixed(2):["fill","stroke","color"].includes(t)?4===(r=e||"#000000").length&&"#"===r.charAt(0)&&(r=r.split("").map(e=>"#"==e?e:"".concat(e).concat(e)).join("")):r=["fontFamily","font"].includes(t)?e||"Helvetica":(["strokeWidth"].includes(t),parseInt(e)),r})),i.a.filter("gettype",(function(e){return e?["fill","stroke","color"].includes(e)?"color":"font"===e||"fontFamily"===e?"select":"number":"text"})),i.a.directive("visible",(function(e,t){e.style.visibility=t.value?"visible":"hidden"}));var Ir=new i.a({el:"#app",render:e=>e(cr),components:{app:cr},data:()=>({dbg:()=>{},aboutOpen:!1,prefsOpen:!1,manifest:{Version:"2.0.1",PluginVersion:"2.0.1.001",Preferences:Pr},altKey:!1,streamdeck:null,currentKey:null,currentComposition:{layers:[{name:""}],mainview:{extraLayer:{name:"",src:"",value:""}}},iconPackLibrary:new kr({store:Et}),hasStorage:"undefined"!=typeof localStorage,selectedStreamDeckKeys:new Set,selectedStreamDeckKeySize:0,systemFonts:[],googleFonts:[],ui:{condensed:!1},hideUninstall:!1}),mounted(){this.loadPreferences(),window.tr=Dr,this.addKeyHandler(),$SD.on("contextDidChange",e=>{this.dbg("********** contextDidChange **********",e),e&&e.hasOwnProperty("context")&&($SD.actionInfo.context=e.context)}),$SD.on("connected",e=>{var t,r,i,n;this.dbg("********** STREAMDECK CONNECTED **********",e),$SD.api.getGlobalSettings(),this.$strings.loadLocalization($SD.applicationInfo.application.language),this.manifest.PluginVersion=$SD.applicationInfo.plugin.version;var a=$SD.actionInfo.context;$SD.actionInfo&&$SD.actionInfo.hasOwnProperty("actionsInfo")?this.currentKey=$SD.actionInfo.actionsInfo.find(e=>e.context===a):this.currentKey={context:$SD.uuid,coordinates:{column:0,row:0}},this.selectedStreamDeckKeys.add(this.currentKey),this.streamdeck=$SD;var s=null===(t=$SD)||void 0===t||null===(r=t.applicationInfo)||void 0===r||null===(i=r.application)||void 0===i||null===(n=i.version)||void 0===n?void 0:n.split(".");if(s&&s.length>3){var o=Number(s.pop()||18e3);this.hideUninstall=o<this.$prefs.minSDBuildForUninstall}ur()($SD.applicationInfo.colors,"connectSocket"),this.loadIconPacksWithDelay(e.applicationInfo.iconpacks,0)}),$SD.on("didReceiveGlobalSettings",e=>{this.dbg("********** STREAMDECK::didReceiveGlobalSettings **********",e.payload.hasOwnProperty("settings"),e.payload),e&&e.payload&&e.payload.hasOwnProperty("settings")&&this.$store.use(e.payload.settings,"didReceiveGlobalSettings")}),$SD.on("iconPacksDidUpdate",e=>{this.dbg("********** STREAMDECK::iconPacksDidUpdate **********",Date.now(),e.iconpacks,this.iconPackLibrary),this.loadIconPacksWithDelay(e.iconpacks,100)}),this.currentComposition.layers.splice(0,this.currentComposition.layers.length)},beforeDestroy:function(){console.log("BEFORE DESTROY..."),this.removeKeyHandler()},computed:{reverseLayers(){return this.currentComposition.layers.slice().reverse()},disableLayerControls(){return!(!this.currentComposition.mainView||!this.currentComposition.mainView.hasExtraLayer)||this.currentComposition.layers&&0===this.currentComposition.layers.length}},methods:{loadIconPacksWithDelay(e,t=0){setTimeout(()=>{this.dbg("loadIconPacksWithDelay",e,t),this.iconPackLibrary.loadLibraryArray(e)},t)},setDebugMode(e){this.dbg=e?console.log.bind(window.console,"[app.js] "):()=>{}},toggleEditor(e){if(e&&e.altKey){var t=this.$f7.popup.get("#kc-about-popup");if(!t)return;t.opened?t.close():t.open()}else console.log("*******toggleEditor",this.streamdeck,$SD,this),this.systemFonts.length||($SD&&$SD.applicationInfo&&$SD.applicationInfo.fonts&&(this.systemFonts=$SD.applicationInfo.fonts.filter(e=>e.length<32)),kt.a.readFile("static/fonts.json").then(e=>{this.googleFonts=e})),this.$prefs.showEditor=!this.$prefs.showEditor,this.currentComposition.mainview&&this.currentComposition.mainview.handleResize()},canUse(e){return this.$prefs.hasOwnProperty("Preferences")&&this.$prefs[e]},loadPreferences(){kt.a.readFile("../../keycreatorPrefs.json").then(e=>{for(var t in e)this.$prefs[t]=e[t]})},loadManifest(){this.manifest.loaded||(this.manifest.loaded=!0,kt.a.readFile("./manifest.json").then(e=>{for(var t in e)"object"==typeof this.manifest[t]?this.manifest[t]=Or(Or({},this.manifest[t]),e[t]):i.a.set(this.manifest,t,e[t])}))},handlePreloader(e,t,r){!0===e?t?(this.$f7.preloader.showIn(t),r&&r.classList.add("dimmed")):this.$f7.preloader.show():t?(this.$f7.preloader.hideIn(t),r&&r.classList.remove("dimmed")):this.$f7.preloader.hide()},addKeyHandler(){window.addEventListener("keydown",this.keyHandler),window.addEventListener("keyup",this.keyHandler)},removeKeyHandler(){window.removeEventListener("keydown",this.keyHandler),window.removeEventListener("keyup",this.keyHandler)},keyHandler(e){"keyup"==e.type?this.altKey=!1:this.altKey=e.altKey},setProp(e,t){},setLayers(e){this.currentComposition.layers=e},setProperty:function(e,t){this[e]=t}}});window.vm=Ir}]);